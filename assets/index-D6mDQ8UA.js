import{k as e,r as l,i as y,cI as j}from"./index-rD5D3wIe.js";import{H as N}from"./HeaderContext-BALBRazG.js";import{u as x}from"./useQuery-DGelT77v.js";import{Q as f}from"./queryKey.const-4yptRpGc.js";import{T as s}from"./index-e-kTAu8U.js";import{T as v}from"./index-CwHt7GoT.js";import{P as F}from"./Pagination-Du9klKsI.js";import{u as g}from"./theme-CwYL3eQV.js";import{T as w}from"./Table-CkCjhjFV.js";import"./commonjsHelpers__-BosuxZz1.js";import"./index-Cnfr_LhE.js";import"./index-DduQbOjH.js";import"./PurePanel-CzAY4fQy.js";import"./useTranslation-CdVDZguR.js";import"./index-R7zUTNyO.js";import"./TextArea-D8GM8mUo.js";import"./index-VaFpLiuL.js";import"./EyeOutlined-D2K23cwb.js";import"./SearchOutlined-DPpNmpde.js";import"./row-D9yJnvb0.js";import"./responsiveObserver-CoLEQsUO.js";import"./index-Phk2fyGs.js";import"./EllipsisOutlined-Cvv2ECO7.js";import"./Overflow-wzPxOxK8.js";import"./index-BUNugdcr.js";import"./PlusOutlined-02efxpe5.js";import"./Dropdown-BA274VvY.js";import"./utils-Dji2qSVF.js";import"./index-WqkPP-4X.js";import"./CheckOutlined-CxcD5R4P.js";import"./LeftOutlined-hwnj7f46.js";import"./index-Cw8dqNCZ.js";import"./DownOutlined-U_yyBD4s.js";import"./addEventListener-Dnrwfmdl.js";import"./index-C97G-hLo.js";import"./index-c2ufQ9kY.js";import"./extendsObject-BTpHJDoQ.js";import"./collapse-C1MjllT7.js";import"./index-DEeuvegC.js";import"./gapSize-U1swVQyS.js";import"./index-Rll6gE4e.js";function b(){return e.jsx(N,{namePage:"Balance history"})}const h=[{title:e.jsx(s,{title:"No."}),align:"center",dataIndex:"index"},{title:e.jsx(s,{title:"Amount"}),align:"center",render:(a,t)=>{var r;return console.log(t),((r=t.amount)==null?void 0:r.toString()[0])==="-"?e.jsxs("div",{className:"text-red-400",children:[t.amount," ",t.currency??""]}):e.jsxs("div",{className:"text-green-400",children:["+",t.amount," ",t.currency??""]})}},{title:e.jsx(s,{title:"Reason"}),align:"center",dataIndex:"reason"},{title:e.jsx(s,{title:"Note"}),align:"center",dataIndex:"note"},{title:e.jsx(s,{title:"Execution time"}),align:"center",dataIndex:"created_at",render:a=>{const t=new Date(a),r=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),m=String(t.getMinutes()).padStart(2,"0"),d=String(t.getSeconds()).padStart(2,"0");return`${r}-${o}-${i} ${n}:${m}:${d}`}}],C={page:1,limit:15},T={dataFilter:C},c=l.createContext({filterState:{},setFilterState:a=>{},columns:h,setColumns:a=>{}});function H({children:a}){const[t,r]=l.useState(h),[o,i]=l.useState(T),n={filterState:o,setFilterState:i,setColumns:r,columns:t};return e.jsx(c.Provider,{value:n,children:a})}const S=async a=>{let t=await y.get(j,{params:a}),r=t.data.data.content.map((o,i)=>({...o,index:(t.data.meta.current_page-1)*Number(t.data.meta.per_page)+i+1}));return t.data.data.content=r,t};function _(){const{filterState:a,setFilterState:t}=l.useContext(c),r=(...m)=>{const[d,u]=m;t(p=>({...p,dataFilter:{...p,page:d,limit:u}}))},{data:o}=x({queryFn:()=>S(a.dataFilter),queryKey:[f.listBalanceHistory,a.dataFilter]}),i=Number(a.dataFilter.limit),n=Number(a.dataFilter.page);return e.jsxs("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:[e.jsx("div",{className:"",children:e.jsx(v,{className:"!text-[16px]",label:`total: ${(o==null?void 0:o.data.meta.total)||0}`})}),e.jsx(F,{showTitle:!1,showQuickJumper:!0,pageSize:isNaN(i)?15:i,current:n,pageSizeOptions:[15,25,50,100,200],total:(o==null?void 0:o.data.meta.total)||0,onChange:r,showSizeChanger:!0})]})}const $={"header-fixed":"_header-fixed_8q965_1"};function P(){const{columns:a,filterState:t}=l.useContext(c);g();const{data:r}=x({queryFn:()=>S(t.dataFilter),queryKey:[f.listBalanceHistory,t.dataFilter]});return e.jsx("div",{className:"w-full h-full overflow-auto",children:e.jsx(w,{columns:a,rowKey:"uuid",className:`${$["header-fixed"]} w-full`,dataSource:(r==null?void 0:r.data.data.content)||[],rowClassName:(o,i)=>i===3?"scroll-row":"",pagination:!1})})}function yt(){const a=g();return e.jsx(H,{children:e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs("div",{className:"rounded-tl-md h-full overflow-y-hidden overflow-x-hidden flex flex-col relative pr-4",children:[e.jsx(b,{}),e.jsx("div",{id:"table-hidemium",className:"h-[calc(100vh-144px)] mr-5 rounded-lg border border-solid shadow-sm overflow-auto",style:{backgroundColor:a.backgroundLight,borderColor:a.borderNormal},children:e.jsx(P,{})}),e.jsx(_,{})]})})})}export{yt as default};
