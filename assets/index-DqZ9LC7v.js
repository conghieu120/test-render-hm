import{r as c,a1 as A,H as _,s as q,ao as T,k as e,q as E,ap as L,aq as S,ar as l,as as I,at as U,a8 as D,a9 as K,au as R,av as V,aw as $,ax as Q}from"./index-rD5D3wIe.js";import{I as z}from"./index.esm-DxM5fcVQ.js";import{u as G}from"./styled-components.browser.esm-Cc1hOk3M.js";import{B as H}from"./index-Cnfr_LhE.js";import{u as O}from"./useTranslation-CdVDZguR.js";import{R as J,C as P}from"./row-D9yJnvb0.js";import{S as M}from"./index-DeZc1mMx.js";import{T as W}from"./index-WqkPP-4X.js";import{u as w}from"./useQuery-DGelT77v.js";import{g as X}from"./userSettingService-Bg9YvoAZ.js";import{Q as v}from"./queryKey.const-4yptRpGc.js";import{g as Y}from"./fontService-BFHGJrPs.js";import{i as Z}from"./proxyService-BvUDuHG4.js";import{g as ee}from"./auth-D6OQT4bj.js";import"./commonjsHelpers__-BosuxZz1.js";import"./responsiveObserver-CoLEQsUO.js";import"./index-VaFpLiuL.js";import"./index-BUNugdcr.js";import"./TextArea-D8GM8mUo.js";import"./CheckOutlined-CxcD5R4P.js";import"./utils-Dji2qSVF.js";const te="_item_1g9oz_1",ae="_icon_animation_1g9oz_15",oe={item:te,icon_animation:ae},se=G.div`
display: flex;
align-items: center;
button.ant-switch {
  border-radius: 20px;
  height: 38px;
  div.ant-switch-handle {
    top: 10px;
    &::before {
      background-color: #183BB0;
    }
  }
  span.ant-switch-inner {
    height: auto;
  }
}
`;function ie(C){var F;const{t:a}=O(),{items:x,toggleNewbie:k,isNewbie:u,modalName:o,active:r,setActive:m,modalData:d}=C;c.useState(!1);const{Title:t,Text:f}=W,[s,n]=c.useState(!!A("is_Local")),p=_();c.useEffect(()=>{m(u?"type":"base")},[u]),c.useEffect(()=>{q("is_Local",s),p(T(s))},[s]);const g=!d&&s||d&&d.includes("local");return e.jsxs(J,{children:[e.jsxs(P,{span:6,style:{color:"#fff",background:g?" linear-gradient(180deg, #303843 0%, #001839 100%)":"linear-gradient(180deg, #0F81CD 0%, #1459BD 51%, #1839AF 100%)"},children:[e.jsxs("div",{style:{padding:"20px 24px"},children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(t,{style:{color:"#fff"},level:3,children:`${a(o==="Create Profile"?"Create":"Edit")} ${a("Profile")}`}),e.jsx(se,{children:o==="Create Profile"&&e.jsx(M,{checkedChildren:e.jsx(f,{className:"text-[#4F4F4F] font-medium !ml-0",children:a("Local")}),unCheckedChildren:e.jsx(f,{className:"text-[#183BB0] font-medium !ml-0",children:a("Cloud")}),checked:s,onChange:i=>n(i),className:"!bg-white"})})]}),e.jsx(f,{style:{color:"#fff",opacity:.6},children:a("Incorporate your e-commerce, social media and others into Hidemium")})]}),e.jsx("div",{className:"flex justify-between",style:{padding:"0px 24px 20px"},children:o==="Create Profile"&&e.jsx(e.Fragment,{children:e.jsx(H,{type:"warning",className:"flex items-center justify-center mx-auto group !text-[#183153] h-[40px] px-4 !font-medium",active:!0,onClick:k,icon:e.jsx("div",{className:"flex items-center group-hover:rotate-[520deg] transition-all duration-700 ease-in-out delay-100",children:e.jsx(z,{})}),label:a(u?"Go to expert":"Go to newbie")})})}),x.map((i,b)=>e.jsx("div",{onClick:()=>m(i.key),className:oe.item,style:i.key===r?{backgroundColor:"#FFFFFF",color:"#417AFF"}:{},children:`${b+1}. ${i.label}`},b))]}),e.jsx(P,{span:18,children:((F=x.find(i=>i.key===r))==null?void 0:F.children)||null})]})}function Be(C){var N,B;const{open:a,items:x,isNewbie:k,setIsNewbie:u,modalName:o,uuid:r,active:m,setActive:d}=C,t=_(),{message:f}=E.useApp(),{data:s}=w({queryFn:()=>X(),queryKey:[v.userSetting]}),{data:n}=w({queryFn:()=>Y(),queryKey:[v.getAllFonts]}),{data:p}=w({queryFn:()=>Z(),queryKey:[v.checkIpLocal]}),{data:g}=w({queryKey:[v.userDetail],queryFn:ee}),F=((B=(N=g==null?void 0:g.data)==null?void 0:N.content)==null?void 0:B.uuid)||"",i=async y=>{const h={isFirtTime:!0};t(l({key:"autoFillUserAgent",value:I.autoFillUserAgent})),t(U({argsFingerPrint:h,fonts:y,ipLocal:p,user_uuid:F}));const j=await D().catch(()=>null);j!=null&&j.children.length?t(l({key:"enableBookmark",value:!0})):t(l({key:"enableBookmark",value:!1})),t(l({key:"bookmark",value:K(j)}))},b=async()=>{if(r&&typeof r!="object"){const y=await R(r).catch(h=>(f.error(h),null));if(y){t(V(y.fingerprint));const h=await $(y);t(Q(h))}}};return c.useLayoutEffect(()=>{t(L(!0)),t(S(!0)),!(!a||!s||!n||!p)&&(o==="Create Profile"&&s&&a&&n?i(n):o==="Edit Profile"&&b(),t(L(!1)),t(S(!1)))},[a,s,n,p]),c.useEffect(()=>{t(o==="Create Profile"?l({key:"isUpdate",value:!1}):l({key:"isUpdate",value:!0}))},[o]),e.jsx(ie,{items:x,toggleNewbie:()=>u(!k),isNewbie:k,modalName:o,modalData:r,active:m,setActive:d})}export{Be as default};
