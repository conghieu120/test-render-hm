import{r as y,A as re,h as ie,H as _,aE as $,ar as A,k as e,gq as Y,gr as B,ab as L,N,gs as ue,gt as X,gu as O,gv as z,q as H,j as Q,a2 as pe,l as xe,gw as he,gx as je,gy as fe,ap as J}from"./index-CJvg638n.js";import{b,S as K,d as le}from"./style-DB2luWnx.js";import{S as T}from"./index-DlIx43FQ.js";import{u as k}from"./useTranslation-DN-CYzVf.js";import{R as v,C as p}from"./row-C7cWNtLw.js";import{S as V}from"./index-Wc0f9ZXJ.js";import{F as I}from"./index-jmQoDNPY.js";import{C as Z}from"./index-DwCW4jpE.js";import{S as oe}from"./index-CWlqhW57.js";import{T as M}from"./index-D8gngLx0.js";import{H as ge}from"./index-C_VhfCxN.js";import{F as d}from"./index-YCIRg4HO.js";import{T as be}from"./Table-Bf5fO8hA.js";import{I as w}from"./index-4M1x7pR3.js";import{B as D}from"./index-BAIjI0rE.js";import{c as ye}from"./modalCreateProfile-CApV3Bby.js";import{u as W}from"./useMutation-DtMNI5dJ.js";import{u as Ce}from"./useQuery-DJ-tefVM.js";import{Q as q}from"./queryKey.const-4yptRpGc.js";import{D as ve}from"./DeleteConfirmModal-CCC5Ho8A.js";import{M as G}from"./index-Cn7Yo5Hv.js";import{L as ee}from"./index-IXrIs-M6.js";import{U as we}from"./index-YXUFDw_N.js";import{C as Se}from"./index-CSeHG7AI.js";import{S as Ne}from"./index-Bsl0EBBv.js";import{P as ke}from"./PlusOutlined-B9MlVXp_.js";import{T as Fe}from"./index-BDCr05r-.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./styled-components.browser.esm-BGP0i3rt.js";import"./responsiveObserver-BQm3ddGk.js";import"./index-BtoCM6cC.js";import"./index-DC1DAWbZ.js";import"./Overflow-eyj8oHJy.js";import"./PurePanel-BiIzqeBG.js";import"./TextArea-DBRPcsh0.js";import"./CheckOutlined-CxiWyKpb.js";import"./DownOutlined-BgG6dx4I.js";import"./SearchOutlined-Bmw6m_pM.js";import"./gapSize-U1swVQyS.js";import"./index-Db4idn_r.js";import"./index.esm-BKVPp4gk.js";import"./collapse-C1MjllT7.js";import"./addEventListener-0hYE1V1V.js";import"./LeftOutlined-_e4uGCQm.js";import"./Dropdown-DXC0sGt_.js";import"./extendsObject-EOfQw3bh.js";import"./EllipsisOutlined-DODEOrOr.js";import"./index-DRCSt6Z6.js";import"./Pagination-BX02S7D7.js";import"./EyeOutlined-B-Yk7nA6.js";import"./utils-Dji2qSVF.js";import"./index-TvTBJWU5.js";import"./progress-BUBdB7Z0.js";import"./Skeleton-BvlGcf7B.js";import"./index-DGGwne6Z.js";var Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const Re=Ee;var Ie=function(s,i){return y.createElement(re,ie({},s,{ref:i,icon:Re}))},Me=y.forwardRef(Ie);const Pe=Me;var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Te=Ae;var Ve=function(s,i){return y.createElement(re,ie({},s,{ref:i,icon:Te}))},Ue=y.forwardRef(Ve);const De=Ue,ae="sslVersionMax",ce="sslVersionMin",Be=(t,s,i,r)=>t===ce&&Number(s)>Number(i)||t===ae&&Number(s)<Number(r);function Le(){const{Text:t}=M,{t:s}=k(),i=_(),r=$(x=>x.newProfile),{sslFingerprintSettings:l}=r,{sslVersionMax:m,sslVersionMin:h,cipherSuites:c}=l,j=y.useCallback((x,C)=>{i(A({key:x,value:C}))},[]),n=(x,C)=>{const a={...l,[x]:C};j("sslFingerprintSettings",a)},u=(x,C)=>{if(Be(C,x,m,h)){const a={...l,sslVersionMin:+x,sslVersionMax:+x};j("sslFingerprintSettings",a)}else n(C,+x)},o=(x,C,a=!1)=>{const g=x.target.checked;if(a)n("cipherSuites",g?B:[]);else{const f=new Set(c);g?f.add(C):f.delete(C),n("cipherSuites",Array.from(f))}},F=()=>n("cipherSuites",B),R=()=>n("cipherSuites",ue);return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx(T,{label:s("Enable custom SSL Fingerprinting"),bold:!0,checked:l.isEnabled,onClick:x=>n("isEnabled",x)})}),e.jsx(b,{children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:4,children:e.jsxs(t,{strong:!0,children:[s("SSL Version Min"),":"]})}),e.jsx(p,{span:20,children:e.jsx(V,{options:Y,style:{width:"100%"},value:l.sslVersionMin,onChange:x=>u(x,ce)})})]})}),e.jsx(b,{children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:4,children:e.jsxs(t,{strong:!0,children:[s("SSL Version Max"),":"]})}),e.jsx(p,{span:20,children:e.jsx(V,{options:Y,value:l.sslVersionMax,style:{width:"100%"},onChange:x=>u(x,ae)})})]})}),e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(p,{span:4,children:e.jsxs(t,{strong:!0,children:[s("Cipher Suites"),":"]})}),e.jsx(p,{span:20,children:e.jsx(t,{type:"danger",children:s("Warning: incorrect SSL settings can cause abnormal access to the HTTPS website")})})]})}),e.jsx(b,{children:e.jsx("div",{style:{border:"1px solid #D9D9D9",borderRadius:"3px",padding:"20px"},children:B.map(x=>e.jsx(I,{children:e.jsx(Z,{style:{paddingBottom:"10px"},checked:L.includes(c,x),onClick:C=>o(C,x),children:x})},x))})}),e.jsx(b,{children:e.jsxs(I,{align:"center",justify:"space-between",children:[e.jsxs(oe,{children:[e.jsx(Z,{checked:B.length===(c==null?void 0:c.length),onClick:x=>o(x,null,!0),children:s("Select all")}),e.jsx(N,{type:"text",onClick:R,children:s("Chrome SSL")})]}),e.jsx(N,{className:"bg-[#2263B3] text-[#fff] rounded-[3.5px]",onClick:F,type:"primary",children:s("Restore Default")})]})})]})}function Oe(){var C;const[t]=d.useForm(),{t:s}=k(),i=_(),{plugins:r}=$(a=>a.newProfile),{Text:l}=M,m=d.useWatch("plugins",t),h=(a,g)=>{let f={...r,[a]:g};i(A({key:"plugins",value:f}))},c=[{title:s("Name"),dataIndex:"name"},{title:s("Describe"),dataIndex:"describe"},{title:s("File name"),dataIndex:"fileName"},{title:s("Mime type"),dataIndex:"mimeType"},{title:s("Mime describe"),dataIndex:"mimeDescription"},{title:s("Mime extension"),dataIndex:"mimeExtension"}],j={selectedRowKeys:(C=m||[])==null?void 0:C.filter(a=>a.isChecked).map(a=>a.id),onChange:(a,g)=>{const f=L.cloneDeep(m);f==null||f.forEach(S=>{S.isChecked=a.includes(S.id)}),t.setFieldValue("plugins",f),i(A({key:"plugins",value:{...r,value:f}}))},getCheckboxProps:a=>({disabled:a.isDisabled})},n=(a={})=>{const g={...a};return Object.keys(g).forEach(f=>{g[f]=a[f].trim()}),g},u=()=>{h("value",X),t.setFieldValue("plugins",X)},o=async()=>{const a=await O("word","sample"),g={key:a,id:a,name:a,describe:await O("word","sample"),fileName:await O("word","sample"),mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!1};g&&R(g,!0)},F=async()=>{const{name:a,mimeType:g,describe:f,mimeDescription:S,fileName:U,mimeExtension:E}=t.getFieldsValue(),me={name:a,mimeType:g,describe:f,mimeDescription:S,fileName:U,mimeExtension:E};if(!await t.validateFields().catch(()=>null))return;const P=n(me);P.name&&(P.id=P.name,P.key=P.name,R(P,!0),t.resetFields(["name","describe","fileName"]))},R=(a,g)=>{const f=[],S=new Map;m.forEach(E=>S.set(E.name,E)),S.set(a.name,a),S==null||S.forEach(E=>f.push(E)),t.setFieldValue("pluginIsEnable",!0);const U=L.cloneDeep(f);g&&U.forEach(E=>{E.isDisabled=!(g&&!E.isDefault),E.isChecked=!0}),t.setFieldValue("plugins",U),i(A({key:"plugins",value:{...r,value:U,isEnabled:!0}}))},x=a=>{const g=L.cloneDeep(m);for(const S of g)S.isDisabled=!(a&&!S.isDefault);t.setFieldValue("plugins",g);const f={...r,isEnabled:a,value:g};i(A({key:"plugins",value:f}))};return y.useEffect(()=>{const a={plugins:r.value,pluginIsEnable:r.isEnabled};t.setFieldsValue(a)},[r]),e.jsxs(d,{form:t,initialValues:{mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf"},children:[e.jsx(b,{children:e.jsx(l,{type:"danger",children:s("Note that plug-in camouflage can affect real plug-in functionality")})}),e.jsx(b,{children:e.jsx(d.Item,{name:"pluginIsEnable",valuePropName:"checked",children:e.jsx(T,{label:e.jsx(ge,{hint:s("By default, potentially vulnerable plugins (AdobePDF, Widevine, and Native Client) embedded with Chrome will be masked. Websites will see them as enabled but won't be able to actually utilize. Enabling this option will make them usable while exposing your browser to the potential risk of being fingerprinted."),children:e.jsx("div",{children:s("Enable custom plug-in information")})}),bold:!0,onChange:a=>{x(a)}})})}),e.jsx(b,{children:e.jsx(d.Item,{name:"plugins",children:e.jsx(be,{rowSelection:j,columns:c,dataSource:m,pagination:!1,scroll:{y:240}})})}),e.jsx(K,{}),e.jsxs(b,{children:[e.jsx("div",{style:{marginBottom:20},children:e.jsxs(v,{gutter:16,children:[e.jsx(p,{span:12,children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:8,children:e.jsxs(l,{strong:!0,children:[s("Plugin name"),":"]})}),e.jsx(p,{span:16,children:e.jsx(d.Item,{name:"name",rules:[{required:!0,message:""}],children:e.jsx(w,{})})})]})}),e.jsx(p,{span:12,children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:8,children:e.jsxs(l,{strong:!0,children:[s("Mime types"),":"]})}),e.jsx(p,{span:16,children:e.jsx(d.Item,{name:"mimeType",children:e.jsx(w,{disabled:!0})})})]})})]})}),e.jsx("div",{style:{marginBottom:20},children:e.jsxs(v,{gutter:16,children:[e.jsx(p,{span:12,children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:8,children:e.jsxs(l,{strong:!0,children:[s("Plugin Description"),":"]})}),e.jsx(p,{span:16,children:e.jsx(d.Item,{name:"describe",rules:[{required:!0,message:""}],children:e.jsx(w,{})})})]})}),e.jsx(p,{span:12,children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:8,children:e.jsxs(l,{strong:!0,children:[s("Mine Description"),":"]})}),e.jsx(p,{span:16,children:e.jsx(d.Item,{name:"mimeDescription",children:e.jsx(w,{disabled:!0})})})]})})]})}),e.jsx("div",{style:{marginBottom:20},children:e.jsxs(v,{gutter:16,children:[e.jsx(p,{span:12,children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:8,children:e.jsxs(l,{strong:!0,children:[s("File name"),":"]})}),e.jsx(p,{span:16,children:e.jsx(d.Item,{name:"fileName",rules:[{required:!0,message:""}],children:e.jsx(w,{})})})]})}),e.jsx(p,{span:12,children:e.jsxs(v,{align:"middle",children:[e.jsx(p,{span:8,children:e.jsxs(l,{strong:!0,children:[s("Mime extension"),":"]})}),e.jsx(p,{span:16,children:e.jsx(d.Item,{name:"mimeExtension",children:e.jsx(w,{disabled:!0})})})]})})]})})]}),e.jsx(b,{children:e.jsxs(I,{gap:8,justify:"end",children:[e.jsx(N,{className:"bg-[#2263B3] text-[#fff] rounded-[3.5px]",type:"primary",onClick:o,children:s("Add Random Plugin")}),e.jsx(N,{className:"bg-[#2263B3] text-[#fff] rounded-[3.5px]",type:"primary",onClick:u,children:s("Restore default")}),e.jsx(N,{className:"bg-[#2263B3] text-[#fff] rounded-[3.5px]",type:"primary",onClick:F,children:s("Add plugin")})]})})]})}const qe=async()=>{const{data:t}=await z.get("/v4/file");return t},de=async({file:t,file_content:s})=>{const i=new FormData;t?i.append("file_script",t):s&&i.append("file_content",s);const{data:r}=await z.post("/v4/file/upload",i);return r},_e=async t=>{const{data:s}=await z.post(`/v4/file/${t}/delete`);return s};function $e({setUrl:t}){const[s]=k(),{message:i}=H.useApp(),[r,l]=y.useState(!1),m=Q(),{data:h,isFetching:c}=Ce({queryFn:qe,queryKey:[q.listUrlConfigRedirect]}),{isLoading:j,mutate:n}=W({mutationFn:o=>_e(o),onSuccess:o=>{i.success(o.title||"Delete file successfully!"),m.invalidateQueries(q.listUrlConfigRedirect)},onError:o=>{var F,R;i.error(((R=(F=o==null?void 0:o.response)==null?void 0:F.data)==null?void 0:R.title)||"Delete file error!")}}),u=async o=>{const{isConfirmed:F}=await ve();F&&n(o)};return e.jsxs(e.Fragment,{children:[e.jsx(N,{onClick:()=>l(!0),children:"Select URL"}),e.jsx(G,{open:r,onCancel:()=>l(!1),centered:!0,footer:null,width:800,title:s("Choose my URL"),zIndex:999,children:e.jsx("div",{className:"max-h-[50vh] overflow-auto",children:e.jsx(ee,{loading:c||j,size:"small",bordered:!0,dataSource:(h==null?void 0:h.content)||[],renderItem:o=>e.jsx(ee.Item,{children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("span",{children:o.url}),e.jsxs(oe,{children:[e.jsx(N,{onClick:()=>{t(o.url),l(!1)},ghost:!0,type:"primary",children:s("Choose")}),e.jsx(N,{danger:!0,onClick:()=>u(o.id),children:s("Delete")})]})]})})})})})]})}const He=y.memo($e);function ze({setUrl:t}){const[s]=k(),[i]=d.useForm(),[r,l]=y.useState(!1),m=Q(),{message:h}=H.useApp(),{isLoading:c,mutate:j}=W({mutationFn:({file_content:n})=>(console.log({file_content:n}),de({file_content:n})),onSuccess:n=>{var u;t((u=n==null?void 0:n.content)==null?void 0:u.url),m.invalidateQueries(q.listUrlConfigRedirect),h.success(n.title||"Upload content successfully!")},onError:n=>{var u,o;h.error(((o=(u=n.response)==null?void 0:u.data)==null?void 0:o.title)||"Upload content error!")}});return y.useEffect(()=>{i.resetFields()},[r]),e.jsxs(e.Fragment,{children:[e.jsx(N,{onClick:()=>l(!0),loading:c,children:"Upload Content"}),e.jsx(G,{open:r,onCancel:()=>l(!1),centered:!0,width:800,title:s("Upload my content"),onOk:i.submit,children:e.jsx(d,{form:i,onFinish:n=>{j(n),l(!1)},children:e.jsx(d.Item,{name:"file_content",rules:[{message:"Content is required!",required:!0}],children:e.jsx(w.TextArea,{disabled:c,rows:20})})})})]})}const Qe=y.memo(ze);function Ke({setUrl:t}){const{message:s}=H.useApp(),[i]=k(),r=Q(),{isLoading:l,mutate:m}=W({mutationFn:c=>de({file:c}),onSuccess:c=>{var j;t((j=c==null?void 0:c.content)==null?void 0:j.url),r.invalidateQueries(q.listUrlConfigRedirect),s.success(c.title||"Upload file successfully!")},onError:c=>{var j,n;s.error(((n=(j=c.response)==null?void 0:j.data)==null?void 0:n.title)||"Upload file error!")}}),h={beforeUpload:c=>(m(c),!1),accept:".js, .json, .txt",showUploadList:!1};return e.jsx(e.Fragment,{children:e.jsx(we,{...h,children:e.jsx(N,{disabled:l,icon:e.jsx(De,{}),loading:l,children:i("Select File")})})})}const We=y.memo(Ke),se=[{label:"=",value:"!!"},{label:"Contains",value:"!"}],ne={conditions:[{required:!0,message:"Conditions value is required"}],content:[{required:!0,message:"Content value is required"}]};function Ge({index:t,restField:s,remove:i,name:r,form:l}){const[m]=k(),{Text:h}=M,c=y.useRef({add:null,subFields:[]}),j=n=>{l.setFieldValue(["configRedirectUrl",r,"to"],n)};return e.jsxs(Se,{title:e.jsxs(I,{children:[e.jsx(h,{className:"mr-5",children:`Item ${t+1}`}),e.jsx(d.Item,{...s,name:[r,"status"],noStyle:!0,valuePropName:"checked",children:e.jsx(Ne,{})})]}),extra:e.jsx(D,{typebutton:"error",onClick:()=>{i(r)},icon:e.jsx(ye,{}),label:m("Delete")}),children:[e.jsx(d.Item,{...s,name:[r,"name"],label:e.jsx(h,{strong:!0,children:m("Name")}),children:e.jsx(w,{placeholder:"Name"})}),e.jsx("div",{className:"mb-[24px]",children:e.jsxs(v,{children:[e.jsx(p,{span:6,className:"text-end",children:e.jsxs("div",{className:"inline-flex h-full items-center",children:[e.jsx(h,{strong:!0,children:m("From url")}),e.jsx("span",{className:"ms-[2px] me-2",children:":"})]})}),e.jsx(p,{span:18,children:e.jsxs("div",{className:"flex",children:[e.jsx(d.Item,{noStyle:!0,name:[r,"fromConditions"],rules:ne.conditions,children:e.jsx(V,{className:"min-w-[100px] me-[22px]",options:se,placeholder:"Choose"})}),e.jsx(d.Item,{...s,name:[r,"from"],noStyle:!0,children:e.jsx(w,{placeholder:"From url"})}),e.jsx(Pe,{className:"ms-[22px] me-1 text-[18px] text-[var(--color-yellow-200)]",onClick:()=>{c.current.add&&c.current.subFields.length<5&&c.current.add({operator:"!"})}})]})})]})}),e.jsxs(v,{children:[e.jsx(p,{span:6}),e.jsx(p,{span:18,children:e.jsx(d.Item,{noStyle:!0,children:e.jsx(d.List,{name:[r,"query"],children:(n,u)=>(c.current={subFields:n,...u},e.jsx(e.Fragment,{children:n.map(o=>e.jsxs(I,{className:"flex align-center mb-[24px]",children:[e.jsx(d.Item,{noStyle:!0,name:[o.name,"operator"],rules:ne.conditions,children:e.jsx(V,{className:"me-[22px] min-w-[100px]",options:se,placeholder:"Choose"})}),e.jsx(d.Item,{noStyle:!0,name:[o.name,"content"],children:e.jsx(w,{placeholder:"From url"})}),e.jsx(pe,{className:"ms-[22px] me-1 text-[18px] text-[var(--color-red-400)]",onClick:()=>{u.remove(o.name)}})]},o.key))}))})})})]}),e.jsx(d.Item,{...s,name:[r,"to"],label:e.jsx(h,{strong:!0,children:m("Redirect to url")}),className:"mb-2",children:e.jsx(w,{placeholder:"Redirect to url"})}),e.jsx("div",{className:"text-end",children:e.jsxs("div",{className:"flex justify-between w-[364px] ml-auto mr-0",children:[e.jsx(He,{setUrl:j}),e.jsx(Qe,{setUrl:j}),e.jsx(We,{setUrl:j})]})})]})}function Ye({isOpen:t,onClose:s,valueChange:i}){const[r]=k(),{Title:l}=M,m=$(n=>n.newProfile),[h]=d.useForm(),{message:c}=H.useApp(),j=async()=>{const n=await h.validateFields().catch(u=>{c.error("Conditions value is required!!!")});n&&(i("configRedirectUrl",n.configRedirectUrl),s())};return e.jsx(xe,{theme:{components:{Switch:{colorPrimary:"var(--color-blue-500)",colorPrimaryHover:"var(--color-blue-500)"}}},children:e.jsx(G,{open:t,onCancel:s,centered:!0,maskClosable:!1,onOk:j,zIndex:999,footer:()=>e.jsx(N,{className:"hover:!bg-[var(--color-blue-600)] text-[#fff]",onClick:j,style:{boxShadow:"0px 0.275rem 0px var(--color-blue-600)",background:"var(--color-blue-500)",border:"1px solid var(--color-blue-600)",color:"#fff",fontWeight:"500"},children:r("Submit")}),title:e.jsx(l,{level:3,className:"mt-0",children:r("Config redirect url")}),width:600,children:e.jsx(d,{name:"dynamic_form_nest_item",style:{maxHeight:410,overflowY:"auto",paddingRight:8,paddingLeft:8},form:h,labelCol:{span:6},wrapperCol:{span:18},initialValues:{configRedirectUrl:m.configRedirectUrl},children:e.jsx(d.List,{name:"configRedirectUrl",children:(n,{add:u,remove:o})=>e.jsxs("div",{style:{display:"flex",rowGap:16,flexDirection:"column"},children:[n.map(({key:F,name:R,...x},C)=>e.jsx(Ge,{index:C,remove:o,name:R,form:h,...x},F)),e.jsx(d.Item,{wrapperCol:{span:24},children:e.jsx(D,{typebutton:"primary",solid:!0,onClick:()=>u({fromConditions:"!"}),icon:e.jsx(ke,{}),label:r("Add config"),classStyle:"justify-center"})})]})})})})})}function Xe({valueChange:t,profileData:s}){const[i]=k(),{Title:r,Paragraph:l}=M,[m,h]=y.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(K,{}),e.jsx(r,{level:3,children:i("Config redirect URL")}),e.jsxs(I,{justify:"space-between",className:"pb-3",children:[e.jsx(l,{children:i(`You have total ${s.configRedirectUrl.length||0} configs`)}),e.jsx(D,{typebutton:"primary",onClick:()=>h(!0),label:i("Config"),solid:!0})]}),m&&e.jsx(Ye,{isOpen:m,valueChange:t,onClose:()=>h(!1)})]})}function Je({valueChange:t,profileData:s}){const[i]=k(),{Title:r,Text:l}=M;return e.jsxs(e.Fragment,{children:[e.jsx(K,{}),e.jsx(r,{level:3,children:i("Experiments")}),e.jsxs(I,{justify:"space-between",align:"center",style:{marginBottom:20},children:[e.jsxs(I,{vertical:!0,children:[e.jsx(l,{children:i("Experimental QUIC protocol")}),e.jsx(l,{children:i("Enable experimental QUIC")})]}),e.jsx(le,{children:e.jsx(V,{style:{width:200},options:he.map(m=>({...m,label:i(m.label)})),onChange:m=>t("experiment",m),value:s.experiment})})]})]})}const te=20,Ze=new RegExp("^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$");function es({valueChange:t,profileData:s}){const{Text:i}=M,{t:r}=k(),[l]=d.useForm(),m=_(),h=(n,u)=>{const o={...s.computerName,[n]:u};t("computerName",o),l.setFieldValue("computerName",o.value)},c=(n,u)=>{const o={...s.macAddress,[n]:u};t("macAddress",o),l.setFieldValue("macAddress",o.value)},j=async n=>{let u="";switch(n){case"macAddress":u=fe(),c("value",u);break;case"computerName":u="DESKTOP-"+await O("person","firstName"),h("value",u.toString().toUpperCase());break}};return y.useEffect(()=>{async function n(){const u=await l.validateFields().catch(o=>{console.log(o),m(J(!0))});u&&(console.log({formData:u}),m(J(!1)))}n()},[s.computerName.value,s.macAddress.value]),y.useEffect(()=>{s.customLaunchBrowserParameters&&l.setFieldValue("customLaunchBrowserParameters",s.customLaunchBrowserParameters)},[s.customLaunchBrowserParameters]),e.jsxs(d,{form:l,initialValues:{computerName:s.computerName.value,macAddress:s.macAddress.value},children:[e.jsx(b,{children:e.jsx(T,{bold:!0,label:r("Computer name"),checked:s.computerName.isEnabled,onChange:n=>h("isEnabled",n)})}),e.jsx(b,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d.Item,{style:{width:"100%"},name:"computerName",rules:[{max:te,message:`Computer name must be less than ${te} characters`}],children:e.jsx(w,{disabled:!s.computerName.isEnabled,onChange:n=>h("value",n.target.value.trim())})}),e.jsx(D,{typebutton:"primary",className:"bg-[#2263B3] text-[#fff] rounded-[3.5px]",isDisabled:!s.macAddress.isEnabled,onClick:()=>j("computerName"),solid:!0,label:r("Random")})]})}),e.jsx(b,{children:e.jsx(T,{bold:!0,label:r("MAC address"),checked:s.macAddress.isEnabled,onChange:n=>c("isEnabled",n)})}),e.jsx(b,{children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(d.Item,{style:{width:"100%"},name:"macAddress",rules:[{pattern:Ze,message:"Invalid Mac address!"}],children:e.jsx(w,{disabled:!s.macAddress.isEnabled,onChange:n=>c("value",n.target.value.trim())})}),e.jsx(D,{typebutton:"primary",className:"bg-[#2263B3] text-[#fff] rounded-[3.5px]",isDisabled:!s.macAddress.isEnabled,onClick:()=>j("macAddress"),solid:!0,label:r("Random")})]})}),e.jsxs(b,{children:[e.jsx("div",{style:{paddingBottom:".5rem"},children:e.jsx(i,{strong:!0,children:r("Effective Type:")})}),e.jsx(le,{children:e.jsx(V,{style:{width:"100%"},options:je.map(n=>({...n,label:r(n.label)})),value:s.effectiveType,onChange:n=>t("effectiveType",n)})})]}),e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(p,{span:6,children:e.jsx(T,{bold:!0,label:r("Bluetooth"),checked:s.hidemiumBluetooth,onChange:n=>t("hidemiumBluetooth",n)})}),e.jsx(p,{span:6,children:e.jsx(T,{bold:!0,label:r("Do not track"),checked:s.doNotTrack,onChange:n=>t("doNotTrack",n)})})]})}),e.jsxs(b,{children:[e.jsx("div",{style:{paddingBottom:".5rem"},children:e.jsx(i,{strong:!0,children:r("Custom launch browser parameters")})}),e.jsx(d.Item,{name:"customLaunchBrowserParameters",children:e.jsx(w,{onChange:n=>t("customLaunchBrowserParameters",n.target.value.trim())})})]})]})}function ss(){const t=_(),s=$(r=>r.newProfile),i=y.useCallback((r,l)=>{t(A({key:r,value:l}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx(es,{valueChange:i,profileData:s}),e.jsx(Je,{valueChange:i,profileData:s}),e.jsx(Xe,{valueChange:i,profileData:s})]})}function rn({active:t}){const{t:s}=k(),i=[{key:"general",label:s("General"),children:e.jsx(ss,{})},{key:"sslSettings",label:s("SSL Settings"),children:e.jsx(Le,{})},{key:"pluginFingerprint",label:s("Plugin Fingerprint"),children:e.jsx(Oe,{})}];return e.jsx("div",{style:{padding:"20px 24px",marginTop:"16px"},children:e.jsx(Fe,{defaultActiveKey:"general",items:i})})}export{rn as default};
