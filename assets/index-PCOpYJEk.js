import{k as e,r as l,i as y,cI as j}from"./index-CJvg638n.js";import{H as N}from"./HeaderContext-CcFwS_UE.js";import{u as x}from"./useQuery-DJ-tefVM.js";import{Q as f}from"./queryKey.const-4yptRpGc.js";import{T as s}from"./index-BXlHKc3j.js";import{T as v}from"./index-w6IqrXlL.js";import{P as F}from"./Pagination-BX02S7D7.js";import{u as g}from"./theme-D5S-1fEx.js";import{T as w}from"./Table-Bf5fO8hA.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./index-BAIjI0rE.js";import"./index-Cn7Yo5Hv.js";import"./PurePanel-BiIzqeBG.js";import"./useTranslation-DN-CYzVf.js";import"./index-4M1x7pR3.js";import"./TextArea-DBRPcsh0.js";import"./index-DC1DAWbZ.js";import"./EyeOutlined-B-Yk7nA6.js";import"./SearchOutlined-Bmw6m_pM.js";import"./row-C7cWNtLw.js";import"./responsiveObserver-BQm3ddGk.js";import"./index-DGGwne6Z.js";import"./EllipsisOutlined-DODEOrOr.js";import"./Overflow-eyj8oHJy.js";import"./index-BtoCM6cC.js";import"./PlusOutlined-B9MlVXp_.js";import"./Dropdown-DXC0sGt_.js";import"./utils-Dji2qSVF.js";import"./index-D8gngLx0.js";import"./CheckOutlined-CxiWyKpb.js";import"./LeftOutlined-_e4uGCQm.js";import"./index-Wc0f9ZXJ.js";import"./DownOutlined-BgG6dx4I.js";import"./addEventListener-0hYE1V1V.js";import"./index-DwCW4jpE.js";import"./index-Db4idn_r.js";import"./extendsObject-EOfQw3bh.js";import"./collapse-C1MjllT7.js";import"./index-CWlqhW57.js";import"./gapSize-U1swVQyS.js";import"./index-DRCSt6Z6.js";function b(){return e.jsx(N,{namePage:"Balance history"})}const h=[{title:e.jsx(s,{title:"No."}),align:"center",dataIndex:"index"},{title:e.jsx(s,{title:"Amount"}),align:"center",render:(a,t)=>{var r;return console.log(t),((r=t.amount)==null?void 0:r.toString()[0])==="-"?e.jsxs("div",{className:"text-red-400",children:[t.amount," ",t.currency??""]}):e.jsxs("div",{className:"text-green-400",children:["+",t.amount," ",t.currency??""]})}},{title:e.jsx(s,{title:"Reason"}),align:"center",dataIndex:"reason"},{title:e.jsx(s,{title:"Note"}),align:"center",dataIndex:"note"},{title:e.jsx(s,{title:"Execution time"}),align:"center",dataIndex:"created_at",render:a=>{const t=new Date(a),r=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),m=String(t.getMinutes()).padStart(2,"0"),d=String(t.getSeconds()).padStart(2,"0");return`${r}-${o}-${i} ${n}:${m}:${d}`}}],C={page:1,limit:15},T={dataFilter:C},c=l.createContext({filterState:{},setFilterState:a=>{},columns:h,setColumns:a=>{}});function H({children:a}){const[t,r]=l.useState(h),[o,i]=l.useState(T),n={filterState:o,setFilterState:i,setColumns:r,columns:t};return e.jsx(c.Provider,{value:n,children:a})}const S=async a=>{let t=await y.get(j,{params:a}),r=t.data.data.content.map((o,i)=>({...o,index:(t.data.meta.current_page-1)*Number(t.data.meta.per_page)+i+1}));return t.data.data.content=r,t};function _(){const{filterState:a,setFilterState:t}=l.useContext(c),r=(...m)=>{const[d,u]=m;t(p=>({...p,dataFilter:{...p,page:d,limit:u}}))},{data:o}=x({queryFn:()=>S(a.dataFilter),queryKey:[f.listBalanceHistory,a.dataFilter]}),i=Number(a.dataFilter.limit),n=Number(a.dataFilter.page);return e.jsxs("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:[e.jsx("div",{className:"",children:e.jsx(v,{className:"!text-[16px]",label:`total: ${(o==null?void 0:o.data.meta.total)||0}`})}),e.jsx(F,{showTitle:!1,showQuickJumper:!0,pageSize:isNaN(i)?15:i,current:n,pageSizeOptions:[15,25,50,100,200],total:(o==null?void 0:o.data.meta.total)||0,onChange:r,showSizeChanger:!0})]})}const $={"header-fixed":"_header-fixed_8q965_1"};function P(){const{columns:a,filterState:t}=l.useContext(c);g();const{data:r}=x({queryFn:()=>S(t.dataFilter),queryKey:[f.listBalanceHistory,t.dataFilter]});return e.jsx("div",{className:"w-full h-full overflow-auto",children:e.jsx(w,{columns:a,rowKey:"uuid",className:`${$["header-fixed"]} w-full`,dataSource:(r==null?void 0:r.data.data.content)||[],rowClassName:(o,i)=>i===3?"scroll-row":"",pagination:!1})})}function yt(){const a=g();return e.jsx(H,{children:e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs("div",{className:"rounded-tl-md h-full overflow-y-hidden overflow-x-hidden flex flex-col relative pr-4",children:[e.jsx(b,{}),e.jsx("div",{id:"table-hidemium",className:"h-[calc(100vh-144px)] mr-5 rounded-lg border border-solid shadow-sm overflow-auto",style:{backgroundColor:a.backgroundLight,borderColor:a.borderNormal},children:e.jsx(P,{})}),e.jsx(_,{})]})})})}export{yt as default};
