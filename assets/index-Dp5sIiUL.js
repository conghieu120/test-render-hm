import{r as p,A as Ue,h as He,i as q,bb as qe,bc as Qe,bd as We,be as Ve,bf as ze,bg as Ze,bh as Ke,bi as Je,bj as Ge,q as ee,j as Q,k as e,N as re,O as U,p as ae,bk as Ye,ad as Fe,P as X,ae as Xe,af as et,ag as Ee,a1 as je,ai as we,bl as Ne,w as ie,bm as tt,n as st,l as rt,S as Oe,bn as ue,G as lt}from"./index-rD5D3wIe.js";import{H as ot}from"./HeaderContext-BALBRazG.js";import{c as le}from"./compareVersion-JynyrHBx.js";import{u as te}from"./useQuery-DGelT77v.js";import{Q as C}from"./queryKey.const-4yptRpGc.js";import{r as _e,c as nt,f as Pe}from"./index-DOMhwKmi.js";import{D as ke}from"./DeleteConfirmModal-DSBDXsxU.js";import{u as B}from"./useTranslation-CdVDZguR.js";import{P as ne}from"./Pagination-Du9klKsI.js";import{s as xe}from"./rightMenuStyle.module-BozsqzbR.js";import{u as Z}from"./theme-CwYL3eQV.js";import{B as T,L as at}from"./index-Cnfr_LhE.js";import{F as k}from"./index-D0qsI2Ko.js";import{M as G}from"./index-DduQbOjH.js";import{U as it}from"./index-H7TxDH1o.js";import{S as ct}from"./index-DEeuvegC.js";import{I as Y}from"./index-R7zUTNyO.js";import{S as dt,E as Ae}from"./index-Cw8dqNCZ.js";import{T as J}from"./index-WqkPP-4X.js";import{u as ce}from"./useMutation-7pHNuXnK.js";import{s as z}from"./index-BqcLO0q9.js";import{P as pt}from"./index-Dv8E0b5H.js";import{L as fe}from"./locale.const-CMmjS7YL.js";import{c as ut}from"./automationService-ItdDN5Ql.js";import{d as xt,e as ft}from"./index.esm-CuvWRocu.js";import{I as mt}from"./Icon-BO7gCnsj.js";import{a as ht,b as gt}from"./index.esm-DxM5fcVQ.js";import{H as yt,C as me}from"./index.esm-BRcYQ8HA.js";import{S as jt}from"./index-bFDahTXa.js";import{T as oe}from"./index-e-kTAu8U.js";import{T as Ct}from"./Table-CkCjhjFV.js";import{C as Me}from"./index-C97G-hLo.js";import{T as V}from"./index-BUNugdcr.js";import{f as wt}from"./index-B3nBNj8d.js";import{f as he}from"./index-uI2PeSUX.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./index-CwHt7GoT.js";import"./row-D9yJnvb0.js";import"./responsiveObserver-CoLEQsUO.js";import"./index-Phk2fyGs.js";import"./EllipsisOutlined-Cvv2ECO7.js";import"./Overflow-wzPxOxK8.js";import"./index-VaFpLiuL.js";import"./PlusOutlined-02efxpe5.js";import"./Dropdown-BA274VvY.js";import"./utils-Dji2qSVF.js";import"./index-DQqevswW.js";import"./LeftOutlined-hwnj7f46.js";import"./TextArea-D8GM8mUo.js";import"./collapse-C1MjllT7.js";import"./PurePanel-CzAY4fQy.js";import"./EyeOutlined-D2K23cwb.js";import"./progress-kO2vXcYl.js";import"./CheckOutlined-CxcD5R4P.js";import"./gapSize-U1swVQyS.js";import"./SearchOutlined-DPpNmpde.js";import"./DownOutlined-U_yyBD4s.js";import"./addEventListener-Dnrwfmdl.js";import"./extendsObject-BTpHJDoQ.js";import"./index-Rll6gE4e.js";import"./index-c2ufQ9kY.js";var vt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};const bt=vt;var St=function(r,l){return p.createElement(Ue,He({},r,{ref:l,icon:bt}))},Ft=p.forwardRef(St);const ge=Ft,Ce=async s=>await q.post(Qe,s),Nt=async s=>{const{data:r}=await q.get(Ze+`/${s}`);return r},_t=s=>{if(!/^[0-9A-Fa-f]+$/.test(s))throw new Error("Invalid hexadecimal string");const r=[];for(let o=0;o<s.length;o+=2)r.push(parseInt(s.substring(o,o+2),16));const l=new Uint8Array(r);return new TextDecoder("utf-8").decode(l)},kt=s=>s.split("").reduce((r,l)=>l+r,""),Ie=(s,r)=>{const l=s.substring(0,r);s+=kt(l);const d=s.substring(r,s.length);return _t(d)},Te=async s=>await q.post(We,s),de=async s=>q.get(qe,{params:s}),De=async s=>q.post(Ve,s),At=async({body:s})=>q.put(ze,s),Mt=async({body:s})=>q.post(Ge,s),Tt=async({body:s})=>q.post(Ke,s),Lt=async({body:s})=>q.post(Je,s),H=p.createContext({});function Et({children:s}){const{message:r}=ee.useApp(),l=Q(),[d,o]=p.useState(!1),[u,i]=p.useState(!1),[m,n]=p.useState(!1),[h,j]=p.useState({}),[f,c]=p.useState("single"),[g,a]=p.useState(),S=async _=>{await _e({key:h[_]}),r.success("Delete success"),l.invalidateQueries(C.getAllFolderScriptByUser),l.invalidateQueries(C.WorkFlow)},[D,L]=p.useState({limit:12,page:null,search:""}),[v,w]=p.useState([]),[F,P]=p.useState(null),[A,M]=p.useState(null),{isFetching:x}=te({queryFn:()=>de(D),queryKey:[C.getAllFolderScriptByUser,D],refetchOnMount:!0,onSuccess:_=>{M(_),le(window.api.APP_VERSION,"4.0.14")==1?(w(_.data.data.content.all_folder||[]),P(_.data.data.content.no_folder||null)):w(_.data.data||[])}}),b=async _=>{await _e({key:[_]}),r.success("Delete success"),l.invalidateQueries(C.getAllFolderScriptByUser),l.invalidateQueries(C.WorkFlow)},E=async _=>{try{let W=await Lt({body:{uuid:_}});r.success(W.data.title)}catch(W){r.error(W.response.data.title)}l.invalidateQueries(C.getAllFolderScriptByUser),l.invalidateQueries(C.WorkFlow)},$={confirmDelete:async(_,W="multiple")=>{ke().then(async pe=>{pe.isConfirmed&&(W=="single"?await b(_):await S(_))})},confirmDeleteFolder:async _=>{ke().then(async W=>{W.isConfirmed&&await E(_)})},openModalMoveToFolder:d,setOpenModalMoveToFolder:o,selectAllChecked:u,setSelectAllChecked:i,selectedScript:m,setSelectedScript:n,mode:f,setMode:c,selectedFolder:h,setSelectedFolder:j,folder:g,setFolder:a,_dataFolder:v,_dataNoFolder:F,isFetching:x,_rawDataFolder:A,dataFilter:D,setDataFilter:L};return e.jsx(H.Provider,{value:$,children:s})}function Ot(){const{setDataFilter:s,_rawDataFolder:r,dataFilter:l}=p.useContext(H),d=(...u)=>{let[i,m]=u;i==1&&(i=null),s(n=>({...n,page:i,limit:m}))},{t:o}=B();return e.jsx("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:le(window.api.APP_VERSION,"4.0.14")==1?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("span",{className:"!text-[16px]",children:`${((r==null?void 0:r.data.meta.total)||0)>1?o("Folders"):o("Folder")}: ${(r==null?void 0:r.data.meta.total)||0}`})}),e.jsx(ne,{pageSize:l.limit,current:l.page,pageSizeOptions:[12,16,24,50,100],total:(r==null?void 0:r.data.meta.total)||0,showSizeChanger:!0,onChange:d,showQuickJumper:!0,locale:{items_per_page:o("page")}})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("span",{className:"!text-[16px]",children:`${((r==null?void 0:r.data.total)||0)>1?o("Folders"):o("Folder")}: ${(r==null?void 0:r.data.total)||0}`})}),e.jsx(ne,{pageSize:l.limit,current:l.page,pageSizeOptions:[12,16,24,50,100],total:(r==null?void 0:r.data.total)||0,showSizeChanger:!0,onChange:d,showQuickJumper:!0,locale:{items_per_page:o("page")}})]})})}function Pt({openModal:s,setOpenModal:r,setOpenModalConflic:l,setDataConflic:d}){const[o]=k.useForm(),u=Z(),i=Q();k.useWatch("typeImport",o);const{Title:m}=J,{t:n}=B(),{message:h}=ee.useApp(),[j,f]=p.useState(!1),[c,g]=p.useState(""),[a,S]=p.useState([]),[D,L]=p.useState([]),{data:v}=te({queryFn:()=>de({limit:1e3}),queryKey:[C.getAllFolderScriptByUser,{limit:1e3}],keepPreviousData:!0,refetchOnMount:!0});p.useEffect(()=>{if(le(window.api.APP_VERSION,"4.0.14")==1){if(v!=null&&v.data.data.content){let x=v==null?void 0:v.data.data.content.all_folder.map(b=>({value:b.id,label:b.name}));L([{value:0,label:"No folder"},...x])}}else if(v!=null&&v.data.data){let x=v==null?void 0:v.data.data.map(b=>(b.id=="0"&&(b.name=b.name[0].toUpperCase()+b.name.slice(1,b.name.length)),{value:b.id,label:b.name}));L(x)}},[v]);const[w,F]=p.useState(0),P=async x=>{if(!j){f(!0);let b=x==null?void 0:x.file_import[0].originFileObj.path;const E=window.api.fs.readFileSync(b,{encoding:"utf8"});if(!E)return g(""),S([]),f(!1),h.error(n("File content is empty"));let O,R;try{R=M(E,x==null?void 0:x.file_import[0].name)}catch(_){return console.log("script => ",_),g(""),S([]),f(!1),h.error(n("Error: Invalid file script"))}R?O={name:x==null?void 0:x.file_import[0].name.replace(/\.txt$/,""),script:R[1],folder_script_id:w==0?null:w??null}:O={script:E,folder_script_id:w==0?null:w??null};let $=await Ce(O);$.data.type==="success"?(h.success($.data.title),i.invalidateQueries(C.getAllFolderScriptByUser),i.invalidateQueries(C.WorkFlow),F(0),g("")):$.data.title==="script_conflict"?(l(!0),d({response:$.data.content,body:x,folder_script_id:w}),g(""),S([]),r(!1),f(!1),F(0),i.invalidateQueries(C.getAllFolderScriptByUser),i.invalidateQueries(C.WorkFlow)):h.error($.data.title),g(""),S([]),r(!1),f(!1),F(0),i.invalidateQueries(C.getAllFolderScriptByUser),i.invalidateQueries(C.WorkFlow)}},A=x=>Array.isArray(x)?x:x==null?void 0:x.fileList,M=(x,b="default")=>{if(console.log({data:x,name:b}),!x)return!1;if(x.indexOf("||")>0){let[E,...O]=x.split("||");O=O.join("||");const R=[E,O];try{JSON.parse(R[1])}catch{return!1}return R}else{const E=Ie(x,28),O=[b,E];try{JSON.parse(O[1])}catch{return!1}return O}};return p.useEffect(()=>{s&&o.resetFields()},[s]),p.useEffect(()=>{a&&a[0]&&g(a[0].name)}),e.jsxs(G,{forceRender:!0,open:s,onOk:o.submit,className:"absolute top-[16rem] left-0 right-0 bottom-0",onCancel:()=>{g(""),S([]),r(!1),f(!1)},title:e.jsx(m,{style:{color:u.textActiveNormal,fontSize:"20px",marginBottom:"0px"},children:n("Import script")}),footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(T,{type:"primary",onClick:o.submit,label:n("Import")})}),children:[e.jsxs(k,{layout:"vertical",form:o,onFinish:P,className:"mt-4",initialValues:{typeImport:"text"},children:[e.jsxs("label",{style:{color:u.textNormal},className:"font-semibold text-[18px]",children:[n("File")," ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx(k.Item,{valuePropName:"fileList",getValueFromEvent:A,name:"file_import",className:"font-semibold mt-2 mb-8 "+xe["required-label"]+" "+xe["custom-label"]+" "+xe["custom-input-ant"],rules:[{required:!0,message:n("This field is required.")}],children:e.jsx(it,{name:"logo",accept:".txt",showUploadList:!1,maxCount:1,customRequest:x=>{S([x.file])},beforeUpload:x=>new Promise((b,E)=>{x.size>104857600?E(n("File size should not exceed 100MB!")):b("")}),children:e.jsxs(ct.Compact,{block:!0,className:"w-[470px]",children:[e.jsx(re,{className:"w-[30%] text-[14px]",type:"primary",children:n("Choose File")}),e.jsx(Y,{className:"w-[70%] text-[14px]",disabled:!0,placeholder:n("No file chosen"),value:c,onChange:()=>S(a)})]})})})]}),e.jsx("label",{style:{color:u.textNormal},className:"font-semibold text-[18px]",children:n("Select folder to import")}),e.jsx(dt,{showSearch:!0,onSelect:x=>F(x),placeholder:"Search to Select folder",className:"w-full mt-2",size:"large",optionFilterProp:"label",value:w,options:D})]})}const It=({openModal:s,onOverwirte:r,onDuplicate:l,setOpenModal:d,dataConflic:o})=>e.jsx(G,{open:s,closable:!0,onCancel:()=>d(!1),maskClosable:!0,centered:!0,footer:null,children:e.jsxs("div",{className:"flex flex-col justify-center items-center w-full h-full py-[38px]",children:[e.jsx("span",{children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 0C8.95536 0 0 8.95536 0 20C0 31.0446 8.95536 40 20 40C31.0446 40 40 31.0446 40 20C40 8.95536 31.0446 0 20 0ZM18.5714 10.3571C18.5714 10.1607 18.7321 10 18.9286 10H21.0714C21.2679 10 21.4286 10.1607 21.4286 10.3571V22.5C21.4286 22.6964 21.2679 22.8571 21.0714 22.8571H18.9286C18.7321 22.8571 18.5714 22.6964 18.5714 22.5V10.3571ZM20 30C19.4393 29.9886 18.9053 29.7578 18.5128 29.3571C18.1203 28.9565 17.9004 28.418 17.9004 27.8571C17.9004 27.2963 18.1203 26.7578 18.5128 26.3571C18.9053 25.9565 19.4393 25.7257 20 25.7143C20.5607 25.7257 21.0947 25.9565 21.4872 26.3571C21.8797 26.7578 22.0996 27.2963 22.0996 27.8571C22.0996 28.418 21.8797 28.9565 21.4872 29.3571C21.0947 29.7578 20.5607 29.9886 20 30Z",fill:"#EF1517"})})}),e.jsxs("h1",{className:"uppercase font-bold text-[20.12px] leading-[30.18px] text-center p-[10px_0px_20px_0px]",children:[U("Script already exist!"),e.jsx("div",{className:"text-[14px] normal-case font-normal text-[#2263B3]",children:o==null?void 0:o.response.name})]}),e.jsxs("div",{className:"flex flex-row gap-[14px]",children:[e.jsx(T,{onClick:l,type:"primary",className:"!h-[40px] px-4",label:U("Duplicate")}),e.jsx(T,{onClick:r,type:"primary",className:"!h-[40px] px-4",label:U("Overwrite")})]})]})});function Be({openModal:s,setOpenModal:r,data:l}){const{t:d}=B(),o=Z(),[u]=k.useForm(),i=Q(),{message:m}=ee.useApp(),{Title:n}=J,{isLoading:h,mutate:j}=ce({mutationFn:async f=>{const{name:c}=f;if(l){if(l.name!==c){const{uuid:g}=l;await At({body:{uuid:g,name:c}})}}else await De({name:c})},onSuccess:()=>{i.invalidateQueries(C.getAllFolderScriptByUser),m.success(l?"Updated successfully!":"Add successfully!"),r(!1)},onError:({response:f})=>{f.data.title&&f.data.content.length>0?f.data.content.forEach(c=>{m.error(c)}):m.error(f.data.title)}});return p.useEffect(()=>{u.resetFields(),u.setFieldsValue({name:l==null?void 0:l.name})},[s]),e.jsx(G,{open:s,confirmLoading:h,onOk:u.submit,onCancel:()=>r(!1),title:e.jsx(n,{style:{color:o.textActiveNormal,fontSize:"19.12px"},children:d(l?"Edit":"Add")+" "+d("folder")}),className:"absolute top-[20rem] left-0 right-0 bottom-0",forceRender:!0,footer:null,children:e.jsxs(k,{layout:"vertical",form:u,onFinish:j,initialValues:{name:(l==null?void 0:l.name)??""},children:[e.jsx(k.Item,{name:"name",label:e.jsx("span",{style:{color:o.textNormal,fontWeight:"600"},children:d("Folder name")}),rules:[{required:!0,message:"This field is required!"},{max:50,message:d("Name must not exceed 50 characters!")}],children:e.jsx(Y,{placeholder:d("Enter name")})}),e.jsx(k.Item,{className:"flex justify-end mb-0",children:e.jsx(T,{type:"primary",className:"px-4",onClick:()=>u.submit(),label:l!=null&&l.name?d("Edit"):d("Add")})})]})})}const Dt=()=>{window.api.openLinkWebBrowser("https://docs.hidemium.io/")};function Bt(){const{setDataFilter:s}=p.useContext(H),r=Q(),[l,d]=p.useState(""),[o,u]=p.useState(!1),[i,m]=p.useState(!1),[n,h]=p.useState(!1),j=ae(),f=w=>s(F=>({...F,search:w,page:null})),{t:c}=B(),g=[{icon:e.jsx(Ye,{}),label:c("Automations Docs"),typeButton:"primary",type:"button",action:()=>{Dt()}},{icon:e.jsx(Fe,{}),label:c("Add Script"),typeButton:"primary",type:"button",action:()=>j(X.scenarios)}],[a,S]=p.useState(null),D=async()=>{var w,F;if(a){let P=a.body.file_import[0].originFileObj.path;const A=window.api.fs.readFileSync(P,{encoding:"utf8"});let M,x=v(A,(w=a.body)==null?void 0:w.file_import[0].name);x?M={name:(F=a.body)==null?void 0:F.file_import[0].name.replace(/\.txt$/,""),script:x[1],confirm:"overwrite",confirm_key:a.response.key,folder_script_id:a.folder_script_id}:M={script:A,confirm:"overwrite",confirm_key:a.response.key,folder_script_id:a.folder_script_id};let b=await Ce(M);b.data.type==="success"&&z.success(b.data.title),m(!1),r.invalidateQueries(C.getAllFolderScriptByUser),r.invalidateQueries(C.WorkFlow)}},L=async()=>{var w,F;if(a){let P=a.body.file_import[0].originFileObj.path;const A=window.api.fs.readFileSync(P,{encoding:"utf8"});let M,x=v(A,(w=a.body)==null?void 0:w.file_import[0].name);x?M={name:(F=a.body)==null?void 0:F.file_import[0].name.replace(/\.txt$/,""),script:x[1],confirm:"duplicate",confirm_key:a.response.key,folder_script_id:a.folder_script_id}:M={script:A,confirm:"duplicate",confirm_key:a.response.key,folder_script_id:a.folder_script_id};let b=await Ce(M);b.data.type==="success"&&z.success(b.data.title),m(!1),r.invalidateQueries(C.getAllFolderScriptByUser),r.invalidateQueries(C.WorkFlow)}},v=(w,F="default")=>{if(w.indexOf("||")>0){let[P,...A]=w.split("||");A=A.join("||");const M=[P,A];try{JSON.parse(M[1])}catch{return!1}return M}else{const P=Ie(w,28),A=[F,P];try{JSON.parse(A[1])}catch{return!1}return A}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsxs("div",{className:"flex gap-x-2 gap-y-3",children:[e.jsx(Y,{placeholder:c("Search folder by name"),value:l,className:"w-[322px] translate-y-[2px]",onPressEnter:()=>f(l),onChange:w=>d(w.target.value)}),e.jsx(T,{type:"primary",solid:!0,label:c("Search"),onClick:()=>f(l)})]}),e.jsxs("div",{className:"flex gap-x-2",children:[g.map((w,F)=>w.type==="button"?e.jsx(T,{icon:w.icon,label:c(w.label),onClick:w.action,buttonMenu:!0,type:"primary"},F):e.jsx("span",{children:w.icon},F)),e.jsx(T,{icon:e.jsx(at,{}),label:c("Import script"),buttonMenu:!0,onClick:()=>u(!0),type:"primary"},"import"),e.jsx(T,{icon:e.jsx(Fe,{}),buttonMenu:!0,label:c("Add folder"),onClick:()=>h(!0),type:"primary"},"addFolderScript")]})]}),e.jsx(Pt,{openModal:o,setOpenModal:u,setOpenModalConflic:m,setDataConflic:S}),e.jsx(It,{dataConflic:a,openModal:i,onOverwirte:D,onDuplicate:L,setOpenModal:m}),e.jsx(Be,{openModal:n,setOpenModal:h})]})}const Rt=({dataFolder:s,setOpenModalEditFolder:r})=>{const{confirmDeleteFolder:l}=p.useContext(H),d=[{type:"Edit",action:()=>r(!0),icon:e.jsx(et,{})},{type:"Delete",action:()=>l(s.uuid),icon:e.jsx(Ee,{})}];return e.jsx(e.Fragment,{children:d.map((o,u)=>e.jsx("div",{children:e.jsx(re,{type:"text",icon:o.icon,onClick:o.action,children:o.type})},u))})};function $t({dataFolder:s,setOpenModalEditFolder:r}){return e.jsx(pt,{content:e.jsx(Rt,{dataFolder:s,setOpenModalEditFolder:r}),trigger:"click",arrow:!1,placement:"rightTop",children:e.jsx(re,{type:"text",shape:"circle",icon:e.jsx(Xe,{})})})}function Ut({dataScript:s,setDataScript:r}){const l=Z(),[d]=k.useForm(),{Title:o}=J,{message:u}=ee.useApp(),i=ae(),m=Q(),{uuid:n}=je("AUTH")||{},{t:h}=B(),{isLoading:j,mutate:f}=ce({mutationFn:g=>ut(g),onSuccess:({data:g})=>{u.success(h("Campaign created")),m.invalidateQueries(C.campaign,{refetchInactive:!0}),i(`${X.campaign}/${g.id}`)},onError:()=>{u.error(h("Campaign create error"))}}),c=async g=>{var S;const a=je(`settings-${n}`);f({script_id:s.key,name:(S=g.name)==null?void 0:S.trim(),script_content:s.script,script_name:s.name,script_key:s.key2,settings:a})};return e.jsx(e.Fragment,{children:e.jsx(G,{title:e.jsx(o,{style:{color:l.titlePrimary},level:3,children:h("Create Campaign")}),open:!!s,onOk:d.submit,confirmLoading:j,onCancel:()=>r(null),okText:h("Submit"),cancelText:h("Cancel"),width:609,children:e.jsx(k,{layout:"vertical",form:d,onFinish:c,style:{maxHeight:"550px",overflowY:"auto"},className:"pr-[5px]",initialValues:{name:`Campaign - ${s.name}`},children:e.jsx(k.Item,{name:"name",label:e.jsx("span",{style:{color:l.textNormal,fontWeight:"600"},children:h("Name")}),rules:[{required:!0,message:h("This field is requires")},{max:50,message:h("Name must be minimum 50 characters")}],children:e.jsx(Y,{placeholder:"Enter your name",type:""})})})})})}function Ht(s){return we({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 25 4.03125 C 24.234375 4.03125 23.484375 4.328125 22.90625 4.90625 L 13 14.78125 L 12.78125 15 L 12.71875 15.3125 L 12.03125 18.8125 L 11.71875 20.28125 L 13.1875 19.96875 L 16.6875 19.28125 L 17 19.21875 L 17.21875 19 L 27.09375 9.09375 C 28.246094 7.941406 28.246094 6.058594 27.09375 4.90625 C 26.515625 4.328125 25.765625 4.03125 25 4.03125 Z M 25 5.96875 C 25.234375 5.96875 25.464844 6.089844 25.6875 6.3125 C 26.132813 6.757813 26.132813 7.242188 25.6875 7.6875 L 16 17.375 L 14.28125 17.71875 L 14.625 16 L 24.3125 6.3125 C 24.535156 6.089844 24.765625 5.96875 25 5.96875 Z M 4 8 L 4 28 L 24 28 L 24 14.8125 L 22 16.8125 L 22 26 L 6 26 L 6 10 L 15.1875 10 L 17.1875 8 Z"}}]})(s)}function qt(s){return we({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 6 4 L 6 28 L 26 28 L 26 20 L 24 22 L 24 26 L 8 26 L 8 6 L 24 6 L 24 10 L 26 12 L 26 4 Z M 22.40625 11 L 21 12.40625 L 23.5625 15 L 13.90625 15 L 13.90625 17 L 23.5625 17 L 21 19.59375 L 22.40625 21 L 26.71875 16.71875 L 27.40625 16 L 26.71875 15.28125 Z"}}]})(s)}const Qt=({openModal:s,setOpenModal:r,setStatus:l,item:d})=>{const[o]=k.useForm(),u=p.useRef(null),{Title:i}=J,m=async()=>{let h=await nt(d.key,o.getFieldValue("password"));h.content?l(h.content):z.error(h.title)};p.useEffect(()=>{u.current&&u.current.focus()},[]);const n=h=>{h.key==="Enter"&&(h.preventDefault(),o.submit())};return e.jsx(G,{open:s,onOk:o.submit,onCancel:()=>r(!1),title:e.jsx(i,{style:{color:"#2263B3",fontSize:"19.12px"},children:"Type Password"}),className:"absolute top-[20rem] left-0 right-0 bottom-0",forceRender:!0,footer:null,children:e.jsxs(k,{layout:"vertical",form:o,onFinish:m,children:[e.jsx(k.Item,{name:"password",label:e.jsx("span",{style:{color:"#000000",fontWeight:"600"},children:"Your password"}),rules:[{required:!0,message:"This field is required!"},{max:150,message:"Name must not exceed 150 characters!"}],children:e.jsx(Y,{ref:u,type:"password",placeholder:"Enter password...",onKeyDown:n})}),e.jsx(k.Item,{className:"flex justify-end mb-0",children:e.jsx(T,{type:"primary",onClick:()=>o.submit(),label:U("Submit")})})]})})},Le=s=>{const r={showCancelButton:!0,confirmButtonColor:"#2263B3",cancelButtonColor:"#EF1517",customClass:{popup:"rounded-lg !text-black",icon:"border-none mt-2 mb-0",title:"pt-0 font-bold text-[24px]",htmlContainer:"!mt-3",actions:"!mt-3",confirmButton:"btn px-7 py-2 !rounded-lg !text-[17px] !m-2",cancelButton:"btn px-7 py-2 !rounded-lg !text-[17px] !m-2"},...s};return jt.fire(r)};function Wt(s){return we({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14 7C13.4477 7 13 7.44772 13 8V16C13 16.5523 13.4477 17 14 17H18C18.5523 17 19 16.5523 19 16V8C19 7.44772 18.5523 7 18 7H14ZM17 9H15V15H17V9Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 7C5.44772 7 5 7.44772 5 8C5 8.55228 5.44772 9 6 9H10C10.5523 9 11 8.55228 11 8C11 7.44772 10.5523 7 10 7H6Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 11C5.44772 11 5 11.4477 5 12C5 12.5523 5.44772 13 6 13H10C10.5523 13 11 12.5523 11 12C11 11.4477 10.5523 11 10 11H6Z",fill:"currentColor"}},{tag:"path",attr:{d:"M5 16C5 15.4477 5.44772 15 6 15H10C10.5523 15 11 15.4477 11 16C11 16.5523 10.5523 17 10 17H6C5.44772 17 5 16.5523 5 16Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3C2.34315 3 1 4.34315 1 6V18C1 19.6569 2.34315 21 4 21H20C21.6569 21 23 19.6569 23 18V6C23 4.34315 21.6569 3 20 3H4ZM20 5H4C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19H20C20.5523 19 21 18.5523 21 18V6C21 5.44772 20.5523 5 20 5Z",fill:"currentColor"}}]})(s)}function Vt({dataFilter:s,setDataFilter:r}){const l=(...u)=>{const[i,m]=u;r(n=>({...n,page:i,limit:m}))},{t:d}=B(),{data:o}=te({queryFn:()=>Pe(s),queryKey:[C.WorkFlow,s]});return e.jsxs("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:[e.jsx("div",{className:"",children:e.jsx("span",{className:"!text-[16px]",children:`${((o==null?void 0:o.data.meta.total)||0)>1?d("Scripts"):d("Script")}: ${(o==null?void 0:o.data.meta.total)||0}`})}),e.jsx(ne,{pageSize:s.limit??12,current:s.page,pageSizeOptions:[12,16,24,50,100],total:(o==null?void 0:o.data.meta.total)||0,showSizeChanger:!0,onChange:l,showQuickJumper:!0,locale:{items_per_page:d("page"),jump_to:d("Go to"),page:d("Page")}})]})}function zt({setDataFilter:s,uuidFolder:r}){const l=Q(),{setMode:d,setOpenModalMoveToFolder:o,selectedFolder:u,setSelectedFolder:i,setFolder:m}=p.useContext(H),[n,h]=p.useState(""),[j,f]=p.useState(!1),c=L=>s(v=>({...v,search:L,page:1})),{t:g}=B(),{confirmDelete:a}=p.useContext(H),S=()=>{d("multiple"),m(r),o(!0)},D=async()=>{try{let v=await Tt({body:{uuid:r,ids:u[r]}});z.success(v.data.title)}catch(v){z.error(v.response.data.title)}f(!1);let L={...u};delete L[r],i(L),l.invalidateQueries(C.getAllFolderScriptByUser),l.invalidateQueries(C.WorkFlow)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-3",children:[e.jsx(Y,{placeholder:g("Search script by name"),value:n,className:"w-[322px] translate-y-[2px]",onPressEnter:()=>c(n),onChange:L=>h(L.target.value)}),e.jsx(T,{type:"primary",label:g("Search"),onClick:()=>c(n)}),r in u&&u[r].length>0&&e.jsxs(e.Fragment,{children:[e.jsx(T,{icon:e.jsx(Ee,{}),label:g("Delete"),buttonMenu:!0,onClick:()=>a(r),type:"error"},"delete"),e.jsx(T,{buttonMenu:!0,icon:e.jsx(Ne,{}),label:g("Move to folder"),onClick:()=>S(),type:"primary"},"moveToFolder"),r!="no_folder"&&e.jsx(T,{icon:e.jsx(Ne,{}),buttonMenu:!0,label:g("Remove from folder"),onClick:()=>f(!0),type:"primary"},"removeFromFolder")]})]}),e.jsx(G,{open:j,closable:!0,onCancel:()=>f(!1),maskClosable:!0,centered:!0,footer:null,children:e.jsxs("div",{className:"flex flex-col justify-center items-center w-full h-full py-[38px]",children:[e.jsx("span",{children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 0C8.95536 0 0 8.95536 0 20C0 31.0446 8.95536 40 20 40C31.0446 40 40 31.0446 40 20C40 8.95536 31.0446 0 20 0ZM18.5714 10.3571C18.5714 10.1607 18.7321 10 18.9286 10H21.0714C21.2679 10 21.4286 10.1607 21.4286 10.3571V22.5C21.4286 22.6964 21.2679 22.8571 21.0714 22.8571H18.9286C18.7321 22.8571 18.5714 22.6964 18.5714 22.5V10.3571ZM20 30C19.4393 29.9886 18.9053 29.7578 18.5128 29.3571C18.1203 28.9565 17.9004 28.418 17.9004 27.8571C17.9004 27.2963 18.1203 26.7578 18.5128 26.3571C18.9053 25.9565 19.4393 25.7257 20 25.7143C20.5607 25.7257 21.0947 25.9565 21.4872 26.3571C21.8797 26.7578 22.0996 27.2963 22.0996 27.8571C22.0996 28.418 21.8797 28.9565 21.4872 29.3571C21.0947 29.7578 20.5607 29.9886 20 30Z",fill:"#EF1517"})})}),e.jsx("h1",{className:"uppercase font-bold text-[20.12px] leading-[30.18px] text-center p-[10px_0px_20px_0px]",children:g("Are you sure!")}),e.jsxs("div",{className:"flex flex-row gap-[12px]",children:[e.jsx(T,{onClick:()=>f(!1),label:g("Cancel"),className:"px-4",type:"error"}),e.jsx(T,{onClick:D,type:"primary",className:"px-4",label:g("Remove")})]})]})})]})}function Zt({dataFilter:s,setDataFilter:r}){const{token:{colorBgContainer:l,colorBorder:d}}=ie.useToken(),o=Z(),u=(...h)=>{let[j,f]=h;j==1&&(j=null),r(c=>({...c,page:j,limit:f}))},{data:i}=te({queryFn:()=>de(s),queryKey:[C.getAllFolderScriptByUser,s]}),m=Number(s.limit),n=Number(s.page);return e.jsx("div",{className:"w-[calc(100%)] pt-[10px] text-end border-solid border-0 border-t-2",style:{backgroundColor:o.backgroundNormal,borderColor:d},children:e.jsx(ne,{pageSize:m,current:n,pageSizeOptions:[10,15,20,50,100],total:(i==null?void 0:i.data.total)||0,onChange:u,showTitle:!1})})}function Kt({item:s}){const{setOpenModalMoveToFolder:r,selectedFolder:l,folder:d,setSelectedFolder:o}=p.useContext(H),u=Q(),i=async h=>{try{let f=await Mt({body:{uuid:h.uuid,ids:l[d]}});z.success(f.data.title)}catch(f){z.error(f.response.data.title)}r(!1);let j={...l};delete j[d],o(j),u.invalidateQueries(C.getAllFolderScriptByUser),u.invalidateQueries(C.WorkFlow)},[m]=B(),{token:n}=ie.useToken();return e.jsx(T,{className:`m-auto bg-[${n.bgBlue}]`,type:"primary",onClick:()=>i(s),label:m("Add")})}const Jt=({value:s})=>{const{t:r}=B();return e.jsx("span",{children:s+` ${Number(s)?r("profiles"):r("profile")}`})},Gt=[{title:e.jsx(oe,{title:"No.STT"}),align:"center",render:(s,r,l)=>{const d=r.page?r.page-1:0,o=r.limit||0;return d*o+l+1},width:50},{title:e.jsx(oe,{title:"Name"}),dataIndex:"name",align:"center",render:s=>e.jsxs("div",{className:"flex items-center gap-1 w-[100]",children:[e.jsx(tt,{}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden",children:s.length>40?`${s.substring(0,40)}...`:s})]}),width:300},{title:e.jsx(oe,{title:"Scripts"}),align:"center",dataIndex:"scripts_count",width:"120px",render:s=>e.jsx(Jt,{value:s})},{title:e.jsx(oe,{title:"Action"}),fixed:"right",align:"center",width:120,render:s=>s.uuid=="no_folder"?"":e.jsx(Kt,{item:s})}],Yt=({columns:s,dataFilter:r})=>{const{data:l,isFetching:d}=te({queryFn:()=>de(r),queryKey:[C.getAllFolderScriptByUser,r]}),o=p.useRef(null),u=Q(),[i,m]=p.useState([]);return p.useEffect(()=>{l&&(le(window.api.APP_VERSION,"4.0.14")==1?m((l==null?void 0:l.data.data.content.all_folder.map(n=>({...n,page:r.page,limit:r.limit})))||[]):m((l==null?void 0:l.data.data.map(n=>({...n,page:r.page,limit:r.limit})))||[]))},[l]),p.useEffect(()=>{u.invalidateQueries([C.folders])},[]),e.jsx(e.Fragment,{children:e.jsx(Ct,{className:"h-[350px] overflow-auto",columns:s,dataSource:i,rowKey:"uuid",loading:{spinning:d},size:"small",ref:o,pagination:!1})})},Xt=()=>{const{openModalMoveToFolder:s,setOpenModalMoveToFolder:r}=p.useContext(H),l=Z(),[d]=k.useForm(),[o,u]=p.useState({page:null,limit:12,search:null});ie.useToken();const{Title:i}=J,m=Q(),{isLoading:n,mutate:h}=ce({mutationFn:async j=>{const{name:f}=j;await De({name:f})},onSuccess:()=>{m.invalidateQueries(C.getAllFolderScriptByUser),z.success("Create folder successfully!"),d.resetFields()},onError:j=>{const f=j.response.data.content||"Folder name is unique!";z.error(f),d.resetFields()}});return e.jsxs(G,{title:e.jsx(i,{style:{color:l.textActiveNormal,fontSize:"20px",marginBottom:"0px"},children:U("Add script to folder")}),open:s,className:"min-w-[60%]",zIndex:999,onCancel:()=>r(!1),footer:null,centered:!0,confirmLoading:n,children:[e.jsxs(k,{form:d,layout:"vertical",className:"flex items-end gap-3 mt-4",onFinish:h,children:[e.jsx(k.Item,{name:"name",label:e.jsxs("span",{style:{color:l.textNormal,fontWeight:"600"},children:[U("Add new folder")," "]}),style:{flex:1},rules:[{required:!0,message:U("This field is required!")},{max:50,message:U("The folder name may not be greater than 50 characters!")}],children:e.jsx(Y,{placeholder:U("Folder name")})}),e.jsx(k.Item,{children:e.jsx(T,{type:"primary",onClick:()=>d.submit,label:U("Create")})})]}),e.jsx(Yt,{columns:Gt,dataFilter:o}),e.jsx(Zt,{dataFilter:o,setDataFilter:u})]})};function ye({fd:s}){var Se;const r=Z(),{theme:l}=st(t=>t.display),[d,o]=p.useState({page:1,limit:12,folder_script_id:s.id}),u={height:"200px",padding:"10px",borderRadius:"5px",boxShadow:"0 0px 5px rgba(0, 0, 0, 0.15)",borderColor:r.borderLight},{data:i}=te({queryFn:()=>Pe(d),queryKey:[C.WorkFlow,d],refetchOnMount:!0}),{token:{colorBgBase:m}}=ie.useToken(),{t:n}=B(),[h,j]=p.useState(null),f=ae(),{confirmDelete:c,setSelectedFolder:g,selectedFolder:a}=p.useContext(H),{message:S}=ee.useApp(),[D,L]=p.useState(!1),[v,w]=p.useState(null),F=Q(),P=window.api.AUTOMATION_URL,A=t=>{const y=String(t);if(s.uuid in a){let N=a[s.uuid].indexOf(y);const K={...a};N===-1?K[s.uuid].push(y):K[s.uuid].splice(N,1),g(K)}else g(N=>({...N,[s.uuid]:[y]}))},M=m==="#fff"?"custom-check":"",x=m==="#39383F"?"custom-checkbox":"",b=t=>{c(t,"single")},E=t=>{f(`${X.scenarios}?updateId=${t.key}`)},O=t=>{const y={base_url:`${q.defaults.baseURL}/v2`||"",updateId:t.key||"",autoVersion:"4",v:window.api.APP_VERSION},N=new URLSearchParams(y);window.api.openLinkWebBrowser(`${P}?${N.toString()}`)},R=async t=>{let y=await Nt(t.key);const N={fileName:t.name+".txt",data:y.content};await window.api.exportFile(N)?S.success(n("Export succsess")):S.error(n("Export failed"))};p.useEffect(()=>{D&&E(v)},[D]);const $=t=>{w(t),be(!0)},_=async t=>{const y={confirmButtonText:n("Pay"),cancelButtonText:n("Cancel"),allowOutsideClick:!1,html:`<span class="flex text-2xl font-semibold text-[#2263B3]">${n("Order")}</span>
            <div class="flex justify-between text-base font-medium">
                <span>${n("Name script")}</span>
                <span>${n("Price")}</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="w-4/5 text-left text-sm">Online Character Count Tool.</span>
                <span class="font-medium">$${t.price}</span>
            </div>
            <div class="h-[1px] w-full bg-[#ededed] mb-3 mt-3"></div>
            <div class="flex justify-between items-center">
                <span class="text-sm">${n("Type")}</span>
                <span class="text-sm">${t.type}</span>
            </div>
            <div class="h-[1px] w-full bg-[#ededed] mb-3 mt-3"></div>
            <div class="flex justify-between items-center">
                <span class="text-sm">${n("Total")}</span>
                <span class="font-medium">$${t.price}</span>
            </div>
            `};return await Le(y)},{mutate:W}=ce({mutationFn:t=>Te(t),onSuccess:()=>{S.success(n("Payment success")),F.invalidateQueries(C.WorkFlow),F.invalidateQueries(C.userDetail,{refetchInactive:!0})},onError:t=>{var y,N;console.log({error:t}),S.error((N=(y=t.response)==null?void 0:y.data)==null?void 0:N.title)}}),pe=async t=>{const y={confirmButtonText:n("Go to deposit"),cancelButtonText:n("Cancel"),allowOutsideClick:!1,title:n("Your balance is not enough"),text:`${n("Type")}: ${t.type},
            ${n("Total")}: $${t.price}`,customClass:{title:"font-bold text-[24px]"}};return await Le(y)},Re=async t=>{var y,N,K;try{const{data:I}=await Te({order_id:t});if(I!=null&&I.data)(await _(I.data)).isConfirmed&&W({order_id:(y=I.data)==null?void 0:y.order_id,confirm:!0});else{const se=I==null?void 0:I.content;(se==null?void 0:se.error_code)==="pay_script_3"?(await pe(se)).isConfirmed&&f(X.deposit):S.error(I==null?void 0:I.title)}}catch(I){S.error((K=(N=I.response)==null?void 0:N.data)==null?void 0:K.title)}},[ve,be]=p.useState(!1),$e=()=>{var t;if(s.uuid in a){let y={...a};delete y[s.uuid],g(y)}else{const y=((t=i==null?void 0:i.data.data.content)==null?void 0:t.map(N=>String(N==null?void 0:N.key)))||[];g(N=>({...N,[s.uuid]:y}))}};return p.useEffect(()=>{(i==null?void 0:i.data.meta.current_page)>(i==null?void 0:i.data.meta.last_page)&&o(t=>({...t,page:i==null?void 0:i.data.meta.last_page}))},[i==null?void 0:i.data.data.content]),e.jsxs(e.Fragment,{children:[e.jsx(zt,{setDataFilter:o,uuidFolder:s.uuid,scriptKey:((Se=i==null?void 0:i.data.data.content)==null?void 0:Se.map(t=>String(t==null?void 0:t.key)))||[]}),i!=null&&i.data.data.content&&(i==null?void 0:i.data.data.content.length)>0?e.jsxs(rt,{theme:{token:{colorBgSpotlight:`${l==="light"?"#FFFFFF":"#39383F"}`,colorTextLightSolid:`${l==="light"?"#000000":"#FFFFFF"}`},components:{Typography:{colorText:l==="light"?r.textActiveSecondary:"#FFFFFF"}}},children:[e.jsx("div",{className:"pt-[15px] pb-[15px] rounded-t-[10px] mt-[4px]",children:e.jsx(Me,{onChange:$e,checked:s.uuid in a&&a[s.uuid].length>0,className:`${M}`,children:n("Select All")})}),e.jsx("div",{className:"grid grid-cols-2 860:grid-cols-4 lg:grid-cols-6 xl:grid-cols-9 2xl:grid-cols-12 gap-y-[20px] -ml-4 w-[calc(100%+35px)]",children:i==null?void 0:i.data.data.content.map(t=>e.jsx("div",{className:"col-span-2 lg:col-span-3 3xl:col-span-2 px-[15px]",children:e.jsx(J,{style:{...u,backgroundColor:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?r.textActiveSecondary:r.backgroundNormal},className:"border-[.5px] border-solid",children:e.jsxs("div",{className:"relative flex flex-col w-full h-full",children:[e.jsx("div",{className:"w-full h-[30px] flex flex-row items-center justify-between",style:{borderBottom:"1px solid #EDEDED"},children:e.jsx("div",{className:"flex flex-row items-center",children:e.jsx(Me,{className:`${a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?`text-[#ffffff] ${M}`:r.textActiveNormal} text-[18px] font-[600] ${x}`,onChange:()=>A(String(t==null?void 0:t.key)),checked:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key)),children:e.jsx(V,{title:t==null?void 0:t.name,children:e.jsx(J.Text,{style:{color:l=="dark"?r.textActiveNormal:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#fff":r.textActiveNormal},className:"text-ellipsis-1-line",children:t==null?void 0:t.name})})})})}),e.jsxs("div",{className:"mt-[15px] flex justify-between",children:[e.jsxs("span",{style:{color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#ffffff":r.textNormal},className:"text-[16px] font-[500]",children:[n("Create At")," "]}),(t==null?void 0:t.order_id)&&!(t!=null&&t.is_newest_version)&&e.jsx("span",{className:"p-1 outline outline-1 outline-red-600 text-red-600 rounded-md text-xs font-medium",children:n("Old version")})]}),e.jsx("div",{className:"max-w-xs ",children:e.jsx("span",{className:"text-[14px] leading-[9.81px]",children:e.jsx("span",{style:{color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#ffffff":r.textNormal},className:"text-[14px] font-[400]",children:wt(new Date(t==null?void 0:t.created_at),"dd/MM/yyyy HH:mm:ss")})})}),e.jsx("div",{className:"absolute bottom-0 w-full",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("span",{className:"leading-[9.81px] flex",children:[(t==null?void 0:t.order_id)&&e.jsx(V,{title:n("Move to store"),children:e.jsx("div",{className:"cursor-pointer mr-[5px]",onClick:y=>{y.stopPropagation(),f(X.store_hidemium,{state:{slug:t==null?void 0:t.slug}})},children:e.jsx(Wt,{style:{color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#ffffff":r.textNormal},className:"w-[24px] h-[24px]"})})}),!(t!=null&&t.order_id)||t!=null&&t.order_id&&t.order_type==0&&t.order_status!=0?e.jsx(V,{title:n("Export"),children:e.jsx("div",{className:"cursor-pointer mr-[8px]",onClick:y=>{y.stopPropagation(),R(t)},children:e.jsx(qt,{style:{color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#ffffff":r.textNormal},className:"w-[24px] h-[24px]"})})}):null,!(t!=null&&t.order_id)||t!=null&&t.order_id&&t.order_type==0&&t.order_status!=0?e.jsx(V,{title:n("Edit"),children:e.jsx("div",{className:"cursor-pointer mr-[5px]",onClick:y=>{y.stopPropagation(),L(!1),t.isset_password?$(t):E(t)},children:e.jsx(Ht,{style:{color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#ffffff":r.textNormal},className:" w-[24px] h-[24px]"})})}):null,!(t!=null&&t.order_id)||t!=null&&t.order_id&&t.order_type==0&&t.order_status!=0?e.jsx(V,{title:n("Open to browser"),children:e.jsx("div",{className:"cursor-pointer mr-[5px]",onClick:y=>{y.stopPropagation(),O(t)},children:e.jsx(ht,{style:{color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#ffffff":r.textNormal},className:" w-[24px] h-[24px]"})})}):null,e.jsx(V,{title:n("Delete"),children:e.jsx("div",{className:"cursor-pointer",onClick:y=>{y.stopPropagation(),b([t==null?void 0:t.key])},children:e.jsx(xt,{className:`${a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"text-[#ffffff]":"text-[#F34730]"} w-[24px] h-[24px]`})})})]}),e.jsxs("div",{className:"flex items-center gap-x-1",children:[t.check_conflict===1&&e.jsx(V,{title:n("This script has been cloned"),children:e.jsx("div",{className:`h-[26.52px] px-2 transition-all flex items-center ${a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"bg-[#ffffff] text-[#417AFF]":"bg-[#417AFF] text-slate-100"} rounded-[5.23px]`,children:e.jsx(yt,{})})}),t.isset_password&&e.jsx(V,{title:n("This script has been locked"),children:e.jsx("div",{style:{backgroundColor:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#fff":r.textActiveSecondary,color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#333":"#fff"},className:"transition-all rounded-[5.23px] flex items-center justify-center !h-[26.52px] px-2",children:e.jsx(gt,{})})}),((t==null?void 0:t.order_status)===0||(t==null?void 0:t.is_expired))&&e.jsx(re,{type:"primary",style:{backgroundColor:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#fff":r.textActiveSecondary,color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#333":"#fff"},className:"transition-all rounded-[5.23px] flex items-center justify-center !w-min-[88px] !h-[26.52px]",icon:e.jsx(ft,{}),onClick:y=>{y.stopPropagation(),Re(t==null?void 0:t.order_id)},children:n("Pay")}),(t==null?void 0:t.is_expired)&&e.jsx("div",{className:"bg-[var(--color-red-400)] text-[#ffffff] transition-all rounded-[5.23px] flex items-center justify-center !min-w-[60px] !h-[26.52px]",children:e.jsx("span",{children:n("Expired")})}),(t==null?void 0:t.order_status)===2&&e.jsx("div",{className:"bg-[var(--color-red-400)] text-[#ffffff] transition-all rounded-[5.23px] flex items-center justify-center !min-w-[60px] !h-[26.52px]",children:e.jsx("span",{children:n("Reject")})}),(t==null?void 0:t.order_status)===3&&e.jsx("div",{className:"bg-[var(--color-gray-100)] text-[#ffffff] transition-all rounded-[5.23px] flex items-center justify-center !min-w-[60px] !h-[26.52px]",children:e.jsx("span",{children:n("Refund")})}),!(t!=null&&t.order_id)||t!=null&&t.order_id&&(t==null?void 0:t.order_status)==1&&!(t!=null&&t.is_expired)?e.jsx(V,{title:n("Create campaign to run this script"),children:e.jsx(re,{type:"primary",style:{backgroundColor:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#fff":r.textActiveSecondary,color:a[s.uuid]&&a[s.uuid].includes(String(t==null?void 0:t.key))?"#333":"#fff"},className:"transition-all rounded-[5.23px] flex items-center justify-center !w-[80.62px] !h-[26.52px]",onClick:y=>{y.stopPropagation(),j(t)},icon:e.jsx(mt.IconCampaignFigma,{width:"1em",height:"1em"}),children:n("Run")})}):null]})]})})]})})},t==null?void 0:t.key))}),e.jsx(Vt,{dataFilter:d,setDataFilter:o}),!!h&&e.jsx(Ut,{dataScript:h,setDataScript:j})]}):e.jsx(Ae,{image:Ae.PRESENTED_IMAGE_SIMPLE,style:{backgroundColor:r.backgroundNormal},className:"py-10 rounded",description:n("No data")}),ve&&e.jsx(Qt,{openModal:ve,setOpenModal:be,setStatus:L,item:v}),e.jsx(Xt,{})]})}function es(){const s=Z(),r=je("DISPLAY"),l=r!=null&&r.language?r==null?void 0:r.language:"en",{_dataFolder:d,_dataNoFolder:o,isFetching:u}=p.useContext(H),[i,m]=p.useState(!1),[n,h]=p.useState(!1),{t:j}=B(),f=c=>e.jsx("div",{className:"mt-1 ml-4 scale-125",onClick:g=>{g.stopPropagation(),h(c)},children:e.jsx($t,{dataFolder:c,setOpenModalEditFolder:m})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"pb-[10px] mt-2 !h-[calc(100vh-240px)] overflow-x-hidden pr-[10px] overflow-auto mb-[5px] rounded-b-[10px] ",style:{backgroundColor:s.backgroundNormal,height:"-webkit-fill-available"},children:e.jsx("div",{className:"card-extensions py-3",children:e.jsx(Oe,{spinning:u,children:le(window.api.APP_VERSION,"4.0.14")==1?e.jsxs("div",{className:"flex flex-col",children:[o&&o.length!=0&&o.scripts_count>0&&e.jsx(me,{style:{borderColor:s.borderNormal},className:"border-[.5px] border-solid shadow mt-4",items:[{key:"no_folder",label:e.jsxs("div",{className:"flex flex-wrap justify-end gap-x-5",children:[e.jsx("div",{className:"flex-1 flex flex-row justify-between items-center gap-x-[20px]",children:e.jsxs("div",{style:{color:s.textActiveNormal},className:"flex items-center gap-x-[5px]",children:[e.jsx("span",{className:"mt-1",children:e.jsx(ue,{size:30})}),e.jsx("span",{className:"font-bold text-[20px] leading-[30px] text-center text-nowrap",children:o.name[0].toUpperCase()+o.name.slice(1,o.name.length)})]})}),e.jsxs("div",{className:"flex w-fit min-w-[330px] items-center justify-between gap-x-5 tracking-wide",children:[o.created_at?e.jsxs("div",{className:"text-[16px]",children:["Created: ",he(new Date(o.created_at),new Date,{addSuffix:!0,locale:fe[l]}).replace("about","")]}):e.jsx("div",{className:"text-[16px]"}),e.jsxs("div",{className:"text-[16px]",children:[" ",j("Total"),": ",o.scripts_count," ",j("scripts")]})]})]}),extra:e.jsx("div",{className:"w-[45px]"}),children:e.jsx(ye,{fd:o})}],accordion:!0,expandIcon:({isActive:c})=>e.jsx(ge,{className:"h-full mt-4 scale-125",rotate:c?90:0}),bordered:!1},"no_folder"),d.map((c,g)=>e.jsx(me,{style:{borderColor:s.borderNormal},className:"border-[.5px] border-solid shadow mt-4",items:[{key:c.uuid,label:e.jsxs("div",{className:"flex flex-wrap justify-end gap-x-5",children:[e.jsx("div",{className:"flex-1 flex flex-row justify-between items-center gap-x-[20px]",children:e.jsxs("div",{style:{color:s.textActiveNormal},className:"flex items-center gap-x-[5px]",children:[e.jsx("span",{className:"mt-1",children:e.jsx(ue,{size:30})}),e.jsx("span",{className:"font-bold text-[20px] leading-[30px] text-center text-nowrap",children:c.uuid=="no_folder"?c.name[0].toUpperCase()+c.name.slice(1,c.name.length):c.name})]})}),e.jsxs("div",{className:"flex w-fit min-w-[330px] items-center justify-between gap-x-5 tracking-wide",children:[c.created_at?e.jsxs("div",{className:"text-[16px]",children:["Created: ",c.created_at_diff?c.created_at_diff:he(new Date(c.created_at),new Date,{addSuffix:!0,locale:fe[l]}).replace("about","")]}):e.jsx("div",{className:"text-[16px]"}),e.jsxs("div",{className:"text-[16px]",children:[" ",j("Total"),": ",c.scripts_count," ",j("scripts")]})]})]}),extra:c.uuid=="no_folder"?e.jsx("div",{className:"w-[45px]"}):f(c),children:e.jsx(ye,{fd:c})}],accordion:!0,expandIcon:({isActive:a})=>e.jsx(ge,{className:"h-full mt-4 scale-125",rotate:a?90:0}),bordered:!1},g))]}):d.map((c,g)=>e.jsx(me,{style:{borderColor:s.borderNormal},className:"border-[.5px] border-solid shadow mt-4",items:[{key:c.uuid,label:e.jsxs("div",{className:"flex flex-wrap justify-end gap-x-5",children:[e.jsx("div",{className:"flex-1 flex flex-row justify-between items-center gap-x-[20px]",children:e.jsxs("div",{style:{color:s.textActiveNormal},className:"flex items-center gap-x-[5px]",children:[e.jsx("span",{className:"mt-1",children:e.jsx(ue,{size:30})}),e.jsx("span",{className:"font-bold text-[20px] leading-[30px] text-center text-nowrap",children:c.uuid=="no_folder"?c.name[0].toUpperCase()+c.name.slice(1,c.name.length):c.name})]})}),e.jsxs("div",{className:"flex w-fit min-w-[330px] items-center justify-between gap-x-5 tracking-wide",children:[c.created_at?e.jsxs("div",{className:"text-[16px]",children:["Created: ",c.created_at_diff?c.created_at_diff:he(new Date(c.created_at),new Date,{addSuffix:!0,locale:fe[l]}).replace("about","")]}):e.jsx("div",{className:"text-[16px]"}),e.jsxs("div",{className:"text-[16px]",children:[" ",j("Total"),": ",c.scripts_count," ",j("scripts")]})]})]}),extra:c.uuid=="no_folder"?e.jsx("div",{className:"w-[45px]"}):f(c),children:e.jsx(ye,{fd:c})}],accordion:!0,expandIcon:({isActive:a})=>e.jsx(ge,{className:"h-full mt-4 scale-125",rotate:a?90:0}),bordered:!1},g))})})}),e.jsx(Be,{openModal:i,setOpenModal:m,data:n})]})}const cr={search:"",page:1,limit:10};function dr(){const s=Z(),[r,l]=p.useState(!1),[d]=B(),o=ae(),{message:u}=ee.useApp(),i=lt(),{state:m}=i,[n]=p.useState(m&&m.isAddSuccess?m.isAddSuccess:!1);return p.useEffect(()=>{n&&(u.success(d("Buy success.")),o(X.work_flow,{state:null}))},[n]),e.jsx(Oe,{spinning:r,children:e.jsx(Et,{children:e.jsxs("div",{className:"flex flex-col h-[calc(100%-0px)]",children:[e.jsxs("div",{className:"rounded-tl-md h-full overflow-y-hidden flex flex-col relative",style:{backgroundColor:s.backgroundNormal,flex:1},children:[e.jsx(ot,{namePage:"Work flows"}),e.jsx(Bt,{}),e.jsx(es,{})]}),e.jsx(Ot,{})]})})})}export{dr as default,cr as defaultStateWorkflow};
