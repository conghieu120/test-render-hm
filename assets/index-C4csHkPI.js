import{k as e,r,n as F,q as P,j as _,ad as U}from"./index-rD5D3wIe.js";import{u as I}from"./useQuery-DGelT77v.js";import{a as z,b as K,u as B,d as D,g as H}from"./extensionService-DjV-mgP6.js";import{u as L}from"./useTranslation-CdVDZguR.js";import{P as V}from"./Pagination-Du9klKsI.js";import{u as R}from"./useMutation-7pHNuXnK.js";import{B as J}from"./index-Cnfr_LhE.js";import{M as W}from"./CreateOrUpdateExtension-CpR26xrf.js";import{a as T}from"./index.esm-pljYh1ir.js";import{L as b}from"./ListExtension-Ch-U77Sc.js";import{I as w}from"./index-R7zUTNyO.js";import{D as C}from"./index-CLJiH4Bi.js";import{T as Y}from"./index-Phk2fyGs.js";import{u as Z}from"./theme-CwYL3eQV.js";import"./commonjsHelpers__-BosuxZz1.js";import"./utils-Dji2qSVF.js";import"./LeftOutlined-hwnj7f46.js";import"./responsiveObserver-CoLEQsUO.js";import"./index-Cw8dqNCZ.js";import"./index-BUNugdcr.js";import"./index-VaFpLiuL.js";import"./Overflow-wzPxOxK8.js";import"./PurePanel-CzAY4fQy.js";import"./TextArea-D8GM8mUo.js";import"./CheckOutlined-CxcD5R4P.js";import"./DownOutlined-U_yyBD4s.js";import"./SearchOutlined-DPpNmpde.js";import"./index-D0qsI2Ko.js";import"./collapse-C1MjllT7.js";import"./row-D9yJnvb0.js";import"./index.esm-DxM5fcVQ.js";import"./index-Rll6gE4e.js";import"./index-c2ufQ9kY.js";import"./index-H7TxDH1o.js";import"./EyeOutlined-D2K23cwb.js";import"./progress-kO2vXcYl.js";import"./index-DEeuvegC.js";import"./gapSize-U1swVQyS.js";import"./index-DduQbOjH.js";import"./index.esm-BmOWQ9Wu.js";import"./DeleteConfirmModal-DSBDXsxU.js";import"./index-bFDahTXa.js";import"./index-Dv8E0b5H.js";import"./index-DeZc1mMx.js";import"./EllipsisOutlined-Cvv2ECO7.js";import"./PlusOutlined-02efxpe5.js";import"./Dropdown-BA274VvY.js";function $(s){const{search:n,data:p,paginate:o}=s,{t:x}=L();return e.jsx("div",{className:"w-full p-4 text-end z-10",children:e.jsx(V,{pageSize:n.limit,current:n.page,pageSizeOptions:[12,24,58],total:p.meta.total,onChange:o,showSizeChanger:!0,showTitle:!1,locale:{items_per_page:x("page")}})})}const A=r.createContext({tab:"",setTab:s=>{}});function ee({children:s}){const[n,p]=r.useState("your"),o={tab:n,setTab:p};return e.jsx(A.Provider,{value:o,children:s})}function te({data:s,isCreate:n,extension:p,searchExtension:o,setType:x}){var N;F(t=>t.display);const{message:u}=P.useApp(),d=_(),[c,m]=r.useState(""),[h,v]=r.useState([]),{tab:g,setTab:k}=r.useContext(A),{t:f}=L();r.useEffect(()=>{let t=new Array(s==null?void 0:s.length).fill(!1);v(t)},[]);const{mutate:M}=R(z,{onError:t=>{u.error(t.message)},onSuccess:()=>{let t=new Array(s==null?void 0:s.length).fill(!1);v(t),d.invalidateQueries("GET_LIST_EXTENSION")}}),y=(t,i,a,l)=>{v(E=>{const S=[...E];return S[a]=!0,S}),M({id:i,isEnable:t,item:l})},O=t=>{const i={extension_id:t.id};B(i).then(a=>{var l;u.success((l=a==null?void 0:a.data)==null?void 0:l.title),d.invalidateQueries("GET_LIST_EXTENSION")}).catch(a=>{var l,E;u.error((E=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:E.title),console.log(a)})},q=t=>{D({id:t.id}).then(i=>{d.invalidateQueries("GET_LIST_EXTENSION"),u.success(i.data.title)}).catch(i=>{var a,l;u.error((l=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:l.title),console.log(i)})},[G,Q]=r.useState([]),j=I({queryFn:()=>K(),queryKey:["GET_LIST_EXTENSION"]});r.useEffect(()=>{(async()=>{var i;Q((i=j.data)==null?void 0:i.content)})()},[(N=j.data)==null?void 0:N.content]);const X=[{label:e.jsx("div",{className:"font-semibold text-[16px]",children:f("My Extension")}),key:"your",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{value:c,onChange:t=>{o(t.target.value),m(t.target.value)},className:"max-w-[400px]",placeholder:f("Search"),prefix:e.jsx(T,{className:"text-gray-400"})}),e.jsx(W,{ShowModalEl:e.jsx(J,{type:"primary",icon:e.jsx(U,{}),buttonMenu:!0,label:f("Upload extensions"),solid:!0}),data:null})]}),e.jsx(C,{}),e.jsx("div",{className:"pb-1 h-[calc(80vh-90px)] overflow-y-scroll overflow-x-hidden",children:e.jsx(b,{data:s,isCreate:n,loadingActive:h,isActive:y,type:"extensions",tab:g})})]})},{label:e.jsx("div",{className:"font-semibold text-[16px]",children:f("Extension Market")}),key:"market",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between",children:e.jsx(w,{value:c,onChange:t=>{o(t.target.value),m(t.target.value)},className:"max-w-[400px]",placeholder:f("Search"),prefix:e.jsx(T,{className:"text-gray-400"})})}),e.jsx(C,{}),e.jsx("div",{className:"pb-1 h-[calc(80vh-90px)] overflow-y-scroll overflow-x-hidden",children:e.jsx(b,{allMyExtension:G,data:s,isCreate:n,loadingActive:h,isActive:y,type:"extensions",tab:g,onClick:O,onClickUnusing:q})})]})}];return e.jsx("div",{className:"flex flex-col -translate-y-3",children:e.jsx("div",{className:"relative",children:e.jsx(Y,{onChange:t=>{x(t),o(""),m(""),k(t)},items:X,activeKey:g})})})}function se({data:s,searchExtension:n,setType:p}){const o=Z();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-[calc(100vh-135px)]",style:{backgroundColor:o.backgroundNormal},children:e.jsx("div",{className:"card-extensions py-3 h-full",children:e.jsx(te,{setType:p,data:s,searchExtension:n})})})})}function We(){const[s,n]=r.useState({type:"your",search:"",limit:12,page:1}),p=_(),{data:o}=I({queryFn:()=>H(s),queryKey:["GET_LIST_EXTENSION",s]});console.log(o),r.useEffect(()=>{(async()=>{p.invalidateQueries("GET_LIST_EXTENSION")})()},[s]);const x=c=>{n(m=>({...m,search:c,page:1}))},u=(c,m)=>{n(h=>({...h,page:c,limit:m}))},d=c=>{n(m=>({...m,type:c}))};return r.useEffect(()=>{console.log(o)},[]),o&&e.jsx(ee,{children:e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs("div",{className:"rounded-tl-md h-full overflow-hidden flex flex-col relative pr-5",children:[e.jsx(se,{setType:d,data:o.content,searchExtension:x}),e.jsx($,{data:o,search:s,paginate:u})]})})})}export{We as default};
