import{bJ as fa,bK as xa,bL as Es,bM as ks,bN as Is,bo as Os,bv as qe,bO as ga,$,br as ft,r as c,bt as gt,bw as $t,bP as Ts,h as bt,e as rt,bQ as ba,bR as ya,u as Oe,g as va,m as ja,C as Ca,bS as Sa,bT as wa,b as _a,d as Pa,bG as Fa,A as Na,n as se,w as Te,bU as Ls,k as e,l as Re,q as ye,a7 as Rs,v as qt,j as ve,P as $s,bV as Ea,bW as ka,bX as Ia,bY as Oa,bZ as Ta,b_ as La,ai as Ke,a1 as zt,p as Ra,G as Ds,b$ as St,ag as As,c0 as Qt,c1 as Hs,ah as dt,c2 as $a,ab as Fe,c3 as Bs,bn as Da,N as Ue,c4 as Aa,c5 as Ha,bm as Ba,c6 as Ma,c7 as Va,i as us,U as qa,c8 as za,c9 as Qa,ca as Wa,cb as Ua}from"./index-CJvg638n.js";import{g as Ms,u as Ya}from"./tagService-DbhqBdy8.js";import{g as Wt,S as Xa,e as Ga,a as Ja,D as Dt,c as Za,r as Ka,f as ps}from"./statusService-Dq7uenJQ.js";import{B as he}from"./index-BAIjI0rE.js";import{t as nt}from"./truncateString-BKM5_Dcw.js";import{I as Ae}from"./Icon-BaWGP5av.js";import{S as er}from"./index-DlIx43FQ.js";import{u as Se}from"./theme-D5S-1fEx.js";import{b as At,c as tr}from"./index.esm-BiGZCgFT.js";import{F as H}from"./index-YCIRg4HO.js";import{a as wt,u as re}from"./useTranslation-DN-CYzVf.js";import{T as le,L as sr}from"./index-D8gngLx0.js";import{B as Ht}from"./index-D1UX2WDf.js";import{M as He}from"./index-Cn7Yo5Hv.js";import{S as be,E as xt}from"./index-Wc0f9ZXJ.js";import{T as Ye}from"./index-BEWo-Eeh.js";import{R as ar,C as ms}from"./row-C7cWNtLw.js";import{D as rr}from"./index-BFNDRBPM.js";import{I as Pe}from"./index-4M1x7pR3.js";import{C as Ut,a as Vs,L as qs,b as nr,c as lr,d as or}from"./index.esm-DkAhUDBR.js";import{u as ie}from"./useQuery-DJ-tefVM.js";import{T as Be}from"./index-w6IqrXlL.js";import{b as ir}from"./defaultConfigService-COEiJacz.js";import{Q as P}from"./queryKey.const-4yptRpGc.js";import{P as Nt,a as Et}from"./defaultConfig.const-CZoADfh5.js";import{b as Yt,c as cr,d as dr}from"./index.esm-DsEolv7O.js";import{b as ur}from"./index.esm-DoK_4CPo.js";import{j as pr,k as mr,c as hr,F as fr,l as xr,m as gr,n as br,f as yr,g as hs,h as vr,i as jr,o as Cr}from"./index.esm-mlJjdzQr.js";import{f as Sr}from"./index.esm-LNwInclH.js";import{a as wr}from"./index.esm-h0RGFkVu.js";import{b as _r}from"./index.esm-D2nVYnOi.js";import{L as De}from"./index-IXrIs-M6.js";import{P as it}from"./index-D7PKG-E_.js";import{C as Pr,F as Fr,u as Nr,a as Er,P as kr,S as Ir,D as Or,r as Tr,b as Lr,v as Rr,R as $r,c as Dr,d as Ar}from"./HeaderContext-CcFwS_UE.js";import{u as Ve}from"./useMutation-DtMNI5dJ.js";import{c as Hr}from"./extensionService-B726Y0ex.js";import{g as Br}from"./userSettingService-DL6083Yl.js";import{S as mt}from"./index-Bsl0EBBv.js";import{a as zs,b as Mr,M as Vr}from"./modalCreateProfile-CApV3Bby.js";import{e as Qs,g as qr,c as zr}from"./cookieService-BzDKNpGS.js";import{s as Ws}from"./index-DXD2j7QG.js";import{D as Qr,T as Qe}from"./Table-Bf5fO8hA.js";import{P as lt}from"./Pagination-BX02S7D7.js";import{v as Us,a as Ys}from"./index-D4AGxJc4.js";import{e as Xt}from"./index-C2OfIzMU.js";import{f as Wr}from"./index-BlXw00gF.js";import{B as ot}from"./index-backup-1Xhbz9a9.js";import{s as Me}from"./rightMenuStyle.module-BozsqzbR.js";import{g as Ur}from"./PurePanel-BiIzqeBG.js";import{g as Yr,T as Xr}from"./TextArea-DBRPcsh0.js";import{D as Gr}from"./index-j3wcEPKq.js";import{I as Jr}from"./index-d2P14GTx.js";import{D as Bt}from"./DeleteConfirmModal-CCC5Ho8A.js";import{S as Xs}from"./index-CWlqhW57.js";import{b as Gs}from"./index.esm-BKVPp4gk.js";import{T as Mt}from"./index-BtoCM6cC.js";import{R as Zr,u as Kr,T as en,P as tn,A as sn,S as an,C as rn,a as nn}from"./index-CYbll2wk.js";import{B as ln}from"./BrowserIcon-Dgxd1A6f.js";import{C as on}from"./index.esm-B_Vby5oa.js";import{T as je}from"./index-BXlHKc3j.js";import{f as cn}from"./index-D-UHeDW2.js";import{g as Js,b as Zs,a as dn,M as un,r as pn}from"./ModalShare-Ba6SjZ_B.js";import{R as kt}from"./index-DRCSt6Z6.js";import{f as Ze,b as mn,a as hn,g as fn,d as xn}from"./folderService-DM9UnFow.js";import{a as Ks,s as gn,b as bn,g as yn,q as vn,e as jn}from"./proxyService-B9Fwkvet.js";import{F as Cn}from"./index-jmQoDNPY.js";import{u as Sn}from"./useModal-pIzqwJ6J.js";import{S as wn}from"./index-DFE2wc1V.js";import{r as _n}from"./automationService-CEnPLggJ.js";import{P as $e,a as Pn,S as Fn}from"./SelectProxy-CDsaHMfo.js";import{P as Ge,a as Nn,b as fs,B as En,T as ut,c as kn,d as xs,H as gs,D as In,e as It,r as st,h as On}from"./FormAddProxy-BdaFLVrk.js";import{g as Tn,B as Ln}from"./index-BsLpTvdc.js";import{u as Gt}from"./styled-components.browser.esm-BGP0i3rt.js";import{p as We}from"./commonHelpers-BOkgPZYN.js";import{T as Rn}from"./index-DGGwne6Z.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./collapse-C1MjllT7.js";import"./index-DC1DAWbZ.js";import"./CheckOutlined-CxiWyKpb.js";import"./Overflow-eyj8oHJy.js";import"./DownOutlined-BgG6dx4I.js";import"./SearchOutlined-Bmw6m_pM.js";import"./responsiveObserver-BQm3ddGk.js";import"./EyeOutlined-B-Yk7nA6.js";import"./LeftOutlined-_e4uGCQm.js";import"./utils-Dji2qSVF.js";import"./extendsObject-EOfQw3bh.js";import"./EllipsisOutlined-DODEOrOr.js";import"./addEventListener-0hYE1V1V.js";import"./index-DwCW4jpE.js";import"./index-Db4idn_r.js";import"./Dropdown-DXC0sGt_.js";import"./index-TvTBJWU5.js";import"./gapSize-U1swVQyS.js";import"./index-DYrGpNsa.js";import"./index-YXUFDw_N.js";import"./progress-BUBdB7Z0.js";import"./index-CSeHG7AI.js";import"./Skeleton-BvlGcf7B.js";import"./compareVersion-JynyrHBx.js";import"./index-DFACeEYN.js";import"./PlusOutlined-B9MlVXp_.js";var $n=["b"],Dn=["v"],Ot=function(s){return Math.round(Number(s||0))},An=function(s){if(s&&Is(s)==="object"&&"h"in s&&"b"in s){var r=s,a=r.b,n=Os(r,$n);return qe(qe({},n),{},{v:a})}return typeof s=="string"&&/hsb/.test(s)?s.replace(/hsb/,"hsv"):s},_t=function(t){fa(r,t);var s=xa(r);function r(a){return Es(this,r),s.call(this,An(a))}return ks(r,[{key:"toHsbString",value:function(){var n=this.toHsb(),l=Ot(n.s*100),o=Ot(n.b*100),m=Ot(n.h),i=n.a,d="hsb(".concat(m,", ").concat(l,"%, ").concat(o,"%)"),p="hsba(".concat(m,", ").concat(l,"%, ").concat(o,"%, ").concat(i.toFixed(i===0?0:2),")");return i===1?d:p}},{key:"toHsb",value:function(){var n=this.toHsv();Is(this.originalInput)==="object"&&this.originalInput&&"h"in this.originalInput&&(n=this.originalInput);var l=n;l.v;var o=Os(l,Dn);return qe(qe({},o),{},{b:n.v,a:this.a})}}]),r}(ga),Hn="rc-color-picker",Xe=function(s){return s instanceof _t?s:new _t(s)},Bn=Xe("#1677ff"),ea=function(s){var r=s.offset,a=s.targetRef,n=s.containerRef,l=s.color,o=s.type,m=n.current.getBoundingClientRect(),i=m.width,d=m.height,p=a.current.getBoundingClientRect(),u=p.width,f=p.height,x=u/2,y=f/2,g=(r.x+x)/i,S=1-(r.y+y)/d,E=l.toHsb(),h=g,L=(r.x+x)/i*360;if(o)switch(o){case"hue":return Xe(qe(qe({},E),{},{h:L<=0?0:L}));case"alpha":return Xe(qe(qe({},E),{},{a:h<=0?0:h}))}return Xe({h:E.h,s:g<=0?0:g,b:S>=1?1:S,a:E.a})},ta=function(s,r,a,n){var l=s.current.getBoundingClientRect(),o=l.width,m=l.height,i=r.current.getBoundingClientRect(),d=i.width,p=i.height,u=d/2,f=p/2,x=a.toHsb();if(!(d===0&&p===0||d!==p)){if(n)switch(n){case"hue":return{x:x.h/360*o-u,y:-f/3};case"alpha":return{x:x.a/1*o-u,y:-f/3}}return{x:x.s*o-u,y:(1-x.b)*m-f}}},Jt=function(s){var r=s.color,a=s.prefixCls,n=s.className,l=s.style,o=s.onClick,m="".concat(a,"-color-block");return $.createElement("div",{className:ft(m,n),style:l,onClick:o},$.createElement("div",{className:"".concat(m,"-inner"),style:{background:r}}))};function Mn(t){var s="touches"in t?t.touches[0]:t,r=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,a=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:s.pageX-r,pageY:s.pageY-a}}function sa(t){var s=t.offset,r=t.targetRef,a=t.containerRef,n=t.direction,l=t.onDragChange,o=t.onDragChangeComplete,m=t.calculate,i=t.color,d=t.disabledDrag,p=c.useState(s||{x:0,y:0}),u=gt(p,2),f=u[0],x=u[1],y=c.useRef(null),g=c.useRef(null),S=c.useRef({flag:!1});c.useEffect(function(){if(S.current.flag===!1){var A=m==null?void 0:m(a);A&&x(A)}},[i,a]),c.useEffect(function(){return function(){document.removeEventListener("mousemove",y.current),document.removeEventListener("mouseup",g.current),document.removeEventListener("touchmove",y.current),document.removeEventListener("touchend",g.current),y.current=null,g.current=null}},[]);var E=function(N){var Q=Mn(N),F=Q.pageX,w=Q.pageY,_=a.current.getBoundingClientRect(),C=_.x,D=_.y,W=_.width,k=_.height,B=r.current.getBoundingClientRect(),Y=B.width,M=B.height,X=Y/2,J=M/2,z=Math.max(0,Math.min(F-C,W))-X,fe=Math.max(0,Math.min(w-D,k))-J,ce={x:z,y:n==="x"?f.y:fe};if(Y===0&&M===0||Y!==M)return!1;x(ce),l==null||l(ce)},h=function(N){N.preventDefault(),E(N)},L=function(N){N.preventDefault(),S.current.flag=!1,document.removeEventListener("mousemove",y.current),document.removeEventListener("mouseup",g.current),document.removeEventListener("touchmove",y.current),document.removeEventListener("touchend",g.current),y.current=null,g.current=null,o==null||o()},I=function(N){document.removeEventListener("mousemove",y.current),document.removeEventListener("mouseup",g.current),!d&&(E(N),S.current.flag=!0,document.addEventListener("mousemove",h),document.addEventListener("mouseup",L),document.addEventListener("touchmove",h),document.addEventListener("touchend",L),y.current=h,g.current=L)};return[f,I]}var aa=function(s){var r=s.size,a=r===void 0?"default":r,n=s.color,l=s.prefixCls;return $.createElement("div",{className:ft("".concat(l,"-handler"),$t({},"".concat(l,"-handler-sm"),a==="small")),style:{backgroundColor:n}})},ra=function(s){var r=s.children,a=s.style,n=s.prefixCls;return $.createElement("div",{className:"".concat(n,"-palette"),style:qe({position:"relative"},a)},r)},na=c.forwardRef(function(t,s){var r=t.children,a=t.offset;return $.createElement("div",{ref:s,style:{position:"absolute",left:a.x,top:a.y,zIndex:1}},r)}),Vn=function(s){var r=s.color,a=s.onChange,n=s.prefixCls,l=s.onChangeComplete,o=s.disabled,m=c.useRef(),i=c.useRef(),d=c.useRef(r),p=Ts(function(g){var S=ea({offset:g,targetRef:i,containerRef:m,color:r});d.current=S,a(S)}),u=sa({color:r,containerRef:m,targetRef:i,calculate:function(S){return ta(S,i,r)},onDragChange:p,onDragChangeComplete:function(){return l==null?void 0:l(d.current)},disabledDrag:o}),f=gt(u,2),x=f[0],y=f[1];return $.createElement("div",{ref:m,className:"".concat(n,"-select"),onMouseDown:y,onTouchStart:y},$.createElement(ra,{prefixCls:n},$.createElement(na,{offset:x,ref:i},$.createElement(aa,{color:r.toRgbString(),prefixCls:n})),$.createElement("div",{className:"".concat(n,"-saturation"),style:{backgroundColor:"hsl(".concat(r.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},qn=function(s){var r=s.colors,a=s.children,n=s.direction,l=n===void 0?"to right":n,o=s.type,m=s.prefixCls,i=c.useMemo(function(){return r.map(function(d,p){var u=Xe(d);return o==="alpha"&&p===r.length-1&&u.setAlpha(1),u.toRgbString()}).join(",")},[r,o]);return $.createElement("div",{className:"".concat(m,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(l,", ").concat(i,")")}},a)},bs=function(s){var r=s.gradientColors,a=s.direction,n=s.type,l=n===void 0?"hue":n,o=s.color,m=s.value,i=s.onChange,d=s.onChangeComplete,p=s.disabled,u=s.prefixCls,f=c.useRef(),x=c.useRef(),y=c.useRef(o),g=Ts(function(I){var A=ea({offset:I,targetRef:x,containerRef:f,color:o,type:l});y.current=A,i(A)}),S=sa({color:o,targetRef:x,containerRef:f,calculate:function(A){return ta(A,x,o,l)},onDragChange:g,onDragChangeComplete:function(){d==null||d(y.current,l)},direction:"x",disabledDrag:p}),E=gt(S,2),h=E[0],L=E[1];return $.createElement("div",{ref:f,className:ft("".concat(u,"-slider"),"".concat(u,"-slider-").concat(l)),onMouseDown:L,onTouchStart:L},$.createElement(ra,{prefixCls:u},$.createElement(na,{offset:h,ref:x},$.createElement(aa,{size:"small",color:m,prefixCls:u})),$.createElement(qn,{colors:r,direction:a,type:l,prefixCls:u})))};function ys(t){return t!==void 0}var zn=function(s,r){var a=r.defaultValue,n=r.value,l=c.useState(function(){var d;return ys(n)?d=n:ys(a)?d=a:d=s,Xe(d)}),o=gt(l,2),m=o[0],i=o[1];return c.useEffect(function(){n&&i(Xe(n))},[n]),[m,i]},Qn=["rgb(255, 0, 0) 0%","rgb(255, 255, 0) 17%","rgb(0, 255, 0) 33%","rgb(0, 255, 255) 50%","rgb(0, 0, 255) 67%","rgb(255, 0, 255) 83%","rgb(255, 0, 0) 100%"];const Wn=c.forwardRef(function(t,s){var r=t.value,a=t.defaultValue,n=t.prefixCls,l=n===void 0?Hn:n,o=t.onChange,m=t.onChangeComplete,i=t.className,d=t.style,p=t.panelRender,u=t.disabledAlpha,f=u===void 0?!1:u,x=t.disabled,y=x===void 0?!1:x,g=zn(Bn,{value:r,defaultValue:a}),S=gt(g,2),E=S[0],h=S[1],L=c.useMemo(function(){var F=Xe(E.toRgbString());return F.setAlpha(1),F.toRgbString()},[E]),I=ft("".concat(l,"-panel"),i,$t({},"".concat(l,"-panel-disabled"),y)),A={prefixCls:l,onChangeComplete:m,disabled:y},N=function(w,_){r||h(w),o==null||o(w,_)},Q=$.createElement($.Fragment,null,$.createElement(Vn,bt({color:E,onChange:N},A)),$.createElement("div",{className:"".concat(l,"-slider-container")},$.createElement("div",{className:ft("".concat(l,"-slider-group"),$t({},"".concat(l,"-slider-group-disabled-alpha"),f))},$.createElement(bs,bt({gradientColors:Qn,color:E,value:"hsl(".concat(E.toHsb().h,",100%, 50%)"),onChange:function(w){return N(w,"hue")}},A)),!f&&$.createElement(bs,bt({type:"alpha",gradientColors:["rgba(255, 0, 4, 0) 0%",L],color:E,value:E.toRgbString(),onChange:function(w){return N(w,"alpha")}},A))),$.createElement(Jt,{color:E.toRgbString(),prefixCls:l})));return $.createElement("div",{className:I,style:d,ref:s},typeof p=="function"?p(Q):Q)}),la=$.createContext({}),oa=$.createContext({}),{Provider:Un}=la,{Provider:Yn}=oa,yt=(t,s)=>(t==null?void 0:t.replace(/[^\w/]/gi,"").slice(0,s?8:6))||"",Xn=(t,s)=>t?yt(t,s):"";let vs=function(){function t(s){Es(this,t),this.cleared=!1,this.metaColor=new _t(s),s||(this.metaColor.setAlpha(0),this.cleared=!0)}return ks(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return Xn(this.toHexString(),this.metaColor.getAlpha()<1)}},{key:"toHexString",value:function(){return this.metaColor.getAlpha()===1?this.metaColor.toHexString():this.metaColor.toHex8String()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}}])}();const Ce=t=>t instanceof vs?t:new vs(t),vt=t=>Math.round(Number(t||0)),Pt=t=>vt(t.toHsb().a*100),Tt=(t,s)=>{const r=t.toHsb();return r.a=s||1,Ce(r)},Gn=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=()=>{if(r&&!r.cleared){const l=r.toHsb();l.a=0;const o=Ce(l);o.cleared=!0,a==null||a(o)}};return $.createElement("div",{className:`${s}-clear`,onClick:n})},ia=Gn;var ze;(function(t){t.hex="hex",t.rgb="rgb",t.hsb="hsb"})(ze||(ze={}));const Jn=t=>{let{prefixCls:s,min:r=0,max:a=100,value:n,onChange:l,className:o,formatter:m}=t;const i=`${s}-steppers`,[d,p]=c.useState(n);return c.useEffect(()=>{Number.isNaN(n)||p(n)},[n]),$.createElement(Jr,{className:rt(i,o),min:r,max:a,value:d,formatter:m,size:"small",onChange:u=>{n||p(u||0),l==null||l(u)}})},Je=Jn,Zn=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-alpha-input`,[l,o]=c.useState(Ce(r||"#000"));c.useEffect(()=>{r&&o(r)},[r]);const m=i=>{const d=l.toHsb();d.a=(i||0)/100;const p=Ce(d);r||o(p),a==null||a(p)};return $.createElement(Je,{value:Pt(l),prefixCls:s,formatter:i=>`${i}%`,className:n,onChange:m})},Kn=Zn,el=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,js=t=>el.test(`#${t}`),tl=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-hex-input`,[l,o]=c.useState(r==null?void 0:r.toHex());c.useEffect(()=>{const i=r==null?void 0:r.toHex();js(i)&&r&&o(yt(i))},[r]);const m=i=>{const d=i.target.value;o(yt(d)),js(yt(d,!0))&&(a==null||a(Ce(d)))};return $.createElement(Pe,{className:n,value:l,prefix:"#",onChange:m,size:"small"})},sl=tl,al=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-hsb-input`,[l,o]=c.useState(Ce(r||"#000"));c.useEffect(()=>{r&&o(r)},[r]);const m=(i,d)=>{const p=l.toHsb();p[d]=d==="h"?i:(i||0)/100;const u=Ce(p);r||o(u),a==null||a(u)};return $.createElement("div",{className:n},$.createElement(Je,{max:360,min:0,value:Number(l.toHsb().h),prefixCls:s,className:n,formatter:i=>vt(i||0).toString(),onChange:i=>m(Number(i),"h")}),$.createElement(Je,{max:100,min:0,value:Number(l.toHsb().s)*100,prefixCls:s,className:n,formatter:i=>`${vt(i||0)}%`,onChange:i=>m(Number(i),"s")}),$.createElement(Je,{max:100,min:0,value:Number(l.toHsb().b)*100,prefixCls:s,className:n,formatter:i=>`${vt(i||0)}%`,onChange:i=>m(Number(i),"b")}))},rl=al,nl=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-rgb-input`,[l,o]=c.useState(Ce(r||"#000"));c.useEffect(()=>{r&&o(r)},[r]);const m=(i,d)=>{const p=l.toRgb();p[d]=i||0;const u=Ce(p);r||o(u),a==null||a(u)};return $.createElement("div",{className:n},$.createElement(Je,{max:255,min:0,value:Number(l.toRgb().r),prefixCls:s,className:n,onChange:i=>m(Number(i),"r")}),$.createElement(Je,{max:255,min:0,value:Number(l.toRgb().g),prefixCls:s,className:n,onChange:i=>m(Number(i),"g")}),$.createElement(Je,{max:255,min:0,value:Number(l.toRgb().b),prefixCls:s,className:n,onChange:i=>m(Number(i),"b")}))},ll=nl,ol=[ze.hex,ze.hsb,ze.rgb].map(t=>({value:t,label:t.toLocaleUpperCase()})),il=t=>{const{prefixCls:s,format:r,value:a,disabledAlpha:n,onFormatChange:l,onChange:o}=t,[m,i]=wt(ze.hex,{value:r,onChange:l}),d=`${s}-input`,p=f=>{i(f)},u=c.useMemo(()=>{const f={value:a,prefixCls:s,onChange:o};switch(m){case ze.hsb:return $.createElement(rl,Object.assign({},f));case ze.rgb:return $.createElement(ll,Object.assign({},f));case ze.hex:default:return $.createElement(sl,Object.assign({},f))}},[m,s,a,o]);return $.createElement("div",{className:`${d}-container`},$.createElement(be,{value:m,variant:"borderless",getPopupContainer:f=>f,popupMatchSelectWidth:68,placement:"bottomRight",onChange:p,className:`${s}-format-select`,size:"small",options:ol}),$.createElement("div",{className:d},u),!n&&$.createElement(Kn,{prefixCls:s,value:a,onChange:o}))},cl=il;var dl=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const ul=()=>{const t=c.useContext(la),{prefixCls:s,allowClear:r,value:a,disabledAlpha:n,onChange:l,onClear:o,onChangeComplete:m}=t,i=dl(t,["prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete"]);return $.createElement($.Fragment,null,r&&$.createElement(ia,Object.assign({prefixCls:s,value:a,onChange:d=>{l==null||l(d),o==null||o()}},i)),$.createElement(Wn,{prefixCls:s,value:a==null?void 0:a.toHsb(),disabledAlpha:n,onChange:(d,p)=>{l==null||l(Ce(d),p,!0)},onChangeComplete:d=>{m==null||m(Ce(d))}}),$.createElement(cl,Object.assign({value:a,onChange:l,prefixCls:s,disabledAlpha:n},i)))},Cs=ul,Lt=t=>t.map(s=>(s.colors=s.colors.map(Ce),s)),pl=(t,s)=>{const{r,g:a,b:n,a:l}=t.toRgb(),o=new _t(t.toRgbString()).onBackground(s).toHsv();return l<=.5?o.v>.5:r*.299+a*.587+n*.114>192},Ss=t=>{let{label:s}=t;return`panel-${s}`},ml=t=>{let{prefixCls:s,presets:r,value:a,onChange:n}=t;const[l]=ba("ColorPicker"),[,o]=ya(),[m]=wt(Lt(r),{value:Lt(r),postState:Lt}),i=`${s}-presets`,d=c.useMemo(()=>m.reduce((f,x)=>{const{defaultOpen:y=!0}=x;return y&&f.push(Ss(x)),f},[]),[m]),p=f=>{n==null||n(f)},u=m.map(f=>{var x;return{key:Ss(f),label:$.createElement("div",{className:`${i}-label`},f==null?void 0:f.label),children:$.createElement("div",{className:`${i}-items`},Array.isArray(f==null?void 0:f.colors)&&((x=f.colors)===null||x===void 0?void 0:x.length)>0?f.colors.map((y,g)=>$.createElement(Jt,{key:`preset-${g}-${y.toHexString()}`,color:Ce(y).toRgbString(),prefixCls:s,className:rt(`${i}-color`,{[`${i}-color-checked`]:y.toHexString()===(a==null?void 0:a.toHexString()),[`${i}-color-bright`]:pl(y,o.colorBgElevated)}),onClick:()=>p(y)})):$.createElement("span",{className:`${i}-empty`},l.presetEmpty))}});return $.createElement("div",{className:i},$.createElement(Ut,{defaultActiveKey:d,ghost:!0,items:u}))},hl=ml,fl=()=>{const{prefixCls:t,value:s,presets:r,onChange:a}=c.useContext(oa);return Array.isArray(r)?$.createElement(hl,{value:s,presets:r,prefixCls:t,onChange:a}):null},ws=fl;var xl=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const gl=t=>{const{prefixCls:s,presets:r,panelRender:a,color:n,onChange:l,onClear:o}=t,m=xl(t,["prefixCls","presets","panelRender","color","onChange","onClear"]),i=`${s}-inner`,d=Object.assign({prefixCls:s,value:n,onChange:l,onClear:o},m),p=$.useMemo(()=>({prefixCls:s,value:n,presets:r,onChange:l}),[s,n,r,l]),u=$.createElement("div",{className:`${i}-content`},$.createElement(Cs,null),Array.isArray(r)&&$.createElement(Gr,null),$.createElement(ws,null));return $.createElement(Un,{value:d},$.createElement(Yn,{value:p},$.createElement("div",{className:i},typeof a=="function"?a(u,{components:{Picker:Cs,Presets:ws}}):u)))},bl=gl;var yl=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const vl=c.forwardRef((t,s)=>{const{color:r,prefixCls:a,open:n,disabled:l,format:o,className:m,showText:i}=t,d=yl(t,["color","prefixCls","open","disabled","format","className","showText"]),p=`${a}-trigger`,u=c.useMemo(()=>r.cleared?$.createElement(ia,{prefixCls:a}):$.createElement(Jt,{prefixCls:a,color:r.toRgbString()}),[r,a]),f=()=>{const y=r.toHexString().toUpperCase(),g=Pt(r);switch(o){case"rgb":return r.toRgbString();case"hsb":return r.toHsbString();case"hex":default:return g<100?`${y.slice(0,7)},${g}%`:y}},x=()=>{if(typeof i=="function")return i(r);if(i)return f()};return $.createElement("div",Object.assign({ref:s,className:rt(p,m,{[`${p}-active`]:n,[`${p}-disabled`]:l})},d),u,i&&$.createElement("div",{className:`${p}-text`},x()))}),jl=vl;function Rt(t){return t!==void 0}const Cl=(t,s)=>{const{defaultValue:r,value:a}=s,n=c.useRef(Ce("")),[l,o]=c.useState(()=>{let i;Rt(a)?i=a:Rt(r)?i=r:i=t;const d=Ce(i||"");return n.current=d,d}),m=i=>{o(i),n.current=i};return c.useEffect(()=>{if(Rt(a)){const i=Ce(a||"");n.current.cleared===!0&&(i.cleared="controlled"),m(i)}},[a]),[l,m,n]},ca=(t,s)=>({backgroundImage:`conic-gradient(${s} 0 25%, transparent 0 50%, ${s} 0 75%, transparent 0)`,backgroundSize:`${t} ${t}`}),_s=(t,s)=>{const{componentCls:r,borderRadiusSM:a,colorPickerInsetShadow:n,lineWidth:l,colorFillSecondary:o}=t;return{[`${r}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:a,width:s,height:s,boxShadow:n},ca("50%",t.colorFillSecondary)),{[`${r}-color-block-inner`]:{width:"100%",height:"100%",border:`${Oe(l)} solid ${o}`,borderRadius:"inherit"}})}},Sl=t=>{const{componentCls:s,antCls:r,fontSizeSM:a,lineHeightSM:n,colorPickerAlphaInputWidth:l,marginXXS:o,paddingXXS:m,controlHeightSM:i,marginXS:d,fontSizeIcon:p,paddingXS:u,colorTextPlaceholder:f,colorPickerInputNumberHandleWidth:x,lineWidth:y}=t;return{[`${s}-input-container`]:{display:"flex",[`${s}-steppers${r}-input-number`]:{fontSize:a,lineHeight:n,[`${r}-input-number-input`]:{paddingInlineStart:m,paddingInlineEnd:0},[`${r}-input-number-handler-wrap`]:{width:x}},[`${s}-steppers${s}-alpha-input`]:{flex:`0 0 ${Oe(l)}`,marginInlineStart:o},[`${s}-format-select${r}-select`]:{marginInlineEnd:d,width:"auto","&-single":{[`${r}-select-selector`]:{padding:0,border:0},[`${r}-select-arrow`]:{insetInlineEnd:0},[`${r}-select-selection-item`]:{paddingInlineEnd:t.calc(p).add(o).equal(),fontSize:a,lineHeight:`${Oe(i)}`},[`${r}-select-item-option-content`]:{fontSize:a,lineHeight:n},[`${r}-select-dropdown`]:{[`${r}-select-item`]:{minHeight:"auto"}}}},[`${s}-input`]:{gap:o,alignItems:"center",flex:1,width:0,[`${s}-hsb-input,${s}-rgb-input`]:{display:"flex",gap:o,alignItems:"center"},[`${s}-steppers`]:{flex:1},[`${s}-hex-input${r}-input-affix-wrapper`]:{flex:1,padding:`0 ${Oe(u)}`,[`${r}-input`]:{fontSize:a,textTransform:"uppercase",lineHeight:Oe(t.calc(i).sub(t.calc(y).mul(2)).equal())},[`${r}-input-prefix`]:{color:f}}}}}},wl=t=>{const{componentCls:s,controlHeightLG:r,borderRadiusSM:a,colorPickerInsetShadow:n,marginSM:l,colorBgElevated:o,colorFillSecondary:m,lineWidthBold:i,colorPickerHandlerSize:d,colorPickerHandlerSizeSM:p,colorPickerSliderHeight:u}=t;return{[`${s}-select`]:{[`${s}-palette`]:{minHeight:t.calc(r).mul(4).equal(),overflow:"hidden",borderRadius:a},[`${s}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:n,inset:0},marginBottom:l},[`${s}-handler`]:{width:d,height:d,border:`${Oe(i)} solid ${o}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${n}, 0 0 0 1px ${m}`,"&-sm":{width:p,height:p}},[`${s}-slider`]:{borderRadius:t.calc(u).div(2).equal(),[`${s}-palette`]:{height:u},[`${s}-gradient`]:{borderRadius:t.calc(u).div(2).equal(),boxShadow:n},"&-alpha":ca(`${Oe(u)}`,t.colorFillSecondary),"&-hue":{marginBottom:l}},[`${s}-slider-container`]:{display:"flex",gap:l,marginBottom:l,[`${s}-slider-group`]:{flex:1,"&-disabled-alpha":{display:"flex",alignItems:"center",[`${s}-slider`]:{flex:1,marginBottom:0}}}}}},_l=t=>{const{componentCls:s,antCls:r,colorTextQuaternary:a,paddingXXS:n,colorPickerPresetColorSize:l,fontSizeSM:o,colorText:m,lineHeightSM:i,lineWidth:d,borderRadius:p,colorFill:u,colorWhite:f,marginXXS:x,paddingXS:y,fontHeightSM:g}=t;return{[`${s}-presets`]:{[`${r}-collapse-item > ${r}-collapse-header`]:{padding:0,[`${r}-collapse-expand-icon`]:{height:g,color:a,paddingInlineEnd:n}},[`${r}-collapse`]:{display:"flex",flexDirection:"column",gap:x},[`${r}-collapse-item > ${r}-collapse-content > ${r}-collapse-content-box`]:{padding:`${Oe(y)} 0`},"&-label":{fontSize:o,color:m,lineHeight:i},"&-items":{display:"flex",flexWrap:"wrap",gap:t.calc(x).mul(1.5).equal(),[`${s}-presets-color`]:{position:"relative",cursor:"pointer",width:l,height:l,"&::before":{content:'""',pointerEvents:"none",width:t.calc(l).add(t.calc(d).mul(4)).equal(),height:t.calc(l).add(t.calc(d).mul(4)).equal(),position:"absolute",top:t.calc(d).mul(-2).equal(),insetInlineStart:t.calc(d).mul(-2).equal(),borderRadius:p,border:`${Oe(d)} solid transparent`,transition:`border-color ${t.motionDurationMid} ${t.motionEaseInBack}`},"&:hover::before":{borderColor:u},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:t.calc(l).div(13).mul(5).equal(),height:t.calc(l).div(13).mul(8).equal(),border:`${Oe(t.lineWidthBold)} solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`},[`&${s}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:f,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`},[`&${s}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:o,color:a}}}},Vt=(t,s,r)=>({borderInlineEndWidth:t.lineWidth,borderColor:s,boxShadow:`0 0 0 ${Oe(t.controlOutlineWidth)} ${r}`,outline:0}),Pl=t=>{const{componentCls:s}=t;return{"&-rtl":{[`${s}-presets-color`]:{"&::after":{direction:"ltr"}},[`${s}-clear`]:{"&::after":{direction:"ltr"}}}}},Ps=(t,s,r)=>{const{componentCls:a,borderRadiusSM:n,lineWidth:l,colorSplit:o,colorBorder:m,red6:i}=t;return{[`${a}-clear`]:Object.assign(Object.assign({width:s,height:s,borderRadius:n,border:`${Oe(l)} solid ${o}`,position:"relative",overflow:"hidden",cursor:"pointer",transition:`all ${t.motionDurationFast}`},r),{"&::after":{content:'""',position:"absolute",insetInlineEnd:l,top:0,display:"block",width:40,height:2,transformOrigin:"right",transform:"rotate(-45deg)",backgroundColor:i},"&:hover":{borderColor:m}})}},Fl=t=>{const{componentCls:s,colorError:r,colorWarning:a,colorErrorHover:n,colorWarningHover:l,colorErrorOutline:o,colorWarningOutline:m}=t;return{[`&${s}-status-error`]:{borderColor:r,"&:hover":{borderColor:n},[`&${s}-trigger-active`]:Object.assign({},Vt(t,r,o))},[`&${s}-status-warning`]:{borderColor:a,"&:hover":{borderColor:l},[`&${s}-trigger-active`]:Object.assign({},Vt(t,a,m))}}},Nl=t=>{const{componentCls:s,controlHeightLG:r,controlHeightSM:a,controlHeight:n,controlHeightXS:l,borderRadius:o,borderRadiusSM:m,borderRadiusXS:i,borderRadiusLG:d,fontSizeLG:p}=t;return{[`&${s}-lg`]:{minWidth:r,height:r,borderRadius:d,[`${s}-color-block, ${s}-clear`]:{width:n,height:n,borderRadius:o},[`${s}-trigger-text`]:{fontSize:p}},[`&${s}-sm`]:{minWidth:a,height:a,borderRadius:m,[`${s}-color-block, ${s}-clear`]:{width:l,height:l,borderRadius:i}}}},El=t=>{const{antCls:s,componentCls:r,colorPickerWidth:a,colorPrimary:n,motionDurationMid:l,colorBgElevated:o,colorTextDisabled:m,colorText:i,colorBgContainerDisabled:d,borderRadius:p,marginXS:u,marginSM:f,controlHeight:x,controlHeightSM:y,colorBgTextActive:g,colorPickerPresetColorSize:S,colorPickerPreviewSize:E,lineWidth:h,colorBorder:L,paddingXXS:I,fontSize:A,colorPrimaryHover:N,controlOutline:Q}=t;return[{[r]:Object.assign({[`${r}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:a,[`& > ${s}-divider`]:{margin:`${Oe(f)} 0 ${Oe(u)}`}},[`${r}-panel`]:Object.assign({},wl(t))},_s(t,E)),Sl(t)),_l(t)),Ps(t,S,{marginInlineStart:"auto",marginBottom:u})),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:x,height:x,borderRadius:p,border:`${Oe(h)} solid ${L}`,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:`all ${l}`,background:o,padding:t.calc(I).sub(h).equal(),[`${r}-trigger-text`]:{marginInlineStart:u,marginInlineEnd:t.calc(u).sub(t.calc(I).sub(h)).equal(),fontSize:A,color:i},"&:hover":{borderColor:N},[`&${r}-trigger-active`]:Object.assign({},Vt(t,n,Q)),"&-disabled":{color:m,background:d,cursor:"not-allowed","&:hover":{borderColor:g},[`${r}-trigger-text`]:{color:m}}},Ps(t,y)),_s(t,y)),Fl(t)),Nl(t))},Pl(t))}]},kl=va("ColorPicker",t=>{const{colorTextQuaternary:s,marginSM:r}=t,a=8,n=ja(t,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:18,colorPickerInsetShadow:`inset 0 0 1px 0 ${s}`,colorPickerSliderHeight:a,colorPickerPreviewSize:t.calc(a).mul(2).add(r).equal()});return[El(n)]});var Il=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const Zt=t=>{const{value:s,defaultValue:r,format:a,defaultFormat:n,allowClear:l=!1,presets:o,children:m,trigger:i="click",open:d,disabled:p,placement:u="bottomLeft",arrow:f=!0,panelRender:x,showText:y,style:g,className:S,size:E,rootClassName:h,prefixCls:L,styles:I,disabledAlpha:A=!1,onFormatChange:N,onChange:Q,onClear:F,onOpenChange:w,onChangeComplete:_,getPopupContainer:C,autoAdjustOverflow:D=!0,destroyTooltipOnHide:W}=t,k=Il(t,["value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide"]),{getPrefixCls:B,direction:Y,colorPicker:M}=c.useContext(Ca),X=c.useContext(Sa),J=p??X,[z,fe,ce]=Cl("",{value:s,defaultValue:r}),[Ne,Ee]=wt(!1,{value:d,postState:de=>!J&&de,onChange:w}),[_e,ke]=wt(a,{value:a,defaultValue:n,onChange:N}),ue=B("color-picker",L),R=c.useMemo(()=>Pt(z)<100,[z]),{status:Z}=$.useContext(wa),U=_a(E),K=Pa(ue),[pe,V,O]=kl(ue,K),T={[`${ue}-rtl`]:Y},b=rt(h,O,K,T),v=rt(Yr(ue,Z),{[`${ue}-sm`]:U==="small",[`${ue}-lg`]:U==="large"},M==null?void 0:M.className,b,S,V),G=rt(ue,b),oe=c.useRef(!0),ae=(de,xe,Ie)=>{var Le;let ge=Ce(de);const et=s===null||!s&&r===null;(!((Le=ce.current)===null||Le===void 0)&&Le.cleared||et)&&Pt(z)===0&&xe!=="alpha"&&(ge=Tt(ge)),A&&R&&(ge=Tt(ge)),Ie?oe.current=!1:_==null||_(ge),fe(ge),Q==null||Q(ge,ge.toHexString())},q=()=>{F==null||F()},ee=de=>{oe.current=!0;let xe=Ce(de);A&&R&&(xe=Tt(de)),_==null||_(xe)},ne={open:Ne,trigger:i,placement:u,arrow:f,rootClassName:h,getPopupContainer:C,autoAdjustOverflow:D,destroyTooltipOnHide:W},me={prefixCls:ue,color:z,allowClear:l,disabled:J,disabledAlpha:A,presets:o,panelRender:x,format:_e,onFormatChange:ke,onChangeComplete:ee},te=Object.assign(Object.assign({},M==null?void 0:M.style),g);return pe($.createElement(it,Object.assign({style:I==null?void 0:I.popup,overlayInnerStyle:I==null?void 0:I.popupOverlayInner,onOpenChange:de=>{oe.current&&!J&&Ee(de)},content:$.createElement(Fa,{override:!0,status:!0},$.createElement(bl,Object.assign({},me,{onChange:ae,onChangeComplete:ee,onClear:q}))),overlayClassName:G},ne),m||$.createElement(jl,Object.assign({open:Ne,className:v,style:te,prefixCls:ue,disabled:J,showText:y,format:_e},k,{color:z}))))},Ol=Ur(Zt,"color-picker",t=>t,t=>Object.assign(Object.assign({},t),{placement:"bottom",autoAdjustOverflow:!1}));Zt._InternalPanelDoNotUseOrYouWillBeFired=Ol;const Tl=Zt;var Ll={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M476 399.1c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1V484h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H420v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V540h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H476v-84.9zM560.5 704h-225c-4.1 0-7.5 3.2-7.5 7v42c0 3.8 3.4 7 7.5 7h225c4.1 0 7.5-3.2 7.5-7v-42c0-3.8-3.4-7-7.5-7zm-7.1-502.6c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v704c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32V397.3c0-8.5-3.4-16.6-9.4-22.6L553.4 201.4zM664 888H232V264h282.2L664 413.8V888zm190.2-581.4L611.3 72.9c-6-5.7-13.9-8.9-22.2-8.9H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h277l219 210.6V824c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V329.6c0-8.7-3.5-17-9.8-23z"}}]},name:"diff",theme:"outlined"};const Rl=Ll;var $l=function(s,r){return c.createElement(Na,bt({},s,{ref:r,icon:Rl}))},Dl=c.forwardRef($l);const Al=Dl,ht={orderName:0,orderLastOpen:0,page:1,limit:10,search:"",browser_uuid:[],name:[],folder_id:[],tag_id:[],status:"",createdDate:null,date_range:["",""],mode:"cloud",nameFolder:[],isRunning:!1};function Hl({filterState:t,setFilterState:s}){const{TextArea:r}=Pe,a=Se(),[n]=H.useForm(),[l,o]=c.useState([]),[m,i]=c.useState([]),[d,p]=c.useState([]),[u,f]=c.useState([]),[x,y]=c.useState([]),[g,S]=c.useState(0),{isLocalActiveTab:E}=se(_=>_.display),{t:h}=re(),L=_=>{const{createdDate:C,folder_id:D,status:W,tags:k,uuids:B,names:Y,isRunning:M}=_;C&&(C[0]=C[0].startOf("day"),C[1]=C[1].endOf("day"));let X=t.dataFilter.folder_id||[],J=t.dataFilter.tag_id||[];D&&D.length>0&&(X=D.map(ce=>ce.value)),t.dataFilter.mode==="cloud"&&D!==void 0&&(D==null?void 0:D.length)===0&&(X=[]),k&&k.length>0&&(J=k.map(ce=>ce.value)),k!==void 0&&(k==null?void 0:k.length)===0&&(J=[]);const z={...t.dataFilter,browser_uuid:B==null?void 0:B.split(`
`).map(ce=>ce.trim()),date_range:C??void 0,folder_id:X,name:Y==null?void 0:Y.split(`
`).map(ce=>ce.trim()),status:W,tag_id:J,page:1,nameFolder:[],isRunning:M};let fe=A(z);S(fe),s({isOpenFilter:!1,dataFilter:z})};c.useEffect(()=>{let _=A(t.dataFilter);S(_)},[t.dataFilter]);const I=()=>{S(0);const _={...t.dataFilter,browser_uuid:[],date_range:void 0,folder_id:[],name:[],status:"",tag_id:[],nameFolder:[],isRunning:!1};s({dataFilter:_,isOpenFilter:!1}),n.setFieldsValue({uuids:"",names:"",folder_id:[],tags:[],status:"",createdDate:null,isRunning:!1})};Te.useToken();const A=_=>{let C=0;return _.date_range&&(C+=_.date_range[0]!==""&&_.date_range[1]!==""?1:0),_.browser_uuid&&(C+=_.browser_uuid.length>0&&_.browser_uuid[0]!==""?1:0),_.name&&(C+=_.name.length>0&&_.name[0]!==""?1:0),_.folder_id&&(C+=_.folder_id.length>0?1:0),_.tag_id&&(C+=_.tag_id.length>0?1:0),(_.status||_.status==0)&&(C+=_.status!==""?1:0),C+=_.isRunning?1:0,C};c.useEffect(()=>{t.isOpenFilter&&(N(),Q(),F())},[t.isOpenFilter]);const N=async()=>{const{data:_}=await Ls(E),D=[{id:-1,uuid:"",name:h("No folder"),total_browser:0,created_at:"",created_at_diff:""}].concat(_.content);let W=[];if(t.dataFilter.folder_id&&t.dataFilter.folder_id.length>0){W=D.filter(B=>!t.dataFilter.folder_id.some(Y=>Y===B.id)).map(B=>({value:B.id,label:B.name,title:""}));const k=D.filter(B=>t.dataFilter.folder_id.some(Y=>Y===B.id)).map(B=>({value:B.id,label:B.name,title:""}));n.setFieldValue("folder_id",k)}else W=D.map(k=>({value:k.id,label:k.name,title:""})),n.setFieldValue("folder_id",[]);o(W),f(D)},Q=async()=>{const _=await Ms(E);let C=[];if(t.dataFilter.tag_id&&t.dataFilter.tag_id.length>0){C=_.filter(W=>!t.dataFilter.tag_id.some(k=>k===W.value)).map(W=>({value:W.value,label:W.label,title:""}));const D=_.filter(W=>t.dataFilter.tag_id.some(k=>k===W.value)).map(W=>({value:W.value,label:W.label,title:""}));n.setFieldValue("tags",D)}else C=_.map(D=>({value:D.value,label:D.label,title:""}));i(C),y(_)},F=async()=>{const _=await Wt(E),W=Xa.map(k=>({...k,name:h(k.name)})).concat(_).map(k=>({...k,value:k.id,label:k.name,title:""}));p(W)},w=()=>{s({...t,isOpenFilter:!1})};return e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:()=>s({...t,isOpenFilter:!0}),className:"mx-2 cursor-pointer",style:{color:a.textNormal},children:e.jsx(Ht,{count:g,title:"",color:"blue",offset:[2,4],size:"default",className:"text-[20px] leading-[28px]",children:e.jsx(he,{classStyle:"!h-[35.5px] mb-1",typebutton:"primary",solid:!0,label:e.jsxs("div",{className:"flex flex-row justify-center items-center gap-x-[5px] !text-[14px] !font-[500]",children:[e.jsx(Ae.IconFilterFigma,{width:"1em",height:"1em",color:"#ffffff"}),h("Filter profile")]})})})}),t.isOpenFilter&&e.jsx(Re,{theme:{components:{Modal:{contentBg:a.backgroundLight,headerBg:a.backgroundLight},Select:{selectorBg:a.backgroundNormal,multipleItemBg:a.backgroundDark},Typography:{colorText:a.textNormal}},token:{colorBgContainer:a.backgroundNormal}},children:e.jsx(He,{centered:!0,title:e.jsx("div",{className:"text-[20px]",style:{color:a.textActiveNormal},children:h("Filter profile")}),open:t.isOpenFilter,onCancel:()=>w(),onOk:()=>n.submit(),footer:[e.jsxs("div",{className:"flex justify-end gap-x-5",children:[e.jsx(he,{onClick:I,label:h("Reset"),typebutton:"error",solid:!0},1),e.jsx(he,{typebutton:"primary",onClick:()=>n.submit(),label:h("Filter"),solid:!0},2)]},1)],children:e.jsxs(H,{onFinish:L,form:n,layout:"vertical",className:"max-h-[700px] overflow-y-scroll overflow-x-hidden pr-[2px]",initialValues:{uuids:t.dataFilter.browser_uuid.join(`
`),names:t.dataFilter.name.join(`
`),status:t.dataFilter.status,createdDate:t.dataFilter.createdDate,isRunning:t.dataFilter.isRunning},children:[e.jsx(H.Item,{label:e.jsx(at,{label:"Uuid"}),name:"uuids",children:e.jsx(r,{style:{backgroundColor:a.backgroundNormal},rows:4,placeholder:`uuid1
uuid2`})}),e.jsx(H.Item,{label:e.jsx(at,{label:h("Name")}),name:"names",children:e.jsx(r,{style:{backgroundColor:a.backgroundNormal},rows:4,placeholder:h("name")+` 1
`+h("name")+" 2"})}),e.jsx(H.Item,{name:"isRunning",valuePropName:"checked",children:e.jsx(er,{bold:!0,label:h("Profile is running")})}),(t.dataFilter.mode==="cloud"||t.dataFilter.mode==="local")&&e.jsxs(e.Fragment,{children:[e.jsx(H.Item,{label:e.jsx(at,{label:h("Folder")}),name:"folder_id",children:e.jsx(be,{mode:"multiple",tagRender:_=>e.jsx(Ye,{closeIcon:e.jsx(At,{style:{color:a.iconClose},className:"inline-flex align-[-0.125em]"}),closable:_.closable,onClose:_.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px",background:a.tagBgPrimary,color:a.tagTextPrimary},children:nt(_.label,20)}),placeholder:h("Select"),allowClear:!0,labelInValue:!0,style:{width:"100%"},options:l||[],onChange:_=>{const C=u==null?void 0:u.filter(D=>!_.some(W=>W.value==D.id)).map(D=>({value:D.id,label:D.name,title:""}));o(C)}})}),e.jsx(H.Item,{label:e.jsx(at,{label:h("Tag")}),name:"tags",children:e.jsx(be,{mode:"multiple",tagRender:_=>e.jsx(Ye,{closeIcon:e.jsx(At,{style:{color:a.iconClose},className:"inline-flex align-[-0.125em]"}),closable:_.closable,onClose:_.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px",background:a.tagBgPrimary,color:a.tagTextPrimary},children:nt(_.label,20)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:h("Select"),optionFilterProp:"label",options:m,onChange:_=>{const C=x==null?void 0:x.filter(D=>!_.some(W=>W.value===D.value)).map(D=>({value:D.value,label:D.label,title:""}));i(C)}})})]}),e.jsxs(ar,{gutter:8,children:[e.jsx(ms,{span:12,children:e.jsx(H.Item,{label:e.jsx(at,{label:h("Status")}),name:"status",children:e.jsx(be,{defaultActiveFirstOption:!0,options:d})})}),e.jsx(ms,{span:12,children:e.jsx(H.Item,{label:e.jsx(at,{label:h("Created date")}),name:"createdDate",children:e.jsx(rr.RangePicker,{placeholder:[h("Start date"),h("End date")],className:"w-full"})})})]})]})})})]})}const at=({label:t})=>e.jsx(le.Text,{className:"font-semibold text-[14px]",children:t}),pt=[{id:"PDF Viewer",name:"PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Chrome PDF Viewer",name:"Chrome PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Chromium PDF Viewer",name:"Chromium PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Microsoft Edge PDF Viewer",name:"Microsoft Edge PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Webkit built-in PDF",name:"Webkit built-in PDF",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0}],Bl={win:pt,mac:pt,lin:pt,android:pt,ios:pt};function Ml({item:t,handleQuickCreate:s,setIsOpen:r}){const a=Se(),[n,l]=c.useState(1),{message:o}=ye.useApp(),[m]=re(),{isLocalActiveTab:i}=se(u=>u.display),d=u=>{l(Number.parseInt(u.target.value))},p=async()=>{!isNaN(n)&&n>=Nt&&n<=Et?(await s(n,t.id,t.config,i),r(!1),l(1)):o.error("Quick create process must be between "+Nt+" and "+Et)};return e.jsx("div",{children:e.jsxs(Rs,{to:"#",className:"flex items-center px-3 py-1 truncate",onClick:u=>{u.stopPropagation(),p()},children:[e.jsx(Pe,{className:"w-[40%] mr-3",value:n,type:"number",required:!0,style:{backgroundColor:a.backgroundNormal},min:Nt,max:Et,onClick:u=>u.stopPropagation(),onChange:d}),e.jsx(Be,{label:m(t.name)})]})})}const Vl={page:1,limit:10,search:""};function ql(){const t=Se(),[s]=c.useState(Vl),[r,a]=c.useState(!1),[n]=re(),l=se(g=>g.ipInfoConfig),o=qt(),m=ve(),{message:i}=ye.useApp(),[d,p]=c.useState([]),u=c.useContext(we),{data:f}=ie({queryFn:()=>ir(s),queryKey:[P.defaultConfig,s]}),x={label:e.jsx("div",{className:"font-semibold px-3 py-1",children:e.jsx(Rs,{to:$s.default_config,className:"text-black",children:e.jsx(Be,{label:n("Manager default config")})})}),key:"0"},y=async(g,S,E,h)=>{const L={quickCreateNumber:g,body:{...l,config_id:S,plugins:{isEnabled:!1,value:Bl.win},local:h}};o(ka(L)).then(()=>{i.success("Create sucsess !")}).catch(I=>{i.error(I.response.data.title)}).finally(()=>{u==null||u.setFilterState(I=>({...I,dataFilter:{...ht,mode:h?"local":"cloud"}})),m.invalidateQueries(P.listProfile,{refetchInactive:!0}),m.invalidateQueries(P.PROFILE_CLOUD,{refetchInactive:!0}),m.invalidateQueries(P.PROFILE_LOCAL,{refetchInactive:!0}),m.invalidateQueries(P.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),m.invalidateQueries(P.userDetail,{refetchInactive:!0})})};return c.useEffect(()=>{p((f==null?void 0:f.data.data.content.map(g=>({label:e.jsx(Ml,{item:g,handleQuickCreate:y,setIsOpen:a},g.id),key:g.uuid})))||[])},[f]),e.jsx(Re,{theme:{components:{Dropdown:{colorBgElevated:t.backgroundLight}}},children:e.jsx(Qr,{menu:{items:(d==null?void 0:d.concat(x))||[]},placement:"bottomRight",trigger:["click"],open:r,onOpenChange:g=>{g||a(!r)},children:e.jsx("span",{children:e.jsx(he,{icon:e.jsx(Ea,{}),label:n("Quick Create"),typebutton:"primary",solid:!0,onClick:()=>a(!r),classStyle:"bg-[var(--color-white)] !text-[var(--color-green-200)] shadow-[0_0.2rem_0_var(--color-green-200)] border-[var(--color-green-200)] hover:!bg-[var(--color-green-200)] hover:!text-[var(--color-white)]"})})})})}function zl({openModal:t,setOpenModal:s,selectedProfile:r,setSelectedRowKeys:a}){const[n]=H.useForm(),l=Se(),o=c.useRef(null),{Title:m,Text:i}=le,{message:d}=ye.useApp(),p=ve(),[u,f]=c.useState(!1),[x,y]=c.useState(!1),[g,S]=c.useState(!1),[E,h]=c.useState(!1),[L,I]=c.useState([]),[A,N]=c.useState([]),[Q,F]=c.useState([]),[w,_]=c.useState([]),[C,D]=c.useState([]),[W,k]=c.useState([]),[B,Y]=c.useState([]),{token:M}=Te.useToken(),{t:X}=re(),{isLocalActiveTab:J}=se(R=>R.display),z=async()=>{var Z;const R=await((Z=o.current)==null?void 0:Z.getFieldsValue());if(!R.profileSelected&&!R.folderSelected||R.profileSelected&&R.profileSelected.length===0&&!R.folderSelected)d.error(X("Please select target to update!"));else if(!x&&!E&&!g)d.error(X("Please choose information to update!"));else if(R.isUpdateVersion&&!R.versionSelected)d.error(X("Please choose a version!"));else try{let U=[],K=[],pe=[];R.profileSelected&&(typeof R.profileSelected[0]=="string"?U=C.filter(O=>R.profileSelected.some(T=>T===O.uuid)).map(O=>({...O,value:O.uuid,label:O.name})):typeof R.profileSelected[0]=="object"&&(U=R.profileSelected.map(O=>({uuid:O.value,name:O.label,value:O.value,label:O.label})))),R.folderSelected&&(K=W.filter(O=>R.folderSelected.some(T=>T.value==O.uuid)).map(O=>({...O,label:O.name,value:O.uuid}))),R.extensionSelected&&(pe=R.extensionSelected.map(O=>({id:O.value,name:O.label,value:O.value,label:O.label})));const V={isUpdateExtension:R.isUpdateExtension??!1,isUpdateCmd:R.isUpdateCmd??!1,isUpdateVersion:R.isUpdateVersion??!1,cmd:R.cmd??"",profileSelected:U,folderSelected:K,extensionSelected:pe,versionSelected:R.versionSelected??"",isLocal:J};if(R.isUpdateVersion&&R.versionSelected!==void 0){const{data:O}=await La(R.versionSelected),{os:T}=await Br(),b={...V,os:{android:T.android.browsers,ios:T.android.browsers,lin:T.lin.browsers,mac:T.mac.browsers,win:T.win.browsers},versionSelected:R.versionSelected,version:O};fe(b)}else fe(V)}catch{d.error("an error occurred!")}},{mutate:fe,isLoading:ce}=Ve(Ia,{onError:R=>{R.response.data.content.length>0?R.response.data.content.map(Z=>{d.error(Z)}):d.error(R.response.data.title)},onSuccess:()=>{d.success("Upload successfully!"),p.invalidateQueries(P.listProfile),p.invalidateQueries(P.GET_PROFILE_BY_FOLDER),a([]),f(!1),s(!1)}});c.useEffect(()=>{t&&(Ne(),Ee(),_e(),ke(),S(!1),y(!1),h(!1),n.resetFields())},[t]);const Ne=async()=>{const{data:R}=await Oa(J);let Z=[];if(r&&r.length>0){Z=R.content.filter(K=>!r.some(pe=>pe===K.uuid)).map(K=>({value:K.uuid,label:K.name,title:""}));const U=R.content.filter(K=>r.some(pe=>pe===K.uuid)).map(K=>({value:K.uuid,label:K.name,title:""}));n.setFieldValue("profileSelected",U)}else Z=R.content.map(U=>({value:U.uuid,label:U.name,title:""}));I(Z),D(R.content)},Ee=async()=>{const{data:R}=await Ls(J),Z=R.content.map(U=>({...U,value:U.uuid,label:U.name,title:""}));N(Z),k(R.content)},_e=async()=>{const{content:R}=await Hr({type:"your",search:"",limit:null,page:1}),Z=R.map(U=>({value:U.id,label:U.name,title:""}));F(Z),Y(R)},ke=async()=>{const{data:R}=await Ta(),Z=Object.entries(ue(R)).map(([U,K])=>({value:U,label:K,title:""}));Z.sort((U,K)=>{const pe=T=>T.split(" ")[0],V=pe(U.value).split(".").map(Number),O=pe(K.value).split(".").map(Number);for(let T=0;T<Math.max(V.length,O.length);T++){const b=(O[T]||0)-(V[T]||0);if(b!==0)return b}return 0}),_(Z)},ue=R=>{const Z={};return Object.entries(R).forEach(([U,K])=>{K.forEach(pe=>{Z[pe]=Z[pe]?Z[pe].replace(/\)$/,`, ${U})`):`${pe} (${U})`})}),Z};return e.jsx(e.Fragment,{children:e.jsx(Re,{theme:{components:{Modal:{contentBg:l.backgroundLight,headerBg:l.backgroundLight},Select:{selectorBg:l.backgroundNormal,multipleItemBg:l.backgroundDark}},token:{colorBgContainer:l.backgroundNormal}},children:e.jsx(He,{title:e.jsx(m,{style:{color:M.bgBlue,fontSize:"20px"},level:3,children:X("Update multiple profiles")}),open:t,onOk:n.submit,onCancel:()=>s(!1),confirmLoading:u,width:768,footer:e.jsxs("div",{className:"flex flex-row gap-x-[5px] w-full justify-end",children:[e.jsx(he,{classStyle:"w-fit",isDisabled:ce,typebutton:"primary",solid:!0,onClick:z,label:X("Update")},"submit"),e.jsx(he,{classStyle:"w-fit",isDisabled:ce,typebutton:"error",solid:!0,onClick:()=>s(!1),label:X("Cancel")},"cancel")]}),children:e.jsxs(H,{className:"h-[fit-content] max-h-[700px] overflow-y-auto overflow-x-hidden",ref:o,layout:"vertical",form:n,onFinish:z,children:[e.jsxs(m,{level:5,className:"!mt-[5px]",children:[X("Target To Update"),e.jsx("span",{className:"text-[#FF0C0C]",children:" *"})]}),e.jsx(H.Item,{name:"profileSelected",label:X("Profile to update"),children:e.jsx(be,{mode:"multiple",tagRender:R=>e.jsx(Ye,{closable:R.closable,onClose:R.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px"},children:nt(R.label,50)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:X("Select"),options:L,optionFilterProp:"label",onChange:R=>{const Z=C==null?void 0:C.filter(U=>!R.some(K=>K.value==U.uuid)).map(U=>({value:U.uuid,label:U.name,title:""}));I(Z)}})}),e.jsx(H.Item,{name:"folderSelected",label:X("Folders to updates ( All profiles in these folders will be updated )"),children:e.jsx(be,{mode:"multiple",tagRender:R=>e.jsx(Ye,{closable:R.closable,onClose:R.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px"},children:nt(R.label,20)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:X("Select"),optionFilterProp:"label",options:A,onChange:R=>{const Z=W==null?void 0:W.filter(U=>!R.some(K=>K.value==U.uuid)).map(U=>({value:U.uuid,label:U.name,title:""}));N(Z)}})}),e.jsxs(m,{level:5,children:[X("Update Information"),e.jsx("span",{className:"text-[#FF0C0C]",children:" *"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(H.Item,{name:"isUpdateVersion",valuePropName:"checked",label:"",className:"mb-1",children:e.jsx(mt,{checked:g,onChange:()=>S(!g)})}),e.jsxs(i,{className:"ml-2",children:[X("Version")," ",e.jsx("span",{className:"text-[#FF0C0C]",children:"*"})," (",X("The profiles' OS without this version will be randomly assigned a version of that OS"),")"]})]}),e.jsx(H.Item,{name:"versionSelected",children:e.jsx(be,{disabled:!g,showSearch:!0,style:{width:"100%"},placeholder:X("Select"),optionFilterProp:"label",options:w})}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(H.Item,{name:"isUpdateExtension",valuePropName:"checked",label:"",className:"mb-1",children:e.jsx(mt,{checked:x,onChange:()=>y(!x)})}),e.jsx(i,{className:"ml-2",children:X("Extension")})]}),e.jsx(H.Item,{name:"extensionSelected",children:e.jsx(be,{disabled:!x,mode:"multiple",tagRender:R=>e.jsx(Ye,{closable:R.closable,onClose:R.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px"},children:nt(R.label,20)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:X("Select"),optionFilterProp:"label",options:Q,onChange:R=>{const Z=B==null?void 0:B.filter(U=>!R.some(K=>K.value==U.id)).map(U=>({value:U.id,label:U.name,title:""}));F(Z)}})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H.Item,{name:"isUpdateCmd",valuePropName:"checked",label:"",className:"mb-1",children:e.jsx(mt,{checked:E,onChange:()=>h(!E)})}),e.jsx(i,{className:"ml-2",children:X("Custom launch browser parameters")})]}),e.jsx(H.Item,{name:"cmd",children:e.jsx(Pe,{disabled:!E,placeholder:X("Launch browser parameters")})})]})})})})}function Ft({selectedProfile:t,setSelectedRowKeys:s}){const[r,a]=c.useState(!1),{t:n}=re();return e.jsxs(e.Fragment,{children:[e.jsx(he,{icon:e.jsx(Al,{}),label:n("Update Multiple"),typebutton:"primary",solid:!t,onClick:()=>a(!0),classStyle:t?"":"bg-[var(--color-white)] !text-[var(--color-blue-600)] hover:!text-[var(--color-white)]"}),e.jsx(zl,{openModal:r,setOpenModal:a,selectedProfile:t??[],setSelectedRowKeys:s})]})}function Ql(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 21C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H10.4142L12.4142 5H20C20.5523 5 21 5.44772 21 6V9H19V7H11.5858L9.58579 5H4V16.998L5.5 11H22.5L20.1894 20.2425C20.0781 20.6877 19.6781 21 19.2192 21H3ZM19.9384 13H7.06155L5.56155 19H18.4384L19.9384 13Z"}}]})(t)}function Wl(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"}}]})(t)}function Ul(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14 14.252V16.3414C13.3744 16.1203 12.7013 16 12 16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14C12.6906 14 13.3608 14.0875 14 14.252ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM18.5858 17L16.7574 15.1716L18.1716 13.7574L22.4142 18L18.1716 22.2426L16.7574 20.8284L18.5858 19H15V17H18.5858Z"}}]})(t)}const Kt=({selectedProfile:t})=>{const{t:s}=re(),r=[{label:"Json",key:1},{label:"Key value",key:2}],a=async l=>{t.join("");const o=[...t],i={data:(await Qs(o,l)).data.content,fileName:l==1?"cookies.json":"cookies.txt"};l==1?window.api.exportFileJson(i).then(d=>{d&&n(d)}):window.api.exportFile(i).then(d=>{d&&n(d)})},n=l=>{const o=l.substring(0,l.lastIndexOf("\\"));Ws.success({content:e.jsxs("span",{children:["Export Success ",e.jsx("span",{className:"font-bold ",children:"Open now"})]}),onClick:()=>{window.api.openFolder(o)},style:{cursor:"pointer"}})};return e.jsx(e.Fragment,{children:e.jsx(it,{content:e.jsx(De,{className:"min-w-[100px]",dataSource:r,renderItem:l=>e.jsx(De.Item,{className:"cursor-pointer !px-1 !py-1 hover:font-bold",onClick:()=>a(l.key),children:l.label},l.key)}),trigger:"click",placement:"bottom",children:e.jsx(he,{icon:e.jsx(Ql,{}),typebutton:"primary",label:s("Export cookies")})})})},Yl="_border_hidden_h2bv9_1",Xl={border_hidden:Yl},Gl=Gt.div`
  display: flex;
  flex-flow: row wrap;
  justify-content: space-between;
  // max-width: 100%;

  // @media (min-width: 1024px) {
  //   flex-wrap: nowrap;
  // }
`;Gt.div`
  display: block;
  max-width: ${We(500,500)};
  flex: 0 0: ${We(500,500)};
  flex-direction: column;
  height: 100%;

  @media (min-width: 1094px) {
    display: block;
    flex: 0 0 ${We(500)};
    max-width: ${We(500)};
    height: 100%;
  }

  @media (min-width: 1320px) {
    display: block;
    flex: 0 0 ${We(700)};
    max-width: ${We(700)};
    height: 100%;
  }

  @media (min-width: 1800px) {
    display: block;
    flex: 0 0 ${We(500,1e3)};
    max-width: ${We(500,1e3)};
    height: 100%;
  }
`;Gt.img`
  width: 100%;
  height: 100%;
  // background-image: url(${t=>t.$bgImage});
  background-size: cover;
  // background-position: center;
  background-repeat: no-repeat;
  
  // @media (min-width: 1450px) {
  //   background-image: url(${t=>t.$bgImage});
  // }
`;const Jl=({tabs:t,handleChangeTab:s,defaultActiveKey:r,dataCount:a,...n})=>{const{theme:l}=se(y=>y.display),[o,m]=c.useState([]),[i,d]=c.useState(r),{t:p}=re(),u=zt("DISPLAY");c.useEffect(()=>{x()},[t,i,l,u==null?void 0:u.language]),c.useEffect(()=>{s(r),d(r)},[r]);const f=y=>{s(y),d(y)},x=()=>{const y=t.filter(g=>g.isHidden===!1).map(g=>({key:g.key,label:e.jsx("div",{children:g.key==i?e.jsxs("div",{className:"flex gap-x-[5px] items-center",children:[e.jsx("span",{className:"bg-[#F34730] text-[#FFFFFF] p-[0px_4px] rounded-[2px]",children:(r!="folder",g.total>0?g.total:0)}),e.jsx("span",{className:"font-semibold text-[16px]",children:p(g.title)})]}):e.jsxs("div",{className:"flex gap-x-[5px] items-center",children:[e.jsx("span",{className:"bg-[#ECECEC] text-[#343333] p-[0px_4px] rounded-[2px]",children:g.total>0?g.total:0}),e.jsx("span",{className:`font-semibold text-[16px] ${l=="light"?"text-[#343333]":"text-[##343333]"}`,children:p(g.title)})]})})}));m(y)};return e.jsx(Gl,{children:e.jsxs("div",{children:[e.jsx(Rn,{className:`${Xl.border_hidden}`,defaultActiveKey:r,items:o,activeKey:r,onChange:y=>f(y)}),r!=="folder"&&r!=="folder_local"&&r!=="share_with_me"&&n&&e.jsx("div",{className:"flex justify-start",children:e.jsx(Pr,{widthSearch:400,placeholder:"Search by name",...n,tabLength:t.length})})]})})},Fs=[{key:"cloud",title:"Cloud",type:"CLOUD",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"local",title:"Local",type:"LOCAL",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"share_with_me",title:"Shared with me",type:"SHARE_WITH_ME",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"folder",title:"Folders",type:"FOLDERS",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"folder_local",title:"Folders Local",type:"FOLDERS_LOCAL",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"folder_share",title:"Folders Share",type:"FOLDERS_SHARE",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0}];function Zl({setColumns:t,filterState:s,setFilterState:r,selectedRowKeys:a,setSelectedRowKeys:n,handleChangeFingerPrint:l,toggleModal:o,handleDelete:m,handleExportData:i,folder_uuid:d,arrUuidProfilesRun:p,defaultActiveKey:u,setDefaultActiveKey:f,filterFolderState:x,setFilterFolderState:y,userShareFolder:g,setIsOpenAutomation:S}){const E=Se();Te.useToken();const[h,L]=c.useState(""),[I,A]=c.useState(""),{t:N}=re(),Q=c.useCallback(V=>{V==="START"?window.api.openProfiles(a):window.api.closeProfiles(a)},[a]),F=c.useCallback(()=>{window.api.forceStop(a)},[a]),w=V=>r(O=>({...O,dataFilter:{...O.dataFilter,page:1,search:V}})),_=ve(),C=c.useContext(we),D=Ra(),W=Ds(),{state:k}=W,B=qt(),{isLocalActiveTab:Y}=se(V=>V.display),{currentCharge:M}=se(V=>V.chargeSlice),X=["trial_day","common"],[J,z]=c.useState(!1);c.useEffect(()=>{M&&M.charge.type&&(X.includes(M.charge.type)?z(!0):z(!1))},[M]);const fe=()=>{if(Y)switch(u){case"local":f("local");break;case"folder_local":f("folder_local");break;default:f("local");break}else switch(u){case"cloud":f("cloud");break;case"folder":f("folder");break;case"folder_share":f("folder_share");break;case"share_with_me":f("share_with_me");break;default:f("cloud");break}};c.useEffect(()=>{M&&M.isShowCloud&&!M.isShowLocal?f("cloud"):M&&!M.isShowCloud&&M.isShowLocal?f("local"):M&&M.isShowCloud&&M.isShowLocal?fe():f("")},[M]),c.useEffect(()=>{fe()},[Y]);const ce=V=>{switch(f(V),k&&D($s.profiles,{state:null}),n([]),V){case"local":C==null||C.setArrayKeyActive([""]),B(dt(!0));break;case"folder":B(dt(!1)),y(O=>({...O,dataFilter:{...O.dataFilter,type:"owner"}})),_.invalidateQueries(P.FOLDER_OWNER,{refetchInactive:!0}),_.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0});break;case"share_with_me":B(dt(!1)),_.invalidateQueries(P.GET_LIST_PROFILE_SHARE);break;case"folder_local":B(dt(!0)),y(O=>({...O,dataFilter:{...O.dataFilter,type:"local"}})),_.invalidateQueries(P.FOLDER_LOCAL,{refetchInactive:!0});break;default:C==null||C.setArrayKeyActive([""]),B(dt(!1));break}C==null||C.setRightMenu({...C==null?void 0:C.rightMenu,visible:!1,x:0,y:0}),L(""),r(O=>({...O,dataFilter:{...ht,mode:V}}))},{data:Ne}=ie({queryFn:()=>St(ht,"cloud"),queryKey:[P.PROFILE_CLOUD]}),{data:Ee}=ie({queryFn:()=>St(ht,"local"),queryKey:[P.PROFILE_LOCAL]}),{data:_e}=ie({queryFn:()=>Js(),queryKey:[P.PROFILE_SHARE_WITH_ME]}),{data:ke}=ie({queryFn:()=>Ze(x.dataFilter,"owner"),queryKey:[P.FOLDER_OWNER]}),{data:ue}=ie({queryFn:()=>Ze(x.dataFilter,"local"),queryKey:[P.FOLDER_LOCAL]});c.useEffect(()=>(window.electron.ipcRenderer.on("reload_total_profile_local",()=>{_.invalidateQueries(P.PROFILE_LOCAL,{refetchInactive:!0})}),()=>window.electron.ipcRenderer.removeAllListeners("reload_total_profile_local")),[]);const R=c.useMemo(()=>(Fs.forEach(O=>{O.type==="CLOUD"?(O.total=(Ne==null?void 0:Ne.data.meta.total)||0,O.totalProfileIsRun=0,M&&M.charge.profile>0?O.isHidden=!1:O.isHidden=!0):O.type==="SHARE_WITH_ME"?(O.total=(_e==null?void 0:_e.data.content.length)||0,O.totalProfileIsRun=0,M&&(M.roles.includes("member")||!M.roles.includes("member")&&["trial_day","common"].includes(M.charge.type.toLowerCase()))&&M.charge.profile&&M.charge.profile_share>0,O.isHidden=!0):O.type==="LOCAL"?(O.total=(Ee==null?void 0:Ee.data.meta.total)||0,O.totalProfileIsRun=0,M&&M.roles.includes("active_local")&&(M.charge.profile_local>0||M.charge.profile_local===-1)?O.isHidden=!1:O.isHidden=!0):O.type==="FOLDERS"?(O.total=(ke==null?void 0:ke.data.meta.total)||0,O.totalProfileIsRun=0,M&&M.charge.profile>0?O.isHidden=!1:O.isHidden=!0):O.type==="FOLDERS_LOCAL"&&(O.total=(ue==null?void 0:ue.data.meta.total)||0,O.totalProfileIsRun=0,M&&M.roles.includes("active_local")&&(M.charge.profile_local>0||M.charge.profile_local===-1)?O.isHidden=!1:O.isHidden=!0)}),[...Fs.filter(O=>O.isHidden===!1)]),[Ne,Ee,_e,ke,ue,M]);c.useEffect(()=>{s.dataFilter.search!==""&&A(s.dataFilter.search)},[s.dataFilter.search]);const Z=(V,O)=>{V===null&&!Y?f("cloud"):V===null&&Y?f("local"):V&&O&&!Y?f("folder_share"):V&&!O&&Y?f("folder_local"):V&&!O&&!Y&&f("folder")};c.useEffect(()=>{Z(d,g)},[d,g]);const U=[{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStartFigma,{width:14,height:14})}),label:`${N("Start")} ${a?a.length>1?a.length+" "+N("Profiles"):a.length+" "+N("Profile"):"0 "+N("Profile")}`,type:"primary",action:()=>{Q("START")},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconPauseFigma,{width:14,height:14})}),label:`${N("Stop")} ${a?a.length>1?a.length+" "+N("Profiles"):a.length+" "+N("Profile"):"0 "+N("Profile")}`,type:"error",action:()=>{Q("STOP")},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStopFigma,{width:14,height:14})}),label:N("Force Stop"),type:"error",action:()=>{F()},mode:["cloud","local"],isDisabled:!p.some(V=>a.includes(V))},{icon:e.jsx(As,{}),label:N("Delete"),type:"error",action:()=>{m(!0,{ids:a},"profile")},mode:["cloud","local"],isDisabled:p.some(V=>a.includes(V))},{icon:e.jsx(Qt,{}),label:N("Proxy"),type:"primary",action:()=>{o(!0,"Change proxy",a)},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(Ae.IconAutomationFigma,{width:14,height:14}),label:N("Automation"),type:"primary",action:()=>S(!0),mode:["cloud","local"],isDisabled:!!(M&&M.charge.type==="common")},{element:e.jsx(Kt,{selectedProfile:a}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(zs,{}),label:N("Transfer Profile"),type:"primary",action:()=>{if(J)return Ws.error("Usage limit has been reached. Please upgrade your Subscription Plan.");o(!0,"Transfer Profile",a)},mode:["cloud","share_with_me","local"],isDisabled:p.some(V=>a.includes(V))||Y?Y:!1},{icon:e.jsx(Vs,{}),label:N("Change fingerprint"),type:"primary",action:()=>{l(a)},mode:["cloud","local"],isDisabled:p.some(V=>a.includes(V))},{element:e.jsx(Ft,{selectedProfile:a,setSelectedRowKeys:n}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(qs,{}),label:N("Export Data"),type:"primary",action:()=>{i(a,I)},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(Hs,{}),label:N("Add to folder"),type:"primary",action:()=>{o(!0,"Add Profile to Folder",a)},mode:["cloud","local"],isDisabled:!1}],K=[{element:e.jsx(Ft,{setSelectedRowKeys:n}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{element:e.jsx(ql,{}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(nr,{}),label:N("Export All Data"),typebutton:"primary",action:()=>{i("exportAll",I),A("")},type:"button",mode:["cloud","local"],isDisabled:!1,classStyle:"bg-[var(--color-white)] !text-[var(--color-brown-200)] shadow-[0_0.2rem_0_var(--color-brown-200)] border-[var(--color-brown-200)] hover:bg-[var(--color-brown-200)] hover:!text-[var(--color-white)]"}],pe={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(e.Fragment,{children:e.jsxs("div",{style:{backgroundColor:E.backgroundNormal},children:[e.jsx(Jl,{tabs:R,handleChangeTab:ce,FilterModal:Hl,setColumns:t,filterState:s,setFilterState:r,search:h,setSearch:L,onSearch:w,defaultActiveKey:u}),e.jsx("div",{className:"flex flex-wrap items-center gap-3 m-[10px_0px_15px_0px] overflow-hidden pb-2",children:u!=="folder"&&u!=="folder_local"&&u!=="folder_share"&&e.jsx(e.Fragment,{children:a.length>0?U.map((V,O)=>V.mode.includes(s.dataFilter.mode)&&(V.type!="JSXElement"?e.jsx(he,{icon:V.icon,label:V.label,onClick:V.action,typebutton:V.type,isDisabled:V.isDisabled},O):e.jsx("div",{style:V.isDisabled?pe:void 0,children:V.element},O))):K.map((V,O)=>V.mode.includes(s.dataFilter.mode)&&(V.type==="button"?e.jsx(he,{icon:V.icon,label:V.label,onClick:V.action,typebutton:V.typebutton,solid:!0,isDisabled:V.isDisabled,classStyle:V.classStyle},O):e.jsx("div",{style:V.isDisabled?pe:void 0,children:V.element},O)))})})]})})}const Kl=c.memo(Zl),eo="_popup_1bg4l_1",to={popup:eo};function so(t){return Ke({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M12 1.19c1.088 0 2.056.768 2.056 1.714 0 .947-.921 1.715-2.056 1.715-.13 0-.3-.022-.509-.064a.685.685 0 0 0-.475.076l-7.37 4.195a.344.344 0 0 0 .001.597l7.99 4.49c.208.116.461.116.669 0l8.034-4.468a.343.343 0 0 0 .003-.598l-2.507-1.424a.683.683 0 0 0-.67-.003l-2.647 1.468a.234.234 0 0 0-.119.18l-.001.025c0 .946-.921 1.714-2.056 1.714s-2.056-.768-2.056-1.714c0-.947.921-1.715 2.056-1.715.042 0 .09.002.145.007l.087.008.096.013a.685.685 0 0 0 .425-.08l3.913-2.173c.3-.166.662-.171.965-.017l.04.023 5.465 3.104c.686.39.693 1.368.03 1.773l-.037.021-3.656 2.033a.343.343 0 0 0 .007.604l3.62 1.906c.72.378.736 1.402.03 1.804l-10.995 6.272a1.03 1.03 0 0 1-1.019 0L.526 16.43a1.03 1.03 0 0 1 .034-1.806l3.66-1.911a.343.343 0 0 0 .01-.603L.524 10.029a1.03 1.03 0 0 1-.041-1.77l.036-.021L9.618 3.06a.688.688 0 0 0 .308-.369l.011-.036c.32-.952 1.046-1.466 2.063-1.466Zm5.076 12.63-4.492 2.586-.041.022c-.306.158-.671.152-.973-.018l-4.478-2.527a.682.682 0 0 0-.65-.01L3.86 15.224a.343.343 0 0 0-.012.602l7.887 4.515c.21.12.467.121.677 0l7.956-4.547a.343.343 0 0 0-.01-.602l-2.623-1.384a.683.683 0 0 0-.659.012z"}}]})(t)}const ao=({record:t,visible:s,x:r,y:a,toggleModal:n,handleDelete:l,handleCopyProxy:o,handleDuplicateProfile:m,handleChangeFingerPrint:i,handleGoToFolder:d,handleRefuseShare:p})=>{const[u]=re(),f=c.useRef(null),{token:x}=Te.useToken(),{message:y}=ye.useApp(),{theme:g}=se(w=>w.display),S=c.useContext(we),{isLocalActiveTab:E}=se(w=>w.display),{currentCharge:h}=se(w=>w.chargeSlice),L=["trial_day","common"],[I,A]=c.useState(!1);c.useEffect(()=>{h&&h.charge.type&&(L.includes(h.charge.type)?A(!0):A(!1))},[h]);const N=c.useMemo(()=>{var w;return!((w=t==null?void 0:t.proxy)!=null&&w.proxy_config_id)},[t]),Q=c.useMemo(()=>[{label:"Share",icon:e.jsx(tr,{}),action:()=>{n(!0,"Share Profile",t.uuid,"modal_share")},role:[""],isDisabled:!0},{label:"Add to folder",icon:e.jsx(ur,{}),action:()=>{n(!0,"Add Profile to Folder",t.uuid)},role:[""],isDisabled:!1},{label:"Copy",icon:e.jsx(pr,{}),child:[{label:"Copy UUID",action:w=>{w.stopPropagation(),navigator.clipboard.writeText(t.uuid),y.success("Copied")}},{label:"Copy proxy",action:w=>{w.stopPropagation();const _=o(t.proxy);navigator.clipboard.writeText(_),y.success("Copied")}}],role:["","admin","guest"],isDisabled:!1},{label:"Cookies",icon:e.jsx(Sr,{}),action:()=>{n(!0,"Cookies manager",t.uuid)},role:["","admin","guest"],isDisabled:!1},{label:"Transfer",icon:e.jsx(wr,{}),action:()=>{if(!N)return y.error("Cannot transfer profile using proxy config");if(I)return y.error("Usage limit has been reached. Please upgrade your Subscription Plan.");n(!0,"Transfer Profile",t.uuid)},role:[""],isDisabled:E||!1},{label:"Change fingerprint",icon:e.jsx(mr,{}),action:()=>{i(t.uuid)},role:[""],isDisabled:S==null?void 0:S.arrUuidProfilesRun.some(w=>w==(t==null?void 0:t.uuid))},{label:"Duplicate",icon:e.jsx(lr,{}),child:[{label:"Duplicate configs",action:w=>{w.stopPropagation(),m(t.uuid,"config")}},{label:"Duplicate all",action:w=>{w.stopPropagation(),m(t.uuid,"all")}}],role:["","admin"],isDisabled:!1},{label:"Go to folder",icon:e.jsx($a,{}),action:()=>{d(t.uuid)},role:[""],isDisabled:!1},{label:"Edit",icon:e.jsx(hr,{}),action:()=>{n(!0,"Edit Profile",t.uuid)},role:["","admin"],isDisabled:!1},{label:"Log proxy",icon:e.jsx(so,{}),action:()=>{n(!0,"Log proxy history",t.uuid)},role:["","admin","guest"],isDisabled:!1},{label:"Delete",icon:e.jsx(fr,{}),action:()=>{l(!1,{name:t.name,ids:[t.uuid]},"profile")},role:[""],isDisabled:S==null?void 0:S.arrUuidProfilesRun.some(w=>w==(t==null?void 0:t.uuid))},{label:"Delete from folder",icon:e.jsx(_r,{}),action:()=>{l(!0,{folder_id:t.folder_id,uuid_browser:t.uuid},"from-folder")},role:[""],isDisabled:!1},{label:"Refuse",icon:e.jsx(Yt,{}),action:()=>{p(t.uuid)},role:["admin","guest"],isDisabled:!1}],[t]),F={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(Re,{theme:{token:{colorBgElevated:`${x.colorBgContainer}`,boxShadowSecondary:`${g=="light"?"0 2px 8px #00000026":"0 2px 8px #64646472"}`}},children:e.jsx("div",{id:"rightMenu",className:to.popup,style:{position:"absolute",top:`${a}px`,left:`${r}px`,visibility:`${s?"visible":"hidden"}`,opacity:`${s?"1":"0"}`,willChange:"visibility, opacity",boxShadow:`${g=="light"?"0 2px 8px #00000026":"0 2px 8px #64646472"}`,WebkitBoxShadow:`${g=="light"?"0 2px 8px #00000026":"0 2px 8px #64646472"}`},ref:f,children:e.jsx(De,{style:{backgroundColor:x.colorBgContainer},children:Q.map((w,_)=>t&&w.role.includes(t.shares_role.toLowerCase())&&(w.child?e.jsx(it,{placement:"rightTop",trigger:"click",content:e.jsx(De,{style:{backgroundColor:x.colorBgContainer},children:w.child.map((C,D)=>e.jsx(De.Item,{onClick:C.action,className:"cursor-pointer px-2 py-[5px] m-0 !text-[12px] hover:bg-[#6464640d]",children:e.jsx(le.Text,{className:"leading-3 select-none",children:u(C.label)})},D))}),children:e.jsx(De.Item,{style:w.isDisabled?F:void 0,onClick:C=>{C.stopPropagation()},children:e.jsxs(le,{className:"px-2 py-[5px] flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-4 text-[17px] flex items-center",children:w.icon}),e.jsx("span",{children:u(w.label)})]}),e.jsx(cr,{})]})},_)},_):w.label=="Delete from folder"?(t==null?void 0:t.folder_id)&&e.jsx(De.Item,{onClick:w.action,style:w.isDisabled?F:void 0,children:e.jsxs(le.Text,{className:"px-2 flex items-center py-[5px]",children:[e.jsx("span",{className:"mr-4 text-[17px] flex items-center",children:w.icon}),e.jsx("span",{children:u(w.label)})]})},_):e.jsx(De.Item,{onClick:w.action,style:w.isDisabled?F:void 0,children:e.jsxs(le.Text,{className:"px-2 flex items-center py-[5px]",children:[e.jsx("span",{className:"mr-4 text-[17px] flex items-center",children:w.icon}),e.jsx("span",{children:u(w.label)})]})},_)))})})})},ro="_collapse_hm_1uluz_1",no="__dark_1uluz_41",lo="_pagination_hm_1uluz_73",jt={collapse_hm:ro,_dark:no,pagination_hm:lo},oo=({selectedRowKeys:t,setSelectedRowKeys:s,arrProfileSeclected:r,handleDelete:a,toggleModal:n,handleChangeFingerPrint:l,data:o,handleExportData:m,arrUuidProfilesRun:i,filter:d,folder_id:p})=>{const{t:u}=re(),f=c.useCallback(F=>{F==="START"?window.api.openProfiles(t):window.api.closeProfiles(t)},[t]),{message:x}=ye.useApp(),y=c.useCallback(()=>{window.api.forceStop(t)},[t]),g=c.useContext(we),{isLocalActiveTab:S}=se(F=>F.display),{currentCharge:E}=se(F=>F.chargeSlice),h=["trial_day","common"],[L,I]=c.useState(!1);c.useEffect(()=>{E&&E.charge.type&&(h.includes(E.charge.type)?I(!0):I(!1))},[E]);const A=[{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStartFigma,{width:14,height:14})}),label:`${u("Start")} ${t?t.length>1?t.length+" "+u("Profiles"):t.length+" "+u("Profile"):"0 "+u("Profile")}`,type:"primary",action:()=>{f("START")},show:["cloud"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconPauseFigma,{width:14,height:14})}),label:`${u("Stop")} ${t?t.length>1?t.length+" "+u("Profiles"):t.length+" "+u("Profile"):"0 "+u("Profile")}`,type:"error",action:()=>{f("STOP")},show:["cloud"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStopFigma,{width:14,height:14})}),label:u("Force Stop"),type:"error",action:()=>{y()},show:["cloud","local"],isDisabled:!i.some(F=>t.includes(F))},{icon:e.jsx(As,{}),label:u("Delete"),type:"error",action:()=>{a(!0,{ids:t},"profile")},show:["cloud"],isDisabled:i.some(F=>t.includes(F))},{icon:e.jsx(Qt,{}),label:u("Proxy"),type:"primary",action:()=>{n(!0,"Change proxy",{selectedRowKeys:t,folder_id:o==null?void 0:o.uuid,filter:d})},show:["cloud"],isDisabled:!1},{icon:e.jsx(Ae.IconAutomationFigma,{width:14,height:14}),label:u("Automation"),type:"primary",action:()=>{g==null||g.setIsOpenAutomation(!0),g==null||g.setSelectedRowKeys(r),g==null||g.setDataShare({folder_id:p,filter:d})},show:["cloud","local"],isDisabled:!!(E&&E.charge.type==="common")},{element:e.jsx(Kt,{selectedProfile:t}),type:"JSXElement",show:["cloud"],isDisabled:!1},{icon:e.jsx(zs,{}),label:u("Transfer Profile"),type:"primary",action:()=>{if(L)return x.error("Usage limit has been reached. Please upgrade your Subscription Plan.");n(!0,"Transfer Profile",t)},show:["cloud"],isDisabled:i.some(F=>t.includes(F))||S?S:!1},{icon:e.jsx(Vs,{}),label:u("Change fingerprint"),type:"primary",action:()=>{l(t)},show:["cloud"],isDisabled:i.some(F=>t.includes(F))},{element:e.jsx(Ft,{selectedProfile:t,setSelectedRowKeys:s}),type:"JSXElement",show:["cloud"],isDisabled:!1},{icon:e.jsx(Hs,{}),label:u("Add to folder"),type:"primary",action:()=>{n(!0,"Add Profile to Folder",t)},show:["cloud"],isDisabled:!1},{icon:e.jsx(qs,{}),label:u("Export Data"),type:"primary",action:()=>{m(t,"")},show:["cloud"],isDisabled:!1}],N=[{element:e.jsx(Ft,{setSelectedRowKeys:s}),type:"JSXElement",isDisabled:!1}],Q={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(e.Fragment,{children:t.length>0?A.map((F,w)=>e.jsx("div",{children:o.id!==void 0&&F.show.includes("cloud")&&(F.type!="JSXElement"?e.jsx(he,{icon:F.icon,label:F.label,onClick:F.action,typebutton:F.type,isDisabled:F.isDisabled}):e.jsx("div",{style:F.isDisabled?Q:void 0,children:F.element}))},w)):o.id!==void 0&&N.map(F=>e.jsx("span",{style:F.isDisabled?Q:void 0,children:F.element},Math.random()))})},io=({rowSelection:t,columns:s,rows:r,isLoading:a,selectedRowKeys:n,onRow:l,onChange:o})=>e.jsx(Qe,{rowSelection:t,className:"w-full h-full",columns:s,tableLayout:"auto",dataSource:r,rowKey:"uuid",loading:{spinning:a},onRow:Fe.isEmpty(n)?l:void 0,pagination:!1,size:"small",onChange:o}),co=({folder:t,columns:s,handleDelete:r,toggleModal:a,handleChangeFingerPrint:n,handleExportData:l,onRow:o})=>{const[m,i]=c.useState([]),[d,p]=c.useState([]),u=c.useRef(new Set),{t:f}=re(),x=se(k=>k.profileStateSlice.profileStatus),{isLocalActiveTab:y}=se(k=>k.display),[g,S]=c.useState([]),h={selectedRowKeys:d,onChange:k=>{p(k)}},[L,I]=c.useState({page:1,limit:10,name:[""]}),A=(...k)=>{const[B,Y]=k;I(M=>({...M,page:B,limit:Y}))},N=k=>{I(B=>({...B,page:1,name:[k]}))},[Q,F]=c.useState(""),{data:w,isLoading:_}=ie({queryFn:()=>Bs(y,t.uuid,L),queryKey:[P.GET_PROFILE_BY_FOLDER,t.uuid,L]}),[C,D]=c.useState(((w==null?void 0:w.data.data.content)||[]).map(k=>({...k}))||[]);c.useLayoutEffect(()=>{window.api.getBrowserRunnings().then(k=>{u.current=new Set(k.keys()),D(((w==null?void 0:w.data.data.content)||[]).map(B=>({...B,page:1,limit:10,runningStatus:{content:"",isDisabled:!1,toReady:!u.current.has(B.uuid),type:u.current.has(B.uuid)?"success":"warning"}}))||[])})},[w==null?void 0:w.data.data]),c.useEffect(()=>{window.api.getBrowserRunnings().then(k=>{const B=Array.from(k.keys());i(B)})},[C,x]),c.useEffect(()=>{const k=w==null?void 0:w.data.data.content.filter(B=>d.includes(B.uuid)).map(B=>({uuid:B.uuid,name:B.name}));S(k||[])},[d]);const W=(k,B,Y,M)=>{const{field:X,order:J}=Y;switch(X){case"name":I(J==="ascend"?z=>({...z,orderName:1}):J==="descend"?z=>({...z,orderName:2}):z=>({...z,orderName:null}));break;case"last_open":I(J==="ascend"?z=>({...z,orderLastOpen:1}):J==="descend"?z=>({...z,orderLastOpen:2}):z=>({...z,orderLastOpen:null}));break}};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-5 mt-0 min-[300px]",children:e.jsx(Fr,{className:"w-[180px] sm:w-[300px]",placeholder:"Search by name",onClickSearch:k=>N(k),onChange:k=>F(k.target.value),value:Q,onPressEnter:k=>{N(k.target.value)}})}),e.jsx("div",{className:"flex flex-wrap items-center gap-3 py-[10px] overflow-hidden",children:e.jsx(oo,{selectedRowKeys:d,arrProfileSeclected:g,setSelectedRowKeys:p,handleDelete:r,toggleModal:a,handleChangeFingerPrint:n,data:t,handleExportData:l,arrUuidProfilesRun:m,filter:L,folder_id:t.uuid})}),e.jsx("div",{className:"relative rounded-[5px] w-full h-full",children:e.jsx(io,{rowSelection:h,columns:s,rows:C,isLoading:_,uuidFolder:t.uuid,selectedRowKeys:d,onRow:o,onChange:W})}),e.jsxs("div",{className:"w-full p-4 gap-x-2 flex items-center justify-end h-[50px]",children:[e.jsx("div",{className:"",children:e.jsx(Be,{className:"!text-[16px]",label:`${w!=null&&w.data.data.content&&(w==null?void 0:w.data.data.content.length)>1?"Profiles":"Profile"}: ${(w==null?void 0:w.data.meta.total)??0}`})}),e.jsx(lt,{showTitle:!1,pageSize:L.limit,total:(w==null?void 0:w.data.meta.total)||0,onChange:A,current:L.page,showQuickJumper:!0,showSizeChanger:!0,className:`${jt.pagination_hm}`,locale:{page:f("Page"),items_per_page:f("page"),jump_to:f("Go to")}})]})]})},uo={vi:Us,en:Xt,cn:Ys},po=({dataFolder:t,folder_uuid:s,columns:r,handleDelete:a,toggleModal:n,handleChangeFingerPrint:l,handleExportData:o,onRow:m})=>{const{theme:i}=se(x=>x.display),d=Se();Te.useToken();const{t:p}=re(),u=zt("DISPLAY"),f=u!=null&&u.language?u==null?void 0:u.language:Xt;return e.jsx(Re,{theme:{components:{Collapse:{headerBg:`${i==="light"?"#f1f1f1":"rgba(255, 255, 255, 0.04)"}`}}},children:e.jsx("div",{className:"flex flex-col gap-y-[1rem] p-2",children:t&&t.length>0?t.map((x,y)=>e.jsx(Ut,{defaultActiveKey:s,className:`
                                ${s&&s==x.uuid?"hm_collapse_active":""} 
                                ${i==="light"?jt.collapse_hm:jt.collapse_hm+" "+jt._dark}
                                `,items:[{key:x.uuid,label:e.jsxs("div",{className:"-translate-y-[15px]",children:[e.jsx("div",{className:"flex flex-row justify-between items-center gap-x-[20px]",children:e.jsxs("div",{className:"flex items-center gap-x-[5px]",style:{color:d.titlePrimary},children:[e.jsx("span",{className:"mt-1",children:e.jsx(Da,{size:30})}),e.jsx("span",{className:"font-bold text-[20px] leading-[30px] text-center",children:x.name})]})}),e.jsx("div",{className:"h-full relative",children:e.jsx("div",{className:"absolute text-[16px] right-3 -top-[3px]",children:x.created_at?Wr(new Date(x==null?void 0:x.created_at),"LLLL dd, yyyy",{locale:uo[f]}):""})}),e.jsxs("div",{className:" flex flex-row items-center gap-x-[10px] mt-1",children:[e.jsx("span",{className:"p-[5px_5px] rounded-full bg-[#FF1111]"}),e.jsx(Be,{className:"font-semibold !text-[16.33px]",label:x.total_browser?x.total_browser>1?x.total_browser+` ${p("profiles")}`:x.total_browser+` ${p("profile")}`:`0  + ${p("profile")}`})]}),e.jsx("div",{className:"flex flex-row items-center gap-x-[10px]",children:e.jsx(Be,{className:"!text-[14px]",label:x.user_share?" (share by: "+x.user_share+" )":""})})]}),children:e.jsx(co,{folder:x,columns:r,handleDelete:a,toggleModal:n,handleChangeFingerPrint:l,handleExportData:o,onRow:m})}],accordion:!0,expandIconPosition:"end",bordered:!1,ghost:!1},y)):e.jsx("div",{className:"my-[3rem]",children:e.jsx(xt,{image:xt.PRESENTED_IMAGE_SIMPLE})})})})},mo={"header-fixed":"_header-fixed_8q965_1"};function ho(t){return Ke({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M388.8 896.4v-27.198c.6-2.2 1.6-4.2 2-6.4 8.8-57.2 56.4-102.4 112.199-106.2 62.4-4.4 115.2 31.199 132.4 89.199 2.2 7.6 3.8 15.6 5.8 23.4v27.2c-.6 1.8-1.6 3.399-1.8 5.399-8.6 52.8-46.6 93-98.6 104.4-4 .8-8 2-12 3h-27.2c-1.8-.6-3.6-1.6-5.4-1.8-52-8.4-91.599-45.4-103.6-96.8-1.2-5-2.6-9.6-3.8-14.2zm252.4-768.797l-.001 27.202c-.6 2.2-1.6 4.2-1.8 6.4-9 57.6-56.8 102.6-113.2 106.2-62.2 4-114.8-32-131.8-90.2-2.2-7.401-3.8-15-5.6-22.401v-27.2c.6-1.8 1.6-3.4 2-5.2 9.6-52 39.8-86 90.2-102.2 6.6-2.2 13.6-3.4 20.4-5.2h27.2c1.8.6 3.6 1.6 5.4 1.8 52.2 8.6 91.6 45.4 103.6 96.8 1.201 4.8 2.401 9.4 3.601 13.999zm-.001 370.801v27.2c-.6 2.2-1.6 4.2-2 6.4-9 57.4-58.6 103.6-114.6 106-63 2.8-116.4-35.2-131.4-93.8-1.6-6.2-3-12.4-4.4-18.6v-27.2c.6-2.2 1.6-4.2 2-6.4 8.8-57.4 58.6-103.601 114.6-106.2 63-3 116.4 35.2 131.4 93.8 1.6 6.4 3 12.6 4.4 18.8z"}}]})(t)}function fo({item:t}){const{t:s}=re(),a=se(p=>p.profileStateSlice.profileStatus)[t.uuid]||t.runningStatus,n=p=>{window.api.openProfiles([p.uuid])},l=p=>{window.api.closeProfiles([p.uuid])},o=c.useContext(we),m=p=>{p.preventDefault(),p.stopPropagation();const u=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,button:0,clientX:p.clientX,clientY:p.clientY});p.target.dispatchEvent(u)},i=p=>{o==null||o.setRightMenu({record:null,visible:!1,x:0,y:0}),p.stopPropagation(),n(t)},d=p=>{o==null||o.setRightMenu({record:null,visible:!1,x:0,y:0}),p.stopPropagation(),l(t)};return e.jsx("div",{className:"min-h-[52px] flex flex-col justify-center",children:e.jsxs("div",{className:"flex gap-x-2 items-center justify-center",children:[a!=null&&a.toReady||!(a!=null&&a.toReady)&&(a==null?void 0:a.type)=="error"?e.jsx(ot,{label:s("Start"),type:"primary",className:"rounded-[6px] shadow-[0_0.075rem_0_#183153] py-1 px-3 flex gap-x-1 transition border-[#2263B3] text-[#fff] bg-[#2263B3]",typebutton:"primary",onClick:i,disabled:!!(a!=null&&a.isDisabled)}):e.jsx(ot,{type:"primary",label:s("Stop"),className:"rounded-[6px] shadow-[0_0.075rem_0_#fab005] py-1 px-3 flex gap-x-1 transition border-[#fab005)] text-[#fff] bg-[#2263B3]",typebutton:"warning",warning:!0,onClick:d,disabled:!!(a!=null&&a.isDisabled)}),e.jsx("div",{onClick:p=>m(p),className:"cursor-pointer flex items-center justify-center openRightMenu w-[20px] h-[20px] rounded-full hover:bg-gray-200 active:bg-gray-200 focus:bg-gray-200",children:e.jsx(ho,{})})]})})}const xo=c.memo(fo);function da({openModal:t,setOpenModal:s,status:r,profile:a}){const[n]=H.useForm(),{message:l}=ye.useApp(),o=ve(),{Title:m}=le,i=Se(),{isLoading:d,mutate:p}=Ve({mutationFn:async f=>{const{name:x,color:y}=f,g={browser_uuid:a.uuid,name:x,id:r==null?void 0:r.id,color:typeof y=="string"?y:y.toHex()};r?await Ga(g):await Ja(g)},onSuccess:()=>{o.invalidateQueries(P.listProfile),o.invalidateQueries(P.statusProfile),l.success("Update status successfully!"),n.resetFields(),s(!1)},onError:f=>{l.error(f.response.data||"The number of status is limited 10!"),n.resetFields(),s(!1)}}),u=()=>{s(!1),n.resetFields()};return e.jsx(He,{title:e.jsx(m,{style:{color:i.titlePrimary,fontSize:"20px"},children:r?"Update status":"Add new status"}),open:t,className:"absolute top-[35%] left-0 right-0 bottom-0",footer:[e.jsxs("div",{className:"flex justify-end",children:[e.jsx(he,{label:"Cancel",typebutton:"started",onClick:()=>u()}),e.jsx("div",{className:"ml-3",children:e.jsx(he,{label:r?"Update":"Add",typebutton:"button",onClick:()=>n.submit()})})]})],onCancel:()=>s(!1),confirmLoading:d,children:e.jsxs(H,{form:n,layout:"vertical",className:"flex",onFinish:p,initialValues:{name:(r==null?void 0:r.name)||"",color:(r==null?void 0:r.color)||"1677FF"},children:[e.jsx(H.Item,{name:"name",label:e.jsx("span",{style:{color:i.textPrimary,fontWeight:"600"},children:"Name"}),style:{flex:1},rules:[{required:!0,message:"Name is required!"},{max:15,message:"The name may not be greater than 15 characters!"}],className:"font-semibold "+Me["required-label"]+" "+Me["custom-label"]+" "+Me["custom-input-ant"],help:"",children:e.jsx(Pe,{})}),e.jsx(H.Item,{name:"color",label:e.jsx("span",{style:{color:i.textPrimary,fontWeight:"600"},children:"Color"}),className:"ml-2 font-bold",style:{width:100},children:e.jsx(Tl,{disabledAlpha:!0,showText:!0,format:"hex",defaultValue:n.getFieldValue("status"),presets:[{label:"Recommend",colors:["#ffaec9","#358799","#3a9069","#ed7d31","#d21e24"]}]})})]})})}const go=({status:t,profile:s})=>{const{message:r}=ye.useApp(),a=ve(),[n,l]=c.useState(!1),[o,m]=c.useState(!0),i=()=>{Bt().then(async d=>{d.isConfirmed&&(await Ka(t.id,s.uuid),a.invalidateQueries(P.statusProfile),a.invalidateQueries(P.listProfile),a.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),r.success("Status deleted successfully!"))})};return c.useEffect(()=>{m(n!==!0)},[n]),e.jsxs(e.Fragment,{children:[e.jsxs(Xs,{style:{display:o?"inline":"none"},children:[e.jsx(ot,{type:"text",size:"small",icon:e.jsx(gr,{}),onClick:()=>{l(!0),m(!1)}}),e.jsx(ot,{danger:!0,onClick:i,type:"text",size:"small",icon:e.jsx(br,{})})]}),e.jsx(da,{openModal:n,setOpenModal:l,status:t,profile:s})]})},bo=({data:t,setOpenStatus:s})=>{var f;const{message:r}=ye.useApp(),[a,n]=c.useState(!1),l=ve(),o=(f=t==null?void 0:t.uuid)==null?void 0:f.includes("local-"),{token:m}=Te.useToken(),{data:i}=ie({queryFn:()=>Wt(o),queryKey:[P.statusProfile,o]}),{t:d}=re(),{theme:p}=se(x=>x.display),u=async x=>{t.shares_role!="guest"?await Za({browser_uuid:t.uuid,...x}).then(()=>{r.success("Update status successfully!"),l.invalidateQueries(P.listProfile,{refetchInactive:!0}),l.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),s(!1)}).catch(y=>{r.error(y.response.data.title)}):r.error("You don't have permission to access this resource.")};return e.jsxs(e.Fragment,{children:[e.jsxs(De,{className:Me.popup,style:{backgroundColor:m.colorBgContainer,zIndex:999,width:"135px"},children:[e.jsx("div",{className:"pb-[5px] text-center pointer-events",style:{borderBottom:"1px solid #EDEDED"},children:e.jsx(le.Text,{className:"px-4 flex items-center pl-[0px] pr-[0px]",children:e.jsx("span",{className:"text-[14px] text-[#2263B3] font-[600] m-auto w-full",children:d("Status setting")})})}),e.jsxs("div",{style:{maxHeight:"160px",overflowX:"hidden",overflowY:"auto"},children:[Dt&&Dt.map((x,y)=>e.jsx(De.Item,{className:"cursor-pointer pointer-events-auto",onClick:()=>{u(x)},children:e.jsx(le.Text,{className:"px-4 flex  items-center pl-[0px] pr-[0px]",children:e.jsx("span",{className:"text-[14px]",style:{color:`#${x.color}`},children:d(x.name)})})},y)),i&&i.map((x,y)=>e.jsx(it,{content:e.jsx(go,{status:x,profile:t}),placement:"right",children:e.jsx(De.Item,{className:"cursor-pointer pointer-events-auto",onClick:()=>{u(x)},children:e.jsx(le.Text,{className:"px-4 flex  items-center pl-[0px] pr-[0px]",children:e.jsx("span",{className:"text-[14px]",style:{color:`#${x.color}`},children:x.name})})},y)},x.id))]}),e.jsx("div",{children:e.jsx(ot,{icon:e.jsx(xr,{}),type:"text",className:`${p=="light"?"hover:!bg-[#FFFFFF]":"hover:!bg-[#2263B3]"} w-[90%] m-auto text-[#2263B3] text-[14px]`,label:d("New status"),onClick:()=>n(!0),onMouseDown:x=>x.preventDefault()})})]}),e.jsx(da,{profile:t,openModal:a,setOpenModal:n})]})};function yo({data:t}){var p;const s=Se(),[r,a]=c.useState(!1),n=(p=t==null?void 0:t.uuid)==null?void 0:p.includes("local-"),{data:l}=ie({queryFn:()=>Wt(n),queryKey:[P.statusProfile,n]}),o=c.useMemo(()=>[...l||[],...Dt].find(({id:u})=>u===t.status_id),[l,t]),{t:m}=re(),i=(u,f)=>{u.stopPropagation(),a(f)},d=c.useContext(we);return c.useEffect(()=>{d==null||d.setRightMenu({record:null,visible:!1,x:0,y:0})},[r]),e.jsx(e.Fragment,{children:e.jsx(it,{content:e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(bo,{setOpenStatus:a,data:t})}),trigger:"click",placement:"left",open:r,children:e.jsx(Ue,{style:{color:`${o&&o.color?`#${o.color}`:s.textNormal}`,backgroundColor:"transparent",border:`1px solid #${ps((o==null?void 0:o.color)||"D9D9D9")}`,fontWeight:"500",boxShadow:`0px 0.1rem 0px #${ps((o==null?void 0:o.color)||"D9D9D9")}`},size:"small",onBlur:u=>i(u,!1),onClick:u=>i(u,!r),children:m((o==null?void 0:o.name)||"No Status")})})})}function ua(t){return Ke({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M0 7.5C0 7.22386 0.223858 7 0.5 7H3C3.27614 7 3.5 7.22386 3.5 7.5C3.5 7.77614 3.27614 8 3 8H0.5C0.223858 8 0 7.77614 0 7.5ZM5.75 7.5C5.75 7.22386 5.97386 7 6.25 7H8.75C9.02614 7 9.25 7.22386 9.25 7.5C9.25 7.77614 9.02614 8 8.75 8H6.25C5.97386 8 5.75 7.77614 5.75 7.5ZM12 7C11.7239 7 11.5 7.22386 11.5 7.5C11.5 7.77614 11.7239 8 12 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12Z",fill:"currentColor"}}]})(t)}function vo(t){const{profileData:s}=t,{theme:r}=se(l=>l.display),a=c.useContext(we),n=l=>{l.stopPropagation(),a==null||a.setDataNote({isOpen:!0,data:s})};return e.jsx(Re,{theme:{token:{colorBgSpotlight:`${r==="light"?"#FFFFFF":"#39383F"}`,colorTextLightSolid:`${r==="light"?"#000000":"#FFFFFF"}`}},children:e.jsxs("div",{className:"flex justify-center relative group min-h-[50px] cursor-pointer",onClick:l=>n(l),children:[(s.note===""||!s.note)&&e.jsxs(e.Fragment,{children:[e.jsx(ua,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-all duration-75 font-black opacity-100 group-hover:opacity-0 z-50"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-all duration-75 opacity-0 group-hover:opacity-100 z-50",children:e.jsx(Gs,{className:"hover:text-blue-700 cursor-pointer text-lg"})})]}),e.jsx("div",{className:"text-[14px] flex relative items-center",children:e.jsx(Mt,{placement:"bottom",title:s.note,children:e.jsx("span",{className:"max-w-[200px] line-clamp-2",children:s.note!==""?s.note:""})})})]})})}function jo({profileData:t}){var l,o,m,i,d,p,u,f;const s=c.useContext(we),{t:r}=re(),{proxy:a}=t,n=x=>{x.stopPropagation(),s==null||s.setDataProxy({isOpen:!0,proxy:a,profile:t})};return c.useEffect(()=>{s==null||s.setRightMenu({record:null,visible:!1,x:0,y:0})},[open]),e.jsx(e.Fragment,{children:a?e.jsxs("div",{className:"cursor-pointer text-[14px]",onClick:x=>n(x),children:[(a==null?void 0:a.details)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"m-0 text-center",children:a.details.org}),e.jsxs("p",{className:"flex m-0 text-center justify-center items-center",style:{gap:"0 8px"},children:[(l=a==null?void 0:a.info)!=null&&l.country&&((o=a==null?void 0:a.info)==null?void 0:o.country)!=="random"||a!=null&&a.details.country?e.jsx(Zr,{countryCode:(m=a.details.country)==null?void 0:m.toLocaleLowerCase(),svg:!0,style:{width:"1.5em",height:"1.5em",objectFit:"cover"},className:"rounded-full"}):e.jsx("img",{src:Kr,width:21,height:21,alt:"",className:"rounded-full flex justify-center items-center"}),e.jsx("span",{children:a.details.ip}),e.jsx(en,{data:a})]})]}),e.jsx("p",{className:"text-center m-0",style:{fontSize:12},children:a.proxy_config?`(${(i=a.proxy_config)==null?void 0:i.name}${(d=a.proxy_config)!=null&&d.proxy_config.ip?":"+((p=a.proxy_config)==null?void 0:p.proxy_config.ip):""}${(u=a.proxy_config)!=null&&u.proxy_config.port?":"+((f=a.proxy_config)==null?void 0:f.proxy_config.port):""})`:`(${[a.type,a.ip,a.port].filter(x=>!!x).join(":")})`})]}):e.jsx("p",{onClick:x=>n(x),className:"text-center m-0 text-sx cursor-pointer text-[14px]",children:r("Direct")})})}function Co(t){var Q;const{profileData:s}=t,r=Se(),{message:a}=ye.useApp(),[n,l]=c.useState(0),[o,m]=c.useState(!1),[i,d]=c.useState(!1),p=ve(),[u]=H.useForm(),f=(Q=t.profileData)==null?void 0:Q.uuid.includes("local-"),{t:x}=re(),{isLoading:y,mutate:g}=Ve({mutationFn:({tags:F})=>Ya({tags:F,profile_uuid:s.uuid}),onSuccess:()=>{p.invalidateQueries(P.tag),p.invalidateQueries(P.listProfile),p.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),a.success("Tags updated successfully!"),d(!1)},onError:F=>{const w=F.response.data;w.title&&w.content&&w.content.length>0&&w.content.forEach(_=>{a.error(_)}),w.title&&w.content&&w.content.length==0&&a.error(w.title),u.resetFields()}}),{data:S,isLoading:E}=ie({queryFn:()=>Ms(f),queryKey:[P.tag,f]}),h=F=>{F.stopPropagation(),d(!0)},L=()=>{d(!1),u.resetFields()},I=c.useContext(we);c.useEffect(()=>{I==null||I.setRightMenu({record:null,visible:!1,x:0,y:0})},[i]);const A=F=>{l(F.length)},N=F=>{l(0),m(u.getFieldValue("tags").some(w=>w.length>15))};return e.jsxs("div",{className:"flex justify-center group min-h-[50px] cursor-pointer",onClick:F=>h(F),children:[e.jsx("div",{className:"flex justify-center items-center",children:(s==null?void 0:s.tags.length)>0?e.jsx("div",{className:"flex gap-y-[5px] flex-wrap relative",children:s==null?void 0:s.tags.map((F,w)=>e.jsx(Ye,{className:"text-[14px] py-[2px] px-[6px]",closeIcon:null,color:"blue",children:e.jsx("span",{children:F.tag})},w))}):e.jsxs(e.Fragment,{children:[e.jsx(ua,{className:"absolute transition-all duration-75 font-black opacity-100 group-hover:opacity-0"}),e.jsx("span",{className:"absolute cursor-pointer opacity-0 duration-75 transition-all group-hover:opacity-100",onClick:F=>h(F),children:e.jsx(Gs,{className:"hover:text-blue-700 text-lg"})})]})}),e.jsx("div",{onClick:F=>F.stopPropagation(),children:i&&e.jsx(Re,{theme:{components:{Modal:{contentBg:r.backgroundLight,headerBg:r.backgroundLight},Select:{selectorBg:r.backgroundNormal,multipleItemBg:r.backgroundDark}},token:{colorBgContainer:r.backgroundNormal}},children:e.jsx(He,{confirmLoading:y,open:i,onCancel:()=>L(),className:"absolute top-[35%] left-0 right-0 bottom-0",footer:[e.jsxs("div",{className:"flex justify-end",children:[e.jsx(he,{label:x("Cancel"),typebutton:"started",onClick:()=>L()}),e.jsx("div",{className:"ml-3",children:e.jsx(he,{label:x("Add"),isDisabled:o,typebutton:"button",onClick:()=>u.submit()})})]},1)],children:e.jsxs(H,{layout:"vertical",form:u,onFinish:g,className:"relative",initialValues:{tags:s.tags.map(F=>F.tag)},children:[n>15&&e.jsx("div",{className:"absolute text-[12px] text-red-400 top-[22px] right-0",children:"Tag name must be less than 15 characters"}),e.jsx(H.Item,{name:"tags",label:e.jsx("span",{style:{color:r.titlePrimary,fontWeight:"600",fontSize:"20px"},children:x("Tags")}),style:{flex:1},children:e.jsx(be,{mode:"tags",loading:E,onSearch:A,onChange:N,status:n>15?"error":"",tagRender:F=>e.jsx(Ye,{closeIcon:e.jsx(At,{style:{color:F.label&&F.label.toString().length>15?r.iconCloseRed:r.iconClose},className:"inline-flex align-[-0.125em]"}),title:F.label&&F.label.toString().length>15?"input limit exceeded":"",closable:F.closable,onClose:F.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px",background:F.label&&F.label.toString().length>15?r.tagBgError:r.tagBgPrimary,color:F.label&&F.label.toString().length>15?r.tagTextRed:r.tagTextPrimary},children:nt(F.label,20)}),allowClear:!0,placeholder:x("Tags"),children:S==null?void 0:S.map((F,w)=>e.jsx(be.Option,{value:F.label,title:"",children:F.label},w))})})]})})})})]})}function So({data:t}){const{theme:s}=se(S=>S.display),{message:r}=ye.useApp(),a=ve(),[n,l]=c.useState(t.name),{isLocalActiveTab:o}=se(S=>S.display),{isLoading:m,mutate:i}=Ve({mutationFn:({profileName:S})=>Aa(o,{profile_uuid:t.uuid,profileName:S}),onSuccess:()=>{a.invalidateQueries(P.listProfile),a.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),r.success("Name updated successfully!")},onError:S=>{S.response.data.title&&S.response.data.content.length>0&&S.response.data.content.forEach(E=>{r.error(E)}),S.response.data.title&&S.response.data.content.length==0&&r.error(S.response.data.title),l(t.name)}}),d=c.useRef(null),p=c.useRef(null),u=c.useRef(!1),f=c.useContext(we),x=S=>{var L;S.stopPropagation(),f==null||f.setRightMenu({record:null,visible:!1,x:0,y:0});const E=S.target,h=d.current;E.parentElement.prepend(h==null?void 0:h.input),E.remove(),u.current=S.target.innerHTML,(L=h==null?void 0:h.input)==null||L.addEventListener("blur",y),h==null||h.focus()};function y(S){const E=S.target,h=p.current;E.parentElement.prepend(h),E.remove();const L=E.value,I=u.current;L!=I&&L.length>0&&i({profileName:L}),h==null||h.addEventListener("click",x)}const g=S=>{l(S.target.value)};return e.jsx(Re,{theme:{token:{colorBgSpotlight:`${s==="light"?"#FFFFFF":"#39383F"}`,colorTextLightSolid:`${s==="light"?"#000000":"#FFFFFF"}`}},children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{className:"w-fit",children:e.jsx("div",{className:"text-[14px] flex items-center cursor-texts",children:e.jsxs(Mt,{placement:"bottom",title:t.name,children:[e.jsx("span",{ref:p,onClick:S=>x(S),className:"w-[145px] ml-[2px] text-ellipsis-1-line text-start border rounded-[3px] border-solid border-transparent hover:border hover:border-dashed hover:border-current transtion duration-150",children:t.name}),e.jsx("div",{className:"ml-[2px] invisible opacity-0 absolute pointer-event-none",children:e.jsx(Pe,{ref:d,value:n,onChange:S=>g(S),className:"w-[150px]",id:`${t.uuid}`})})]})})}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{children:t.check_open===0&&e.jsx(Ye,{className:"text-[10px]",bordered:!1,color:"success",children:"new"})}),e.jsxs("div",{className:"flex flex-col w-[90px] flex-nowrap justify-center items-center",children:[(t==null?void 0:t.os)&&((t==null?void 0:t.os)==="win"?e.jsx(yr,{className:"text-[#0078D4]"}):t.os==="mac"?e.jsx(hs,{className:"text-[#A6B1B7]"}):t.os==="lin"?e.jsx(vr,{}):t.os==="android"?e.jsx(jr,{className:"text-[#AAC148]"}):t.os==="ios"?e.jsx(hs,{className:"text-[#A6B1B7]"}):e.jsx(on,{className:"text-[#A6B1B7]"})),e.jsx(Mt,{placement:"bottom",title:t.source_version,children:e.jsxs("div",{className:"flex gap-x-[5px] flex-nowrap items-center justify-center",children:[e.jsx("span",{className:"mb-[5px]",children:e.jsx(ln,{browserType:t.browser,width:16,height:16})}),e.jsxs("span",{className:"text-[14px]",children:["/ ",t.version]})]})})]})]})]})})}const wo=()=>{const t=c.useContext(we);return e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:"flex justify-end items-center h-full",children:e.jsx("span",{className:"w-fit h-full flex items-center",children:e.jsx(_o,{columns:t.columns,onSubmitChangeColumn:s=>t.setColumns(s)})})})})},_o=({columns:t,onSubmitChangeColumn:s})=>{const r=Se(),a=es.filter(h=>h.title.length!==0),n=c.useRef({columns:a,checked:t.map(h=>h.title)}),[l,o]=c.useState(t.map(h=>h.title)),[m,i]=c.useState(!1),[d,p]=c.useState(n.current.columns),{t:u}=re(),{token:{textPrimary:f}}=Te.useToken(),x={selectedRowKeys:l,onChange:h=>o(h)},y=Nr(Er(kr,{activationConstraint:{distance:1}})),g=({active:h,over:L})=>{h.id!==(L==null?void 0:L.id)&&p(I=>{const A=I.findIndex(Q=>Q.title===h.id),N=I.findIndex(Q=>Q.title===(L==null?void 0:L.id));return Ar(I,A,N)})},S=()=>{const h=d.filter(A=>l.includes(A.title)),L=t.filter(A=>typeof A.title=="function"),I=h.concat(L);n.current={columns:t,checked:l},s(I),i(!1)},E=()=>{p(a),o(n.current.checked),i(!1)};return e.jsxs("div",{children:[e.jsx("div",{style:{color:r.textActiveNormal},className:"cursor-pointer flex items-center",onClick:()=>i(!0),children:e.jsx(Ir,{})}),e.jsx(Re,{theme:{components:{Modal:{contentBg:r.backgroundLight,headerBg:r.backgroundLight}}},children:e.jsx(He,{title:e.jsx(Be,{label:"Custom Table",color:f,className:"font-bold !text-xl"}),centered:!0,open:m,onCancel:E,footer:[e.jsxs("div",{className:"flex justify-end gap-x-5",children:[e.jsx(he,{onClick:E,label:u("Cancel"),typebutton:"mono",solid:!0},"close"),e.jsx(he,{solid:!0,typebutton:"primary",onClick:S,label:u("Apply")},"Apply")]},1)],children:e.jsx(Or,{sensors:y,modifiers:[Tr],onDragEnd:g,children:e.jsx(Lr,{items:d.map(h=>h.title),strategy:Rr,children:e.jsx(Qe,{components:{body:{row:$r}},rowSelection:x,rowKey:"title",columns:Dr,dataSource:d,pagination:!1})})})})})]})},Po=({record:t})=>{const r=se(n=>n.profileStateSlice.profileStatus)[t.uuid]||t.runningStatus,{t:a}=re();return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center",children:[e.jsx("span",{className:"text-sm text-center m-0 translate-y-[3px] ",children:a(r==null?void 0:r.content)||((r==null?void 0:r.type)=="success"?a("is open"):a("Ready"))}),t.listing&&e.jsx(Ht,{color:"#2CDE35",text:e.jsx("span",{className:"text-[#2CDE35]",children:a("In listing")})}),t.transfer&&e.jsx(Ht,{color:"#2263B3",text:e.jsx("span",{className:"text-[#2263B3]",children:a("In transfer")})})]})},Fo={vi:Us,en:Xt,cn:Ys},No=({value:t})=>{const s=zt("DISPLAY"),r=s!=null&&s.language?s==null?void 0:s.language:"en";return e.jsx(e.Fragment,{children:t?e.jsxs("span",{className:"flex flex-row gap-x-[5px] justify-center items-center text-[14px]",children:[e.jsx(or,{size:16}),cn(new Date(t),new Date,{addSuffix:!0,locale:Fo[r]})]}):""})},es=[{title:e.jsx(je,{title:"Name"}),dataIndex:"name",align:"center",className:"text-[16px]",sorter:!0,showSorterTooltip:!1,width:250,render:(t,s)=>e.jsx(So,{data:s})},{title:e.jsx(je,{title:"Tags"}),dataIndex:"tags",align:"center",className:"text-[16px]",width:200,render:(t,s)=>e.jsx(Co,{profileData:s})},{title:e.jsx(je,{title:"Note"}),align:"center",className:"text-[16px]",width:200,render:(t,s)=>e.jsx(vo,{profileData:s})},{title:e.jsx(je,{title:"Proxy"}),dataIndex:"proxy",align:"center",className:"text-[16px]",width:180,render:(t,s)=>e.jsx(jo,{profileData:s})},{title:e.jsx(je,{title:"Last Open"}),align:"center",sorter:!0,showSorterTooltip:!1,dataIndex:"last_open",className:"text-[16px]",width:150,render:t=>e.jsx(No,{value:t})},{title:e.jsx(je,{title:"Status"}),align:"center",className:"text-[16px]",width:80,render:(t,s)=>e.jsx(yo,{data:s})},{title:e.jsx(je,{title:"Message"}),dataIndex:"message",width:100,className:"text-[16px]",align:"center",render:(t,s)=>e.jsx(Po,{record:s})},{title:()=>e.jsx(wo,{}),align:"center",className:"text-[16px]",width:120,render:t=>e.jsx("div",{className:"flex flex-row gap-x-[5px] justify-center items-center",children:e.jsx("div",{children:e.jsx(xo,{item:t})})})}],Eo=({rowSelection:t,columns:s,rows:r,isLoading:a,selectedRowKeys:n,onRow:l,onChange:o})=>e.jsx(Qe,{rowSelection:t,className:"w-full h-full",columns:s,tableLayout:"auto",dataSource:r,rowKey:"uuid",loading:{spinning:a},onRow:Fe.isEmpty(n)?l:void 0,pagination:!1,size:"small",onChange:o}),ko="_collapse_hm_1cw12_1",Io="__dark_1cw12_41",Oo="_pagination_hm_1cw12_73",Ct={collapse_hm:ko,_dark:Io,pagination_hm:Oo},To=({selectedRowKeys:t,toggleModal:s,arrUuidProfilesRun:r,owner_uuid:a,filter:n})=>{const l=c.useContext(we),o=c.useCallback(p=>{p==="START"?window.api.openProfiles(t):window.api.closeProfiles(t)},[t]),m=c.useCallback(()=>{window.api.forceStop(t)},[t]),i=[{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStartFigma,{width:14,height:14})}),label:`Start ${t?t.length>1?t.length+" Profiles":t.length+" Profile":"0 Profile"}`,type:"primary",action:()=>{o("START")},isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconPauseFigma,{width:14,height:14})}),label:`Stop ${t?t.length>1?t.length+" Profiles":t.length+" Profile":"0 Profile"}`,type:"error",action:()=>{o("STOP")},isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStopFigma,{width:14,height:14})}),label:"Force Stop",type:"error",action:()=>{m()},isDisabled:!r.some(p=>t.includes(p))},{icon:e.jsx(Qt,{}),label:"Proxy",type:"primary",action:()=>{s(!0,"Change proxy",{selectedRowKeys:t,owner_uuid:a,filter:n})},isDisabled:!1},{icon:e.jsx(Ae.IconAutomationFigma,{width:14,height:14}),label:"Automation",type:"primary",action:()=>{l==null||l.setIsOpenAutomation(!0),l==null||l.setSelectedRowKeys(t),l==null||l.setDataShare({owner_uuid:a,filter:n})},isDisabled:!1},{element:e.jsx(Kt,{selectedProfile:t}),type:"JSXElement",isDisabled:!1},{label:"Refuse",icon:e.jsx(Yt,{}),type:"error",action:()=>{l==null||l.handleRefuseShare(t)},isDisabled:!1}],d={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(e.Fragment,{children:t.length>0&&i.map((p,u)=>e.jsx("div",{children:p.type!="JSXElement"?e.jsx(he,{icon:p.icon,label:p.label,onClick:p.action,typebutton:p.type,isDisabled:p.isDisabled}):e.jsx("div",{style:p.isDisabled?d:void 0,children:p.element})},u))})},Lo=({owner_uuid:t,onRow:s,toggleModal:r,filter:a,setFilter:n})=>{var L,I,A,N,Q,F,w,_,C,D,W;const[l,o]=c.useState([]),[m,i]=c.useState([]);c.useState([]),c.useState(0);const d=c.useRef(new Set),p=se(k=>k.profileStateSlice.profileStatus),f={selectedRowKeys:m,onChange:k=>{i(k)}},x=(...k)=>{const[B,Y]=k;n(M=>({...M,page:B,limit:Y}))};c.useState("");const{isLoading:y,data:g}=ie({queryFn:()=>Zs(t,a),queryKey:[P.GET_LIST_PROFILE_SHARE,t,a]}),[S,E]=c.useState(((g==null?void 0:g.data.content.content)||[]).map(k=>({...k}))||[]);c.useLayoutEffect(()=>{window.api.getBrowserRunnings().then(k=>{d.current=new Set(k.keys()),E(((g==null?void 0:g.data.content.content)||[]).map(B=>({...B,page:1,limit:10,runningStatus:{content:"",isDisabled:!1,toReady:!d.current.has(B.uuid),type:d.current.has(B.uuid)?"success":"warning"}}))||[])})},[g==null?void 0:g.data]),c.useEffect(()=>{window.api.getBrowserRunnings().then(k=>{const B=Array.from(k.keys());o(B)})},[S,p]);const h=(k,B,Y,M)=>{const{field:X,order:J}=Y;switch(X){case"name":n(J==="ascend"?z=>({...z,orderName:1}):J==="descend"?z=>({...z,orderName:2}):z=>({...z,orderName:null}));break;case"last_open":n(J==="ascend"?z=>({...z,orderLastOpen:1}):J==="descend"?z=>({...z,orderLastOpen:2}):z=>({...z,orderLastOpen:null}));break}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-5 mt-0 min-[300px]",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3 py-[10px] overflow-hidden ",children:e.jsx(To,{selectedRowKeys:m,toggleModal:r,arrUuidProfilesRun:l,filter:a,owner_uuid:t})}),e.jsx("div",{className:"relative rounded-[5px] w-full h-full",children:e.jsx(Eo,{rowSelection:f,columns:es,rows:S,isLoading:y,selectedRowKeys:m,onRow:s,onChange:h})}),e.jsxs("div",{className:"w-full p-4 gap-x-2 flex items-center justify-end h-[50px]",children:[e.jsx("div",{className:"",children:e.jsx(Be,{className:"!text-[16px]",label:`${(I=(L=g==null?void 0:g.data)==null?void 0:L.content)!=null&&I.content&&((Q=(N=(A=g==null?void 0:g.data)==null?void 0:A.content)==null?void 0:N.content)==null?void 0:Q.length)>1?"Profiles":"Profile"}: ${((_=(w=(F=g==null?void 0:g.data)==null?void 0:F.content)==null?void 0:w.meta)==null?void 0:_.total)??0}`})}),e.jsx(lt,{showTitle:!1,pageSize:a.limit,total:((W=(D=(C=g==null?void 0:g.data)==null?void 0:C.content)==null?void 0:D.meta)==null?void 0:W.total)||0,onChange:x,current:a.page,showQuickJumper:!0,showSizeChanger:!0,className:`${Ct.pagination_hm}`})]})]})})},Ro=({profileShare:t,setFilter:s})=>{const[r,a]=c.useState("profile"),[n,l]=c.useState(null),[o]=re(),m=c.useContext(we),i=p=>{a(p.target.value),p.target.value==="profile"&&s(u=>({...u,limit:10,page:1,folder_id:null}))},d=p=>{if(p){const u=p.value;s(f=>({...f,limit:10,page:1,folder_id:u})),l(u)}};return e.jsxs("div",{className:"my-[10px]",children:[e.jsxs(kt.Group,{onChange:i,value:r,children:[e.jsx(kt,{value:"profile",children:"Profile"}),e.jsx(kt,{value:"folder",children:r==="folder"?"":"Folder"})]}),r==="folder"&&e.jsx(be,{disabled:r!=="folder",className:"w-[250px]",showSearch:!0,labelInValue:!0,value:n,optionFilterProp:"label",placeholder:"filter by folder",options:t==null?void 0:t.folder.map(p=>({value:p.id,label:p.name,title:"",key:p.uuid})),optionRender:p=>e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("span",{children:p.label}),e.jsxs("span",{className:"flex items-center gap-x-[2px] hover:text-[#F34730]",onClick:()=>{m==null||m.handleRefuseShare(p.key),l(null)},children:[e.jsx(Yt,{})," ",o("Refuse")]})]}),onChange:d})]})},$o=({onRow:t,toggleModal:s})=>{const{theme:r}=se(o=>o.display);Te.useToken();const[a,n]=c.useState({page:1,limit:10,folder_id:null}),{data:l}=ie({queryFn:()=>Js(),queryKey:[P.PROFILE_SHARE_WITH_ME]});return e.jsx(Re,{theme:{components:{Collapse:{headerBg:`${r==="light"?"#FFFFFF":"rgba(255, 255, 255, 0.04)"}`}}},children:e.jsx("div",{className:"flex flex-col gap-y-[1rem] p-2",children:l!=null&&l.data.content&&(l==null?void 0:l.data.content.length)>0?l==null?void 0:l.data.content.map((o,m)=>e.jsx(Ut,{className:`${r==="light"?Ct.collapse_hm:Ct.collapse_hm+" "+Ct._dark}`,style:{filter:"drop-shadow(0px 0px 2px #00000040)"},items:[{key:o.uuid,label:e.jsxs("div",{className:"-translate-y-[15px]",children:[e.jsxs("div",{className:"flex flex-row flex-wrap justify-between items-center gap-x-[20px]",children:[e.jsxs("div",{className:"text-[#2263B3] flex items-center gap-x-[5px]",children:[e.jsx("span",{className:"mt-1",children:e.jsx(Ul,{size:25})}),e.jsx("span",{className:"font-bold text-[20px] leading-[30px] text-center",children:o.owner_email})]}),e.jsx("div",{onClick:i=>{i.stopPropagation()},children:e.jsx(Ro,{profileShare:o,filter:a,setFilter:n})})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center flex-wrap gap-[10px]",children:[e.jsxs("div",{className:"flex flex-row gap-x-[10px]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-x-[10px] mt-1",children:[e.jsx("span",{className:"p-[5px_5px] rounded-full bg-[#FF1111]"}),e.jsx(Be,{className:"font-semibold !text-[16.33px]",label:o.count_profile?o.count_profile>1?o.count_profile+" profiles":o.count_profile+" profile":"0 profile"})]}),e.jsxs("div",{className:"flex flex-row items-center gap-x-[10px] mt-1",children:[e.jsx("span",{className:"p-[5px_5px] rounded-full bg-[#FF1111]"}),e.jsx(Be,{className:"font-semibold !text-[16.33px]",label:o.count_folder?o.count_folder>1?o.count_folder+" folders":o.count_folder+" folder":"0 folder"})]})]}),e.jsx("div",{className:"flex flex-col gap-y-[5px] translate-y-[-8px]",children:e.jsxs("span",{children:[o.newest_share_diff," ( ",o.newest_share_at," )"]})})]})]}),children:e.jsx(Lo,{owner_uuid:o.owner_uuid,onRow:t,toggleModal:s,filter:a,setFilter:n})}],accordion:!0,expandIconPosition:"end",bordered:!1,ghost:!1},m)):e.jsx("div",{className:"my-[3rem]",children:e.jsx(xt,{image:xt.PRESENTED_IMAGE_SIMPLE})})})})},Do=({toggleModal:t,handleDelete:s,handleChangeFingerPrint:r,columns:a,selectedRowKeys:n,setSelectedRowKeys:l,dataFilter:o,setFilterState:m,folder_uuid:i,setFolderUuid:d,profiles:p,dataProfileFolder:u,handleExportData:f,handleRefuseShare:x,defaultActiveKey:y,setDefaultActiveKey:g,setArrUuidProfilesRun:S})=>{Se();const{message:E}=ye.useApp(),h=window.innerWidth,L=window.innerHeight,I=ve(),A=c.useRef(new Set),{isLocalActiveTab:N}=se(T=>T.display),[Q,F]=c.useState(!1),w=c.useRef(null),_=c.useRef(null),C=c.useContext(we),[D,W]=c.useState((p==null?void 0:p.data.data.content)||[]),B={selectedRowKeys:n,onChange:T=>{l(T)}};c.useEffect(()=>{C==null||C.setRightMenu({record:null,visible:!1,x:0,y:0})},[p]);const[Y,M]=c.useState(null),[X,J]=c.useState(1),[z,fe]=c.useState(!1),ce=c.useCallback((T,b,v)=>({onClick:()=>{},onContextMenu:G=>{var q;if(!Fe.isEmpty(n)||v!=null&&v.selectedRowKeys&&!Fe.isEmpty(v==null?void 0:v.selectedRowKeys))return;G.preventDefault();const oe=document.getElementById("rightMenu");if(oe){let ee=oe.offsetWidth,ne=oe.offsetHeight,me=((q=document.querySelector(".ant-layout-sider.ant-layout-sider-light"))==null?void 0:q.clientWidth)??240;var ae=G.target;let te=ae.offsetTop;switch(T.shares_role?T.shares_role=="admin"?ee=170:ee=160:ee=210,ne==0&&!T.shares_role&&!T.folder_id||!T.shares_role&&!T.folder_id?ne=472:ne==0&&!T.shares_role&&T.folder_id||!T.shares_role&&T.folder_id?ne=515:ne==0&&T.shares_role=="admin"||T.shares_role=="admin"?ne=257:ne=171,G.button){case 0:J(X+1),X>=2&&J(1);const de=ae.getBoundingClientRect();let xe=parseInt(de.left.toString())-me-ee+252;for(;ae!==null&&!ae.classList.contains("ant-table-cell");)ae=ae.parentElement;if(ae!==null&&ae.classList.contains("ant-table-cell")&&(te=parseInt(de.top.toString())+10),ee&&xe-me+ee>h-me&&(xe=xe-ee-me+255),ne&&te+ne>L-110&&te>ne&&(te=parseInt(de.top.toString())-ne+10),G.preventDefault(),X===2&&Y&&parseInt(Y.toString())===parseInt(te.toString())){C==null||C.setRightMenu({...C==null?void 0:C.rightMenu,record:T,visible:!1,x:0,y:0});return}C!=null&&C.rightMenu.visible||document.addEventListener("click",function Le(){fe(!1),J(1),C==null||C.setRightMenu({...C==null?void 0:C.rightMenu,record:T,visible:!1,x:0,y:0}),document.removeEventListener("click",Le)}),M(te),C==null||C.setRightMenu({visible:!0,x:xe,y:te,record:T});break;case 2:fe(!0),G.preventDefault();let Ie=G.clientX-me+245;for(;ae!==null&&!ae.classList.contains("ant-table-cell");)ae=ae.parentElement;ae!==null&&ae.classList.contains("ant-table-cell")&&(te=G.clientY),ee&&G.clientX-me+ee>h-me&&(Ie=G.clientX-ee-me+255),ne&&G.clientY+ne>L-110&&te>ne&&(te=G.clientY-ne),C!=null&&C.rightMenu.visible||document.addEventListener("click",function Le(){fe(!1),C==null||C.setRightMenu({...C==null?void 0:C.rightMenu,record:T,visible:!1,x:0,y:0}),document.removeEventListener("click",Le)}),C==null||C.setRightMenu({visible:!0,x:Ie,y:te,record:T});break}}},onMouseDown:G=>{F(!0)},onMouseOver:()=>{Q&&!n.includes(T.uuid)&&(v!=null&&v.setSelectedRowKeys&&(v!=null&&v.selectedRowKeys)?v.setSelectedRowKeys([...v.selectedRowKeys,T.uuid]):l([...n,T.uuid]))}}),[C==null?void 0:C.rightMenu,Q,n]);c.useEffect(()=>{const T=()=>{F(!1)};return window.document.addEventListener("mouseup",T),()=>window.document.removeEventListener("mouseup",T)},[]);const Ne=()=>{if(N)switch(y){case"local":g("local");break;case"folder_local":g("folder_local");break;default:g("local");break}else switch(y){case"cloud":g("cloud");break;case"folder":g("folder");break;case"folder_share":g("folder_share");break;case"share_with_me":g("share_with_me");break;default:g("cloud");break}},Ee=async(T,b)=>{await Ha(N,T,{option:b}).then(()=>{E.success("Success."),Ne(),m(G=>({...G,dataFilter:{...G.dataFilter,page:1}})),I.invalidateQueries(P.listProfile,{refetchInactive:!0}),I.invalidateQueries(P.PROFILE_CLOUD,{refetchInactive:!0}),I.invalidateQueries(P.PROFILE_LOCAL,{refetchInactive:!0}),I.invalidateQueries(P.FOLDER_LOCAL,{refetchInactive:!0}),I.invalidateQueries(P.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),I.invalidateQueries(P.FOLDER_OWNER,{refetchInactive:!0}),I.invalidateQueries(P.FOLDER_SHARE,{refetchInactive:!0}),I.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0})}).catch(G=>{const oe=G.response;E.error(oe.data.title)})},_e=T=>{let b="";if(T){let v=[];T.type&&v.push(T.type),T.ip&&v.push(T.ip),T.port&&v.push(T.port),T.user&&v.push(T.user),T.pass&&v.push(T.pass),b=v.join("|")}return b},ke=T=>{window.api.goToFolder(T)},ue=se(T=>T.profileStateSlice.profileStatus);c.useEffect(()=>{window.api.getBrowserRunnings().then(T=>{const b=Array.from(T.keys());let v=[];y==="cloud"?v=b.filter(G=>!G.includes("local")):y==="local"&&(v=b.filter(G=>G.includes("local"))),S(v)})},[D,ue]),c.useLayoutEffect(()=>{window.api.getBrowserRunnings().then(T=>{A.current=new Set(T.keys()),W((p==null?void 0:p.data.data.content.map(b=>({...b,page:o.page,limit:o.limit,runningStatus:{content:"",isDisabled:!1,toReady:!A.current.has(b.uuid),type:A.current.has(b.uuid)?"success":"warning"}})))||[])})},[p]),se(T=>T.display);const[R,Z]=c.useState(!0),[U,K]=c.useState(!1),[pe,V]=c.useState(!1);c.useEffect(()=>{o.mode==="local"||o.mode==="cloud"?(Z(!0),K(!1),V(!1)):o.mode==="share_with_me"?(Z(!1),K(!0),V(!1)):o.mode==="folder"||o.mode==="folder_local"?(Z(!1),K(!1),V(!0)):(Z(!0),K(!1),V(!1))},[o.mode]);const O=(T,b,v,G)=>{const{field:oe,order:ae}=v;switch(oe){case"name":m(ae==="ascend"?q=>({...q,dataFilter:{...q.dataFilter,orderName:1}}):ae==="descend"?q=>({...q,dataFilter:{...q.dataFilter,orderName:2}}):q=>({...q,dataFilter:{...q.dataFilter,orderName:null}}));break;case"last_open":m(ae==="ascend"?q=>({...q,dataFilter:{...q.dataFilter,orderLastOpen:1}}):ae==="descend"?q=>({...q,dataFilter:{...q.dataFilter,orderLastOpen:2}}):q=>({...q,dataFilter:{...q.dataFilter,orderLastOpen:null}}));break}};return e.jsxs("div",{ref:_,children:[e.jsx("div",{className:"rounded-[5px] w-full",style:{display:`${R?"block":"none"}`},children:e.jsx(Qe,{rowSelection:B,className:`${mo["header-fixed"]} w-full`,columns:a,dataSource:D,rowKey:"uuid",rowClassName:(T,b)=>b===3?"scroll-row":"",onRow:ce,onChange:O,pagination:!1,ref:w,size:"small"})}),e.jsx("div",{style:{display:`${U?"block":"none"}`},children:e.jsx($o,{onRow:ce,toggleModal:t})}),e.jsx("div",{style:{display:`${pe?"block":"none"}`},children:e.jsx(po,{dataFolder:u,onRow:ce,columns:a,folder_uuid:i,setFolderUuid:d,handleDelete:s,toggleModal:t,handleChangeFingerPrint:r,handleExportData:f,divTableRef:_})}),e.jsx(ao,{handleRefuseShare:x,dataFilter:o,handleDelete:s,handleCopyProxy:_e,handleDuplicateProfile:Ee,handleChangeFingerPrint:r,handleGoToFolder:ke,toggleModal:t,tableRef:w,...C==null?void 0:C.rightMenu})]})},Ao=c.memo(Do);function Ho({dataFilter:t,setFilterState:s,changePage:r,changeSize:a,filterFolderState:n,setFilterFolderState:l}){const{t:o}=re(),m=(...g)=>{const[S,E]=g;r(S),a(p),s(h=>({...h,dataFilter:{...h.dataFilter,page:S,limit:E}}))},{data:i}=ie({queryFn:()=>St(t),queryKey:[P.listProfile,t]}),{data:d}=ie({queryFn:()=>Ze(n.dataFilter),queryKey:[P.FOLDER_OWNER,n.dataFilter]}),p=Number(t.limit),u=Number(t.page),f=Number(n.dataFilter.limit),x=Number(n.dataFilter.page),y=(...g)=>{const[S,E]=g;r(S),a(p),l(h=>({...h,dataFilter:{...h.dataFilter,page:S,limit:E}}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:`${t.mode==="cloud"||t.mode==="local"?"block":"none"}`},children:e.jsxs("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:[e.jsx("div",{className:"",children:e.jsx("span",{className:"!text-[16px]",children:`${((i==null?void 0:i.data.meta.total)||0)>1?o("Profiles"):o("Profile")}: ${(i==null?void 0:i.data.meta.total)||0}`})}),e.jsx(lt,{showTitle:!1,showQuickJumper:!0,pageSize:isNaN(p)?10:p,locale:{page:o("Page"),items_per_page:o("page"),jump_to:o("Go to")},current:u,pageSizeOptions:[10,20,50,100,200],total:(i==null?void 0:i.data.meta.total)||0,onChange:m,showSizeChanger:!0})]})}),e.jsx("div",{style:{display:`${t.mode==="folder"||t.mode==="folder_local"?"block":"none"}`},children:e.jsxs("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:[e.jsx("div",{className:"",children:e.jsx(Be,{className:"!text-[16px]",label:`${((d==null?void 0:d.data.meta.total)||0)>1?o("Folders"):o("Folder")}: ${(d==null?void 0:d.data.meta.total)||0}`})}),e.jsx(lt,{showTitle:!1,showQuickJumper:!0,pageSize:isNaN(f)?5:f,current:x,pageSizeOptions:[5,10,15,50],total:d==null?void 0:d.data.meta.total,onChange:y,showSizeChanger:!0,locale:{page:o("Page"),items_per_page:o("page"),jump_to:o("Go to")}})]})})]})}const pa=c.createContext({handleAddProfile:async t=>{}});function Bo({toggleModal:t,data:s,children:r}){const{message:a}=ye.useApp(),n=ve(),{isLocalActiveTab:l}=se(d=>d.display),o=async d=>{const p={uuid_browser:typeof s=="string"?[s]:s};m({isLocal:l??!1,uuid_folder:d.uuid,body:p})},{mutate:m}=Ve(mn,{onError:d=>{a.error(d.response.data.title)},onSuccess:({data:d})=>{a.success("Success"),n.invalidateQueries(P.folders,{refetchInactive:!0}),n.invalidateQueries(P.allFolders,{refetchInactive:!0}),n.invalidateQueries(P.listProfile,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_CLOUD,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(P.GET_PROFILE_BY_FOLDER),n.invalidateQueries(P.FOLDER_LOCAL,{refetchInactive:!0}),n.invalidateQueries(P.userDetail),t(!1)}}),i={handleAddProfile:o};return e.jsx(pa.Provider,{value:i,children:r})}function Mo({item:t}){const{handleAddProfile:s}=c.useContext(pa),[r]=re(),{token:a}=Te.useToken();return e.jsx(ot,{className:`m-auto bg-[${a.bgBlue}]`,type:"primary",onClick:()=>s(t),label:r("Add")})}const Vo=({value:t})=>{const{t:s}=re();return e.jsx("span",{children:t+` ${Number(t)?s("profiles"):s("profile")}`})},qo=[{title:e.jsx(je,{title:"No.STT"}),align:"center",render:(t,s,r)=>{const a=s.page?s.page-1:0,n=s.limit||0;return a*n+r+1},width:50},{title:e.jsx(je,{title:"Name"}),dataIndex:"name",align:"center",render:t=>e.jsxs("div",{className:"flex items-center gap-1 w-[100]",children:[e.jsx(Ba,{}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden",children:t.length>40?`${t.substring(0,40)}...`:t})]}),width:300},{title:e.jsx(je,{title:"Profiles"}),align:"center",dataIndex:"total_browser",width:"120px",render:t=>e.jsx(Vo,{value:t})},{title:e.jsx(je,{title:"Action"}),fixed:"right",align:"center",width:120,render:t=>e.jsx(Mo,{item:t})}],zo=({columns:t,dataFilter:s})=>{const{isLocalActiveTab:r}=se(d=>d.display),{data:a,isFetching:n}=ie({queryFn:()=>Ze(s,r?"local":""),queryKey:[P.folders,s,r]}),l=c.useRef(null),o=ve(),[m,i]=c.useState((a==null?void 0:a.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[]);return c.useEffect(()=>{i((a==null?void 0:a.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[])},[a]),c.useEffect(()=>{o.invalidateQueries([P.folders])},[]),e.jsx(e.Fragment,{children:e.jsx(Qe,{className:"h-[350px] overflow-auto",columns:t,dataSource:m,rowKey:"uuid",loading:{spinning:n},bordered:!0,size:"small",ref:l,pagination:!1})})},Qo=c.memo(zo);function Wo({dataFilter:t,setDataFilter:s}){const r=Se(),a=(...i)=>{const[d,p]=i;s(u=>({...u,dataFilter:{...u.dataFilter,page:d,limit:p}}))},{isLocalActiveTab:n}=se(i=>i.display),{data:l}=ie({queryFn:()=>Ze(t.dataFilter,n?"local":""),queryKey:[P.folders,t.dataFilter,n]}),o=Number(t.dataFilter.limit),m=Number(t.dataFilter.page);return e.jsx("div",{className:"w-[calc(100%)] pt-[10px]  text-end border-solid border-0 border-t-2",style:{backgroundColor:r.backgroundLight,borderColor:r.backgroundNormal},children:e.jsx(lt,{pageSize:o,current:m,pageSizeOptions:[10,15,20,50,100],total:(l==null?void 0:l.data.meta.total)||0,onChange:a,showTitle:!1})})}const Uo={page:1,limit:10,search:"",type:"cloud",option:"",id:0};function Yo({modalName:t,modalData:s,openModal:r,toggleModal:a}){let n="Add Profile to Folder";const l=Se(),[o]=re(),[m]=H.useForm(),{message:i}=ye.useApp(),{Title:d,Text:p}=le,u=ve(),{token:f}=Te.useToken(),[x,y]=c.useState({dataFilter:Uo}),[g]=c.useState(qo),{isLocalActiveTab:S}=se(I=>I.display),{isLoading:E,mutate:h}=Ve({mutationFn:async I=>{const{name:A}=I;x.dataFilter.type=S?"local":"cloud",await hn(x,{name:A})},onSuccess:()=>{u.invalidateQueries(P.folders),u.invalidateQueries(P.allFolders),i.success("Create folder successfully!"),m.resetFields()},onError:I=>{const A=I.response.data.content||"Folder name is unique!";i.error(A),m.resetFields()}}),L=()=>{a(!1),x.dataFilter.page=1,m.resetFields()};return e.jsx(e.Fragment,{children:n===t&&e.jsx(Bo,{data:s,toggleModal:a,children:e.jsx(Re,{theme:{components:{Modal:{contentBg:l.backgroundLight,headerBg:l.backgroundLight},Select:{selectorBg:l.backgroundNormal,multipleItemBg:l.backgroundDark}},token:{colorBorder:l.borderLight,colorBgBase:l.backgroundNormal,colorBgContainer:l.backgroundNormal}},children:e.jsxs(He,{title:e.jsx(d,{style:{color:f.bgBlue,fontSize:"20px",marginBottom:"0px"},children:o("Add profile to folder")}),open:r,className:"min-w-[60%] absolute top-[18%] left-0 right-0",onCancel:()=>L(),footer:null,confirmLoading:E,children:[e.jsxs(H,{form:m,layout:"vertical",className:"flex items-end gap-4 mt-4",onFinish:h,children:[e.jsx(H.Item,{name:"name",label:e.jsxs("span",{style:{color:l.textNormal,fontWeight:"600"},children:[o("Add new folder")," "]}),style:{flex:1},className:"font-semibold "+Me["required-label"]+" "+Me["custom-label"]+" "+Me["custom-input-ant"],rules:[{required:!0,message:o("This field is required!")},{max:150,message:o("The folder name may not be greater than 150 characters!")}],children:e.jsx(Pe,{placeholder:o("Folder name")})}),e.jsx(H.Item,{children:e.jsx(Ue,{type:"primary",className:`bg-[${f.bgBlue}]`,onClick:()=>m.submit(),children:o("Create")})})]}),e.jsx(Qo,{columns:g,dataFilter:x.dataFilter}),e.jsx(Wo,{dataFilter:x,setDataFilter:y})]})})})})}function Xo({modalName:t,modalData:s,openModal:r,toggleModal:a}){let n="Transfer Profile";const l=Se(),[o]=H.useForm(),[m]=re(),{message:i}=ye.useApp(),{Title:d}=le,p=ve(),{token:u}=Te.useToken(),{isLoading:f,mutate:x}=Ve({mutationFn:async g=>{const{email:S}=g;return await Ma({browsers:typeof s=="string"?[s]:s,recipient:S})},onSuccess:()=>{p.invalidateQueries(P.listProfile,{refetchInactive:!0}),o.resetFields(),a(!1),i.success("Transfer successfully.")},onError:g=>{var S,E,h,L,I,A,N,Q;Fe.isEmpty((E=(S=g.response)==null?void 0:S.data)==null?void 0:E.content)?Fe.isEmpty((A=(I=g.response)==null?void 0:I.data)==null?void 0:A.title)?i.error("Transfer profile error."):i.error((Q=(N=g.response)==null?void 0:N.data)==null?void 0:Q.title):i.error((L=(h=g.response)==null?void 0:h.data)==null?void 0:L.content)}}),y=()=>{a(!1),o.resetFields()};return e.jsx(e.Fragment,{children:n===t&&e.jsx(Re,{theme:{components:{Modal:{contentBg:l.backgroundLight,headerBg:l.backgroundLight},Select:{selectorBg:l.backgroundNormal,multipleItemBg:l.backgroundDark}},token:{colorBgContainer:l.backgroundNormal}},children:e.jsx(He,{title:e.jsx(d,{style:{color:u.bgBlue,fontSize:"20px",marginBottom:"0px"},children:m("Transfer profile")}),open:r,className:"min-w-[35%] relative top-[30%] left-0 right-0 bottom-0",onCancel:()=>y(),footer:null,confirmLoading:f,children:e.jsxs(H,{form:o,layout:"vertical",className:"flex items-end gap-4 pt-1",onFinish:x,initialValues:{email:""},children:[e.jsx(H.Item,{name:"email",label:e.jsx("span",{style:{color:l.textNormal,fontWeight:"600"},children:m("Transfer to")}),style:{flex:1},className:"font-semibold "+Me["required-label"]+" "+Me["custom-label"]+" "+Me["custom-input-ant"],rules:[{required:!0,message:m("This field is required")},{max:150,message:m("The email may not be greater than 150 characters!")},{type:"email",message:m("Value is not a valid email")}],children:e.jsx(Pe,{placeholder:"example@mail.com"})}),e.jsx(H.Item,{children:e.jsx(Ue,{type:"primary",className:`bg-[${u.bgBlue}]`,onClick:()=>o.submit(),children:m("Send")})})]})})})})}const Go=({columns:t,dataFilter:s,modalData:r})=>{const a=ve(),{isLocalActiveTab:n}=se(d=>d.display),{data:l,isFetching:o}=ie({queryFn:()=>Ks(r,s,n),queryKey:[P.logProxy,r,s]}),[m,i]=c.useState((l==null?void 0:l.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[]);return c.useEffect(()=>{i((l==null?void 0:l.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[])},[l]),c.useEffect(()=>{a.invalidateQueries([P.logProxy,s])},[]),e.jsx(e.Fragment,{children:e.jsx(Qe,{style:{height:"calc(100vh - 370px)",minHeight:"250px"},columns:t,dataSource:m,rowKey:"id",loading:{spinning:o},size:"small",pagination:!1})})},Jo=c.memo(Go);function Zo({item:t}){const[s]=re(),{token:r}=Te.useToken(),[a,n]=c.useState(!1);return t.action==="remove"?e.jsx(e.Fragment,{}):e.jsxs("div",{children:[e.jsx("pre",{className:'text-left font-["Poppins",sans-serif]',children:a?t.data:t.data.substring(0,100)}),e.jsx(sr,{className:"",onClick:()=>n(!a),children:e.jsx(Be,{style:{color:r.textPrimary},label:s(a?"Hide":"Show more")})})]})}const Ko=[{title:"No",width:60,render:(t,s,r)=>{const a=s.page?s.page-1:0,n=s.limit||0;return a*n+r+1}},{title:"Ip",width:150,dataIndex:"causer_ip",align:"center"},{title:"Action",width:110,dataIndex:"action",align:"center"},{title:"Content",align:"center",width:"40%",render:(t,s)=>e.jsx(Zo,{item:s})},{title:"Last open",width:150,align:"center",dataIndex:"created_at_diff"}];function ei({dataFilter:t,setDataFilter:s,modalData:r}){const{token:{colorBgBase:a,colorBorder:n}}=Te.useToken(),l=(...p)=>{const[u,f]=p;s(x=>({...x,dataFilter:{...x.dataFilter,page:u,limit:f}}))},{isLocalActiveTab:o}=se(p=>p.display),{data:m}=ie({queryFn:()=>Ks(r,t.dataFilter,o),queryKey:[P.logProxy,t.dataFilter,r]}),i=Number(t.dataFilter.limit),d=Number(t.dataFilter.page);return e.jsx("div",{className:"w-full max-w-[calc(100%-32px)] px-4 pt-4 flex justify-end border-solid border-0 border-t-4",style:{backgroundColor:a,borderColor:n},children:e.jsx(lt,{pageSize:i,current:d,pageSizeOptions:[10,15,20,50,100],total:(m==null?void 0:m.data.meta.total)||0,onChange:l})})}const ti={page:1,limit:10};function si({modalName:t,modalData:s,openModal:r,toggleModal:a}){let n="Log proxy history";const{token:l}=Te.useToken(),{Title:o,Text:m}=le,[i,d]=c.useState({dataFilter:ti}),[p,u]=c.useState(Ko),{t:f}=re();return e.jsx(e.Fragment,{children:n===t&&e.jsx(He,{title:e.jsx(o,{style:{color:l.bgBlue,fontSize:"20px",marginBottom:"5px"},children:f(t)}),open:r,className:"min-w-[60%]",onCancel:()=>a(!1),footer:null,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"w-full overflow-auto",children:e.jsx(Jo,{modalData:s,columns:p,dataFilter:i.dataFilter})}),e.jsx(ei,{modalData:s,dataFilter:i,setDataFilter:d})]})})})}function ai(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}},{tag:"line",attr:{x1:"12",y1:"11",x2:"12",y2:"17"}},{tag:"line",attr:{x1:"9",y1:"14",x2:"15",y2:"14"}}]})(t)}const ri=[{title:"Name",dataIndex:"name",align:"center",render:t=>t.length>30?t.slice(0,20)+"...":t},{title:"Value",align:"center",dataIndex:"value",render:t=>t.length>30?t.slice(0,20)+"...":t},{title:"Expires",align:"center",dataIndex:"expirationDate"},{title:"Domain",align:"center",dataIndex:"domain"}],ni=({columns:t,uuid:s})=>{const{data:r,isFetching:a}=ie({queryFn:()=>qr(s).then(n=>JSON.parse(n==null?void 0:n.data.content.cookie)),queryKey:[P.cookies,s],refetchOnMount:!0});return e.jsx(e.Fragment,{children:e.jsx(Qe,{className:"h-[350px] overflow-scroll",rootClassName:" overflow-scroll max-h-[60vh] overflow",columns:t,dataSource:r,rowKey:n=>JSON.stringify(n),pagination:!1,size:"small",loading:{spinning:a}})})},li=c.memo(ni);function oi({modalName:t,modalData:s,openModal:r,toggleModal:a}){const{t:n}=re();let l="Cookies manager";const{Title:o}=le,{message:m}=ye.useApp(),i=ve(),{token:d}=Te.useToken(),p=async()=>{await zr(s),i.invalidateQueries(P.cookies),m.success(n("Cleared cookies"))},u=async y=>{const E={data:(await Qs([s],y)).data.content,fileName:y==1?`cookie-${s}.json`:`cookie-${s}.txt`};y==1?window.api.exportFileJson(E).then(h=>{h&&f(h)}):window.api.exportFile(E).then(h=>{h&&f(h)})},f=y=>{const g=y.substring(0,y.lastIndexOf("\\"));console.log(g),m.success({content:e.jsxs("span",{children:["Export Success ",e.jsx("span",{className:"font-bold ",children:"Open now"})]}),onClick:()=>{window.api.openFolder(g)},style:{cursor:"pointer"}})},x=[{label:"Json",key:1},{label:"Key value",key:2}];return e.jsx(e.Fragment,{children:l==t&&e.jsx(e.Fragment,{children:e.jsxs(He,{title:e.jsx(o,{style:{color:d.bgBlue,fontSize:"20px",marginBottom:"0px"},children:n(t)}),open:r,className:"min-w-[55%] absolute top-[20%] left-0 right-0",onCancel:()=>a(!1),footer:null,children:[e.jsxs(Cn,{gap:"small",wrap:"wrap",className:"mb-3 mt-4",children:[e.jsx(he,{icon:e.jsx(Wl,{className:" text-lg"}),typebutton:"error",label:"Clear",onClick:()=>p()}),e.jsx(it,{content:e.jsx(De,{className:"min-w-[100px]",dataSource:x,renderItem:y=>e.jsx(De.Item,{className:"cursor-pointer !px-1 !py-1 hover:font-bold",onClick:()=>u(y.key),children:y.label},y.key)}),trigger:"click",placement:"right",children:e.jsx(he,{icon:e.jsx(ai,{className:" text-lg"}),typebutton:"primary",label:"Export"})})]}),e.jsx(li,{uuid:s,columns:ri})]})})})}const ii=[{title:e.jsx(je,{title:"No.STT"}),render:(t,s,r)=>r+1,width:70,align:"center"},{title:e.jsx(je,{title:"Name"}),dataIndex:"name"},{title:e.jsx(je,{title:"Proxy"}),dataIndex:"proxy"}];function ci({onClick:t}){const{t:s}=re();return e.jsx(he,{label:s("Delete"),typebutton:"error",classStyle:"w-fit",onClick:t})}const di={"header-fixed":"_header-fixed_8q965_1"};function ui({profileProxy:t,setProfileProxy:s,proxyChoose:r,proxyInput:a,acceptMode:n,setProxyChoose:l}){const{t:o}=re(),m=i=>{const d=Fe.cloneDeep(r);d.splice(i,1),l(d)};return c.useEffect(()=>{if(n==="Proxy")if(a!==""){const i=a.split(`
`);s(d=>d.map((p,u)=>{if(i[u]||i.length===1){const f=(i[u]||i[0]).includes("|")?"|":":",[x,y,g,S,E]=(i[u]||i[0]).split(f);p.proxy=`${[x,y,g,S,E].filter(h=>!!h).join("|")}`}return p}))}else s(i=>i.map(d=>(d.proxy!==""&&typeof d.proxy=="object"&&(d.proxy=`${[d.proxy.type,d.proxy.ip,d.proxy.port,d.proxy.user,d.proxy.pass].filter(p=>!!p).join("|")}`),d)));else console.log({proxyChoose:r}),s(i=>i.map((d,p)=>{if(r[p]||r.length===1){const u=r[p]||r[0],f={type:u.type,ip:u.ip,port:u.port,user:u.user,pass:u.pass};u.proxy_config&&(f.type=u.proxy_config.proxy_type,f.ip=u.proxy_config.proxy_config.ip,f.port=u.proxy_config.proxy_config.port,delete f.user,delete f.pass),d.proxy=`${[f.type,f.ip,f.port,f.user,f.pass].filter(x=>!!x).join("|")}`}else d.proxy="";return d}))},[r,a,n]),e.jsx(Qe,{columns:[...ii,{title:o("Action"),width:94,align:"center",render:(i,d,p)=>e.jsx(ci,{onClick:()=>{m(p),s(u=>u.filter(f=>f.uuid!==d.uuid))}})}],dataSource:t,className:`${di["header-fixed"]} w-full`,rowKey:"uuid",size:"small",pagination:!1,scroll:{y:200}},1)}const pi=({idx:t})=>{const s=c.useContext(ma),r=(s==null?void 0:s.dataFilter.page)-1;return e.jsx(e.Fragment,{children:r*(s==null?void 0:s.dataFilter.limit)+t+1})},mi=[{title:e.jsx(je,{title:"No.STT"}),render:(t,s,r)=>e.jsx(pi,{idx:r}),width:40,align:"center"},{title:e.jsx(je,{title:"Proxy"}),render:(t,s)=>e.jsx(tn,{data:s}),align:"center"},{title:e.jsx(je,{title:"Info"}),render:(t,s)=>e.jsx(sn,{data:s}),align:"center"},{title:e.jsx(je,{title:"Status"}),render:(t,s)=>e.jsx(an,{data:s}),align:"center"}];function hi({onClick:t}){const{t:s}=re();return e.jsx(he,{label:s("Choose"),typebutton:"primary",classStyle:"w-fit",onClick:t})}const ma=c.createContext(void 0),fi=({onChooseProxy:t})=>{const{isLocalActiveTab:s}=se(i=>i.display),[r,a]=c.useState({page:1,limit:10}),{data:n,isFetching:l}=ie({queryFn:()=>gn({...r,is_local:!!s}),queryKey:["list-proxy-modal",r,s]}),{t:o}=re(),m={dataFilter:r};return e.jsx(ma.Provider,{value:m,children:e.jsx(Qe,{className:"mt-4",size:"small",rowKey:"uuid",loading:l,columns:[...mi,{title:o("Action"),render:(i,d)=>e.jsx(hi,{data:d,onClick:()=>t(d)}),width:100,align:"center"}],dataSource:(n==null?void 0:n.data.data.content)||[],scroll:{y:240},pagination:{pageSize:r.limit,current:r.page,onChange(i,d){a({page:i,limit:d})},total:(n==null?void 0:n.data.meta.total)||0}})})},xi=["HTTP","SSH","SOCKS4","SOCKS5"],gi=t=>xi.includes(t.toLocaleUpperCase());function bi({modalName:t,openModal:s,toggleModal:r,profiles:a,selectedRowKeys:n,modalData:l}){const{message:o}=ye.useApp(),m=Se(),[i,d]=c.useState(""),[p,u]=c.useState(a.filter(_=>n.includes(_.uuid))),[f,x]=c.useState("Proxy"),[y,g]=c.useState("Proxy"),[S,E]=c.useState([]),{Title:h}=le,L=ve(),{isLocalActiveTab:I}=se(_=>_.display),{t:A}=re(),{data:N}=ie({queryFn:()=>{if(l!=null&&l.folder_id)return Bs(I,l==null?void 0:l.folder_id,l==null?void 0:l.filter)},queryKey:[P.GET_PROFILE_BY_FOLDER,l==null?void 0:l.folder_id,l==null?void 0:l.filter]}),{data:Q}=ie({queryFn:()=>{if(l!=null&&l.owner_uuid)return Zs(l==null?void 0:l.owner_uuid,l==null?void 0:l.filter)},queryKey:[P.GET_LIST_PROFILE_SHARE,l==null?void 0:l.owner_uuid,l==null?void 0:l.filter]});c.useEffect(()=>{var _,C;l!=null&&l.folder_id&&N?u(((C=(_=N==null?void 0:N.data)==null?void 0:_.data)==null?void 0:C.content.filter(D=>n.includes(D.uuid)))||[]):l!=null&&l.owner_uuid&&Q?u(Q.data.content.content.filter(D=>n.includes(D.uuid))||[]):u(a.filter(D=>n.includes(D.uuid)))},[N,Q]);const F=_=>{g("My Proxy"),S.length<n.length&&E([...S,_])},w=async()=>{const _=[];let C=!1,D="";if(p.forEach((W,k)=>{if(W.uuid.includes("local-")&&(C=!0),D)return;const B={uuid:W.uuid};if(y==="Proxy"){const Y=i.split(`
`);if(Y.length===1||Y[k]){const M=(Y[k]||Y[0]).includes("|")?"|":":",[X,J,z,fe,ce]=(Y[k]||Y[0]).split(M);X&&J&&z&&gi(X)?(B.proxy={type:X.toUpperCase(),ip:J,port:z,user:fe,pass:ce},_.push(B)):D="Proxy invalid"}}else(S.length===1||S[k])&&(B.proxy=Fe.cloneDeep(S[k]||S[0]),_.push(B))}),D)return o.error(D);if(!Fe.isEmpty(_))try{await bn(_,C),o.success("Change proxy success"),await Promise.all([L.invalidateQueries(P.listProfile),L.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),L.invalidateQueries("list-proxy-modal",{refetchInactive:!0}),L.invalidateQueries(P.listProxy)]),r(!1)}catch(W){console.log("Change proxy error => ",W),o.error("Change proxy error")}};return e.jsx(Re,{theme:{components:{Modal:{contentBg:m.backgroundLight,headerBg:m.backgroundLight},Select:{selectorBg:m.backgroundNormal,multipleItemBg:m.backgroundDark},Radio:{buttonSolidCheckedBg:"#2263B3",buttonSolidCheckedHoverBg:"#2263B3",buttonColor:"#C0C0C0"},Typography:{colorTextHeading:m.titlePrimary}},token:{colorBorder:m.borderLight,colorBgBase:m.backgroundNormal,colorBgContainer:m.backgroundNormal}},children:e.jsxs(He,{title:e.jsx(h,{style:{color:m.textActiveNormal,marginBottom:"20px",marginTop:"1px"},level:4,children:A(t||"")}),open:s,onCancel:()=>r(!1),className:"min-w-[60%]",footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(he,{typebutton:"primary",solid:!0,onClick:w,label:A("Submit"),classStyle:"w-fit"})}),children:[e.jsx(ui,{profileProxy:p,setProfileProxy:u,acceptMode:y,proxyChoose:S,proxyInput:i,setProxyChoose:E}),e.jsx(wn,{options:[{label:A("Proxy"),value:"Proxy"},{label:A("My proxy"),value:"My Proxy"}],value:f,onChange:_=>x(_),size:"middle",className:"mt-4"}),f==="Proxy"?e.jsx(Xr,{rows:14,allowClear:!0,className:"shadow-[0_-3px_4px_0px_rgb(0,0,0,0.2),0_2px_4px_-2px_rgb(0,0,0,0.1)] border-none mt-4",placeholder:`Ex: ssh|192.168.1.1|443| ${A("username")}| ${A("password")}`,value:i,onChange:_=>{E([]),d(_.target.value),g("Proxy")}}):e.jsx(fi,{onChooseProxy:F})]})})}const yi=()=>{var d,p,u;const t=Se(),{t:s}=re(),{message:r}=ye.useApp(),a=ve(),[n]=H.useForm(),{isLocalActiveTab:l}=se(f=>f.display),o=c.useContext(we),{isLoading:m,mutate:i}=Ve({mutationFn:({note:f})=>{var x,y;return Va(l,{note:f,profile_uuid:(y=(x=o==null?void 0:o.dataNote)==null?void 0:x.data)==null?void 0:y.uuid})},onSuccess:()=>{r.success("Note updated successfully!"),o==null||o.setDataNote({isOpen:!1,data:null}),a.invalidateQueries(P.listProfile),a.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0})},onError:f=>{const x=f.response.data;x.title&&x.content&&x.content.length>0&&x.content.forEach(y=>{r.error(y)}),x.title&&x.content&&x.content.length==0&&r.error(x.title)}});return c.useEffect(()=>{var f,x;if((f=o==null?void 0:o.dataNote)!=null&&f.isOpen){const y=(x=o==null?void 0:o.dataNote)==null?void 0:x.data.note;n.setFieldValue("note",y)}o==null||o.setRightMenu({record:null,visible:!1,x:0,y:0})},[(d=o==null?void 0:o.dataNote)==null?void 0:d.isOpen]),e.jsx("div",{children:e.jsx(Re,{theme:{components:{Modal:{contentBg:t.backgroundLight,headerBg:t.backgroundLight},Select:{selectorBg:t.backgroundNormal,multipleItemBg:t.backgroundDark}},token:{colorBgContainer:t.backgroundNormal}},children:e.jsx(He,{confirmLoading:m,open:o==null?void 0:o.dataNote.isOpen,footer:null,centered:!0,onCancel:()=>o==null?void 0:o.setDataNote({isOpen:!1,data:null}),children:e.jsxs(H,{layout:"vertical",form:n,onFinish:i,initialValues:{note:(u=(p=o==null?void 0:o.dataNote)==null?void 0:p.data)==null?void 0:u.note},children:[e.jsx(H.Item,{name:"note",label:e.jsx("span",{style:{color:t.titlePrimary,fontWeight:"600",fontSize:"20px"},children:s("Note")}),children:e.jsx(Pe.TextArea,{rows:6})}),e.jsx("div",{className:"flex justify-end gap-x-[10px]",children:e.jsx(H.Item,{children:e.jsx(he,{onClick:()=>n.submit(),typebutton:"primary",solid:!0,label:e.jsx(dr,{size:24}),classStyle:"px-[15px] py-[5px]"})})})]})})})})},Ns=Fe.sortBy(Fe.uniqBy(rn,"value"),[t=>t.label]);function vi(){var _e,ke,ue,R,Z,U,K,pe,V,O,T;const t=c.useRef(null),s=Se(),[r]=H.useForm(),[a]=re(),n=H.useWatch("type",r),l=H.useWatch("country",r),o=H.useWatch("state",r),m=H.useWatch("city",r),i=H.useWatch("formatProxy",r),d=H.useWatch("ipAddress",r),p=H.useWatch("port",r),u=H.useWatch("username",r),f=H.useWatch("pass",r),x=H.useWatch("checker",r),{message:y}=ye.useApp(),g=ve(),S=c.useRef(null),{isLocalActiveTab:E}=se(b=>b.display),h=c.useContext(we),L=c.useRef("NEW"),[I,A]=c.useState(((ue=(ke=(_e=h==null?void 0:h.dataProxy)==null?void 0:_e.proxy)==null?void 0:ke.proxy_config)==null?void 0:ue.proxy_type)==="hidemium_proxy"?$e.HIDEMIUM_PROXY:((Z=(R=h==null?void 0:h.dataProxy)==null?void 0:R.proxy)==null?void 0:Z.type)===Ge.Without_proxy||!((U=h==null?void 0:h.dataProxy)!=null&&U.proxy)?$e.WITHOUT_PROXY:$e.YOUR_PROXY),{data:N,isFetching:Q}=ie({queryFn:()=>Tn(),queryKey:[P.getListHidemiumProxy]}),F=c.useMemo(()=>{const b=(N==null?void 0:N.content.filter(v=>!v.is_expired))||[];if(I===$e.HIDEMIUM_PROXY&&!b.some(v=>v.id===n)){const v=N==null?void 0:N.content.find(G=>G.id===n);v&&b.push(v)}return b},[N,n,I]);c.useEffect(()=>{_(null),L.current="NEW",S.current=null},[n,l,o,m,i,d,p,u,f,x]),c.useEffect(()=>()=>{l&&r.setFieldValue("state","")},[l]),c.useEffect(()=>{if(i){const b=Nn(i||"");b&&r.setFieldsValue(b)}},[i]);const[w,_]=c.useState(null),{data:C}=ie({queryFn:yn,queryKey:[P.proxyConfig]}),{data:D}=ie({queryFn:()=>Fe.isNumber(n)&&!(C!=null&&C.some(b=>b.id===n))?fs(n):null,queryKey:[P.proxyConfig,n]}),W=c.useMemo(()=>{const b=(C==null?void 0:C.map(v=>({...v,label:v.name,value:v.id})))||[];return D&&!b.some(v=>v.value===(D==null?void 0:D.id))&&b.push({...D,label:D.name,value:D.id}),b},[C,D]),k=c.useMemo(()=>W==null?void 0:W.find(b=>b.id===n),[n,W]),B=c.useMemo(()=>!(En.includes(n)||(k==null?void 0:k.type)===ut.api||n===Ge.Without_proxy),[n,k]),Y=async b=>{var G,oe,ae,q,ee,ne,me,te,de,xe,Ie,Le;const v=await r.validateFields().catch(()=>null);if(v)if(b==="CHECK")X(v);else if(b==="EDIT")if(v.type===Ge.Without_proxy||I===$e.WITHOUT_PROXY){const ge={id:-1,details:It,browser_uuid:(oe=(G=h==null?void 0:h.dataProxy)==null?void 0:G.profile)==null?void 0:oe.uuid};J(ge,E)}else if(S.current){const ge={...S.current,id:(q=(ae=h==null?void 0:h.dataProxy)==null?void 0:ae.proxy)==null?void 0:q.uuid,browser_uuid:(ne=(ee=h==null?void 0:h.dataProxy)==null?void 0:ee.profile)==null?void 0:ne.uuid,checkBeforeStart:!!v.checkBeforeStart,details:w||It};(te=(me=S.current)==null?void 0:me.proxy_config)!=null&&te.proxy_type&&(ge.type=S.current.proxy_config.proxy_type),ge.status=L.current,J(ge,E)}else{const ge={...v,id:(xe=(de=h==null?void 0:h.dataProxy)==null?void 0:de.proxy)==null?void 0:xe.uuid,ip:v.ipAddress,browser_uuid:(Le=(Ie=h==null?void 0:h.dataProxy)==null?void 0:Ie.profile)==null?void 0:Le.uuid,details:w||It,user:v.username,info:{country:v.country,state:v.state,city:v.city},status:L.current};k&&(ge.proxy_config_id=k.id,ge.type=k.type),J(ge,E)}else X({urlcheck:"multibrowser.io"})},{isLoading:M,mutate:X}=Ve({mutationFn:async b=>{var G,oe,ae,q,ee,ne,me,te,de,xe,Ie,Le,ge,et,ts,ss,as,rs,ns,ls,os,is,cs,ds;if(!b.type)return us.post("check-proxy",{});const v={urlcheck:b.checker,host:b.ipAddress,port:b.port,username:b.username,password:b.pass,typeProxy:b.type};if(Fe.isNumber(b.type)){let j=C.find(tt=>tt.id===b.type);if(j||(j=N==null?void 0:N.content.find(tt=>tt.id===Number(b.type))),j||(j=await fs(b.type)),!j)return y.error("Proxy config not found");if((G=j==null?void 0:j.config)!=null&&G.user_service||(oe=j==null?void 0:j.config)!=null&&oe.user_format)v.username=(((ae=j==null?void 0:j.config)==null?void 0:ae.user)||"").replaceAll("{username}",(j==null?void 0:j.config.user_format)||(j==null?void 0:j.config.user_service)),v.password=(((q=j==null?void 0:j.config)==null?void 0:q.pass)||"").replaceAll("{password}",(j==null?void 0:j.config.pass_format)||(j==null?void 0:j.config.pass_service)),v.username=st(v.username||"",b,(ne=(ee=h==null?void 0:h.dataProxy)==null?void 0:ee.profile)==null?void 0:ne.uuid),v.password=st(v.password||"",b,(te=(me=h==null?void 0:h.dataProxy)==null?void 0:me.profile)==null?void 0:te.uuid),v.typeProxy=j==null?void 0:j.config.type,v.host=j==null?void 0:j.config.ip,v.port=j==null?void 0:j.config.port;else if(j!=null&&j.user_service||j!=null&&j.user_format)v.username=j==null?void 0:j.user.replaceAll("{username}",(j==null?void 0:j.user_format)||(j==null?void 0:j.user_service)),v.password=j==null?void 0:j.pass.replaceAll("{password}",(j==null?void 0:j.pass_format)||(j==null?void 0:j.pass_service)),v.username=st(v.username||"",b,(xe=(de=h==null?void 0:h.dataProxy)==null?void 0:de.profile)==null?void 0:xe.uuid),v.password=st(v.password||"",b,(Le=(Ie=h==null?void 0:h.dataProxy)==null?void 0:Ie.profile)==null?void 0:Le.uuid),v.typeProxy=j==null?void 0:j.type,v.host=j==null?void 0:j.ip,v.port=j==null?void 0:j.port;else if(j&&j.type===ut.rotation)v.host=j.ip||(j==null?void 0:j.config.ip),v.port=j.port||(j==null?void 0:j.config.port),v.typeProxy=((ge=j==null?void 0:j.config)==null?void 0:ge.type)||(j==null?void 0:j.type),v.username=st(j.user||(j==null?void 0:j.config.user),b,(ts=(et=h==null?void 0:h.dataProxy)==null?void 0:et.profile)==null?void 0:ts.uuid),v.password=st(j.pass||(j==null?void 0:j.config.pass),b,(as=(ss=h==null?void 0:h.dataProxy)==null?void 0:ss.profile)==null?void 0:as.uuid);else if(j&&j.type===ut.api)try{const tt={profile_uuid:(ns=(rs=h==null?void 0:h.dataProxy)==null?void 0:rs.profile)==null?void 0:ns.uuid,host:b==null?void 0:b.ipAddress,port:b==null?void 0:b.port,username:b==null?void 0:b.username,password:b==null?void 0:b.pass,config_host:(ls=j==null?void 0:j.config)==null?void 0:ls.ip,config_port:(os=j==null?void 0:j.config)==null?void 0:os.port,config_username:(is=j==null?void 0:j.config)==null?void 0:is.user,config_password:(cs=j==null?void 0:j.config)==null?void 0:cs.pass},{data:ha}=await qa.get(((ds=j==null?void 0:j.config)==null?void 0:ds.url)||j.url,{params:tt}),ct=On(ha);v.host=ct.ip||b.ipAddress||j.ip,v.port=ct.port||b.port||j.port,v.typeProxy=ct.type||j.type,v.username=ct.user||b.username||j.user,v.password=ct.pass||b.pass||j.pass}catch{return Promise.reject(`Request to ${j.url} error`)}}return!v.host||!v.port?Promise.reject("Proxy invalid"):us.post("check-proxy",v)},onSuccess:({data:b})=>{L.current="LIVE",_(b),setTimeout(()=>{var v;(v=t.current)==null||v.scrollBy({behavior:"smooth",top:5e3})},50)},onError:()=>{L.current="DIE",y.error("Invalid proxy!"),_(null)}}),J=async(b,v)=>{await vn(b,v).then(G=>{const oe=G.data;oe.type=="error"?y.error(oe.title):(g.invalidateQueries({queryKey:P.listProfile}),g.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),g.invalidateQueries(P.logProxy,{refetchInactive:!0}),g.invalidateQueries("list-proxy-modal",{refetchInactive:!0}),h==null||h.setDataProxy({isOpen:!1,proxy:null,profile:null}),y.success("Proxy update success!"))}).catch(()=>{y.error("Proxy update failed!")})},z=c.useMemo(()=>{const b=nn.filter(v=>v.country_code===l);return Fe.sortBy(Fe.uniqBy(b,"value"),[v=>v.label])},[l]),fe=b=>{var v,G,oe,ae,q,ee;return((v=b==null?void 0:b.proxy_config)==null?void 0:v.proxy_type)==="hidemium_proxy"?A($e.HIDEMIUM_PROXY):(b!=null&&b.proxy_config_id||b!=null&&b.type)&&A($e.YOUR_PROXY),{type:(b==null?void 0:b.proxy_config_id)||(b==null?void 0:b.type)||Ge.Without_proxy,country:((G=b==null?void 0:b.info)==null?void 0:G.country)||"",state:((oe=b==null?void 0:b.info)==null?void 0:oe.state)||"",city:((ae=b==null?void 0:b.info)==null?void 0:ae.city)||"",formatProxy:"",ipAddress:(b==null?void 0:b.ip)||"",port:(b==null?void 0:b.port)||"",username:(b==null?void 0:b.user)||"",pass:(b==null?void 0:b.pass)||"",checker:"multibrowser.io",checkBeforeStart:((ee=(q=h==null?void 0:h.dataProxy)==null?void 0:q.profile)==null?void 0:ee.option.checkBeforeStart)??!0}};c.useEffect(()=>{var b;r.setFieldsValue(fe((b=h==null?void 0:h.dataProxy)==null?void 0:b.proxy)),setTimeout(()=>{var v;h!=null&&h.dataProxy.isOpen&&(S.current=(v=h==null?void 0:h.dataProxy)==null?void 0:v.proxy)})},[(K=h==null?void 0:h.dataProxy)==null?void 0:K.proxy,(pe=h==null?void 0:h.dataProxy)==null?void 0:pe.profile,C]);const{isLoading:ce,mutate:Ne}=Ve({mutationFn:jn,onSuccess:({data:b})=>{var G,oe,ae;const v=b.content.pop();v&&(r.setFieldsValue({type:v.proxy_config_id?v.proxy_config_id:v.type,country:((G=v==null?void 0:v.info)==null?void 0:G.country)||"",state:((oe=v==null?void 0:v.info)==null?void 0:oe.state)||"",city:((ae=v==null?void 0:v.info)==null?void 0:ae.city)||"",formatProxy:"",ipAddress:v.ip,port:v.port,username:v.user,pass:v.pass,checker:"multibrowser.io"}),setTimeout(()=>S.current=v))}}),Ee=b=>{r.setFieldsValue(fe(b)),_(null),setTimeout(()=>S.current=b)};return c.useEffect(()=>{var b;if((b=h==null?void 0:h.dataProxy)!=null&&b.proxy)return()=>r.resetFields(["ip","port","user","pass","country","state","city"])},[I]),e.jsx(e.Fragment,{children:e.jsx(He,{title:e.jsx("div",{style:{color:s.textActiveNormal},className:"text-[20px]",children:a("Edit proxy")}),onCancel:()=>h==null?void 0:h.setDataProxy({isOpen:!1,proxy:null,profile:null}),open:h==null?void 0:h.dataProxy.isOpen,forceRender:!0,footer:null,centered:!0,children:e.jsxs("div",{className:"h-[620px] overflow-auto",ref:t,children:[e.jsx("div",{children:e.jsx(Pn,{active:I,onChange:b=>{var v;A(b),b===$e.HIDEMIUM_PROXY?r.setFieldValue("type",(v=F[0])==null?void 0:v.id):b===$e.YOUR_PROXY&&r.setFieldValue("type","HTTP")}})}),e.jsx(H,{form:r,layout:"vertical",children:I===$e.YOUR_PROXY?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("Proxy type")}),name:"type",style:{flex:1},rules:[{required:!0,message:"This field is required!"}],children:e.jsx(be,{showSearch:!0,options:[...kn,...W]})}),e.jsxs(Xs,{className:"ml-3",children:[e.jsx(Fn,{onSelect:Ee,onlyShowTab:(T=(O=(V=h==null?void 0:h.dataProxy)==null?void 0:V.profile)==null?void 0:O.uuid)!=null&&T.includes("local-")?"LOCAL":"CLOUD",children:e.jsx(Ue,{className:"mt-1 flex justify-center items-center",icon:e.jsx(Mr,{})})}),e.jsx(Ue,{className:"mt-1 flex justify-center items-center",icon:e.jsx(Cr,{}),onClick:()=>Ne(E),loading:ce})]})]}),!B&&e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("Format Proxy")}),name:"formatProxy",tooltip:{title:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:["1: ",a("type"),"://user:pass@ip:port"]}),e.jsxs("span",{children:["2: ",a("type"),"://ip:port"]}),e.jsx("span",{children:"3: ip:port => http, ip, port"})]})}),placement:"right"},children:e.jsx(Pe,{})}),B?e.jsxs(e.Fragment,{children:[e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("Country")}),name:"country",children:e.jsx(be,{optionFilterProp:"label",showSearch:!0,options:Ns})}),e.jsx(H.Item,{className:"font-semibold text-[14px]",label:a("state"),name:"State",children:e.jsx(be,{showSearch:!0,options:z})}),e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("City")}),name:"city",children:e.jsx(Pe,{})})]}):n!==Ge.Without_proxy?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex",children:[e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:"IP Address"}),name:"ipAddress",style:{flex:1},rules:(k==null?void 0:k.type)!==ut.api?[{required:!0,message:"This field is required!"}]:[],children:e.jsx(Pe,{})}),e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:"Port"}),name:"port",style:{flex:1},className:"ml-4",rules:(k==null?void 0:k.type)!==ut.api?[{required:!0,message:"This field is required!"},xs]:[xs],children:e.jsx(Pe,{})})]}),e.jsxs("div",{className:"flex",children:[e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:"Username"}),name:"username",style:{flex:1},children:e.jsx(Pe,{})}),e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:"Password"}),name:"pass",style:{flex:1},className:"ml-4",children:e.jsx(Pe,{})})]})]}):null,e.jsx(e.Fragment,{children:n!==Ge.Without_proxy&&e.jsxs(e.Fragment,{children:[e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:"Check proxy host"}),name:"checker",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(be,{showSearch:!0,options:gs})}),e.jsxs("div",{className:"flex",children:[e.jsx(H.Item,{name:"checkBeforeStart",valuePropName:"checked",children:e.jsx(mt,{})}),e.jsx("p",{className:"ml-4 mt-1",children:"Check proxy before start profile."})]})]})})]}):I===$e.HIDEMIUM_PROXY?e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(Ln,{})}),e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("Name")}),name:"type",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(be,{optionFilterProp:"label",showSearch:!0,options:F.map(b=>({...b,label:b.name+(b.is_expired?`(${a("Expired")})`:""),value:b.id})),loading:Q})}),e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("Country")}),name:"country",children:e.jsx(be,{optionFilterProp:"label",showSearch:!0,options:Ns})}),e.jsx(H.Item,{className:"font-semibold text-[14px]",label:a("State"),name:"state",children:e.jsx(be,{showSearch:!0,options:z})}),e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("City")}),name:"city",children:e.jsx(Pe,{})}),e.jsx(H.Item,{label:e.jsx(le.Text,{className:"font-semibold text-[14px]",children:a("Check proxy host")}),name:"checker",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(be,{showSearch:!0,options:gs})}),e.jsxs("div",{className:"flex",children:[e.jsx(H.Item,{name:"checkBeforeStart",valuePropName:"checked",children:e.jsx(mt,{})}),e.jsx("p",{className:"ml-4 mt-1",children:a("Check proxy before start profile")})]})]}):null}),e.jsx("div",{className:"mt-4",children:n===Ge.Without_proxy||I===$e.WITHOUT_PROXY?e.jsx(Ue,{loading:M,onClick:()=>Y("CHECK_LOCAL"),type:"primary",children:a("Check IP local")}):e.jsx(Ue,{loading:M,onClick:()=>Y("CHECK"),type:"primary",children:a("Check Proxy")})}),e.jsx("div",{children:w?e.jsx(In,{data:w}):I===$e.WITHOUT_PROXY?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(xt,{})}):null}),e.jsx("div",{className:"flex justify-end absolute bottom-4 right-4",children:e.jsx(Ue,{onClick:()=>Y("EDIT"),type:"primary",children:a("Edit Proxy")})})]})})})}const we=c.createContext(void 0);function fd(){const t=Se(),{message:s}=ye.useApp(),r=Ds(),{state:a}=r,n=ve(),[l,o]=c.useState(es),[m,i]=c.useState([]),[d,p]=c.useState({visible:!1,x:0,y:0,record:null}),{openModal:u,modalName:f,modalData:x,toggleModal:y,modalKey:g}=Sn(),[S,E]=c.useState(a&&a.recordUuid?a.recordUuid:null),[h,L]=c.useState(a&&a.userShare?a.userShare:null),[I,A]=c.useState(!1),[N,Q]=c.useState({isOpenFilter:!1,dataFilter:ht}),[F,w]=c.useState({dataFilter:{page:1,limit:5,option:"hide_empty",search:"",type:"owner"}}),[_,C]=c.useState([""]),{isLocalActiveTab:D}=se(q=>q.display),[W,k]=c.useState(""),[B,Y]=c.useState(1),[M,X]=c.useState(1),[J,z]=c.useState(D?"local":"cloud"),[fe,ce]=c.useState([]),[Ne,Ee]=c.useState([]),[_e,ke]=c.useState({isOpen:!1,data:null}),[ue,R]=c.useState({isOpen:!1,proxy:null,profile:null}),[Z,U]=c.useState({}),K=()=>{if(D)switch(J){case"local":z("local");break;case"folder_local":z("folder_local");break;default:z("local");break}else switch(J){case"cloud":z("cloud");break;case"folder":z("folder");break;case"share_with_me":z("share_with_me");break;default:z("cloud");break}},pe=async q=>{await Ua(D,{uuid_browser:typeof q=="string"?[q]:q}).then(async()=>{i([]),K(),await _n({profileUuid:typeof q=="string"?[q]:q}),n.invalidateQueries(P.listProfile,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_CLOUD,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_LOCAL,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_LOCAL,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),n.invalidateQueries(P.userDetail),s.success("Success!")}).catch(ne=>{s.error(ne.response.data.title)})},V=async q=>{const{folder_id:ee,uuid_browser:ne}=q,te=(await fn(D)).find(de=>de.id===ee);if(te){const de=te.uuid;await xn({isLocal:D,uuid_folder:de,uuid_browser:[ne]}).then(xe=>{s.success(xe==null?void 0:xe.data.title),K(),i([]),n.invalidateQueries(P.listProfile,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_CLOUD,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_LOCAL,{refetchInactive:!0}),n.invalidateQueries(P.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_LOCAL,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),n.invalidateQueries(P.userDetail)}).catch(xe=>{s.error(xe.response.data.title)})}else s.error("Cannot find folder.")},O=(q,ee,ne)=>{const te={html:q?"":`<div>You want to delete profile: <span class="text-[#417AFF]">${ee.name}</span></div>`};Bt(te).then(async de=>{if(de.isConfirmed)switch(ne){case"profile":await pe(ee.ids);break;case"from-folder":ee.folder_id&&await V(ee);break}})},T=async(q,ee)=>{const{folder_id:ne,tag_id:me,createdDate:te,mode:de,...xe}={...N.dataFilter};let Ie={...xe,browser_uuid:q,limit:q.length};q==="exportAll"&&(Ie={browser_uuid:N.dataFilter.browser_uuid??"",name:N.dataFilter.name??"",status:N.dataFilter.status??"",date_range:N.dataFilter.date_range??[null,null],folder_id:N.dataFilter.folder_id??[],tag_id:N.dataFilter.tag_id??[],orderLastOpen:0,orderName:0}),ee!==""&&(Ie={browser_uuid:N.dataFilter.browser_uuid??"",name:N.dataFilter.name??"",status:N.dataFilter.status??"",date_range:N.dataFilter.date_range??[null,null],folder_id:N.dataFilter.folder_id??[],tag_id:N.dataFilter.tag_id??[],search:ee??"",limit:N.dataFilter.browser_uuid?N.dataFilter.browser_uuid.length:10}),delete Ie.isRunning;const ge={data:(await Qa(D,Ie)).data,fileName:"profile.csv"};window.api.exportFile(ge).then(et=>{et&&s.success("Export Success")})},b=async q=>{Bt({title:"Are you sure refuse?"}).then(async me=>{me.isConfirmed&&await pn(q).then(()=>{s.success("Refuse successfully!"),n.invalidateQueries(P.listProfile),n.invalidateQueries(P.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(P.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),n.invalidateQueries(P.GET_LIST_PROFILE_SHARE,{refetchInactive:!0})}).catch(te=>{te.response.data.title&&te.response.data.content.length>0&&s.error(te.response.data.content),te.response.data.title&&te.response.data.content.length==0&&s.error(te.response.data.title)})})};c.useEffect(()=>{i([])},[W,B,M]);const{data:v}=ie({queryFn:()=>St(N.dataFilter),queryKey:[P.listProfile,N.dataFilter]});ie({queryFn:()=>Ze(F.dataFilter,"owner"),queryKey:[P.FOLDER_OWNER,F.dataFilter],onSuccess:({data:q})=>{Ee(q.data.content)}}),ie({queryFn:()=>Ze(F.dataFilter,"local"),queryKey:[P.FOLDER_LOCAL],onSuccess:({data:q})=>{Ee(q.data.content)}});const G=async q=>{const ee=typeof q=="string"?[q]:q,ne=[];for(const me of ee)ne.push(Wa({profile_uuid:me},D));await Promise.all(ne).then(()=>{s.success("Change fingerprint successful")}).catch(me=>{const te=me.response.data;te.title&&te.content&&te.content.length>0?te.content.forEach(de=>{s.error(de)}):s.error(te.title)})},oe=qt();c.useEffect(()=>(window.electron.ipcRenderer.on("browser_actions",(q,ee)=>{oe(za(ee))}),window.electron.ipcRenderer.on("browser-closed",(q,ee)=>{n.invalidateQueries(P.listProfile,{refetchInactive:!0}),n.invalidateQueries(P.GET_PROFILE_BY_FOLDER,{refetchInactive:!0})}),()=>{window.electron.ipcRenderer.removeAllListeners("browser_actions"),window.electron.ipcRenderer.removeAllListeners("browser-closed")}),[]);const ae={columns:l,setColumns:o,setFilterState:Q,arrayKeyActive:_,setArrayKeyActive:C,arrUuidProfilesRun:fe,rightMenu:d,setRightMenu:p,dataNote:_e,setDataNote:ke,dataProxy:ue,setDataProxy:R,setIsOpenAutomation:A,setSelectedRowKeys:i,handleRefuseShare:b,setDataShare:U};return e.jsxs(we.Provider,{value:ae,children:[e.jsxs("div",{className:"flex flex-col h-[calc(100vh-65px)]",children:[e.jsx(Kl,{columns:l,setChangeFolder:k,setColumns:o,filterState:N,setFilterState:Q,selectedRowKeys:m,setSelectedRowKeys:i,toggleModal:y,handleDelete:O,handleChangeFingerPrint:G,handleExportData:T,folder_uuid:S,setFolderUuid:E,arrUuidProfilesRun:fe,setDefaultActiveKey:z,defaultActiveKey:J,filterFolderState:F,setFilterFolderState:w,userShareFolder:h,setUserShareFolder:L,setIsOpenAutomation:A}),e.jsx("div",{id:"table-hidemium",className:"h-[calc(100vh-200px)] mr-5 rounded-lg border border-solid shadow-sm overflow-auto",style:{backgroundColor:t.backgroundLight,borderColor:t.borderNormal},children:e.jsx(Ao,{toggleModal:y,columns:l,selectedRowKeys:m,setSelectedRowKeys:i,dataFilter:N.dataFilter,setFilterState:Q,handleDelete:O,handleChangeFingerPrint:G,handleExportData:T,folder_uuid:S,setFolderUuid:E,profiles:v,dataProfileFolder:Ne,setArrUuidProfilesRun:ce,handleRefuseShare:b,setDefaultActiveKey:z,defaultActiveKey:J})}),e.jsx("div",{className:"h-[64px] flex items-end justify-end",children:e.jsx(Ho,{changeSize:X,changePage:Y,dataFilter:N.dataFilter,setFilterState:Q,filterFolderState:F,setFilterFolderState:w})})]}),u&&f==="Change proxy"&&e.jsx(bi,{profiles:(v==null?void 0:v.data.data.content)||[],modalName:f,modalData:x,openModal:u,toggleModal:y,selectedRowKeys:Fe.isEmpty(m)?(x==null?void 0:x.selectedRowKeys)||[]:m}),e.jsx(Yo,{modalName:f,modalData:x,openModal:u,toggleModal:y}),e.jsx(Xo,{modalName:f,modalData:x,openModal:u,toggleModal:y}),e.jsx(si,{modalName:f,modalData:x,openModal:u,toggleModal:y}),e.jsx(dn,{modalName:f,modalData:x,openModal:u,modalKey:g,toggleModal:y}),e.jsx(oi,{modalName:f,modalData:x,openModal:u,toggleModal:y}),e.jsx(Vr,{modalName:f,modalData:x,open:u,toggleModal:y}),e.jsx(yi,{}),(ue==null?void 0:ue.isOpen)&&e.jsx(vi,{}),e.jsx(un,{isOpen:I,setIsOpen:A,profileSelected:m,dataBinding:Z,filter:N.dataFilter})]})}export{we as ProfilesContext,fd as default};
