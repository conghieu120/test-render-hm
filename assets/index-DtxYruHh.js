import{r as o,k as e,i as C,aj as z,ak as B,al as H,w as _,p as U,n as Q,q as $,j as G,P as k,am as O}from"./index-rD5D3wIe.js";import{u as T}from"./useQuery-DGelT77v.js";import{Q as j}from"./queryKey.const-4yptRpGc.js";import{u as h}from"./useTranslation-CdVDZguR.js";import{P as L}from"./Pagination-Du9klKsI.js";import{H as D}from"./HeaderContext-BALBRazG.js";import{R as S,C as y}from"./row-D9yJnvb0.js";import{S as W}from"./index-u5E2RjuN.js";import{T as A}from"./index-WqkPP-4X.js";import{d as E}from"./index.esm-By9H6xJu.js";import{W as Y}from"./WarningUpgradePlan-DntT910b.js";import{M as J}from"./index-DduQbOjH.js";import{T as F}from"./index-KwqCHwvs.js";import{u as P}from"./theme-CwYL3eQV.js";import{B as V}from"./index-Cnfr_LhE.js";import{E as w}from"./index-Cw8dqNCZ.js";import"./commonjsHelpers__-BosuxZz1.js";import"./utils-Dji2qSVF.js";import"./LeftOutlined-hwnj7f46.js";import"./responsiveObserver-CoLEQsUO.js";import"./TextArea-D8GM8mUo.js";import"./index-VaFpLiuL.js";import"./index-e-kTAu8U.js";import"./index-CwHt7GoT.js";import"./Table-CkCjhjFV.js";import"./addEventListener-Dnrwfmdl.js";import"./DownOutlined-U_yyBD4s.js";import"./index-C97G-hLo.js";import"./index-c2ufQ9kY.js";import"./Dropdown-BA274VvY.js";import"./index-BUNugdcr.js";import"./PurePanel-CzAY4fQy.js";import"./extendsObject-BTpHJDoQ.js";import"./EllipsisOutlined-Cvv2ECO7.js";import"./Overflow-wzPxOxK8.js";import"./collapse-C1MjllT7.js";import"./index-DEeuvegC.js";import"./gapSize-U1swVQyS.js";import"./index-Rll6gE4e.js";import"./SearchOutlined-DPpNmpde.js";import"./index-R7zUTNyO.js";import"./EyeOutlined-D2K23cwb.js";import"./index-Phk2fyGs.js";import"./PlusOutlined-02efxpe5.js";import"./CheckOutlined-CxcD5R4P.js";import"./index-bFDahTXa.js";const X={page:1,limit:12,orderCustom:2,name:"",category:""},b=o.createContext({selectedRowKeys:[],setSelectedRowKeys:t=>{},activeType:"",setActiveType:t=>{},filterState:{},setFilterState:t=>{},activeTab:"newest",setActiveTab:t=>{},total:0,setTotal:t=>{}});function Z({children:t}){const[a,r]=o.useState([]),[i,l]=o.useState(""),[s,m]=o.useState("newest"),[d,c]=o.useState(X),[x,p]=o.useState(0),u={selectedRowKeys:a,setSelectedRowKeys:r,activeType:i,setActiveType:l,activeTab:s,setActiveTab:m,filterState:d,setFilterState:c,total:x,setTotal:p};return e.jsx(b.Provider,{value:u,children:t})}async function ee(){return C.get(z)}const R=async t=>C.get(B,{params:t}),te=async t=>C.post(`${H}/${t}`);function se(){const{filterState:t,setFilterState:a,setTotal:r}=o.useContext(b);console.log(t);const{t:i}=h(),l=(...m)=>{const[d,c]=m;a(x=>({...x,page:d,limit:c}))},{data:s}=T({queryFn:()=>R(t),queryKey:[j.listScriptCategories,t]});return o.useEffect(()=>{s!=null&&s.data.meta.total?r(s==null?void 0:s.data.meta.total):r(0)},[s==null?void 0:s.data.meta.total]),e.jsx("div",{className:"w-full p-4 text-end z-10",children:e.jsx(L,{pageSize:t.limit,current:t.page,pageSizeOptions:[12,24,48],total:(s==null?void 0:s.data.meta.total)||0,showQuickJumper:!0,onChange:l,showSizeChanger:!0,locale:{items_per_page:i("page"),jump_to:i("Go to"),page:i("Page")}})})}const re={"card-script":"_card-script_1qpa2_1","card-script-line":"_card-script-line_1qpa2_13","tab-script-line":"_tab-script-line_1qpa2_21","banner-market":"_banner-market_1qpa2_29"};function ae(){const{filterState:t,setFilterState:a,activeTab:r,setActiveTab:i,setActiveType:l,total:s}=o.useContext(b),[m,d]=o.useState(),c=n=>a(g=>({...g,name:n,page:1})),{Text:x}=A,{token:{textPrimary:p}}=_.useToken(),u=n=>{switch(i(n),a({...t,orderCustom:2}),n){case"newest":a({...t,orderCustom:2});break;case"most-used":a({...t,orderCustom:4});break;default:a({...t,orderCustom:2});break}},{t:v}=h(),M=[{key:"newest",title:v("Newest"),type:"newest",id:2},{key:"most-used",title:v("Most used"),type:"most-used",id:4}],{data:f}=T({queryFn:()=>ee(),queryKey:[j.listScriptCategories]}),[N,q]=o.useState();o.useEffect(()=>{if(f){let n=f.data.content.map(g=>g.charAt(0).toUpperCase()+g.slice(1));q(n)}},[f]);const I=n=>{n=="All"||n==""?(l(""),a({...t,category:""})):(l(n),a({...t,category:n}))},K=o.useMemo(()=>["All"].concat(N||""),[f,N]);return e.jsxs(e.Fragment,{children:[e.jsx(D,{tabs:M,handleChangeTab:u,search:m,setSearch:d,onSearch:c,defaultActiveKey:r,namePage:"Automation Market",searchRight:!0}),e.jsx("div",{className:`${re["tab-script-line"]} mb-5 pb-2`,children:e.jsxs(S,{children:[e.jsx(y,{span:20,children:e.jsx(W,{defaultValue:"All",style:{marginBottom:8},onChange:n=>I(n),options:K,size:"middle",tabIndex:-1})}),e.jsx(y,{span:4,children:e.jsx("div",{className:"h-full float-right",children:e.jsxs(x,{className:`flex items-center h-full text-[16px] font-semibold text-[${p}]`,children:[v("Total"),": ",s]})})})]})})]})}const oe=({data:t,isModalOpen:a,setIsModalOpen:r})=>{const i=U(),{currentCharge:l}=Q(p=>p.chargeSlice),{t:s}=h(),{message:m}=$.useApp(),d=G(),c=p=>{l&&l.charge.type==="common"?Y({title:s("You need to upgrade your plan!"),body:"",confirmButtonText:s("Upgrade"),cancelButtonText:s("No")}).then(u=>{u.isConfirmed&&i(k.payment)}):(te(p.key).then(u=>{d.invalidateQueries(j.listScriptCategories),i(`${k.scenarios}?updateId=${p.key}&is_clone_script=true`)}).catch(u=>{console.log(u),m.error(s("Error !"))}),r(!1))},x=()=>{r(!1)};return e.jsx(J,{width:800,title:t.name,open:a,onOk:()=>c(t),okText:s("Apply"),cancelText:s("Cancel"),onCancel:x,children:e.jsxs("div",{className:"max-h-[600px] overflow-y-scroll overflow-x-hidden",children:[e.jsx("div",{className:"h-[300px] flex justify-center px-5`",children:e.jsx("img",{src:t.image,className:"h-full ",alt:""})}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsxs("div",{className:" flex justify-between",children:[e.jsx("p",{className:" font-bold text-lg",children:s("Description")}),e.jsxs("div",{className:" flex justify-between items-center",children:[e.jsx("div",{children:e.jsx(F,{className:"h-[50%]",children:s(t.category)})}),e.jsxs("p",{className:" flex items-center space-x-2",children:[e.jsx(E,{}),e.jsxs("span",{children:[" ",t.nb_use]})]})]})]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}})]})]})})};function ie({data:t}){const{token:{bgButtonGray:a}}=_.useToken(),r=P(),[i,l]=o.useState(!1),{Text:s}=A,{t:m}=h(),d=c=>{c.stopPropagation()};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{data:t,isModalOpen:i,setIsModalOpen:l}),e.jsx("div",{onClick:()=>l(!0),children:e.jsxs("div",{style:{backgroundColor:r.backgroundLight,borderColor:r.borderNormal},className:"relative overflow-hidden border-[.5px] border-solid shadow-lg rounded group",children:[e.jsxs("div",{className:"h-[200px] w-full relative",children:[e.jsx("img",{className:"absolute w-full h-full object-cover",src:t.image}),t.content&&e.jsx("div",{style:{backgroundColor:"rgba(248, 250, 252, 0.35)",backdropFilter:"blur(35px)"},className:"absolute w-full h-0 group-hover:h-full z-50 transition-all duration-200 ease-in-out opacity-0 group-hover:opacity-100 flex items-center justify-center",children:e.jsx("div",{className:"text-[#333] px-3 text-center text-[16px] text-ellipsis-3-line font-medium ",children:t.content})})]}),e.jsx(S,{children:e.jsx("div",{className:"m-3 mb-0 w-full pb-3 border-0 border-b-[.5px] border-solid border-gray-300 h-[55px] flex items-center",children:e.jsx(s,{className:"text-[16px] font-semibold text-ellipsis-2-line",children:t.name})})}),e.jsxs(S,{children:[e.jsx(y,{span:16,children:e.jsxs("div",{className:"p-3 h-full flex items-center",children:[e.jsx(F,{className:"",children:t.category}),e.jsxs(s,{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"mr-1 "}),t.nb_use]}),t.option&&e.jsx("div",{onClick:c=>d(c),children:e.jsx("a",{href:t.option.youtube,target:"_blank",className:"ml-2 flex items-center",style:{color:a},children:e.jsx(O,{style:{fontSize:20}})})})]})}),e.jsx(y,{span:8,children:e.jsx("div",{className:"px-3 py-3 text-right",children:e.jsx(V,{type:"normal",label:m("Use"),className:"!w-[85px]"})})})]})]})})]})}const le=()=>{const{filterState:t}=o.useContext(b),{t:a}=h(),{data:r}=T({queryFn:()=>R(t),queryKey:[j.listScriptCategories,t]});return e.jsx(e.Fragment,{children:r!=null&&r.data.data.content.length?r==null?void 0:r.data.data.content.map((i,l)=>e.jsx("div",{className:"col-span-3 3xl:col-span-2 px-[10px]",children:e.jsx(ie,{data:i})},l)):e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2",children:e.jsx(w,{image:w.PRESENTED_IMAGE_SIMPLE,description:a("No data")})})})};function et(){const t=P();return e.jsx(e.Fragment,{children:e.jsx(Z,{children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"rounded-tl-md overflow-hidden flex-1 flex flex-col w-full h-full pr-7 pl-1",style:{backgroundColor:t.backgroundNormal},children:[e.jsx(ae,{}),e.jsx("div",{className:"overflow-y-scroll -ml-2 w-[calc(100%+19px)] pb-2 overflow-x-hidden grid grid-cols-3 md:grid-cols-6 xl:grid-cols-9 2xl:grid-cols-12 3xl:grid-cols-10 items-start gap-y-6",children:e.jsx(le,{})})]}),e.jsx(se,{})]})})})}export{et as default};
