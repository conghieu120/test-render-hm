import{q as H,p as F,r,k as e,a3 as k,N as R,G as q,n as M}from"./index-CJvg638n.js";import{a as V,b as G,T as Y}from"./ThemeColor-C3a0Uv2M.js";import{s as l,S as J}from"./index-CuxsWerf.js";import{u as A}from"./useMutation-DtMNI5dJ.js";import{s as K,a as Q,v as U,b as X}from"./auth-8cqRmsX-.js";import{T as _}from"./index-w6IqrXlL.js";import{u as I}from"./useTranslation-DN-CYzVf.js";import{F as m}from"./index-YCIRg4HO.js";import{I as O}from"./index-4M1x7pR3.js";import{A as Z}from"./index.modern-DabBZbjo.js";import{u as ee}from"./theme-D5S-1fEx.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./index.esm-D2nVYnOi.js";import"./index.esm-mlJjdzQr.js";import"./index.esm-DoK_4CPo.js";import"./index.esm-LNwInclH.js";import"./utils-Dji2qSVF.js";import"./index-D8gngLx0.js";import"./index-DC1DAWbZ.js";import"./index-BtoCM6cC.js";import"./TextArea-DBRPcsh0.js";import"./CheckOutlined-CxiWyKpb.js";import"./collapse-C1MjllT7.js";import"./row-C7cWNtLw.js";import"./responsiveObserver-BQm3ddGk.js";import"./EyeOutlined-B-Yk7nA6.js";import"./SearchOutlined-Bmw6m_pM.js";function te({setContent:x}){const{t:i}=I(),{message:n}=H.useApp(),u=F(),[b,j]=r.useState(!1),[y,g]=r.useState(""),f=r.useRef(null),v=r.useRef(null),h=r.useRef(null),[C]=m.useForm();r.useEffect(()=>{let t=s=>{var p;(p=v.current)!=null&&p.contains(s.target)||j(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[b]);const{mutate:E,isLoading:T}=A(K,{onError:t=>{const s=t.response.data;s.type==="error"&&(s.title&&s.content!=""?n.error(s.content):s.title&&s.content&&s.content.length>0?s.content.forEach(p=>{n.error(p)}):s.title&&s.content&&s.content.length==0&&n.error(s.title))},onSuccess:t=>{x(t.data.content),n.success("Send reset password link successfully!"),u("/enter-otp")}}),N=async()=>{var t,s;try{const p=await((t=f.current)==null?void 0:t.validateFields()),P=(s=h==null?void 0:h.current)==null?void 0:s.getValue();if(!P&&k)return n.error("Invalid captcha!"),!1;if(p){let $={...p,recaptcha:P};E($)}}catch(p){console.error("Error get value form fields",p)}},[L,w]=r.useState(30),S=()=>{let s=30;return window.innerWidth>1800&&(s=40),s};r.useEffect(()=>{const t=()=>{w(S())};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);const o={width:"500px",height:"100%","--height-input":`${L}px`};return e.jsxs("div",{className:"w-full h-full p-2 flex flex-col justify-center items-center",children:[e.jsx(_,{label:i("Forgot password"),className:"text-[#2263B3] font-bold !text-[20px] leading-[30px]"}),e.jsxs(m,{ref:f,form:C,style:o,onFinish:N,layout:"vertical",autoComplete:"off",children:[e.jsx(m.Item,{className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:e.jsx("span",{children:i("Email")}),name:"email",rules:[{type:"email",message:`${i("The input is not valid E-mail")}`},{required:!0,message:`${i("This field is required")}`}],children:e.jsx("span",{className:"flex items-center relative",children:e.jsx(O,{placeholder:i("Enter your email address"),value:y,onChange:t=>g(t.target.value)})})}),k,e.jsx(m.Item,{children:e.jsx(R,{loading:T,className:"bg-[var(--color-blue-500)] shadow-[0_0.275rem_0_var(--color-blue-600)] border-[var(--color-blue-600)] border hover:!bg-[var(--color-blue-600)] rounded-[10px] font-medium",type:"primary",htmlType:"submit",style:{width:"100%"},children:i("Send password reset link")})})]})]})}function se({content:x,setDataChangePass:i}){const{t:n}=I(),{message:u}=H.useApp(),b=F(),[j,y]=r.useState(!1),g=r.useRef(null),f=r.useRef(null);let v=120;const[h]=m.useForm(),E=q().state,[T,N]=r.useState(""),[L,w]=r.useState(!1),S=a=>{N(a)},[o,t]=r.useState(E&&E.resendOtpNow?0:v);r.useEffect(()=>{let a=c=>{var d;(d=f.current)!=null&&d.contains(c.target)||y(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[j]),r.useEffect(()=>{let a=setInterval(()=>{t(c=>c>0?c-1:c)},1e3);return()=>clearInterval(a)},[]);const s=async a=>{await U(a).then(c=>{i(c.data.content),u.success(n("Send reset password link successfully!")),b("/change-password")}).catch(c=>{w(!0);const d=c.response.data;d.type==="error"&&(w(!1),d.title&&d.content!=""?u.error(d.content):d.title&&d.content&&d.content.length>0?d.content.forEach(D=>{u.error(D)}):d.title&&d.content&&d.content.length==0&&u.error(d.title))})},p=async()=>{var a;try{const c=await((a=g.current)==null?void 0:a.validateFields());if(c){let d={...c,...x};s(d)}}catch(c){console.error("Error get value form fields",c)}},[P,$]=r.useState(30),B=()=>{let c=30;return window.innerWidth>1800&&(c=40),c};r.useEffect(()=>{const a=()=>{$(B())};return a(),window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[]);const W=async()=>{await Q(x).then(a=>(u.success(a.data.title),a)).catch(a=>{w(!1),u.error(a.message)}).then(()=>{w(!1),t(v)})},z={width:"500px",height:"100%","--height-input":`${P}px`};return e.jsxs("div",{className:"w-full h-full p-2 flex flex-col justify-center items-center",children:[e.jsx(_,{label:n("Enter OTP"),className:"text-[#2263B3] font-bold !text-[20px] leading-[30px]"}),e.jsxs(m,{ref:g,form:h,style:z,onFinish:p,layout:"vertical",autoComplete:"off",children:[e.jsx(m.Item,{className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:n("Your OTP"),name:"otp",rules:[{required:!0,message:`${n("This field is required")}`}],children:e.jsx(Z,{autoFocus:!1,onChange:S,allowedCharacters:"numeric",inputClassName:"rounded-[5px] border border-solid border-gray-300 w-[14%] h-[45px] p-0 text-center m-[5px] text-[24px]"})}),e.jsx("div",{children:o==0?e.jsxs("h4",{className:"text-end text-[14px] font-medium",children:[" ",n("Didnâ€™t receive the OTP ? "),e.jsx("a",{className:"text-[14px] text-[#2263B3] hover:text-[#2263B3] hover:underline",onClick:W,children:n("Resend OTP")})]}):e.jsxs("h4",{className:"text-end text-[14px] font-medium",children:[n("Resend OTP in "),e.jsxs("span",{className:"text-[14px] font-semibold",children:[Math.floor(o/60)," : ",o%60==0?"00":o%60,"s"]})]})}),e.jsx(m.Item,{children:e.jsx(R,{loading:L,className:"bg-[var(--color-blue-500)] shadow-[0_0.275rem_0_var(--color-blue-600)] border-[var(--color-blue-600)] border hover:!bg-[var(--color-blue-600)] rounded-[10px] font-medium",type:"primary",htmlType:"submit",style:{width:"100%"},children:n("Submit OTP")})})]})]})}function re({dataChangePass:x}){const{t:i}=I(),{message:n}=H.useApp(),u=F(),[b,j]=r.useState(!1),[y,g]=r.useState(""),f=r.useRef(null),v=r.useRef(null),[h]=m.useForm();r.useEffect(()=>{let o=t=>{var s;(s=v.current)!=null&&s.contains(t.target)||j(!1)};return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[b]);const{mutate:C,isLoading:E}=A(X,{onError:o=>{const t=o.response.data;t.type==="error"&&(t.title&&t.content!=""?n.error(t.content):t.title&&t.content&&t.content.length>0?t.content.forEach(s=>{n.error(s)}):t.title&&t.content&&t.content.length==0&&n.error(t.title))},onSuccess:()=>{n.success("Change password successfully!"),u("/sign-in")}}),T=async()=>{var o;try{const t=await((o=f.current)==null?void 0:o.validateFields());if(t){let s={new_password:t.password,new_confirm_password:t.password,...x};C(s)}}catch(t){console.error("Error get value form fields",t)}},[N,L]=r.useState(30),w=()=>{let t=30;return window.innerWidth>1800&&(t=40),t};r.useEffect(()=>{const o=()=>{L(w())};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]);const S={width:"500px",height:"100%","--height-input":`${N}px`};return e.jsxs("div",{className:"w-full h-full p-2 flex flex-col justify-center items-center",children:[e.jsx(_,{label:i("Change Password"),className:"text-[#2263B3] font-bold !text-[20px] leading-[30px]"}),e.jsxs(m,{ref:f,form:h,style:S,onFinish:T,layout:"vertical",autoComplete:"off",children:[e.jsx(m.Item,{className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:i("New password"),name:"password",rules:[{required:!0,message:`${i("This field is required")}`},{min:6,message:`${i("Password must be minimum 6 characters")}`}],children:e.jsx(O.Password,{placeholder:i("Enter your new password"),value:y,onChange:o=>g(o.target.value)})}),e.jsx(m.Item,{name:"confirm",className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:i("Confirm Password"),dependencies:["password"],rules:[{required:!0,message:i("Please confirm your password!")},({getFieldValue:o})=>({validator(t,s){return!s||o("password")===s?Promise.resolve():Promise.reject(new Error("The new password that you entered do not match!"))}})],children:e.jsx(O.Password,{})}),e.jsx(m.Item,{children:e.jsx(R,{loading:E,className:"bg-[var(--color-blue-500)] shadow-[0_0.275rem_0_var(--color-blue-600)] border-[var(--color-blue-600)] border hover:!bg-[var(--color-blue-600)] rounded-[10px] font-medium",type:"primary",htmlType:"submit",style:{width:"100%"},children:i("Change password")})})]})]})}const _e=()=>{const{theme:x}=M(h=>h.display),i=ee(),{pathname:n}=q(),{t:u}=I(),b=F(),[j,y]=r.useState(null),[g,f]=r.useState(null),v=h=>{h.preventDefault(),b("/sign-in")};return e.jsxs("div",{className:"relative flex flex-col w-[100vw] h-[100vh]",style:{backgroundColor:i.backgroundNormal},children:[e.jsx("div",{className:"z-[10] absolute w-full block",children:e.jsx("div",{className:"ml-[2rem] mt-[1rem] mb-[1rem]",children:x==="light"?e.jsx(V,{}):e.jsx(G,{})})}),e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsxs("div",{style:{backgroundColor:i.backgroundLight,boxShadow:"0px 2.1060240268707275px 9.82811164855957px 0px #00000008,0px 5.616064071655273px 22.464256286621094px 0px #00000012,0px 21.060239791870117px 58.96867370605469px 0px #00000001,0px 4px 4px 0px #00000040"},className:"relative overflow-hidden flex flex-col justify-center items-center rounded-[20px] w-[600px] min-h-[342px]",children:[e.jsxs("div",{className:`h-full w-full ${l["form-login"]} ${l["form-login-active"]}`,children:[e.jsx("div",{className:`${l["form-login"]} ${n==="/forgot-password"?`${l["form-login-active"]}`:""}`,children:n==="/forgot-password"&&e.jsx(te,{setContent:y})}),e.jsx("div",{className:`${l["form-login"]} ${n==="/enter-otp"?`${l["form-login-active"]}`:""}`,children:n==="/enter-otp"&&e.jsx(se,{content:j,setDataChangePass:f})}),e.jsx("div",{className:`${l["form-login"]} ${n==="/change-password"?`${l["form-login-active"]}`:""}`,children:n==="/change-password"&&e.jsx(re,{dataChangePass:g})})]}),e.jsx("div",{className:"flex flex-row justify-center items-center transform -translate-y-[1rem] mt-2",children:e.jsxs("span",{className:"font-medium leading-[13.62px] text-[#000000]",children:[e.jsx(_,{label:u("Already have an account ?")+" ",size:"14px"}),e.jsx("a",{className:"text-[#2263B3] hover:text-[#2263B3] hover:underline",href:"sign-in",onClick:v,children:u("Login")})]})})]})}),e.jsx(J,{}),e.jsx(Y,{})]})};export{_e as default};
