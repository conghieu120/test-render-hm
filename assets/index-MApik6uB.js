import{r as o,k as e,i as C,aj as z,ak as B,al as H,w as _,p as U,n as Q,q as $,j as G,P as w,am as O,N as L}from"./index-CJvg638n.js";import{u as T}from"./useQuery-DJ-tefVM.js";import{Q as j}from"./queryKey.const-4yptRpGc.js";import{u as h}from"./useTranslation-DN-CYzVf.js";import{P as D}from"./Pagination-BX02S7D7.js";import{H as W}from"./HeaderContext-CcFwS_UE.js";import{R as S,C as y}from"./row-C7cWNtLw.js";import{S as Y}from"./index-DFE2wc1V.js";import{T as F}from"./index-D8gngLx0.js";import{d as A}from"./index.esm-mlJjdzQr.js";import{W as J}from"./WarningUpgradePlan-BwtIm3Je.js";import{M as V}from"./index-Cn7Yo5Hv.js";import{T as E}from"./index-BEWo-Eeh.js";import{u as P}from"./theme-D5S-1fEx.js";import{E as k}from"./index-Wc0f9ZXJ.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./utils-Dji2qSVF.js";import"./LeftOutlined-_e4uGCQm.js";import"./responsiveObserver-BQm3ddGk.js";import"./TextArea-DBRPcsh0.js";import"./index-DC1DAWbZ.js";import"./index-BXlHKc3j.js";import"./index-w6IqrXlL.js";import"./index-BAIjI0rE.js";import"./Table-Bf5fO8hA.js";import"./addEventListener-0hYE1V1V.js";import"./DownOutlined-BgG6dx4I.js";import"./index-DwCW4jpE.js";import"./index-Db4idn_r.js";import"./Dropdown-DXC0sGt_.js";import"./index-BtoCM6cC.js";import"./PurePanel-BiIzqeBG.js";import"./extendsObject-EOfQw3bh.js";import"./EllipsisOutlined-DODEOrOr.js";import"./Overflow-eyj8oHJy.js";import"./collapse-C1MjllT7.js";import"./index-CWlqhW57.js";import"./gapSize-U1swVQyS.js";import"./index-DRCSt6Z6.js";import"./SearchOutlined-Bmw6m_pM.js";import"./index-4M1x7pR3.js";import"./EyeOutlined-B-Yk7nA6.js";import"./index-DGGwne6Z.js";import"./PlusOutlined-B9MlVXp_.js";import"./CheckOutlined-CxiWyKpb.js";import"./index-TvTBJWU5.js";const X={page:1,limit:12,orderCustom:2,name:"",category:""},b=o.createContext({selectedRowKeys:[],setSelectedRowKeys:t=>{},activeType:"",setActiveType:t=>{},filterState:{},setFilterState:t=>{},activeTab:"newest",setActiveTab:t=>{},total:0,setTotal:t=>{}});function Z({children:t}){const[a,r]=o.useState([]),[i,n]=o.useState(""),[s,d]=o.useState("newest"),[m,c]=o.useState(X),[u,p]=o.useState(0),x={selectedRowKeys:a,setSelectedRowKeys:r,activeType:i,setActiveType:n,activeTab:s,setActiveTab:d,filterState:m,setFilterState:c,total:u,setTotal:p};return e.jsx(b.Provider,{value:x,children:t})}async function ee(){return C.get(z)}const R=async t=>C.get(B,{params:t}),te=async t=>C.post(`${H}/${t}`);function se(){const{filterState:t,setFilterState:a,setTotal:r}=o.useContext(b);console.log(t);const{t:i}=h(),n=(...d)=>{const[m,c]=d;a(u=>({...u,page:m,limit:c}))},{data:s}=T({queryFn:()=>R(t),queryKey:[j.listScriptCategories,t]});return o.useEffect(()=>{s!=null&&s.data.meta.total?r(s==null?void 0:s.data.meta.total):r(0)},[s==null?void 0:s.data.meta.total]),e.jsx("div",{className:"w-full p-4 text-end z-10",children:e.jsx(D,{pageSize:t.limit,current:t.page,pageSizeOptions:[12,24,48],total:(s==null?void 0:s.data.meta.total)||0,showQuickJumper:!0,onChange:n,showSizeChanger:!0,locale:{items_per_page:i("page"),jump_to:i("Go to"),page:i("Page")}})})}const re={"card-script":"_card-script_1qpa2_1","card-script-line":"_card-script-line_1qpa2_13","tab-script-line":"_tab-script-line_1qpa2_21","banner-market":"_banner-market_1qpa2_29"};function ae(){const{filterState:t,setFilterState:a,activeTab:r,setActiveTab:i,setActiveType:n,total:s}=o.useContext(b),[d,m]=o.useState(),c=l=>a(g=>({...g,name:l,page:1})),{Text:u}=F,{token:{textPrimary:p}}=_.useToken(),x=l=>{switch(i(l),a({...t,orderCustom:2}),l){case"newest":a({...t,orderCustom:2});break;case"most-used":a({...t,orderCustom:4});break;default:a({...t,orderCustom:2});break}},{t:v}=h(),M=[{key:"newest",title:v("Newest"),type:"newest",id:2},{key:"most-used",title:v("Most used"),type:"most-used",id:4}],{data:f}=T({queryFn:()=>ee(),queryKey:[j.listScriptCategories]}),[N,q]=o.useState();o.useEffect(()=>{if(f){let l=f.data.content.map(g=>g.charAt(0).toUpperCase()+g.slice(1));q(l)}},[f]);const I=l=>{l=="All"||l==""?(n(""),a({...t,category:""})):(n(l),a({...t,category:l}))},K=o.useMemo(()=>["All"].concat(N||""),[f,N]);return e.jsxs(e.Fragment,{children:[e.jsx(W,{tabs:M,handleChangeTab:x,search:d,setSearch:m,onSearch:c,defaultActiveKey:r,namePage:"Automation Market",searchRight:!0}),e.jsx("div",{className:`${re["tab-script-line"]} mb-5 pb-2`,children:e.jsxs(S,{children:[e.jsx(y,{span:20,children:e.jsx(Y,{defaultValue:"All",style:{marginBottom:8},onChange:l=>I(l),options:K,size:"middle",tabIndex:-1})}),e.jsx(y,{span:4,children:e.jsx("div",{className:"h-full float-right",children:e.jsxs(u,{className:`flex items-center h-full text-[16px] font-semibold text-[${p}]`,children:[v("Total"),": ",s]})})})]})})]})}const oe=({data:t,isModalOpen:a,setIsModalOpen:r})=>{const i=U(),{currentCharge:n}=Q(p=>p.chargeSlice),{t:s}=h(),{message:d}=$.useApp(),m=G(),c=p=>{n&&n.charge.type==="common"?J({title:s("You need to upgrade your plan!"),body:"",confirmButtonText:s("Upgrade"),cancelButtonText:s("No")}).then(x=>{x.isConfirmed&&i(w.payment)}):(te(p.key).then(x=>{m.invalidateQueries(j.listScriptCategories),i(`${w.scenarios}?updateId=${p.key}&is_clone_script=true`)}).catch(x=>{console.log(x),d.error(s("Error !"))}),r(!1))},u=()=>{r(!1)};return e.jsx(V,{width:800,title:t.name,open:a,onOk:()=>c(t),okText:s("Apply"),cancelText:s("Cancel"),onCancel:u,children:e.jsxs("div",{className:"max-h-[600px] overflow-y-scroll overflow-x-hidden",children:[e.jsx("div",{className:"h-[300px] flex justify-center px-5`",children:e.jsx("img",{src:t.image,className:"h-full ",alt:""})}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsxs("div",{className:" flex justify-between",children:[e.jsx("p",{className:" font-bold text-lg",children:s("Description")}),e.jsxs("div",{className:" flex justify-between items-center",children:[e.jsx("div",{children:e.jsx(E,{className:"h-[50%]",children:s(t.category)})}),e.jsxs("p",{className:" flex items-center space-x-2",children:[e.jsx(A,{}),e.jsxs("span",{children:[" ",t.nb_use]})]})]})]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}})]})]})})};function ie({data:t}){const{token:{bgButtonGray:a}}=_.useToken(),r=P(),[i,n]=o.useState(!1),{Text:s}=F,{t:d}=h(),m=c=>{c.stopPropagation()};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{data:t,isModalOpen:i,setIsModalOpen:n}),e.jsx("div",{onClick:()=>n(!0),children:e.jsxs("div",{style:{backgroundColor:r.backgroundLight,borderColor:r.borderNormal},className:"relative overflow-hidden border-[.5px] border-solid shadow-lg rounded group",children:[e.jsxs("div",{className:"h-[200px] w-full relative",children:[e.jsx("img",{className:"absolute w-full h-full object-cover",src:t.image}),t.content&&e.jsx("div",{style:{backgroundColor:"rgba(248, 250, 252, 0.35)",backdropFilter:"blur(35px)"},className:"absolute w-full h-0 group-hover:h-full z-50 transition-all duration-200 ease-in-out opacity-0 group-hover:opacity-100 flex items-center justify-center",children:e.jsx("div",{className:"text-[#333] px-3 text-center text-[16px] text-ellipsis-3-line font-medium ",children:t.content})})]}),e.jsx(S,{children:e.jsx("div",{className:"m-3 mb-0 w-full pb-3 border-0 border-b-[.5px] border-solid border-gray-300 h-[55px] flex items-center",children:e.jsx(s,{className:"text-[16px] font-semibold text-ellipsis-2-line",children:t.name})})}),e.jsxs(S,{children:[e.jsx(y,{span:16,children:e.jsxs("div",{className:"p-3 h-full flex items-center",children:[e.jsx(E,{className:"",children:t.category}),e.jsxs(s,{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"mr-1 "}),t.nb_use]}),t.option&&e.jsx("div",{onClick:c=>m(c),children:e.jsx("a",{href:t.option.youtube,target:"_blank",className:"ml-2 flex items-center",style:{color:a},children:e.jsx(O,{style:{fontSize:20}})})})]})}),e.jsx(y,{span:8,children:e.jsx("div",{className:"px-3 py-3 text-right",children:e.jsx(L,{className:"bg-[#2263B3] font-semibold text-[#FFFFFF] rounded-[3px] w-[93px] hover:text-red hover:bg-white ",children:d("Use")})})})]})]})})]})}const ne=()=>{const{filterState:t}=o.useContext(b),{t:a}=h(),{data:r}=T({queryFn:()=>R(t),queryKey:[j.listScriptCategories,t]});return e.jsx(e.Fragment,{children:r!=null&&r.data.data.content.length?r==null?void 0:r.data.data.content.map((i,n)=>e.jsx("div",{className:"col-span-3 3xl:col-span-2 px-[10px]",children:e.jsx(ie,{data:i})},n)):e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2",children:e.jsx(k,{image:k.PRESENTED_IMAGE_SIMPLE,description:a("No data")})})})};function et(){const t=P();return e.jsx(e.Fragment,{children:e.jsx(Z,{children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"rounded-tl-md overflow-hidden flex-1 flex flex-col w-full h-full pr-7 pl-1",style:{backgroundColor:t.backgroundNormal},children:[e.jsx(ae,{}),e.jsx("div",{className:"overflow-y-scroll -ml-2 w-[calc(100%+19px)] pb-2 overflow-x-hidden grid grid-cols-3 md:grid-cols-6 xl:grid-cols-9 2xl:grid-cols-12 3xl:grid-cols-10 items-start gap-y-6",children:e.jsx(ne,{})})]}),e.jsx(se,{})]})})})}export{et as default};
