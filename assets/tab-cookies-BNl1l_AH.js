import{H as E,q as w,a1 as U,ce as C,k as o,ga as V,gb as D,aE as N,r as O}from"./index-rD5D3wIe.js";import{b as f}from"./style-ISyv3lne.js";import{u as R}from"./useMutation-7pHNuXnK.js";import{u as A}from"./cookieService-DS2eJ81a.js";import{B as k}from"./index-Cnfr_LhE.js";import{u as h}from"./useTranslation-CdVDZguR.js";import{F as g}from"./index-D0qsI2Ko.js";import{F as J}from"./index-C7QdTRRe.js";import{U as L}from"./index-H7TxDH1o.js";import{I as P}from"./index-R7zUTNyO.js";import{T as M}from"./Table-CkCjhjFV.js";import{T as z}from"./index-WqkPP-4X.js";import{T as B}from"./index-L4GiCksr.js";import"./commonjsHelpers-BosuxZz1.js";import"./styled-components.browser.esm-Cc1hOk3M.js";import"./utils-Dji2qSVF.js";import"./collapse-C1MjllT7.js";import"./row-D9yJnvb0.js";import"./responsiveObserver-CoLEQsUO.js";import"./index-BUNugdcr.js";import"./index-VaFpLiuL.js";import"./gapSize-U1swVQyS.js";import"./Pagination-Du9klKsI.js";import"./LeftOutlined-hwnj7f46.js";import"./index-Cw8dqNCZ.js";import"./Overflow-wzPxOxK8.js";import"./PurePanel-CzAY4fQy.js";import"./TextArea-D8GM8mUo.js";import"./CheckOutlined-CxcD5R4P.js";import"./DownOutlined-U_yyBD4s.js";import"./SearchOutlined-DPpNmpde.js";import"./EyeOutlined-D2K23cwb.js";import"./progress-kO2vXcYl.js";import"./addEventListener-Dnrwfmdl.js";import"./index-C97G-hLo.js";import"./index-c2ufQ9kY.js";import"./Dropdown-BA274VvY.js";import"./extendsObject-BTpHJDoQ.js";import"./EllipsisOutlined-Cvv2ECO7.js";import"./index-DEeuvegC.js";import"./index-Rll6gE4e.js";const H=`[{"key":"value"},{...}]\r
or\r
domain.com	TRUE	/path	TRUE	expirationDate	name	value`;function q(){const{TextArea:i}=P,{t}=h(),[l]=g.useForm(),m=E(),{message:a,notification:p}=w.useApp(),x=(e="")=>{if(!e||e.length<=13)return!1;if(e.includes("	"))return!0;if(e.includes("[")&&e.includes("]")){if(JSON.parse(e).length<1)return!1}else return!1;return!0},y=e=>{try{return JSON.parse(e)}catch{return v(e)}},v=e=>{var s=[],d=e.split(`
`);return d.forEach(function(c){if(!(c.length<=1)){var r=c.split("	");if(r.length===7||r.length==1){r.length==1&&(r=c.split(" ")),r=r.map(function(_){return _.trim()});var n={};n.domain=r[0],n.httpOnly=r[1]==="TRUE",n.path=r[2],n.secure=r[3]==="TRUE";var u=r[4];u.length===17&&(u=Math.floor(u/1e6-11644473600)),n.expirationDate=parseFloat(u),n.name=r[5],n.value=r[6],s.push(n)}}}),s},T=()=>{const e=l.getFieldValue("text_import");if(x(e))try{const s=y(e);j(s)}catch{p.error({message:t("Invalid cookie")})}else a.error(t("Wrong format data"))},b=()=>{m(C({cookie_id:0,cookies_data:[]}))},{isLoading:F,mutate:j}=R({mutationFn:e=>{const s=U("is_Local");return A(e,s)},onSuccess:({data:e})=>{console.log({data:e}),m(C({cookie_id:e.content.id,cookies_data:JSON.parse(e.content.cookie)})),l.setFieldValue("text_import","")},onError:()=>{a.error(t("Cookies invalid!"))}}),I=async e=>{if(await V(e.file))try{const d=await D(e.file),c=y(d);j(c)}catch{a.error(t("Invalid cookie"))}else a.error(t("Only file .txt | .json is valid."))},S={name:"file",headers:{authorization:"authorization-text"},showUploadList:!1,onChange:e=>I(e),beforeUpload:()=>!1};return o.jsxs(g,{form:l,children:[o.jsx(f,{children:o.jsx(g.Item,{name:"text_import",children:o.jsx(i,{rows:6,placeholder:H})})}),o.jsx(f,{children:o.jsxs(J,{gap:8,justify:"end",children:[o.jsx(k,{loading:F,type:"primary",label:t("Paste as Text"),onClick:()=>T()}),o.jsx(L,{...S,children:o.jsx(k,{type:"primary",label:t("Import File")})}),o.jsx(k,{type:"error",label:t("Clear"),onClick:()=>b()})]})})]})}function K(){const{cookies_data:i}=N(a=>a.cookieSlice),{t}=h(),l=[{title:t("Domain"),key:"domain",dataIndex:"domain"},{title:t("Name"),dataIndex:"name",key:"name",render:a=>o.jsx("a",{children:a})},{title:t("Value"),dataIndex:"value",key:"value"},{title:t("Expires"),dataIndex:"expires",key:"expires"}],m=O.useMemo(()=>i?i==null?void 0:i.map((p,x)=>({key:x??"",name:p.name??"",value:p.value??"",expires:p.expirationDate??"",domain:p.domain??""})):[],[i]);return o.jsx(M,{columns:l,dataSource:m,pagination:!1})}function W(){const{Text:i}=z,{t}=h();return o.jsxs(o.Fragment,{children:[o.jsx(f,{children:o.jsx(i,{children:t("The table below shows only cookies that have been imported manually, to see all profile cookies you need to open this link in the browser window: chrome://settings/content/all")})}),o.jsx(q,{}),o.jsx(f,{children:o.jsx(K,{})})]})}function Oe({active:i}){const{t}=h(),l=[{key:"cookies",label:t("Cookies"),children:o.jsx(W,{})}];return o.jsx("div",{style:{padding:"20px 24px",marginTop:"16px"},children:o.jsx(B,{defaultActiveKey:"cookies",items:l})})}export{Oe as default};
