import{bJ as pa,bK as ma,bL as Fs,bM as Ns,bN as Es,bo as ks,bv as ze,bO as ha,$,br as mt,r as c,bt as ft,bw as $t,bP as Is,h as bt,e as at,bQ as fa,bR as xa,u as Te,g as ga,m as ba,C as ya,bS as va,bT as ja,b as Ca,d as Sa,bG as wa,A as _a,n as se,w as Le,bU as Os,k as e,l as De,q as je,a7 as Ts,v as qt,j as Ce,P as Ls,bV as Pa,bW as Fa,bX as Na,bY as Ea,bZ as ka,b_ as Ia,ai as Ke,a1 as zt,p as Oa,G as Rs,b$ as St,ag as $s,c0 as Qt,c1 as As,ah as it,c2 as Ta,ab as Oe,c3 as Ds,bn as La,O as cs,c4 as Ra,c5 as $a,bm as Aa,c6 as Da,c7 as Ha,i as ds,U as Ba,c8 as Ma,c9 as Va,ca as qa,cb as za}from"./index-rD5D3wIe.js";import{g as Hs,u as Qa}from"./tagService-DBP5wH-n.js";import{g as Wt,S as Wa,e as Ua,a as Ya,D as At,c as Xa,r as Ga,f as Ja}from"./statusService-EwMmqDzr.js";import{B as ee,a as Bs,L as Ms,b as Za,c as Ka}from"./index-Cnfr_LhE.js";import{t as rt}from"./truncateString-BKM5_Dcw.js";import{I as Ae}from"./Icon-BO7gCnsj.js";import{S as er}from"./index-mKYXhaNR.js";import{u as Se}from"./theme-CwYL3eQV.js";import{b as Dt,c as tr}from"./index.esm-oalvffsi.js";import{F as B}from"./index-D0qsI2Ko.js";import{a as wt,u as ne}from"./useTranslation-CdVDZguR.js";import{T as pe,L as sr}from"./index-WqkPP-4X.js";import{B as Ht}from"./index-jmyvV1Dh.js";import{M as He}from"./index-DduQbOjH.js";import{S as ve,E as ht}from"./index-Cw8dqNCZ.js";import{T as Ye}from"./index-KwqCHwvs.js";import{R as ar,C as us}from"./row-D9yJnvb0.js";import{D as rr}from"./index-BtUR3eQT.js";import{I as Ie}from"./index-R7zUTNyO.js";import{u as he}from"./useQuery-DGelT77v.js";import{T as Be}from"./index-CwHt7GoT.js";import{b as nr}from"./defaultConfigService-DFpQWDr0.js";import{Q as _}from"./queryKey.const-4yptRpGc.js";import{P as Nt,a as Et}from"./defaultConfig.const-CZoADfh5.js";import{b as Ut,c as lr}from"./index.esm-BmOWQ9Wu.js";import{b as or}from"./index.esm-aP3EXNwz.js";import{j as ir,k as cr,c as dr,F as ur,l as pr,m as mr,n as hr,f as fr,g as ps,h as xr,i as gr,o as br}from"./index.esm-By9H6xJu.js";import{f as yr}from"./index.esm-CuvWRocu.js";import{a as vr}from"./index.esm-76RBLqwT.js";import{C as Yt,a as jr}from"./index.esm-BRcYQ8HA.js";import{b as Cr}from"./index.esm-D91DXYLM.js";import{L as $e}from"./index-CZlFIf3S.js";import{P as lt}from"./index-Dv8E0b5H.js";import{C as Sr,F as wr,u as _r,a as Pr,P as Fr,S as Nr,D as Er,r as kr,b as Ir,v as Or,R as Tr,c as Lr,d as Rr}from"./HeaderContext-BALBRazG.js";import{u as Ve}from"./useMutation-7pHNuXnK.js";import{c as $r}from"./extensionService-DjV-mgP6.js";import{g as Ar}from"./userSettingService-Bg9YvoAZ.js";import{S as ut}from"./index-DeZc1mMx.js";import{a as Vs,b as Dr,M as Hr}from"./modalCreateProfile-C1awpAjQ.js";import{e as qs,g as Br,c as Mr}from"./cookieService-DS2eJ81a.js";import{s as zs}from"./index-BqcLO0q9.js";import{D as Vr,T as We}from"./Table-CkCjhjFV.js";import{P as nt}from"./Pagination-Du9klKsI.js";import{v as Qs,a as Ws}from"./index-DOMhwKmi.js";import{e as Xt}from"./index-DQqevswW.js";import{f as qr}from"./index-B3nBNj8d.js";import{s as Me}from"./rightMenuStyle.module-BozsqzbR.js";import{g as zr}from"./PurePanel-CzAY4fQy.js";import{g as Qr,T as Wr}from"./TextArea-D8GM8mUo.js";import{D as Ur}from"./index-CLJiH4Bi.js";import{I as Yr}from"./index-Bn6pjTd0.js";import{D as Bt}from"./DeleteConfirmModal-DSBDXsxU.js";import{b as Us}from"./index.esm-pljYh1ir.js";import{T as Mt}from"./index-BUNugdcr.js";import{R as Xr,u as Gr,T as Jr,P as Zr,A as Kr,S as en,C as tn,a as sn}from"./index-6keSMZbN.js";import{B as an}from"./BrowserIcon-BnKFWsow.js";import{C as rn}from"./index.esm-Clfs4ZBd.js";import{T as _e}from"./index-e-kTAu8U.js";import{f as nn}from"./index-uI2PeSUX.js";import{g as Ys,b as Xs,a as ln,M as on,r as cn}from"./ModalShare-ahguhMg7.js";import{R as kt}from"./index-Rll6gE4e.js";import{f as Ze,b as dn,a as un,g as pn,d as mn}from"./folderService-DJTjQCA7.js";import{a as Gs,s as hn,b as fn,g as xn,q as gn,e as bn}from"./proxyService-BvUDuHG4.js";import{F as yn}from"./index-C7QdTRRe.js";import{u as vn}from"./useModal-B7KlwHrD.js";import{S as jn}from"./index-u5E2RjuN.js";import{r as Cn}from"./automationService-ItdDN5Ql.js";import{P as Re,a as Sn,S as wn}from"./SelectProxy-BwYvOl4f.js";import{P as Ge,a as _n,b as ms,B as Pn,T as ct,c as Fn,d as hs,H as fs,D as Nn,e as It,r as tt,h as En}from"./FormAddProxy-8KnQ1Sdo.js";import{g as kn,B as In}from"./index-CXoh33xe.js";import{S as On}from"./index-DEeuvegC.js";import{u as Gt}from"./styled-components.browser.esm-Cc1hOk3M.js";import{p as Ue}from"./commonHelpers-BOkgPZYN.js";import{T as Tn}from"./index-Phk2fyGs.js";import"./commonjsHelpers__-BosuxZz1.js";import"./collapse-C1MjllT7.js";import"./index-VaFpLiuL.js";import"./CheckOutlined-CxcD5R4P.js";import"./Overflow-wzPxOxK8.js";import"./DownOutlined-U_yyBD4s.js";import"./SearchOutlined-DPpNmpde.js";import"./responsiveObserver-CoLEQsUO.js";import"./EyeOutlined-D2K23cwb.js";import"./utils-Dji2qSVF.js";import"./LeftOutlined-hwnj7f46.js";import"./extendsObject-BTpHJDoQ.js";import"./EllipsisOutlined-Cvv2ECO7.js";import"./addEventListener-Dnrwfmdl.js";import"./index-C97G-hLo.js";import"./index-c2ufQ9kY.js";import"./Dropdown-BA274VvY.js";import"./index-bFDahTXa.js";import"./index-BMo3QHL0.js";import"./index-H7TxDH1o.js";import"./progress-kO2vXcYl.js";import"./index-CMmsTmU8.js";import"./Skeleton-B435kt64.js";import"./gapSize-U1swVQyS.js";import"./compareVersion-JynyrHBx.js";import"./index-DvOzr4aL.js";import"./PlusOutlined-02efxpe5.js";var Ln=["b"],Rn=["v"],Ot=function(s){return Math.round(Number(s||0))},$n=function(s){if(s&&Es(s)==="object"&&"h"in s&&"b"in s){var r=s,a=r.b,n=ks(r,Ln);return ze(ze({},n),{},{v:a})}return typeof s=="string"&&/hsb/.test(s)?s.replace(/hsb/,"hsv"):s},_t=function(t){pa(r,t);var s=ma(r);function r(a){return Fs(this,r),s.call(this,$n(a))}return Ns(r,[{key:"toHsbString",value:function(){var n=this.toHsb(),l=Ot(n.s*100),o=Ot(n.b*100),m=Ot(n.h),i=n.a,d="hsb(".concat(m,", ").concat(l,"%, ").concat(o,"%)"),p="hsba(".concat(m,", ").concat(l,"%, ").concat(o,"%, ").concat(i.toFixed(i===0?0:2),")");return i===1?d:p}},{key:"toHsb",value:function(){var n=this.toHsv();Es(this.originalInput)==="object"&&this.originalInput&&"h"in this.originalInput&&(n=this.originalInput);var l=n;l.v;var o=ks(l,Rn);return ze(ze({},o),{},{b:n.v,a:this.a})}}]),r}(ha),An="rc-color-picker",Xe=function(s){return s instanceof _t?s:new _t(s)},Dn=Xe("#1677ff"),Js=function(s){var r=s.offset,a=s.targetRef,n=s.containerRef,l=s.color,o=s.type,m=n.current.getBoundingClientRect(),i=m.width,d=m.height,p=a.current.getBoundingClientRect(),u=p.width,f=p.height,x=u/2,v=f/2,b=(r.x+x)/i,S=1-(r.y+v)/d,P=l.toHsb(),h=b,D=(r.x+x)/i*360;if(o)switch(o){case"hue":return Xe(ze(ze({},P),{},{h:D<=0?0:D}));case"alpha":return Xe(ze(ze({},P),{},{a:h<=0?0:h}))}return Xe({h:P.h,s:b<=0?0:b,b:S>=1?1:S,a:P.a})},Zs=function(s,r,a,n){var l=s.current.getBoundingClientRect(),o=l.width,m=l.height,i=r.current.getBoundingClientRect(),d=i.width,p=i.height,u=d/2,f=p/2,x=a.toHsb();if(!(d===0&&p===0||d!==p)){if(n)switch(n){case"hue":return{x:x.h/360*o-u,y:-f/3};case"alpha":return{x:x.a/1*o-u,y:-f/3}}return{x:x.s*o-u,y:(1-x.b)*m-f}}},Jt=function(s){var r=s.color,a=s.prefixCls,n=s.className,l=s.style,o=s.onClick,m="".concat(a,"-color-block");return $.createElement("div",{className:mt(m,n),style:l,onClick:o},$.createElement("div",{className:"".concat(m,"-inner"),style:{background:r}}))};function Hn(t){var s="touches"in t?t.touches[0]:t,r=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,a=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:s.pageX-r,pageY:s.pageY-a}}function Ks(t){var s=t.offset,r=t.targetRef,a=t.containerRef,n=t.direction,l=t.onDragChange,o=t.onDragChangeComplete,m=t.calculate,i=t.color,d=t.disabledDrag,p=c.useState(s||{x:0,y:0}),u=ft(p,2),f=u[0],x=u[1],v=c.useRef(null),b=c.useRef(null),S=c.useRef({flag:!1});c.useEffect(function(){if(S.current.flag===!1){var O=m==null?void 0:m(a);O&&x(O)}},[i,a]),c.useEffect(function(){return function(){document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",b.current),document.removeEventListener("touchmove",v.current),document.removeEventListener("touchend",b.current),v.current=null,b.current=null}},[]);var P=function(E){var W=Hn(E),w=W.pageX,F=W.pageY,y=a.current.getBoundingClientRect(),T=y.x,H=y.y,N=y.width,L=y.height,A=r.current.getBoundingClientRect(),q=A.width,M=A.height,Y=q/2,le=M/2,X=Math.max(0,Math.min(w-T,N))-Y,te=Math.max(0,Math.min(F-H,L))-le,ce={x:X,y:n==="x"?f.y:te};if(q===0&&M===0||q!==M)return!1;x(ce),l==null||l(ce)},h=function(E){E.preventDefault(),P(E)},D=function(E){E.preventDefault(),S.current.flag=!1,document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",b.current),document.removeEventListener("touchmove",v.current),document.removeEventListener("touchend",b.current),v.current=null,b.current=null,o==null||o()},I=function(E){document.removeEventListener("mousemove",v.current),document.removeEventListener("mouseup",b.current),!d&&(P(E),S.current.flag=!0,document.addEventListener("mousemove",h),document.addEventListener("mouseup",D),document.addEventListener("touchmove",h),document.addEventListener("touchend",D),v.current=h,b.current=D)};return[f,I]}var ea=function(s){var r=s.size,a=r===void 0?"default":r,n=s.color,l=s.prefixCls;return $.createElement("div",{className:mt("".concat(l,"-handler"),$t({},"".concat(l,"-handler-sm"),a==="small")),style:{backgroundColor:n}})},ta=function(s){var r=s.children,a=s.style,n=s.prefixCls;return $.createElement("div",{className:"".concat(n,"-palette"),style:ze({position:"relative"},a)},r)},sa=c.forwardRef(function(t,s){var r=t.children,a=t.offset;return $.createElement("div",{ref:s,style:{position:"absolute",left:a.x,top:a.y,zIndex:1}},r)}),Bn=function(s){var r=s.color,a=s.onChange,n=s.prefixCls,l=s.onChangeComplete,o=s.disabled,m=c.useRef(),i=c.useRef(),d=c.useRef(r),p=Is(function(b){var S=Js({offset:b,targetRef:i,containerRef:m,color:r});d.current=S,a(S)}),u=Ks({color:r,containerRef:m,targetRef:i,calculate:function(S){return Zs(S,i,r)},onDragChange:p,onDragChangeComplete:function(){return l==null?void 0:l(d.current)},disabledDrag:o}),f=ft(u,2),x=f[0],v=f[1];return $.createElement("div",{ref:m,className:"".concat(n,"-select"),onMouseDown:v,onTouchStart:v},$.createElement(ta,{prefixCls:n},$.createElement(sa,{offset:x,ref:i},$.createElement(ea,{color:r.toRgbString(),prefixCls:n})),$.createElement("div",{className:"".concat(n,"-saturation"),style:{backgroundColor:"hsl(".concat(r.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},Mn=function(s){var r=s.colors,a=s.children,n=s.direction,l=n===void 0?"to right":n,o=s.type,m=s.prefixCls,i=c.useMemo(function(){return r.map(function(d,p){var u=Xe(d);return o==="alpha"&&p===r.length-1&&u.setAlpha(1),u.toRgbString()}).join(",")},[r,o]);return $.createElement("div",{className:"".concat(m,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(l,", ").concat(i,")")}},a)},xs=function(s){var r=s.gradientColors,a=s.direction,n=s.type,l=n===void 0?"hue":n,o=s.color,m=s.value,i=s.onChange,d=s.onChangeComplete,p=s.disabled,u=s.prefixCls,f=c.useRef(),x=c.useRef(),v=c.useRef(o),b=Is(function(I){var O=Js({offset:I,targetRef:x,containerRef:f,color:o,type:l});v.current=O,i(O)}),S=Ks({color:o,targetRef:x,containerRef:f,calculate:function(O){return Zs(O,x,o,l)},onDragChange:b,onDragChangeComplete:function(){d==null||d(v.current,l)},direction:"x",disabledDrag:p}),P=ft(S,2),h=P[0],D=P[1];return $.createElement("div",{ref:f,className:mt("".concat(u,"-slider"),"".concat(u,"-slider-").concat(l)),onMouseDown:D,onTouchStart:D},$.createElement(ta,{prefixCls:u},$.createElement(sa,{offset:h,ref:x},$.createElement(ea,{size:"small",color:m,prefixCls:u})),$.createElement(Mn,{colors:r,direction:a,type:l,prefixCls:u})))};function gs(t){return t!==void 0}var Vn=function(s,r){var a=r.defaultValue,n=r.value,l=c.useState(function(){var d;return gs(n)?d=n:gs(a)?d=a:d=s,Xe(d)}),o=ft(l,2),m=o[0],i=o[1];return c.useEffect(function(){n&&i(Xe(n))},[n]),[m,i]},qn=["rgb(255, 0, 0) 0%","rgb(255, 255, 0) 17%","rgb(0, 255, 0) 33%","rgb(0, 255, 255) 50%","rgb(0, 0, 255) 67%","rgb(255, 0, 255) 83%","rgb(255, 0, 0) 100%"];const zn=c.forwardRef(function(t,s){var r=t.value,a=t.defaultValue,n=t.prefixCls,l=n===void 0?An:n,o=t.onChange,m=t.onChangeComplete,i=t.className,d=t.style,p=t.panelRender,u=t.disabledAlpha,f=u===void 0?!1:u,x=t.disabled,v=x===void 0?!1:x,b=Vn(Dn,{value:r,defaultValue:a}),S=ft(b,2),P=S[0],h=S[1],D=c.useMemo(function(){var w=Xe(P.toRgbString());return w.setAlpha(1),w.toRgbString()},[P]),I=mt("".concat(l,"-panel"),i,$t({},"".concat(l,"-panel-disabled"),v)),O={prefixCls:l,onChangeComplete:m,disabled:v},E=function(F,y){r||h(F),o==null||o(F,y)},W=$.createElement($.Fragment,null,$.createElement(Bn,bt({color:P,onChange:E},O)),$.createElement("div",{className:"".concat(l,"-slider-container")},$.createElement("div",{className:mt("".concat(l,"-slider-group"),$t({},"".concat(l,"-slider-group-disabled-alpha"),f))},$.createElement(xs,bt({gradientColors:qn,color:P,value:"hsl(".concat(P.toHsb().h,",100%, 50%)"),onChange:function(F){return E(F,"hue")}},O)),!f&&$.createElement(xs,bt({type:"alpha",gradientColors:["rgba(255, 0, 4, 0) 0%",D],color:P,value:P.toRgbString(),onChange:function(F){return E(F,"alpha")}},O))),$.createElement(Jt,{color:P.toRgbString(),prefixCls:l})));return $.createElement("div",{className:I,style:d,ref:s},typeof p=="function"?p(W):W)}),aa=$.createContext({}),ra=$.createContext({}),{Provider:Qn}=aa,{Provider:Wn}=ra,yt=(t,s)=>(t==null?void 0:t.replace(/[^\w/]/gi,"").slice(0,s?8:6))||"",Un=(t,s)=>t?yt(t,s):"";let bs=function(){function t(s){Fs(this,t),this.cleared=!1,this.metaColor=new _t(s),s||(this.metaColor.setAlpha(0),this.cleared=!0)}return Ns(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return Un(this.toHexString(),this.metaColor.getAlpha()<1)}},{key:"toHexString",value:function(){return this.metaColor.getAlpha()===1?this.metaColor.toHexString():this.metaColor.toHex8String()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}}])}();const Pe=t=>t instanceof bs?t:new bs(t),vt=t=>Math.round(Number(t||0)),Pt=t=>vt(t.toHsb().a*100),Tt=(t,s)=>{const r=t.toHsb();return r.a=s||1,Pe(r)},Yn=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=()=>{if(r&&!r.cleared){const l=r.toHsb();l.a=0;const o=Pe(l);o.cleared=!0,a==null||a(o)}};return $.createElement("div",{className:`${s}-clear`,onClick:n})},na=Yn;var Qe;(function(t){t.hex="hex",t.rgb="rgb",t.hsb="hsb"})(Qe||(Qe={}));const Xn=t=>{let{prefixCls:s,min:r=0,max:a=100,value:n,onChange:l,className:o,formatter:m}=t;const i=`${s}-steppers`,[d,p]=c.useState(n);return c.useEffect(()=>{Number.isNaN(n)||p(n)},[n]),$.createElement(Yr,{className:at(i,o),min:r,max:a,value:d,formatter:m,size:"small",onChange:u=>{n||p(u||0),l==null||l(u)}})},Je=Xn,Gn=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-alpha-input`,[l,o]=c.useState(Pe(r||"#000"));c.useEffect(()=>{r&&o(r)},[r]);const m=i=>{const d=l.toHsb();d.a=(i||0)/100;const p=Pe(d);r||o(p),a==null||a(p)};return $.createElement(Je,{value:Pt(l),prefixCls:s,formatter:i=>`${i}%`,className:n,onChange:m})},Jn=Gn,Zn=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,ys=t=>Zn.test(`#${t}`),Kn=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-hex-input`,[l,o]=c.useState(r==null?void 0:r.toHex());c.useEffect(()=>{const i=r==null?void 0:r.toHex();ys(i)&&r&&o(yt(i))},[r]);const m=i=>{const d=i.target.value;o(yt(d)),ys(yt(d,!0))&&(a==null||a(Pe(d)))};return $.createElement(Ie,{className:n,value:l,prefix:"#",onChange:m,size:"small"})},el=Kn,tl=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-hsb-input`,[l,o]=c.useState(Pe(r||"#000"));c.useEffect(()=>{r&&o(r)},[r]);const m=(i,d)=>{const p=l.toHsb();p[d]=d==="h"?i:(i||0)/100;const u=Pe(p);r||o(u),a==null||a(u)};return $.createElement("div",{className:n},$.createElement(Je,{max:360,min:0,value:Number(l.toHsb().h),prefixCls:s,className:n,formatter:i=>vt(i||0).toString(),onChange:i=>m(Number(i),"h")}),$.createElement(Je,{max:100,min:0,value:Number(l.toHsb().s)*100,prefixCls:s,className:n,formatter:i=>`${vt(i||0)}%`,onChange:i=>m(Number(i),"s")}),$.createElement(Je,{max:100,min:0,value:Number(l.toHsb().b)*100,prefixCls:s,className:n,formatter:i=>`${vt(i||0)}%`,onChange:i=>m(Number(i),"b")}))},sl=tl,al=t=>{let{prefixCls:s,value:r,onChange:a}=t;const n=`${s}-rgb-input`,[l,o]=c.useState(Pe(r||"#000"));c.useEffect(()=>{r&&o(r)},[r]);const m=(i,d)=>{const p=l.toRgb();p[d]=i||0;const u=Pe(p);r||o(u),a==null||a(u)};return $.createElement("div",{className:n},$.createElement(Je,{max:255,min:0,value:Number(l.toRgb().r),prefixCls:s,className:n,onChange:i=>m(Number(i),"r")}),$.createElement(Je,{max:255,min:0,value:Number(l.toRgb().g),prefixCls:s,className:n,onChange:i=>m(Number(i),"g")}),$.createElement(Je,{max:255,min:0,value:Number(l.toRgb().b),prefixCls:s,className:n,onChange:i=>m(Number(i),"b")}))},rl=al,nl=[Qe.hex,Qe.hsb,Qe.rgb].map(t=>({value:t,label:t.toLocaleUpperCase()})),ll=t=>{const{prefixCls:s,format:r,value:a,disabledAlpha:n,onFormatChange:l,onChange:o}=t,[m,i]=wt(Qe.hex,{value:r,onChange:l}),d=`${s}-input`,p=f=>{i(f)},u=c.useMemo(()=>{const f={value:a,prefixCls:s,onChange:o};switch(m){case Qe.hsb:return $.createElement(sl,Object.assign({},f));case Qe.rgb:return $.createElement(rl,Object.assign({},f));case Qe.hex:default:return $.createElement(el,Object.assign({},f))}},[m,s,a,o]);return $.createElement("div",{className:`${d}-container`},$.createElement(ve,{value:m,variant:"borderless",getPopupContainer:f=>f,popupMatchSelectWidth:68,placement:"bottomRight",onChange:p,className:`${s}-format-select`,size:"small",options:nl}),$.createElement("div",{className:d},u),!n&&$.createElement(Jn,{prefixCls:s,value:a,onChange:o}))},ol=ll;var il=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const cl=()=>{const t=c.useContext(aa),{prefixCls:s,allowClear:r,value:a,disabledAlpha:n,onChange:l,onClear:o,onChangeComplete:m}=t,i=il(t,["prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete"]);return $.createElement($.Fragment,null,r&&$.createElement(na,Object.assign({prefixCls:s,value:a,onChange:d=>{l==null||l(d),o==null||o()}},i)),$.createElement(zn,{prefixCls:s,value:a==null?void 0:a.toHsb(),disabledAlpha:n,onChange:(d,p)=>{l==null||l(Pe(d),p,!0)},onChangeComplete:d=>{m==null||m(Pe(d))}}),$.createElement(ol,Object.assign({value:a,onChange:l,prefixCls:s,disabledAlpha:n},i)))},vs=cl,Lt=t=>t.map(s=>(s.colors=s.colors.map(Pe),s)),dl=(t,s)=>{const{r,g:a,b:n,a:l}=t.toRgb(),o=new _t(t.toRgbString()).onBackground(s).toHsv();return l<=.5?o.v>.5:r*.299+a*.587+n*.114>192},js=t=>{let{label:s}=t;return`panel-${s}`},ul=t=>{let{prefixCls:s,presets:r,value:a,onChange:n}=t;const[l]=fa("ColorPicker"),[,o]=xa(),[m]=wt(Lt(r),{value:Lt(r),postState:Lt}),i=`${s}-presets`,d=c.useMemo(()=>m.reduce((f,x)=>{const{defaultOpen:v=!0}=x;return v&&f.push(js(x)),f},[]),[m]),p=f=>{n==null||n(f)},u=m.map(f=>{var x;return{key:js(f),label:$.createElement("div",{className:`${i}-label`},f==null?void 0:f.label),children:$.createElement("div",{className:`${i}-items`},Array.isArray(f==null?void 0:f.colors)&&((x=f.colors)===null||x===void 0?void 0:x.length)>0?f.colors.map((v,b)=>$.createElement(Jt,{key:`preset-${b}-${v.toHexString()}`,color:Pe(v).toRgbString(),prefixCls:s,className:at(`${i}-color`,{[`${i}-color-checked`]:v.toHexString()===(a==null?void 0:a.toHexString()),[`${i}-color-bright`]:dl(v,o.colorBgElevated)}),onClick:()=>p(v)})):$.createElement("span",{className:`${i}-empty`},l.presetEmpty))}});return $.createElement("div",{className:i},$.createElement(Yt,{defaultActiveKey:d,ghost:!0,items:u}))},pl=ul,ml=()=>{const{prefixCls:t,value:s,presets:r,onChange:a}=c.useContext(ra);return Array.isArray(r)?$.createElement(pl,{value:s,presets:r,prefixCls:t,onChange:a}):null},Cs=ml;var hl=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const fl=t=>{const{prefixCls:s,presets:r,panelRender:a,color:n,onChange:l,onClear:o}=t,m=hl(t,["prefixCls","presets","panelRender","color","onChange","onClear"]),i=`${s}-inner`,d=Object.assign({prefixCls:s,value:n,onChange:l,onClear:o},m),p=$.useMemo(()=>({prefixCls:s,value:n,presets:r,onChange:l}),[s,n,r,l]),u=$.createElement("div",{className:`${i}-content`},$.createElement(vs,null),Array.isArray(r)&&$.createElement(Ur,null),$.createElement(Cs,null));return $.createElement(Qn,{value:d},$.createElement(Wn,{value:p},$.createElement("div",{className:i},typeof a=="function"?a(u,{components:{Picker:vs,Presets:Cs}}):u)))},xl=fl;var gl=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const bl=c.forwardRef((t,s)=>{const{color:r,prefixCls:a,open:n,disabled:l,format:o,className:m,showText:i}=t,d=gl(t,["color","prefixCls","open","disabled","format","className","showText"]),p=`${a}-trigger`,u=c.useMemo(()=>r.cleared?$.createElement(na,{prefixCls:a}):$.createElement(Jt,{prefixCls:a,color:r.toRgbString()}),[r,a]),f=()=>{const v=r.toHexString().toUpperCase(),b=Pt(r);switch(o){case"rgb":return r.toRgbString();case"hsb":return r.toHsbString();case"hex":default:return b<100?`${v.slice(0,7)},${b}%`:v}},x=()=>{if(typeof i=="function")return i(r);if(i)return f()};return $.createElement("div",Object.assign({ref:s,className:at(p,m,{[`${p}-active`]:n,[`${p}-disabled`]:l})},d),u,i&&$.createElement("div",{className:`${p}-text`},x()))}),yl=bl;function Rt(t){return t!==void 0}const vl=(t,s)=>{const{defaultValue:r,value:a}=s,n=c.useRef(Pe("")),[l,o]=c.useState(()=>{let i;Rt(a)?i=a:Rt(r)?i=r:i=t;const d=Pe(i||"");return n.current=d,d}),m=i=>{o(i),n.current=i};return c.useEffect(()=>{if(Rt(a)){const i=Pe(a||"");n.current.cleared===!0&&(i.cleared="controlled"),m(i)}},[a]),[l,m,n]},la=(t,s)=>({backgroundImage:`conic-gradient(${s} 0 25%, transparent 0 50%, ${s} 0 75%, transparent 0)`,backgroundSize:`${t} ${t}`}),Ss=(t,s)=>{const{componentCls:r,borderRadiusSM:a,colorPickerInsetShadow:n,lineWidth:l,colorFillSecondary:o}=t;return{[`${r}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:a,width:s,height:s,boxShadow:n},la("50%",t.colorFillSecondary)),{[`${r}-color-block-inner`]:{width:"100%",height:"100%",border:`${Te(l)} solid ${o}`,borderRadius:"inherit"}})}},jl=t=>{const{componentCls:s,antCls:r,fontSizeSM:a,lineHeightSM:n,colorPickerAlphaInputWidth:l,marginXXS:o,paddingXXS:m,controlHeightSM:i,marginXS:d,fontSizeIcon:p,paddingXS:u,colorTextPlaceholder:f,colorPickerInputNumberHandleWidth:x,lineWidth:v}=t;return{[`${s}-input-container`]:{display:"flex",[`${s}-steppers${r}-input-number`]:{fontSize:a,lineHeight:n,[`${r}-input-number-input`]:{paddingInlineStart:m,paddingInlineEnd:0},[`${r}-input-number-handler-wrap`]:{width:x}},[`${s}-steppers${s}-alpha-input`]:{flex:`0 0 ${Te(l)}`,marginInlineStart:o},[`${s}-format-select${r}-select`]:{marginInlineEnd:d,width:"auto","&-single":{[`${r}-select-selector`]:{padding:0,border:0},[`${r}-select-arrow`]:{insetInlineEnd:0},[`${r}-select-selection-item`]:{paddingInlineEnd:t.calc(p).add(o).equal(),fontSize:a,lineHeight:`${Te(i)}`},[`${r}-select-item-option-content`]:{fontSize:a,lineHeight:n},[`${r}-select-dropdown`]:{[`${r}-select-item`]:{minHeight:"auto"}}}},[`${s}-input`]:{gap:o,alignItems:"center",flex:1,width:0,[`${s}-hsb-input,${s}-rgb-input`]:{display:"flex",gap:o,alignItems:"center"},[`${s}-steppers`]:{flex:1},[`${s}-hex-input${r}-input-affix-wrapper`]:{flex:1,padding:`0 ${Te(u)}`,[`${r}-input`]:{fontSize:a,textTransform:"uppercase",lineHeight:Te(t.calc(i).sub(t.calc(v).mul(2)).equal())},[`${r}-input-prefix`]:{color:f}}}}}},Cl=t=>{const{componentCls:s,controlHeightLG:r,borderRadiusSM:a,colorPickerInsetShadow:n,marginSM:l,colorBgElevated:o,colorFillSecondary:m,lineWidthBold:i,colorPickerHandlerSize:d,colorPickerHandlerSizeSM:p,colorPickerSliderHeight:u}=t;return{[`${s}-select`]:{[`${s}-palette`]:{minHeight:t.calc(r).mul(4).equal(),overflow:"hidden",borderRadius:a},[`${s}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:n,inset:0},marginBottom:l},[`${s}-handler`]:{width:d,height:d,border:`${Te(i)} solid ${o}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${n}, 0 0 0 1px ${m}`,"&-sm":{width:p,height:p}},[`${s}-slider`]:{borderRadius:t.calc(u).div(2).equal(),[`${s}-palette`]:{height:u},[`${s}-gradient`]:{borderRadius:t.calc(u).div(2).equal(),boxShadow:n},"&-alpha":la(`${Te(u)}`,t.colorFillSecondary),"&-hue":{marginBottom:l}},[`${s}-slider-container`]:{display:"flex",gap:l,marginBottom:l,[`${s}-slider-group`]:{flex:1,"&-disabled-alpha":{display:"flex",alignItems:"center",[`${s}-slider`]:{flex:1,marginBottom:0}}}}}},Sl=t=>{const{componentCls:s,antCls:r,colorTextQuaternary:a,paddingXXS:n,colorPickerPresetColorSize:l,fontSizeSM:o,colorText:m,lineHeightSM:i,lineWidth:d,borderRadius:p,colorFill:u,colorWhite:f,marginXXS:x,paddingXS:v,fontHeightSM:b}=t;return{[`${s}-presets`]:{[`${r}-collapse-item > ${r}-collapse-header`]:{padding:0,[`${r}-collapse-expand-icon`]:{height:b,color:a,paddingInlineEnd:n}},[`${r}-collapse`]:{display:"flex",flexDirection:"column",gap:x},[`${r}-collapse-item > ${r}-collapse-content > ${r}-collapse-content-box`]:{padding:`${Te(v)} 0`},"&-label":{fontSize:o,color:m,lineHeight:i},"&-items":{display:"flex",flexWrap:"wrap",gap:t.calc(x).mul(1.5).equal(),[`${s}-presets-color`]:{position:"relative",cursor:"pointer",width:l,height:l,"&::before":{content:'""',pointerEvents:"none",width:t.calc(l).add(t.calc(d).mul(4)).equal(),height:t.calc(l).add(t.calc(d).mul(4)).equal(),position:"absolute",top:t.calc(d).mul(-2).equal(),insetInlineStart:t.calc(d).mul(-2).equal(),borderRadius:p,border:`${Te(d)} solid transparent`,transition:`border-color ${t.motionDurationMid} ${t.motionEaseInBack}`},"&:hover::before":{borderColor:u},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:t.calc(l).div(13).mul(5).equal(),height:t.calc(l).div(13).mul(8).equal(),border:`${Te(t.lineWidthBold)} solid ${t.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${t.motionDurationFast} ${t.motionEaseInBack}, opacity ${t.motionDurationFast}`},[`&${s}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:f,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${t.motionDurationMid} ${t.motionEaseOutBack} ${t.motionDurationFast}`},[`&${s}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:o,color:a}}}},Vt=(t,s,r)=>({borderInlineEndWidth:t.lineWidth,borderColor:s,boxShadow:`0 0 0 ${Te(t.controlOutlineWidth)} ${r}`,outline:0}),wl=t=>{const{componentCls:s}=t;return{"&-rtl":{[`${s}-presets-color`]:{"&::after":{direction:"ltr"}},[`${s}-clear`]:{"&::after":{direction:"ltr"}}}}},ws=(t,s,r)=>{const{componentCls:a,borderRadiusSM:n,lineWidth:l,colorSplit:o,colorBorder:m,red6:i}=t;return{[`${a}-clear`]:Object.assign(Object.assign({width:s,height:s,borderRadius:n,border:`${Te(l)} solid ${o}`,position:"relative",overflow:"hidden",cursor:"pointer",transition:`all ${t.motionDurationFast}`},r),{"&::after":{content:'""',position:"absolute",insetInlineEnd:l,top:0,display:"block",width:40,height:2,transformOrigin:"right",transform:"rotate(-45deg)",backgroundColor:i},"&:hover":{borderColor:m}})}},_l=t=>{const{componentCls:s,colorError:r,colorWarning:a,colorErrorHover:n,colorWarningHover:l,colorErrorOutline:o,colorWarningOutline:m}=t;return{[`&${s}-status-error`]:{borderColor:r,"&:hover":{borderColor:n},[`&${s}-trigger-active`]:Object.assign({},Vt(t,r,o))},[`&${s}-status-warning`]:{borderColor:a,"&:hover":{borderColor:l},[`&${s}-trigger-active`]:Object.assign({},Vt(t,a,m))}}},Pl=t=>{const{componentCls:s,controlHeightLG:r,controlHeightSM:a,controlHeight:n,controlHeightXS:l,borderRadius:o,borderRadiusSM:m,borderRadiusXS:i,borderRadiusLG:d,fontSizeLG:p}=t;return{[`&${s}-lg`]:{minWidth:r,height:r,borderRadius:d,[`${s}-color-block, ${s}-clear`]:{width:n,height:n,borderRadius:o},[`${s}-trigger-text`]:{fontSize:p}},[`&${s}-sm`]:{minWidth:a,height:a,borderRadius:m,[`${s}-color-block, ${s}-clear`]:{width:l,height:l,borderRadius:i}}}},Fl=t=>{const{antCls:s,componentCls:r,colorPickerWidth:a,colorPrimary:n,motionDurationMid:l,colorBgElevated:o,colorTextDisabled:m,colorText:i,colorBgContainerDisabled:d,borderRadius:p,marginXS:u,marginSM:f,controlHeight:x,controlHeightSM:v,colorBgTextActive:b,colorPickerPresetColorSize:S,colorPickerPreviewSize:P,lineWidth:h,colorBorder:D,paddingXXS:I,fontSize:O,colorPrimaryHover:E,controlOutline:W}=t;return[{[r]:Object.assign({[`${r}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:a,[`& > ${s}-divider`]:{margin:`${Te(f)} 0 ${Te(u)}`}},[`${r}-panel`]:Object.assign({},Cl(t))},Ss(t,P)),jl(t)),Sl(t)),ws(t,S,{marginInlineStart:"auto",marginBottom:u})),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:x,height:x,borderRadius:p,border:`${Te(h)} solid ${D}`,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:`all ${l}`,background:o,padding:t.calc(I).sub(h).equal(),[`${r}-trigger-text`]:{marginInlineStart:u,marginInlineEnd:t.calc(u).sub(t.calc(I).sub(h)).equal(),fontSize:O,color:i},"&:hover":{borderColor:E},[`&${r}-trigger-active`]:Object.assign({},Vt(t,n,W)),"&-disabled":{color:m,background:d,cursor:"not-allowed","&:hover":{borderColor:b},[`${r}-trigger-text`]:{color:m}}},ws(t,v)),Ss(t,v)),_l(t)),Pl(t))},wl(t))}]},Nl=ga("ColorPicker",t=>{const{colorTextQuaternary:s,marginSM:r}=t,a=8,n=ba(t,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:18,colorPickerInsetShadow:`inset 0 0 1px 0 ${s}`,colorPickerSliderHeight:a,colorPickerPreviewSize:t.calc(a).mul(2).add(r).equal()});return[Fl(n)]});var El=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};const Zt=t=>{const{value:s,defaultValue:r,format:a,defaultFormat:n,allowClear:l=!1,presets:o,children:m,trigger:i="click",open:d,disabled:p,placement:u="bottomLeft",arrow:f=!0,panelRender:x,showText:v,style:b,className:S,size:P,rootClassName:h,prefixCls:D,styles:I,disabledAlpha:O=!1,onFormatChange:E,onChange:W,onClear:w,onOpenChange:F,onChangeComplete:y,getPopupContainer:T,autoAdjustOverflow:H=!0,destroyTooltipOnHide:N}=t,L=El(t,["value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide"]),{getPrefixCls:A,direction:q,colorPicker:M}=c.useContext(ya),Y=c.useContext(va),le=p??Y,[X,te,ce]=vl("",{value:s,defaultValue:r}),[we,Ne]=wt(!1,{value:d,postState:de=>!le&&de,onChange:F}),[Ee,ke]=wt(a,{value:a,defaultValue:n,onChange:E}),xe=A("color-picker",D),R=c.useMemo(()=>Pt(X)<100,[X]),{status:J}=$.useContext(ja),U=Ca(P),Z=Sa(xe),[fe,V,k]=Nl(xe,Z),me={[`${xe}-rtl`]:q},j=at(h,k,Z,me),g=at(Qr(xe,J),{[`${xe}-sm`]:U==="small",[`${xe}-lg`]:U==="large"},M==null?void 0:M.className,j,S,V),ae=at(xe,j),Q=c.useRef(!0),K=(de,G,ye)=>{var ge;let ue=Pe(de);const qe=s===null||!s&&r===null;(!((ge=ce.current)===null||ge===void 0)&&ge.cleared||qe)&&Pt(X)===0&&G!=="alpha"&&(ue=Tt(ue)),O&&R&&(ue=Tt(ue)),ye?Q.current=!1:y==null||y(ue),te(ue),W==null||W(ue,ue.toHexString())},be=()=>{w==null||w()},ie=de=>{Q.current=!0;let G=Pe(de);O&&R&&(G=Tt(de)),y==null||y(G)},z={open:we,trigger:i,placement:u,arrow:f,rootClassName:h,getPopupContainer:T,autoAdjustOverflow:H,destroyTooltipOnHide:N},re={prefixCls:xe,color:X,allowClear:l,disabled:le,disabledAlpha:O,presets:o,panelRender:x,format:Ee,onFormatChange:ke,onChangeComplete:ie},oe=Object.assign(Object.assign({},M==null?void 0:M.style),b);return fe($.createElement(lt,Object.assign({style:I==null?void 0:I.popup,overlayInnerStyle:I==null?void 0:I.popupOverlayInner,onOpenChange:de=>{Q.current&&!le&&Ne(de)},content:$.createElement(wa,{override:!0,status:!0},$.createElement(xl,Object.assign({},re,{onChange:K,onChangeComplete:ie,onClear:be}))),overlayClassName:ae},z),m||$.createElement(yl,Object.assign({open:we,className:g,style:oe,prefixCls:xe,disabled:le,showText:v,format:Ee},L,{color:X}))))},kl=zr(Zt,"color-picker",t=>t,t=>Object.assign(Object.assign({},t),{placement:"bottom",autoAdjustOverflow:!1}));Zt._InternalPanelDoNotUseOrYouWillBeFired=kl;const Il=Zt;var Ol={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M476 399.1c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1V484h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H420v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V540h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H476v-84.9zM560.5 704h-225c-4.1 0-7.5 3.2-7.5 7v42c0 3.8 3.4 7 7.5 7h225c4.1 0 7.5-3.2 7.5-7v-42c0-3.8-3.4-7-7.5-7zm-7.1-502.6c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v704c0 17.7 14.3 32 32 32h512c17.7 0 32-14.3 32-32V397.3c0-8.5-3.4-16.6-9.4-22.6L553.4 201.4zM664 888H232V264h282.2L664 413.8V888zm190.2-581.4L611.3 72.9c-6-5.7-13.9-8.9-22.2-8.9H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h277l219 210.6V824c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V329.6c0-8.7-3.5-17-9.8-23z"}}]},name:"diff",theme:"outlined"};const Tl=Ol;var Ll=function(s,r){return c.createElement(_a,bt({},s,{ref:r,icon:Tl}))},Rl=c.forwardRef(Ll);const $l=Rl,pt={orderName:0,orderLastOpen:0,page:1,limit:10,search:"",browser_uuid:[],name:[],folder_id:[],tag_id:[],status:"",createdDate:null,date_range:["",""],mode:"cloud",nameFolder:[],isRunning:!1};function Al({filterState:t,setFilterState:s}){const{TextArea:r}=Ie,a=Se(),[n]=B.useForm(),[l,o]=c.useState([]),[m,i]=c.useState([]),[d,p]=c.useState([]),[u,f]=c.useState([]),[x,v]=c.useState([]),[b,S]=c.useState(0),{isLocalActiveTab:P}=se(y=>y.display),{t:h}=ne(),D=y=>{const{createdDate:T,folder_id:H,status:N,tags:L,uuids:A,names:q,isRunning:M}=y;T&&(T[0]=T[0].startOf("day"),T[1]=T[1].endOf("day"));let Y=t.dataFilter.folder_id||[],le=t.dataFilter.tag_id||[];H&&H.length>0&&(Y=H.map(ce=>ce.value)),t.dataFilter.mode==="cloud"&&H!==void 0&&(H==null?void 0:H.length)===0&&(Y=[]),L&&L.length>0&&(le=L.map(ce=>ce.value)),L!==void 0&&(L==null?void 0:L.length)===0&&(le=[]);const X={...t.dataFilter,browser_uuid:A==null?void 0:A.split(`
`).map(ce=>ce.trim()),date_range:T??void 0,folder_id:Y,name:q==null?void 0:q.split(`
`).map(ce=>ce.trim()),status:N,tag_id:le,page:1,nameFolder:[],isRunning:M};let te=O(X);S(te),s({isOpenFilter:!1,dataFilter:X})};c.useEffect(()=>{let y=O(t.dataFilter);S(y)},[t.dataFilter]);const I=()=>{S(0);const y={...t.dataFilter,browser_uuid:[],date_range:void 0,folder_id:[],name:[],status:"",tag_id:[],nameFolder:[],isRunning:!1};s({dataFilter:y,isOpenFilter:!1}),n.setFieldsValue({uuids:"",names:"",folder_id:[],tags:[],status:"",createdDate:null,isRunning:!1})};Le.useToken();const O=y=>{let T=0;return y.date_range&&(T+=y.date_range[0]!==""&&y.date_range[1]!==""?1:0),y.browser_uuid&&(T+=y.browser_uuid.length>0&&y.browser_uuid[0]!==""?1:0),y.name&&(T+=y.name.length>0&&y.name[0]!==""?1:0),y.folder_id&&(T+=y.folder_id.length>0?1:0),y.tag_id&&(T+=y.tag_id.length>0?1:0),(y.status||y.status==0)&&(T+=y.status!==""?1:0),T+=y.isRunning?1:0,T};c.useEffect(()=>{t.isOpenFilter&&(E(),W(),w())},[t.isOpenFilter]);const E=async()=>{const{data:y}=await Os(P),H=[{id:-1,uuid:"",name:h("No folder"),total_browser:0,created_at:"",created_at_diff:""}].concat(y.content);let N=[];if(t.dataFilter.folder_id&&t.dataFilter.folder_id.length>0){N=H.filter(A=>!t.dataFilter.folder_id.some(q=>q===A.id)).map(A=>({value:A.id,label:A.name,title:""}));const L=H.filter(A=>t.dataFilter.folder_id.some(q=>q===A.id)).map(A=>({value:A.id,label:A.name,title:""}));n.setFieldValue("folder_id",L)}else N=H.map(L=>({value:L.id,label:L.name,title:""})),n.setFieldValue("folder_id",[]);o(N),f(H)},W=async()=>{const y=await Hs(P);let T=[];if(t.dataFilter.tag_id&&t.dataFilter.tag_id.length>0){T=y.filter(N=>!t.dataFilter.tag_id.some(L=>L===N.value)).map(N=>({value:N.value,label:N.label,title:""}));const H=y.filter(N=>t.dataFilter.tag_id.some(L=>L===N.value)).map(N=>({value:N.value,label:N.label,title:""}));n.setFieldValue("tags",H)}else T=y.map(H=>({value:H.value,label:H.label,title:""}));i(T),v(y)},w=async()=>{const y=await Wt(P),N=Wa.map(L=>({...L,name:h(L.name)})).concat(y).map(L=>({...L,value:L.id,label:L.name,title:""}));p(N)},F=()=>{s({...t,isOpenFilter:!1})};return e.jsxs(e.Fragment,{children:[e.jsx(pe,{onClick:()=>s({...t,isOpenFilter:!0}),className:"mx-2 cursor-pointer",style:{color:a.textNormal},children:e.jsx(Ht,{count:b,title:"",color:"blue",offset:[2,4],size:"default",className:"text-[20px] leading-[28px]",children:e.jsx(ee,{className:"!h-[35.5px] mb-1",type:"normal",icon:e.jsx("div",{className:"translate-y-[2px]",children:e.jsx(Ae.IconFilterFigma,{width:"1em",height:"1em"})}),label:h("Filter profile")})})}),t.isOpenFilter&&e.jsx(De,{theme:{components:{Modal:{contentBg:a.backgroundLight,headerBg:a.backgroundLight},Select:{selectorBg:a.backgroundNormal,multipleItemBg:a.backgroundDark},Typography:{colorText:a.textNormal}},token:{colorBgContainer:a.backgroundNormal}},children:e.jsx(He,{centered:!0,title:e.jsx("div",{className:"text-[20px]",style:{color:a.textActiveNormal},children:h("Filter profile")}),open:t.isOpenFilter,onCancel:()=>F(),onOk:()=>n.submit(),footer:[e.jsxs("div",{className:"flex justify-end gap-x-5",children:[e.jsx(ee,{onClick:I,label:h("Reset"),type:"error",solid:!0},1),e.jsx(ee,{type:"primary",onClick:()=>n.submit(),label:h("Filter"),solid:!0},2)]},1)],children:e.jsxs(B,{onFinish:D,form:n,layout:"vertical",className:"max-h-[700px] overflow-y-scroll overflow-x-hidden pr-[2px]",initialValues:{uuids:t.dataFilter.browser_uuid.join(`
`),names:t.dataFilter.name.join(`
`),status:t.dataFilter.status,createdDate:t.dataFilter.createdDate,isRunning:t.dataFilter.isRunning},children:[e.jsx(B.Item,{label:e.jsx(st,{label:"Uuid"}),name:"uuids",children:e.jsx(r,{style:{backgroundColor:a.backgroundNormal},rows:4,placeholder:`uuid1
uuid2`})}),e.jsx(B.Item,{label:e.jsx(st,{label:h("Name")}),name:"names",children:e.jsx(r,{style:{backgroundColor:a.backgroundNormal},rows:4,placeholder:h("name")+` 1
`+h("name")+" 2"})}),e.jsx(B.Item,{name:"isRunning",valuePropName:"checked",children:e.jsx(er,{bold:!0,label:h("Profile is running")})}),(t.dataFilter.mode==="cloud"||t.dataFilter.mode==="local")&&e.jsxs(e.Fragment,{children:[e.jsx(B.Item,{label:e.jsx(st,{label:h("Folder")}),name:"folder_id",children:e.jsx(ve,{mode:"multiple",tagRender:y=>e.jsx(Ye,{closeIcon:e.jsx(Dt,{style:{color:a.iconClose},className:"inline-flex align-[-0.125em]"}),closable:y.closable,onClose:y.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px",background:a.tagBgPrimary,color:a.tagTextPrimary},children:rt(y.label,20)}),placeholder:h("Select"),allowClear:!0,labelInValue:!0,style:{width:"100%"},options:l||[],onChange:y=>{const T=u==null?void 0:u.filter(H=>!y.some(N=>N.value==H.id)).map(H=>({value:H.id,label:H.name,title:""}));o(T)}})}),e.jsx(B.Item,{label:e.jsx(st,{label:h("Tag")}),name:"tags",children:e.jsx(ve,{mode:"multiple",tagRender:y=>e.jsx(Ye,{closeIcon:e.jsx(Dt,{style:{color:a.iconClose},className:"inline-flex align-[-0.125em]"}),closable:y.closable,onClose:y.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px",background:a.tagBgPrimary,color:a.tagTextPrimary},children:rt(y.label,20)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:h("Select"),optionFilterProp:"label",options:m,onChange:y=>{const T=x==null?void 0:x.filter(H=>!y.some(N=>N.value===H.value)).map(H=>({value:H.value,label:H.label,title:""}));i(T)}})})]}),e.jsxs(ar,{gutter:8,children:[e.jsx(us,{span:12,children:e.jsx(B.Item,{label:e.jsx(st,{label:h("Status")}),name:"status",children:e.jsx(ve,{defaultActiveFirstOption:!0,options:d})})}),e.jsx(us,{span:12,children:e.jsx(B.Item,{label:e.jsx(st,{label:h("Created date")}),name:"createdDate",children:e.jsx(rr.RangePicker,{placeholder:[h("Start date"),h("End date")],className:"w-full"})})})]})]})})})]})}const st=({label:t})=>e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:t}),dt=[{id:"PDF Viewer",name:"PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Chrome PDF Viewer",name:"Chrome PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Chromium PDF Viewer",name:"Chromium PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Microsoft Edge PDF Viewer",name:"Microsoft Edge PDF Viewer",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0},{id:"Webkit built-in PDF",name:"Webkit built-in PDF",describe:"Portable Document Format",fileName:"internal-pdf-viewer",mimeType:"application/pdf|text/pdf",mimeDescription:"Portable Document Format|Portable Document Format",mimeExtension:"pdf|pdf",isChecked:!0,isDisabled:!0,isDefault:!0}],Dl={win:dt,mac:dt,lin:dt,android:dt,ios:dt};function Hl({item:t,handleQuickCreate:s,setIsOpen:r}){const a=Se(),[n,l]=c.useState(1),{message:o}=je.useApp(),[m]=ne(),{isLocalActiveTab:i}=se(u=>u.display),d=u=>{l(Number.parseInt(u.target.value))},p=async()=>{!isNaN(n)&&n>=Nt&&n<=Et?(await s(n,t.id,t.config,i),r(!1),l(1)):o.error("Quick create process must be between "+Nt+" and "+Et)};return e.jsx("div",{children:e.jsxs(Ts,{to:"#",className:"flex items-center px-3 py-1 truncate",onClick:u=>{u.stopPropagation(),p()},children:[e.jsx(Ie,{className:"w-[40%] mr-3",value:n,type:"number",required:!0,style:{backgroundColor:a.backgroundNormal},min:Nt,max:Et,onClick:u=>u.stopPropagation(),onChange:d}),e.jsx(Be,{label:m(t.name)})]})})}const Bl={page:1,limit:10,search:""};function Ml(){const t=Se(),[s]=c.useState(Bl),[r,a]=c.useState(!1),[n]=ne(),l=se(b=>b.ipInfoConfig),o=qt(),m=Ce(),{message:i}=je.useApp(),[d,p]=c.useState([]),u=c.useContext(Fe),{data:f}=he({queryFn:()=>nr(s),queryKey:[_.defaultConfig,s]}),x={label:e.jsx("div",{className:"font-semibold px-3 py-1",children:e.jsx(Ts,{to:Ls.default_config,className:"text-black",children:e.jsx(Be,{label:n("Manager default config")})})}),key:"0"},v=async(b,S,P,h)=>{const D={quickCreateNumber:b,body:{...l,config_id:S,plugins:{isEnabled:!1,value:Dl.win},local:h}};o(Fa(D)).then(()=>{i.success("Create sucsess !")}).catch(I=>{i.error(I.response.data.title)}).finally(()=>{u==null||u.setFilterState(I=>({...I,dataFilter:{...pt,mode:h?"local":"cloud"}})),m.invalidateQueries(_.listProfile,{refetchInactive:!0}),m.invalidateQueries(_.PROFILE_CLOUD,{refetchInactive:!0}),m.invalidateQueries(_.PROFILE_LOCAL,{refetchInactive:!0}),m.invalidateQueries(_.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),m.invalidateQueries(_.userDetail,{refetchInactive:!0})})};return c.useEffect(()=>{p((f==null?void 0:f.data.data.content.map(b=>({label:e.jsx(Hl,{item:b,handleQuickCreate:v,setIsOpen:a},b.id),key:b.uuid})))||[])},[f]),e.jsx(De,{theme:{components:{Dropdown:{colorBgElevated:t.backgroundLight}}},children:e.jsx(Vr,{menu:{items:(d==null?void 0:d.concat(x))||[]},placement:"bottomRight",trigger:["click"],open:r,onOpenChange:b=>{b||a(!r)},children:e.jsx("span",{children:e.jsx(ee,{type:"normal",buttonMenu:!0,label:n("Quick Create"),onClick:()=>a(!r),icon:e.jsx(Pa,{})})})})})}function Vl({openModal:t,setOpenModal:s,selectedProfile:r,setSelectedRowKeys:a}){const[n]=B.useForm(),l=Se(),o=c.useRef(null),{Title:m,Text:i}=pe,{message:d}=je.useApp(),p=Ce(),[u,f]=c.useState(!1),[x,v]=c.useState(!1),[b,S]=c.useState(!1),[P,h]=c.useState(!1),[D,I]=c.useState([]),[O,E]=c.useState([]),[W,w]=c.useState([]),[F,y]=c.useState([]),[T,H]=c.useState([]),[N,L]=c.useState([]),[A,q]=c.useState([]),{token:M}=Le.useToken(),{t:Y}=ne(),{isLocalActiveTab:le}=se(R=>R.display),X=async()=>{var J;const R=await((J=o.current)==null?void 0:J.getFieldsValue());if(!R.profileSelected&&!R.folderSelected||R.profileSelected&&R.profileSelected.length===0&&!R.folderSelected)d.error(Y("Please select target to update!"));else if(!x&&!P&&!b)d.error(Y("Please choose information to update!"));else if(R.isUpdateVersion&&!R.versionSelected)d.error(Y("Please choose a version!"));else try{let U=[],Z=[],fe=[];R.profileSelected&&(typeof R.profileSelected[0]=="string"?U=T.filter(k=>R.profileSelected.some(me=>me===k.uuid)).map(k=>({...k,value:k.uuid,label:k.name})):typeof R.profileSelected[0]=="object"&&(U=R.profileSelected.map(k=>({uuid:k.value,name:k.label,value:k.value,label:k.label})))),R.folderSelected&&(Z=N.filter(k=>R.folderSelected.some(me=>me.value==k.uuid)).map(k=>({...k,label:k.name,value:k.uuid}))),R.extensionSelected&&(fe=R.extensionSelected.map(k=>({id:k.value,name:k.label,value:k.value,label:k.label})));const V={isUpdateExtension:R.isUpdateExtension??!1,isUpdateCmd:R.isUpdateCmd??!1,isUpdateVersion:R.isUpdateVersion??!1,cmd:R.cmd??"",profileSelected:U,folderSelected:Z,extensionSelected:fe,versionSelected:R.versionSelected??"",isLocal:le};if(R.isUpdateVersion&&R.versionSelected!==void 0){const{data:k}=await Ia(R.versionSelected),{os:me}=await Ar(),j={...V,os:{android:me.android.browsers,ios:me.android.browsers,lin:me.lin.browsers,mac:me.mac.browsers,win:me.win.browsers},versionSelected:R.versionSelected,version:k};te(j)}else te(V)}catch{d.error("an error occurred!")}},{mutate:te,isLoading:ce}=Ve(Na,{onError:R=>{R.response.data.content.length>0?R.response.data.content.map(J=>{d.error(J)}):d.error(R.response.data.title)},onSuccess:()=>{d.success("Upload successfully!"),p.invalidateQueries(_.listProfile),p.invalidateQueries(_.GET_PROFILE_BY_FOLDER),a([]),f(!1),s(!1)}});c.useEffect(()=>{t&&(we(),Ne(),Ee(),ke(),S(!1),v(!1),h(!1),n.resetFields())},[t]);const we=async()=>{const{data:R}=await Ea(le);let J=[];if(r&&r.length>0){J=R.content.filter(Z=>!r.some(fe=>fe===Z.uuid)).map(Z=>({value:Z.uuid,label:Z.name,title:""}));const U=R.content.filter(Z=>r.some(fe=>fe===Z.uuid)).map(Z=>({value:Z.uuid,label:Z.name,title:""}));n.setFieldValue("profileSelected",U)}else J=R.content.map(U=>({value:U.uuid,label:U.name,title:""}));I(J),H(R.content)},Ne=async()=>{const{data:R}=await Os(le),J=R.content.map(U=>({...U,value:U.uuid,label:U.name,title:""}));E(J),L(R.content)},Ee=async()=>{const{content:R}=await $r({type:"your",search:"",limit:null,page:1}),J=R.map(U=>({value:U.id,label:U.name,title:""}));w(J),q(R)},ke=async()=>{const{data:R}=await ka(),J=Object.entries(xe(R)).map(([U,Z])=>({value:U,label:Z,title:""}));J.sort((U,Z)=>{const fe=me=>me.split(" ")[0],V=fe(U.value).split(".").map(Number),k=fe(Z.value).split(".").map(Number);for(let me=0;me<Math.max(V.length,k.length);me++){const j=(k[me]||0)-(V[me]||0);if(j!==0)return j}return 0}),y(J)},xe=R=>{const J={};return Object.entries(R).forEach(([U,Z])=>{Z.forEach(fe=>{J[fe]=J[fe]?J[fe].replace(/\)$/,`, ${U})`):`${fe} (${U})`})}),J};return e.jsx(e.Fragment,{children:e.jsx(De,{theme:{components:{Modal:{contentBg:l.backgroundLight,headerBg:l.backgroundLight},Select:{selectorBg:l.backgroundNormal,multipleItemBg:l.backgroundDark}},token:{colorBgContainer:l.backgroundNormal}},children:e.jsx(He,{title:e.jsx(m,{style:{color:M.bgBlue,fontSize:"20px"},level:3,children:Y("Update multiple profiles")}),open:t,onOk:n.submit,onCancel:()=>s(!1),confirmLoading:u,width:768,footer:e.jsxs("div",{className:"flex flex-row gap-x-[5px] w-full justify-end",children:[e.jsx(ee,{disabled:ce,type:"primary",onClick:X,label:Y("Update")},"submit"),e.jsx(ee,{disabled:ce,type:"error",onClick:()=>s(!1),label:Y("Cancel")},"cancel")]}),children:e.jsxs(B,{className:"h-[fit-content] max-h-[700px] overflow-y-auto overflow-x-hidden",ref:o,layout:"vertical",form:n,onFinish:X,children:[e.jsxs(m,{level:5,className:"!mt-[5px]",children:[Y("Target To Update"),e.jsx("span",{className:"text-[#FF0C0C]",children:" *"})]}),e.jsx(B.Item,{name:"profileSelected",label:Y("Profile to update"),children:e.jsx(ve,{mode:"multiple",tagRender:R=>e.jsx(Ye,{closable:R.closable,onClose:R.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px"},children:rt(R.label,50)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:Y("Select"),options:D,optionFilterProp:"label",onChange:R=>{const J=T==null?void 0:T.filter(U=>!R.some(Z=>Z.value==U.uuid)).map(U=>({value:U.uuid,label:U.name,title:""}));I(J)}})}),e.jsx(B.Item,{name:"folderSelected",label:Y("Folders to updates ( All profiles in these folders will be updated )"),children:e.jsx(ve,{mode:"multiple",tagRender:R=>e.jsx(Ye,{closable:R.closable,onClose:R.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px"},children:rt(R.label,20)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:Y("Select"),optionFilterProp:"label",options:O,onChange:R=>{const J=N==null?void 0:N.filter(U=>!R.some(Z=>Z.value==U.uuid)).map(U=>({value:U.uuid,label:U.name,title:""}));E(J)}})}),e.jsxs(m,{level:5,children:[Y("Update Information"),e.jsx("span",{className:"text-[#FF0C0C]",children:" *"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(B.Item,{name:"isUpdateVersion",valuePropName:"checked",label:"",className:"mb-1",children:e.jsx(ut,{checked:b,onChange:()=>S(!b)})}),e.jsxs(i,{className:"ml-2",children:[Y("Version")," ",e.jsx("span",{className:"text-[#FF0C0C]",children:"*"})," (",Y("The profiles' OS without this version will be randomly assigned a version of that OS"),")"]})]}),e.jsx(B.Item,{name:"versionSelected",children:e.jsx(ve,{disabled:!b,showSearch:!0,style:{width:"100%"},placeholder:Y("Select"),optionFilterProp:"label",options:F})}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx(B.Item,{name:"isUpdateExtension",valuePropName:"checked",label:"",className:"mb-1",children:e.jsx(ut,{checked:x,onChange:()=>v(!x)})}),e.jsx(i,{className:"ml-2",children:Y("Extension")})]}),e.jsx(B.Item,{name:"extensionSelected",children:e.jsx(ve,{disabled:!x,mode:"multiple",tagRender:R=>e.jsx(Ye,{closable:R.closable,onClose:R.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px"},children:rt(R.label,20)}),allowClear:!0,labelInValue:!0,style:{width:"100%"},placeholder:Y("Select"),optionFilterProp:"label",options:W,onChange:R=>{const J=A==null?void 0:A.filter(U=>!R.some(Z=>Z.value==U.id)).map(U=>({value:U.id,label:U.name,title:""}));w(J)}})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(B.Item,{name:"isUpdateCmd",valuePropName:"checked",label:"",className:"mb-1",children:e.jsx(ut,{checked:P,onChange:()=>h(!P)})}),e.jsx(i,{className:"ml-2",children:Y("Custom launch browser parameters")})]}),e.jsx(B.Item,{name:"cmd",children:e.jsx(Ie,{disabled:!P,placeholder:Y("Launch browser parameters")})})]})})})})}function Ft({selectedProfile:t,setSelectedRowKeys:s}){const[r,a]=c.useState(!1),{t:n}=ne();return e.jsxs(e.Fragment,{children:[e.jsx(ee,{icon:e.jsx($l,{}),buttonMenu:!0,label:n("Update Multiple"),onClick:()=>a(!0),type:"primary"}),e.jsx(Vl,{openModal:r,setOpenModal:a,selectedProfile:t??[],setSelectedRowKeys:s})]})}function ql(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 21C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H10.4142L12.4142 5H20C20.5523 5 21 5.44772 21 6V9H19V7H11.5858L9.58579 5H4V16.998L5.5 11H22.5L20.1894 20.2425C20.0781 20.6877 19.6781 21 19.2192 21H3ZM19.9384 13H7.06155L5.56155 19H18.4384L19.9384 13Z"}}]})(t)}function zl(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"}}]})(t)}function Ql(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14 14.252V16.3414C13.3744 16.1203 12.7013 16 12 16C8.68629 16 6 18.6863 6 22H4C4 17.5817 7.58172 14 12 14C12.6906 14 13.3608 14.0875 14 14.252ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11ZM18.5858 17L16.7574 15.1716L18.1716 13.7574L22.4142 18L18.1716 22.2426L16.7574 20.8284L18.5858 19H15V17H18.5858Z"}}]})(t)}const Kt=({selectedProfile:t})=>{const{t:s}=ne(),r=[{label:"Json",key:1},{label:"Key value",key:2}],a=async l=>{t.join("");const o=[...t],i={data:(await qs(o,l)).data.content,fileName:l==1?"cookies.json":"cookies.txt"};l==1?window.api.exportFileJson(i).then(d=>{d&&n(d)}):window.api.exportFile(i).then(d=>{d&&n(d)})},n=l=>{const o=l.substring(0,l.lastIndexOf("\\"));zs.success({content:e.jsxs("span",{children:["Export Success ",e.jsx("span",{className:"font-bold ",children:"Open now"})]}),onClick:()=>{window.api.openFolder(o)},style:{cursor:"pointer"}})};return e.jsx(e.Fragment,{children:e.jsx(lt,{content:e.jsx($e,{className:"min-w-[100px]",dataSource:r,renderItem:l=>e.jsx($e.Item,{className:"cursor-pointer !px-1 !py-1 hover:font-bold",onClick:()=>a(l.key),children:l.label},l.key)}),trigger:"click",placement:"bottom",children:e.jsx(ee,{icon:e.jsx(ql,{}),buttonMenu:!0,type:"normal",label:s("Export cookies")})})})},Wl="_border_hidden_h2bv9_1",Ul={border_hidden:Wl},Yl=Gt.div`
  display: flex;
  flex-flow: row wrap;
  justify-content: space-between;
  // max-width: 100%;

  // @media (min-width: 1024px) {
  //   flex-wrap: nowrap;
  // }
`;Gt.div`
  display: block;
  max-width: ${Ue(500,500)};
  flex: 0 0: ${Ue(500,500)};
  flex-direction: column;
  height: 100%;

  @media (min-width: 1094px) {
    display: block;
    flex: 0 0 ${Ue(500)};
    max-width: ${Ue(500)};
    height: 100%;
  }

  @media (min-width: 1320px) {
    display: block;
    flex: 0 0 ${Ue(700)};
    max-width: ${Ue(700)};
    height: 100%;
  }

  @media (min-width: 1800px) {
    display: block;
    flex: 0 0 ${Ue(500,1e3)};
    max-width: ${Ue(500,1e3)};
    height: 100%;
  }
`;Gt.img`
  width: 100%;
  height: 100%;
  // background-image: url(${t=>t.$bgImage});
  background-size: cover;
  // background-position: center;
  background-repeat: no-repeat;
  
  // @media (min-width: 1450px) {
  //   background-image: url(${t=>t.$bgImage});
  // }
`;const Xl=({tabs:t,handleChangeTab:s,defaultActiveKey:r,dataCount:a,...n})=>{const{theme:l}=se(v=>v.display),[o,m]=c.useState([]),[i,d]=c.useState(r),{t:p}=ne(),u=zt("DISPLAY");c.useEffect(()=>{x()},[t,i,l,u==null?void 0:u.language]),c.useEffect(()=>{s(r),d(r)},[r]);const f=v=>{s(v),d(v)},x=()=>{const v=t.filter(b=>b.isHidden===!1).map(b=>({key:b.key,label:e.jsx("div",{children:b.key==i?e.jsxs("div",{className:"flex gap-x-[5px] items-center",children:[e.jsx("span",{className:"bg-[#F34730] text-[#FFFFFF] p-[0px_4px] rounded-[2px]",children:(r!="folder",b.total>0?b.total:0)}),e.jsx("span",{className:"font-semibold text-[16px]",children:p(b.title)})]}):e.jsxs("div",{className:"flex gap-x-[5px] items-center",children:[e.jsx("span",{className:"bg-[#ECECEC] text-[#343333] p-[0px_4px] rounded-[2px]",children:b.total>0?b.total:0}),e.jsx("span",{className:"font-semibold text-[16px]",children:p(b.title)})]})})}));m(v)};return e.jsx(Yl,{children:e.jsxs("div",{children:[e.jsx(Tn,{className:`${Ul.border_hidden}`,defaultActiveKey:r,items:o,activeKey:r,onChange:v=>f(v)}),r!=="folder"&&r!=="folder_local"&&r!=="share_with_me"&&n&&e.jsx("div",{className:"flex justify-start",children:e.jsx(Sr,{widthSearch:400,placeholder:"Search by name",...n,tabLength:t.length})})]})})},_s=[{key:"cloud",title:"Cloud",type:"CLOUD",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"local",title:"Local",type:"LOCAL",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"share_with_me",title:"Shared with me",type:"SHARE_WITH_ME",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"folder",title:"Folders",type:"FOLDERS",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"folder_local",title:"Folders Local",type:"FOLDERS_LOCAL",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0},{key:"folder_share",title:"Folders Share",type:"FOLDERS_SHARE",uuid:[],folder_id:[],total:0,totalProfileIsRun:0,isHidden:!0}];function Gl({setColumns:t,filterState:s,setFilterState:r,selectedRowKeys:a,setSelectedRowKeys:n,handleChangeFingerPrint:l,toggleModal:o,handleDelete:m,handleExportData:i,folder_uuid:d,arrUuidProfilesRun:p,defaultActiveKey:u,setDefaultActiveKey:f,filterFolderState:x,setFilterFolderState:v,userShareFolder:b,setIsOpenAutomation:S}){const P=Se();Le.useToken();const[h,D]=c.useState(""),[I,O]=c.useState(""),{t:E}=ne(),W=c.useCallback(V=>{V==="START"?window.api.openProfiles(a):window.api.closeProfiles(a)},[a]),w=c.useCallback(()=>{window.api.forceStop(a)},[a]),F=V=>r(k=>({...k,dataFilter:{...k.dataFilter,page:1,search:V}})),y=Ce(),T=c.useContext(Fe),H=Oa(),N=Rs(),{state:L}=N,A=qt(),{isLocalActiveTab:q}=se(V=>V.display),{currentCharge:M}=se(V=>V.chargeSlice),Y=["trial_day","common"],[le,X]=c.useState(!1);c.useEffect(()=>{M&&M.charge.type&&(Y.includes(M.charge.type)?X(!0):X(!1))},[M]);const te=()=>{if(q)switch(u){case"local":f("local");break;case"folder_local":f("folder_local");break;default:f("local");break}else switch(u){case"cloud":f("cloud");break;case"folder":f("folder");break;case"folder_share":f("folder_share");break;case"share_with_me":f("share_with_me");break;default:f("cloud");break}};c.useEffect(()=>{M&&M.isShowCloud&&!M.isShowLocal?f("cloud"):M&&!M.isShowCloud&&M.isShowLocal?f("local"):M&&M.isShowCloud&&M.isShowLocal?te():f("")},[M]),c.useEffect(()=>{te()},[q]);const ce=V=>{switch(f(V),L&&H(Ls.profiles,{state:null}),n([]),V){case"local":T==null||T.setArrayKeyActive([""]),A(it(!0));break;case"folder":A(it(!1)),v(k=>({...k,dataFilter:{...k.dataFilter,type:"owner"}})),y.invalidateQueries(_.FOLDER_OWNER,{refetchInactive:!0}),y.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0});break;case"share_with_me":A(it(!1)),y.invalidateQueries(_.GET_LIST_PROFILE_SHARE);break;case"folder_local":A(it(!0)),v(k=>({...k,dataFilter:{...k.dataFilter,type:"local"}})),y.invalidateQueries(_.FOLDER_LOCAL,{refetchInactive:!0});break;default:T==null||T.setArrayKeyActive([""]),A(it(!1));break}T==null||T.setRightMenu({...T==null?void 0:T.rightMenu,visible:!1,x:0,y:0}),D(""),r(k=>({...k,dataFilter:{...pt,mode:V}}))},{data:we}=he({queryFn:()=>St(pt,"cloud"),queryKey:[_.PROFILE_CLOUD]}),{data:Ne}=he({queryFn:()=>St(pt,"local"),queryKey:[_.PROFILE_LOCAL]}),{data:Ee}=he({queryFn:()=>Ys(),queryKey:[_.PROFILE_SHARE_WITH_ME]}),{data:ke}=he({queryFn:()=>Ze(x.dataFilter,"owner"),queryKey:[_.FOLDER_OWNER]}),{data:xe}=he({queryFn:()=>Ze(x.dataFilter,"local"),queryKey:[_.FOLDER_LOCAL]});c.useEffect(()=>(window.electron.ipcRenderer.on("reload_total_profile_local",()=>{y.invalidateQueries(_.PROFILE_LOCAL,{refetchInactive:!0})}),()=>window.electron.ipcRenderer.removeAllListeners("reload_total_profile_local")),[]);const R=c.useMemo(()=>(_s.forEach(k=>{k.type==="CLOUD"?(k.total=(we==null?void 0:we.data.meta.total)||0,k.totalProfileIsRun=0,M&&M.charge.profile>0?k.isHidden=!1:k.isHidden=!0):k.type==="SHARE_WITH_ME"?(k.total=(Ee==null?void 0:Ee.data.content.length)||0,k.totalProfileIsRun=0,M&&(M.roles.includes("member")||!M.roles.includes("member")&&["trial_day","common"].includes(M.charge.type.toLowerCase()))&&M.charge.profile&&M.charge.profile_share>0,k.isHidden=!0):k.type==="LOCAL"?(k.total=(Ne==null?void 0:Ne.data.meta.total)||0,k.totalProfileIsRun=0,M&&M.roles.includes("active_local")&&(M.charge.profile_local>0||M.charge.profile_local===-1)?k.isHidden=!1:k.isHidden=!0):k.type==="FOLDERS"?(k.total=(ke==null?void 0:ke.data.meta.total)||0,k.totalProfileIsRun=0,M&&M.charge.profile>0?k.isHidden=!1:k.isHidden=!0):k.type==="FOLDERS_LOCAL"&&(k.total=(xe==null?void 0:xe.data.meta.total)||0,k.totalProfileIsRun=0,M&&M.roles.includes("active_local")&&(M.charge.profile_local>0||M.charge.profile_local===-1)?k.isHidden=!1:k.isHidden=!0)}),[..._s.filter(k=>k.isHidden===!1)]),[we,Ne,Ee,ke,xe,M]);c.useEffect(()=>{s.dataFilter.search!==""&&O(s.dataFilter.search)},[s.dataFilter.search]);const J=(V,k)=>{V===null&&!q?f("cloud"):V===null&&q?f("local"):V&&k&&!q?f("folder_share"):V&&!k&&q?f("folder_local"):V&&!k&&!q&&f("folder")};c.useEffect(()=>{J(d,b)},[d,b]);const U=[{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStartFigma,{width:14,height:14})}),label:`${E("Start")} ${a?a.length>1?a.length+" "+E("Profiles"):a.length+" "+E("Profile"):"0 "+E("Profile")}`,type:"primary",action:()=>{W("START")},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconPauseFigma,{width:14,height:14})}),label:`${E("Stop")} ${a?a.length>1?a.length+" "+E("Profiles"):a.length+" "+E("Profile"):"0 "+E("Profile")}`,type:"error",action:()=>{W("STOP")},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStopFigma,{width:14,height:14})}),label:E("Force Stop"),type:"error",action:()=>{w()},mode:["cloud","local"],isDisabled:!p.some(V=>a.includes(V))},{icon:e.jsx($s,{}),label:E("Delete"),type:"error",action:()=>{m(!0,{ids:a},"profile")},mode:["cloud","local"],isDisabled:p.some(V=>a.includes(V))},{icon:e.jsx(Qt,{}),label:E("Proxy"),type:"primary",action:()=>{o(!0,"Change proxy",a)},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(Ae.IconAutomationFigma,{width:14,height:14}),label:E("Automation"),type:"primary",action:()=>S(!0),mode:["cloud","local"],isDisabled:!!(M&&M.charge.type==="common")},{element:e.jsx(Kt,{selectedProfile:a}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(Vs,{}),label:E("Transfer Profile"),type:"primary",action:()=>{if(le)return zs.error("Usage limit has been reached. Please upgrade your Subscription Plan.");o(!0,"Transfer Profile",a)},mode:["cloud","share_with_me","local"],isDisabled:p.some(V=>a.includes(V))||q?q:!1},{icon:e.jsx(Bs,{}),label:E("Change fingerprint"),type:"primary",action:()=>{l(a)},mode:["cloud","local"],isDisabled:p.some(V=>a.includes(V))},{element:e.jsx(Ft,{selectedProfile:a,setSelectedRowKeys:n}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(Ms,{}),label:E("Export Data"),type:"primary",action:()=>{i(a,I)},mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(As,{}),label:E("Add to folder"),type:"primary",action:()=>{o(!0,"Add Profile to Folder",a)},mode:["cloud","local"],isDisabled:!1}],Z=[{element:e.jsx(Ft,{setSelectedRowKeys:n}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{element:e.jsx(Ml,{}),type:"JSXElement",mode:["cloud","local"],isDisabled:!1},{icon:e.jsx(Za,{}),label:E("Export All Data"),type:"button",typeButton:"normal",action:()=>{i("exportAll",I),O("")},mode:["cloud","local"],isDisabled:!1}],fe={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(e.Fragment,{children:e.jsxs("div",{style:{backgroundColor:P.backgroundNormal},children:[e.jsx(Xl,{tabs:R,handleChangeTab:ce,FilterModal:Al,setColumns:t,filterState:s,setFilterState:r,search:h,setSearch:D,onSearch:F,defaultActiveKey:u}),e.jsx("div",{className:"flex flex-wrap pr-5 items-center gap-3 m-[10px_0px_15px_0px] overflow-hidden pb-2",children:u!=="folder"&&u!=="folder_local"&&u!=="folder_share"&&e.jsx(e.Fragment,{children:a.length>0?U.map((V,k)=>V.mode.includes(s.dataFilter.mode)&&(V.type!="JSXElement"?e.jsx(ee,{buttonMenu:!0,onClick:V.action,icon:V.icon,label:V.label,type:V.type,disabled:V.isDisabled},k):e.jsx("div",{style:V.isDisabled?fe:void 0,children:V.element},k))):Z.map((V,k)=>V.mode.includes(s.dataFilter.mode)&&(V.type==="button"?e.jsx(ee,{buttonMenu:!0,disabled:V.isDisabled,icon:V.icon,label:V.label,onClick:V.action,type:V.typeButton},k):e.jsx("div",{style:V.isDisabled?fe:void 0,children:V.element},k)))})})]})})}const Jl=c.memo(Gl),Zl="_popup_1bg4l_1",Kl={popup:Zl};function eo(t){return Ke({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M12 1.19c1.088 0 2.056.768 2.056 1.714 0 .947-.921 1.715-2.056 1.715-.13 0-.3-.022-.509-.064a.685.685 0 0 0-.475.076l-7.37 4.195a.344.344 0 0 0 .001.597l7.99 4.49c.208.116.461.116.669 0l8.034-4.468a.343.343 0 0 0 .003-.598l-2.507-1.424a.683.683 0 0 0-.67-.003l-2.647 1.468a.234.234 0 0 0-.119.18l-.001.025c0 .946-.921 1.714-2.056 1.714s-2.056-.768-2.056-1.714c0-.947.921-1.715 2.056-1.715.042 0 .09.002.145.007l.087.008.096.013a.685.685 0 0 0 .425-.08l3.913-2.173c.3-.166.662-.171.965-.017l.04.023 5.465 3.104c.686.39.693 1.368.03 1.773l-.037.021-3.656 2.033a.343.343 0 0 0 .007.604l3.62 1.906c.72.378.736 1.402.03 1.804l-10.995 6.272a1.03 1.03 0 0 1-1.019 0L.526 16.43a1.03 1.03 0 0 1 .034-1.806l3.66-1.911a.343.343 0 0 0 .01-.603L.524 10.029a1.03 1.03 0 0 1-.041-1.77l.036-.021L9.618 3.06a.688.688 0 0 0 .308-.369l.011-.036c.32-.952 1.046-1.466 2.063-1.466Zm5.076 12.63-4.492 2.586-.041.022c-.306.158-.671.152-.973-.018l-4.478-2.527a.682.682 0 0 0-.65-.01L3.86 15.224a.343.343 0 0 0-.012.602l7.887 4.515c.21.12.467.121.677 0l7.956-4.547a.343.343 0 0 0-.01-.602l-2.623-1.384a.683.683 0 0 0-.659.012z"}}]})(t)}const to=({record:t,visible:s,x:r,y:a,toggleModal:n,handleDelete:l,handleCopyProxy:o,handleDuplicateProfile:m,handleChangeFingerPrint:i,handleGoToFolder:d,handleRefuseShare:p})=>{const[u]=ne(),f=c.useRef(null),{token:x}=Le.useToken(),{message:v}=je.useApp(),{theme:b}=se(F=>F.display),S=c.useContext(Fe),{isLocalActiveTab:P}=se(F=>F.display),{currentCharge:h}=se(F=>F.chargeSlice),D=["trial_day","common"],[I,O]=c.useState(!1);c.useEffect(()=>{h&&h.charge.type&&(D.includes(h.charge.type)?O(!0):O(!1))},[h]);const E=c.useMemo(()=>{var F;return!((F=t==null?void 0:t.proxy)!=null&&F.proxy_config_id)},[t]),W=c.useMemo(()=>[{label:"Share",icon:e.jsx(tr,{}),action:()=>{n(!0,"Share Profile",t.uuid,"modal_share")},role:[""],isDisabled:!0},{label:"Add to folder",icon:e.jsx(or,{}),action:()=>{n(!0,"Add Profile to Folder",t.uuid)},role:[""],isDisabled:!1},{label:"Copy",icon:e.jsx(ir,{}),child:[{label:"Copy UUID",action:F=>{F.stopPropagation(),navigator.clipboard.writeText(t.uuid),v.success("Copied")}},{label:"Copy proxy",action:F=>{F.stopPropagation();const y=o(t.proxy);navigator.clipboard.writeText(y),v.success("Copied")}}],role:["","admin","guest"],isDisabled:!1},{label:"Cookies",icon:e.jsx(yr,{}),action:()=>{n(!0,"Cookies manager",t.uuid)},role:["","admin","guest"],isDisabled:!1},{label:"Transfer",icon:e.jsx(vr,{}),action:()=>{if(!E)return v.error("Cannot transfer profile using proxy config");if(I)return v.error("Usage limit has been reached. Please upgrade your Subscription Plan.");n(!0,"Transfer Profile",t.uuid)},role:[""],isDisabled:P||!1},{label:"Change fingerprint",icon:e.jsx(cr,{}),action:()=>{i(t.uuid)},role:[""],isDisabled:S==null?void 0:S.arrUuidProfilesRun.some(F=>F==(t==null?void 0:t.uuid))},{label:"Duplicate",icon:e.jsx(jr,{}),child:[{label:"Duplicate configs",action:F=>{F.stopPropagation(),m(t.uuid,"config")}},{label:"Duplicate all",action:F=>{F.stopPropagation(),m(t.uuid,"all")}}],role:["","admin"],isDisabled:!1},{label:"Go to folder",icon:e.jsx(Ta,{}),action:()=>{d(t.uuid)},role:[""],isDisabled:!1},{label:"Edit",icon:e.jsx(dr,{}),action:()=>{n(!0,"Edit Profile",t.uuid)},role:["","admin"],isDisabled:!1},{label:"Log proxy",icon:e.jsx(eo,{}),action:()=>{n(!0,"Log proxy history",t.uuid)},role:["","admin","guest"],isDisabled:!1},{label:"Delete",icon:e.jsx(ur,{}),action:()=>{l(!1,{name:t.name,ids:[t.uuid]},"profile")},role:[""],isDisabled:S==null?void 0:S.arrUuidProfilesRun.some(F=>F==(t==null?void 0:t.uuid))},{label:"Delete from folder",icon:e.jsx(Cr,{}),action:()=>{l(!0,{folder_id:t.folder_id,uuid_browser:t.uuid},"from-folder")},role:[""],isDisabled:!1},{label:"Refuse",icon:e.jsx(Ut,{}),action:()=>{p(t.uuid)},role:["admin","guest"],isDisabled:!1}],[t]),w={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(De,{theme:{token:{colorBgElevated:`${x.colorBgContainer}`,boxShadowSecondary:`${b=="light"?"0 2px 8px #00000026":"0 2px 8px #64646472"}`}},children:e.jsx("div",{id:"rightMenu",className:Kl.popup,style:{position:"absolute",top:`${a}px`,left:`${r}px`,visibility:`${s?"visible":"hidden"}`,opacity:`${s?"1":"0"}`,willChange:"visibility, opacity",boxShadow:`${b=="light"?"0 2px 8px #00000026":"0 2px 8px #64646472"}`,WebkitBoxShadow:`${b=="light"?"0 2px 8px #00000026":"0 2px 8px #64646472"}`},ref:f,children:e.jsx($e,{style:{backgroundColor:x.colorBgContainer},children:W.map((F,y)=>t&&F.role.includes(t.shares_role.toLowerCase())&&(F.child?e.jsx(lt,{placement:"rightTop",trigger:"click",content:e.jsx($e,{style:{backgroundColor:x.colorBgContainer},children:F.child.map((T,H)=>e.jsx($e.Item,{onClick:T.action,className:"cursor-pointer px-2 py-[5px] m-0 !text-[12px] hover:bg-[#6464640d]",children:e.jsx(pe.Text,{className:"leading-3 select-none",children:u(T.label)})},H))}),children:e.jsx($e.Item,{style:F.isDisabled?w:void 0,onClick:T=>{T.stopPropagation()},children:e.jsxs(pe,{className:"px-2 py-[5px] flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-4 text-[17px] flex items-center",children:F.icon}),e.jsx("span",{children:u(F.label)})]}),e.jsx(lr,{})]})},y)},y):F.label=="Delete from folder"?(t==null?void 0:t.folder_id)&&e.jsx($e.Item,{onClick:F.action,style:F.isDisabled?w:void 0,children:e.jsxs(pe.Text,{className:"px-2 flex items-center py-[5px]",children:[e.jsx("span",{className:"mr-4 text-[17px] flex items-center",children:F.icon}),e.jsx("span",{children:u(F.label)})]})},y):e.jsx($e.Item,{onClick:F.action,style:F.isDisabled?w:void 0,children:e.jsxs(pe.Text,{className:"px-2 flex items-center py-[5px]",children:[e.jsx("span",{className:"mr-4 text-[17px] flex items-center",children:F.icon}),e.jsx("span",{children:u(F.label)})]})},y)))})})})},so="_collapse_hm_1pnyx_1",ao="__dark_1pnyx_43",ro="_pagination_hm_1pnyx_111",jt={collapse_hm:so,_dark:ao,pagination_hm:ro},no=({selectedRowKeys:t,setSelectedRowKeys:s,arrProfileSeclected:r,handleDelete:a,toggleModal:n,handleChangeFingerPrint:l,data:o,handleExportData:m,arrUuidProfilesRun:i,filter:d,folder_id:p})=>{const{t:u}=ne(),f=c.useCallback(w=>{w==="START"?window.api.openProfiles(t):window.api.closeProfiles(t)},[t]),{message:x}=je.useApp(),v=c.useCallback(()=>{window.api.forceStop(t)},[t]),b=c.useContext(Fe),{isLocalActiveTab:S}=se(w=>w.display),{currentCharge:P}=se(w=>w.chargeSlice),h=["trial_day","common"],[D,I]=c.useState(!1);c.useEffect(()=>{P&&P.charge.type&&(h.includes(P.charge.type)?I(!0):I(!1))},[P]);const O=[{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStartFigma,{width:14,height:14})}),label:`${u("Start")} ${t?t.length>1?t.length+" "+u("Profiles"):t.length+" "+u("Profile"):"0 "+u("Profile")}`,type:"primary",action:()=>{f("START")},show:["cloud"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconPauseFigma,{width:14,height:14})}),label:`${u("Stop")} ${t?t.length>1?t.length+" "+u("Profiles"):t.length+" "+u("Profile"):"0 "+u("Profile")}`,type:"error",action:()=>{f("STOP")},show:["cloud"],isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStopFigma,{width:14,height:14})}),label:u("Force Stop"),type:"error",action:()=>{v()},show:["cloud","local"],isDisabled:!i.some(w=>t.includes(w))},{icon:e.jsx($s,{}),label:u("Delete"),type:"error",action:()=>{a(!0,{ids:t},"profile")},show:["cloud"],isDisabled:i.some(w=>t.includes(w))},{icon:e.jsx(Qt,{}),label:u("Proxy"),type:"primary",action:()=>{n(!0,"Change proxy",{selectedRowKeys:t,folder_id:o==null?void 0:o.uuid,filter:d})},show:["cloud"],isDisabled:!1},{icon:e.jsx(Ae.IconAutomationFigma,{width:14,height:14}),label:u("Automation"),type:"primary",action:()=>{b==null||b.setIsOpenAutomation(!0),b==null||b.setSelectedRowKeys(r),b==null||b.setDataShare({folder_id:p,filter:d})},show:["cloud","local"],isDisabled:!!(P&&P.charge.type==="common")},{element:e.jsx(Kt,{selectedProfile:t}),type:"JSXElement",show:["cloud"],isDisabled:!1},{icon:e.jsx(Vs,{}),label:u("Transfer Profile"),type:"primary",action:()=>{if(D)return x.error("Usage limit has been reached. Please upgrade your Subscription Plan.");n(!0,"Transfer Profile",t)},show:["cloud"],isDisabled:i.some(w=>t.includes(w))||S?S:!1},{icon:e.jsx(Bs,{}),label:u("Change fingerprint"),type:"primary",action:()=>{l(t)},show:["cloud"],isDisabled:i.some(w=>t.includes(w))},{element:e.jsx(Ft,{selectedProfile:t,setSelectedRowKeys:s}),type:"JSXElement",show:["cloud"],isDisabled:!1},{icon:e.jsx(As,{}),label:u("Add to folder"),type:"primary",action:()=>{n(!0,"Add Profile to Folder",t)},show:["cloud"],isDisabled:!1},{icon:e.jsx(Ms,{}),label:u("Export Data"),type:"primary",action:()=>{m(t,"")},show:["cloud"],isDisabled:!1}],E=[{element:e.jsx(Ft,{setSelectedRowKeys:s}),type:"JSXElement",isDisabled:!1}],W={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(e.Fragment,{children:t.length>0?O.map((w,F)=>e.jsx("div",{children:o.id!==void 0&&w.show.includes("cloud")&&(w.type!="JSXElement"?e.jsx(ee,{icon:w.icon,label:w.label,buttonMenu:!0,onClick:w.action,type:w.type,disabled:w.isDisabled}):e.jsx("div",{style:w.isDisabled?W:void 0,children:w.element}))},F)):o.id!==void 0&&E.map(w=>e.jsx("span",{style:w.isDisabled?W:void 0,children:w.element},Math.random()))})},lo=({rowSelection:t,columns:s,rows:r,isLoading:a,selectedRowKeys:n,onRow:l,onChange:o})=>e.jsx(We,{rowSelection:t,className:"w-full h-full",columns:s,tableLayout:"auto",dataSource:r,rowKey:"uuid",loading:{spinning:a},onRow:Oe.isEmpty(n)?l:void 0,pagination:!1,size:"small",onChange:o}),oo=({folder:t,columns:s,handleDelete:r,toggleModal:a,handleChangeFingerPrint:n,handleExportData:l,onRow:o})=>{const m=Se(),[i,d]=c.useState([]),[p,u]=c.useState([]),f=c.useRef(new Set),{t:x}=ne(),v=se(A=>A.profileStateSlice.profileStatus),{isLocalActiveTab:b}=se(A=>A.display),[S,P]=c.useState([]),D={selectedRowKeys:p,onChange:A=>{u(A)}},[I,O]=c.useState({page:1,limit:10,name:[""]}),E=(...A)=>{const[q,M]=A;O(Y=>({...Y,page:q,limit:M}))},W=A=>{O(q=>({...q,page:1,name:[A]}))},[w,F]=c.useState(""),{data:y,isLoading:T}=he({queryFn:()=>Ds(b,t.uuid,I),queryKey:[_.GET_PROFILE_BY_FOLDER,t.uuid,I]}),[H,N]=c.useState(((y==null?void 0:y.data.data.content)||[]).map(A=>({...A}))||[]);c.useLayoutEffect(()=>{window.api.getBrowserRunnings().then(A=>{f.current=new Set(A.keys()),N(((y==null?void 0:y.data.data.content)||[]).map(q=>({...q,page:1,limit:10,runningStatus:{content:"",isDisabled:!1,toReady:!f.current.has(q.uuid),type:f.current.has(q.uuid)?"success":"warning"}}))||[])})},[y==null?void 0:y.data.data]),c.useEffect(()=>{window.api.getBrowserRunnings().then(A=>{const q=Array.from(A.keys());d(q)})},[H,v]),c.useEffect(()=>{const A=y==null?void 0:y.data.data.content.filter(q=>p.includes(q.uuid)).map(q=>({uuid:q.uuid,name:q.name}));P(A||[])},[p]);const L=(A,q,M,Y)=>{const{field:le,order:X}=M;switch(le){case"name":O(X==="ascend"?te=>({...te,orderName:1}):X==="descend"?te=>({...te,orderName:2}):te=>({...te,orderName:null}));break;case"last_open":O(X==="ascend"?te=>({...te,orderLastOpen:1}):X==="descend"?te=>({...te,orderLastOpen:2}):te=>({...te,orderLastOpen:null}));break}};return e.jsxs("div",{children:[e.jsx("div",{className:"mb-5 mt-0 min-[300px]",children:e.jsx(wr,{className:"w-[180px] sm:w-[300px]",placeholder:"Search by name",onClickSearch:A=>W(A),onChange:A=>F(A.target.value),value:w,onPressEnter:A=>{W(A.target.value)}})}),e.jsx("div",{className:"flex flex-wrap items-center gap-3 py-[10px] overflow-hidden",children:e.jsx(no,{selectedRowKeys:p,arrProfileSeclected:S,setSelectedRowKeys:u,handleDelete:r,toggleModal:a,handleChangeFingerPrint:n,data:t,handleExportData:l,arrUuidProfilesRun:i,filter:I,folder_id:t.uuid})}),e.jsx("div",{className:"relative rounded-[5px] w-full h-full overflow-hidden border border-solid shadow-sm",style:{borderColor:m.borderLight},children:e.jsx(lo,{rowSelection:D,columns:s,rows:H,isLoading:T,uuidFolder:t.uuid,selectedRowKeys:p,onRow:o,onChange:L})}),e.jsxs("div",{className:"w-full p-4 gap-x-2 flex items-center justify-end h-[50px]",children:[e.jsx("div",{className:"",children:e.jsx(Be,{className:"!text-[16px]",label:`${y!=null&&y.data.data.content&&(y==null?void 0:y.data.data.content.length)>1?"Profiles":"Profile"}: ${(y==null?void 0:y.data.meta.total)??0}`})}),e.jsx(nt,{showTitle:!1,pageSize:I.limit,total:(y==null?void 0:y.data.meta.total)||0,onChange:E,current:I.page,showQuickJumper:!0,showSizeChanger:!0,className:`${jt.pagination_hm}`,locale:{page:x("Page"),items_per_page:x("page"),jump_to:x("Go to")}})]})]})},io={vi:Qs,en:Xt,cn:Ws},co=({dataFolder:t,folder_uuid:s,columns:r,handleDelete:a,toggleModal:n,handleChangeFingerPrint:l,handleExportData:o,onRow:m})=>{const{theme:i}=se(x=>x.display),d=Se();Le.useToken();const{t:p}=ne(),u=zt("DISPLAY"),f=u!=null&&u.language?u==null?void 0:u.language:Xt;return e.jsx("div",{className:"flex flex-col gap-y-[1rem]",children:t&&t.length>0?t.map((x,v)=>e.jsx(Yt,{defaultActiveKey:s,className:`
                                ${s&&s==x.uuid?"hm_collapse_active":""} 
                                ${i==="light"?jt.collapse_hm:jt.collapse_hm+" "+jt._dark}
                            `,style:{boxShadow:"0px 2px 0px #269D72",border:"2px solid #269D72"},items:[{key:x.uuid,label:e.jsxs("div",{className:"-translate-y-[15px]",children:[e.jsx("div",{className:"flex flex-row justify-between items-center gap-x-[20px]",children:e.jsxs("div",{className:"flex items-center gap-x-[5px]",style:{color:d.titlePrimary},children:[e.jsx("span",{className:"mt-1",children:e.jsx(La,{size:30})}),e.jsx("span",{className:"font-bold text-[20px] leading-[30px] text-center",children:x.name})]})}),e.jsx("div",{className:"h-full relative",children:e.jsx("div",{className:"absolute text-[16px] right-3 -top-[3px]",children:x.created_at?qr(new Date(x==null?void 0:x.created_at),"LLLL dd, yyyy",{locale:io[f]}):""})}),e.jsxs("div",{className:" flex flex-row items-center gap-x-[10px] mt-1",children:[e.jsx("span",{className:"p-[5px_5px] rounded-full bg-[#FF1111]"}),e.jsx(Be,{className:"font-semibold !text-[16.33px]",label:x.total_browser?x.total_browser>1?x.total_browser+` ${p("profiles")}`:x.total_browser+` ${p("profile")}`:`0  + ${p("profile")}`})]}),e.jsx("div",{className:"flex flex-row items-center gap-x-[10px]",children:e.jsx(Be,{className:"!text-[14px]",label:x.user_share?" (share by: "+x.user_share+" )":""})})]}),children:e.jsx(oo,{folder:x,columns:r,handleDelete:a,toggleModal:n,handleChangeFingerPrint:l,handleExportData:o,onRow:m})}],accordion:!0,expandIconPosition:"end",bordered:!1,ghost:!1},v)):e.jsx("div",{className:"my-[3rem]",children:e.jsx(ht,{image:ht.PRESENTED_IMAGE_SIMPLE})})})},uo={"header-fixed":"_header-fixed_8q965_1"};function po(t){return Ke({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M388.8 896.4v-27.198c.6-2.2 1.6-4.2 2-6.4 8.8-57.2 56.4-102.4 112.199-106.2 62.4-4.4 115.2 31.199 132.4 89.199 2.2 7.6 3.8 15.6 5.8 23.4v27.2c-.6 1.8-1.6 3.399-1.8 5.399-8.6 52.8-46.6 93-98.6 104.4-4 .8-8 2-12 3h-27.2c-1.8-.6-3.6-1.6-5.4-1.8-52-8.4-91.599-45.4-103.6-96.8-1.2-5-2.6-9.6-3.8-14.2zm252.4-768.797l-.001 27.202c-.6 2.2-1.6 4.2-1.8 6.4-9 57.6-56.8 102.6-113.2 106.2-62.2 4-114.8-32-131.8-90.2-2.2-7.401-3.8-15-5.6-22.401v-27.2c.6-1.8 1.6-3.4 2-5.2 9.6-52 39.8-86 90.2-102.2 6.6-2.2 13.6-3.4 20.4-5.2h27.2c1.8.6 3.6 1.6 5.4 1.8 52.2 8.6 91.6 45.4 103.6 96.8 1.201 4.8 2.401 9.4 3.601 13.999zm-.001 370.801v27.2c-.6 2.2-1.6 4.2-2 6.4-9 57.4-58.6 103.6-114.6 106-63 2.8-116.4-35.2-131.4-93.8-1.6-6.2-3-12.4-4.4-18.6v-27.2c.6-2.2 1.6-4.2 2-6.4 8.8-57.4 58.6-103.601 114.6-106.2 63-3 116.4 35.2 131.4 93.8 1.6 6.4 3 12.6 4.4 18.8z"}}]})(t)}function mo({item:t}){const{t:s}=ne(),a=se(p=>p.profileStateSlice.profileStatus)[t.uuid]||t.runningStatus,n=p=>{window.api.openProfiles([p.uuid])},l=p=>{window.api.closeProfiles([p.uuid])},o=c.useContext(Fe),m=p=>{p.preventDefault(),p.stopPropagation();const u=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,button:0,clientX:p.clientX,clientY:p.clientY});p.target.dispatchEvent(u)},i=p=>{o==null||o.setRightMenu({record:null,visible:!1,x:0,y:0}),p.stopPropagation(),n(t)},d=p=>{o==null||o.setRightMenu({record:null,visible:!1,x:0,y:0}),p.stopPropagation(),l(t)};return e.jsx("div",{className:"min-h-[52px] flex flex-col justify-center",children:e.jsxs("div",{className:"flex gap-x-2 items-center justify-center",children:[a!=null&&a.toReady||!(a!=null&&a.toReady)&&(a==null?void 0:a.type)=="error"?e.jsx(ee,{label:s("Start"),type:"normal",onClick:i,disabled:!!(a!=null&&a.isDisabled)}):e.jsx(ee,{type:"warning",label:s("Stop"),warning:!0,onClick:d,disabled:!!(a!=null&&a.isDisabled)}),e.jsx("div",{onClick:p=>m(p),className:"cursor-pointer flex items-center justify-center openRightMenu w-[20px] h-[20px] rounded-full",children:e.jsx(po,{})})]})})}const ho=c.memo(mo);function oa({openModal:t,setOpenModal:s,status:r,profile:a}){const[n]=B.useForm(),{message:l}=je.useApp(),o=Ce(),{Title:m}=pe,i=Se(),{isLoading:d,mutate:p}=Ve({mutationFn:async f=>{const{name:x,color:v}=f,b={browser_uuid:a.uuid,name:x,id:r==null?void 0:r.id,color:typeof v=="string"?v:v.toHex()};r?await Ua(b):await Ya(b)},onSuccess:()=>{o.invalidateQueries(_.listProfile),o.invalidateQueries(_.statusProfile),l.success("Update status successfully!"),n.resetFields(),s(!1)},onError:f=>{l.error(f.response.data||"The number of status is limited 10!"),n.resetFields(),s(!1)}}),u=()=>{s(!1),n.resetFields()};return e.jsx(He,{title:e.jsx(m,{style:{color:i.titlePrimary,fontSize:"20px"},children:r?"Update status":"Add new status"}),open:t,className:"absolute top-[35%] left-0 right-0 bottom-0",footer:[e.jsxs("div",{className:"flex justify-end",children:[e.jsx(ee,{label:"Cancel",type:"error",onClick:()=>u()}),e.jsx("div",{className:"ml-3",children:e.jsx(ee,{label:r?"Update":"Add",type:"normal",onClick:()=>n.submit()})})]})],onCancel:()=>s(!1),confirmLoading:d,children:e.jsxs(B,{form:n,layout:"vertical",className:"flex",onFinish:p,initialValues:{name:(r==null?void 0:r.name)||"",color:(r==null?void 0:r.color)||"1677FF"},children:[e.jsx(B.Item,{name:"name",label:e.jsx("span",{style:{color:i.textPrimary,fontWeight:"600"},children:"Name"}),style:{flex:1},rules:[{required:!0,message:"Name is required!"},{max:15,message:"The name may not be greater than 15 characters!"}],className:"font-semibold "+Me["required-label"]+" "+Me["custom-label"]+" "+Me["custom-input-ant"],help:"",children:e.jsx(Ie,{})}),e.jsx(B.Item,{name:"color",label:e.jsx("span",{style:{color:i.textPrimary,fontWeight:"600"},children:"Color"}),className:"ml-2 font-bold",style:{width:100},children:e.jsx(Il,{disabledAlpha:!0,showText:!0,format:"hex",defaultValue:n.getFieldValue("status"),presets:[{label:"Recommend",colors:["#ffaec9","#358799","#3a9069","#ed7d31","#d21e24"]}]})})]})})}const fo=({status:t,profile:s})=>{const{message:r}=je.useApp(),a=Ce(),[n,l]=c.useState(!1),[o,m]=c.useState(!0),i=()=>{Bt().then(async d=>{d.isConfirmed&&(await Ga(t.id,s.uuid),a.invalidateQueries(_.statusProfile),a.invalidateQueries(_.listProfile),a.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),r.success("Status deleted successfully!"))})};return c.useEffect(()=>{m(n!==!0)},[n]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-y-1 items-center",children:[e.jsx(ee,{type:"normal",icon:e.jsx(mr,{}),label:cs("Edit"),onClick:()=>{l(!0),m(!1)}}),e.jsx(ee,{danger:!0,onClick:i,type:"text",label:cs("Delete"),icon:e.jsx(hr,{})})]}),e.jsx(oa,{openModal:n,setOpenModal:l,status:t,profile:s})]})},xo=({data:t,setOpenStatus:s})=>{var f;const{message:r}=je.useApp(),[a,n]=c.useState(!1),l=Ce(),o=(f=t==null?void 0:t.uuid)==null?void 0:f.includes("local-"),{token:m}=Le.useToken(),{data:i}=he({queryFn:()=>Wt(o),queryKey:[_.statusProfile,o]}),{t:d}=ne(),{theme:p}=se(x=>x.display),u=async x=>{t.shares_role!="guest"?await Xa({browser_uuid:t.uuid,...x}).then(()=>{r.success("Update status successfully!"),l.invalidateQueries(_.listProfile,{refetchInactive:!0}),l.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),s(!1)}).catch(v=>{r.error(v.response.data.title)}):r.error("You don't have permission to access this resource.")};return e.jsxs(e.Fragment,{children:[e.jsxs($e,{className:Me.popup,style:{backgroundColor:m.colorBgContainer,zIndex:999,width:"135px"},children:[e.jsx("div",{className:"pb-[5px] text-center pointer-events",style:{borderBottom:"1px solid #EDEDED"},children:e.jsx(pe.Text,{className:"px-4 flex items-center pl-[0px] pr-[0px]",children:e.jsx("span",{className:"text-[14px] text-[#2263B3] font-[600] m-auto w-full",children:d("Status setting")})})}),e.jsxs("div",{style:{maxHeight:"160px",overflowX:"hidden",overflowY:"auto"},children:[At&&At.map((x,v)=>e.jsx($e.Item,{className:"cursor-pointer pointer-events-auto",onClick:()=>{u(x)},children:e.jsx(pe.Text,{className:"px-4 flex  items-center pl-[0px] pr-[0px]",children:e.jsx("span",{className:"text-[14px]",style:{color:`#${x.color}`},children:d(x.name)})})},v)),i&&i.map((x,v)=>e.jsx(lt,{content:e.jsx(fo,{status:x,profile:t}),placement:"right",children:e.jsx($e.Item,{className:"cursor-pointer pointer-events-auto",onClick:()=>{u(x)},children:e.jsx(pe.Text,{className:"px-4 flex  items-center pl-[0px] pr-[0px]",children:e.jsx("span",{className:"text-[14px]",style:{color:`#${x.color}`},children:x.name})})},v)},x.id))]}),e.jsx("div",{children:e.jsx(ee,{icon:e.jsx(pr,{}),type:"text",className:`${p=="light"?"hover:!bg-[#FFFFFF]":"hover:!bg-[#2263B3]"} w-[90%] m-auto text-[#2263B3] text-[14px]`,label:d("New status"),onClick:()=>n(!0),onMouseDown:x=>x.preventDefault()})})]}),e.jsx(oa,{profile:t,openModal:a,setOpenModal:n})]})};function go({data:t}){var p;const s=Se(),[r,a]=c.useState(!1),n=(p=t==null?void 0:t.uuid)==null?void 0:p.includes("local-"),{data:l}=he({queryFn:()=>Wt(n),queryKey:[_.statusProfile,n]}),o=c.useMemo(()=>[...l||[],...At].find(({id:u})=>u===t.status_id),[l,t]),{t:m}=ne(),i=(u,f)=>{u.stopPropagation(),a(f)},d=c.useContext(Fe);return c.useEffect(()=>{d==null||d.setRightMenu({record:null,visible:!1,x:0,y:0})},[r]),e.jsx(e.Fragment,{children:e.jsx(lt,{content:e.jsx("div",{onClick:u=>u.stopPropagation(),children:e.jsx(xo,{setOpenStatus:a,data:t})}),trigger:"click",placement:"left",open:r,children:e.jsx(ee,{style:{color:`${o&&o.color?`#${o.color}`:s.textNormal}`,borderColor:`#${Ja((o==null?void 0:o.color)||"333")}`},onBlur:u=>i(u,!1),onClick:u=>i(u,!r),solid:!1,className:"mx-auto",type:"normal",label:m((o==null?void 0:o.name)??"No Status")})})})}function ia(t){return Ke({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M0 7.5C0 7.22386 0.223858 7 0.5 7H3C3.27614 7 3.5 7.22386 3.5 7.5C3.5 7.77614 3.27614 8 3 8H0.5C0.223858 8 0 7.77614 0 7.5ZM5.75 7.5C5.75 7.22386 5.97386 7 6.25 7H8.75C9.02614 7 9.25 7.22386 9.25 7.5C9.25 7.77614 9.02614 8 8.75 8H6.25C5.97386 8 5.75 7.77614 5.75 7.5ZM12 7C11.7239 7 11.5 7.22386 11.5 7.5C11.5 7.77614 11.7239 8 12 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12Z",fill:"currentColor"}}]})(t)}function bo(t){const{profileData:s}=t,{theme:r}=se(l=>l.display),a=c.useContext(Fe),n=l=>{l.stopPropagation(),a==null||a.setDataNote({isOpen:!0,data:s})};return e.jsx(De,{theme:{token:{colorBgSpotlight:`${r==="light"?"#FFFFFF":"#39383F"}`,colorTextLightSolid:`${r==="light"?"#000000":"#FFFFFF"}`}},children:e.jsxs("div",{className:"flex justify-center relative group min-h-[50px] cursor-pointer",onClick:l=>n(l),children:[(s.note===""||!s.note)&&e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-all duration-75 font-black opacity-100 group-hover:opacity-0 z-50"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-all duration-75 opacity-0 group-hover:opacity-100 z-50",children:e.jsx(Us,{className:"hover:text-blue-700 cursor-pointer text-lg"})})]}),e.jsx("div",{className:"text-[14px] flex relative items-center",children:e.jsx(Mt,{placement:"bottom",title:s.note,children:e.jsx("span",{className:"max-w-[200px] line-clamp-2",children:s.note!==""?s.note:""})})})]})})}function yo({profileData:t}){var l,o,m,i,d,p,u,f;const s=c.useContext(Fe),{t:r}=ne(),{proxy:a}=t,n=x=>{x.stopPropagation(),s==null||s.setDataProxy({isOpen:!0,proxy:a,profile:t})};return c.useEffect(()=>{s==null||s.setRightMenu({record:null,visible:!1,x:0,y:0})},[open]),e.jsx(e.Fragment,{children:a?e.jsxs("div",{className:"cursor-pointer text-[14px]",onClick:x=>n(x),children:[(a==null?void 0:a.details)&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"m-0 text-center",children:a.details.org}),e.jsxs("p",{className:"flex m-0 text-center justify-center items-center",style:{gap:"0 8px"},children:[(l=a==null?void 0:a.info)!=null&&l.country&&((o=a==null?void 0:a.info)==null?void 0:o.country)!=="random"||a!=null&&a.details.country?e.jsx(Xr,{countryCode:(m=a.details.country)==null?void 0:m.toLocaleLowerCase(),svg:!0,style:{width:"1.5em",height:"1.5em",objectFit:"cover"},className:"rounded-full"}):e.jsx("img",{src:Gr,width:21,height:21,alt:"",className:"rounded-full flex justify-center items-center"}),e.jsx("span",{children:a.details.ip}),e.jsx(Jr,{data:a})]})]}),e.jsx("p",{className:"text-center m-0",style:{fontSize:12},children:a.proxy_config?`(${(i=a.proxy_config)==null?void 0:i.name}${(d=a.proxy_config)!=null&&d.proxy_config.ip?":"+((p=a.proxy_config)==null?void 0:p.proxy_config.ip):""}${(u=a.proxy_config)!=null&&u.proxy_config.port?":"+((f=a.proxy_config)==null?void 0:f.proxy_config.port):""})`:`(${[a.type,a.ip,a.port].filter(x=>!!x).join(":")})`})]}):e.jsx("p",{onClick:x=>n(x),className:"text-center m-0 text-sx cursor-pointer text-[14px]",children:r("Direct")})})}function vo(t){var W;const{profileData:s}=t,r=Se(),{message:a}=je.useApp(),[n,l]=c.useState(0),[o,m]=c.useState(!1),[i,d]=c.useState(!1),p=Ce(),[u]=B.useForm(),f=(W=t.profileData)==null?void 0:W.uuid.includes("local-"),{t:x}=ne(),{isLoading:v,mutate:b}=Ve({mutationFn:({tags:w})=>Qa({tags:w,profile_uuid:s.uuid}),onSuccess:()=>{p.invalidateQueries(_.tag),p.invalidateQueries(_.listProfile),p.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),a.success("Tags updated successfully!"),d(!1)},onError:w=>{const F=w.response.data;F.title&&F.content&&F.content.length>0&&F.content.forEach(y=>{a.error(y)}),F.title&&F.content&&F.content.length==0&&a.error(F.title),u.resetFields()}}),{data:S,isLoading:P}=he({queryFn:()=>Hs(f),queryKey:[_.tag,f]}),h=w=>{w.stopPropagation(),d(!0)},D=()=>{d(!1),u.resetFields()},I=c.useContext(Fe);c.useEffect(()=>{I==null||I.setRightMenu({record:null,visible:!1,x:0,y:0})},[i]);const O=w=>{l(w.length)},E=w=>{l(0),m(u.getFieldValue("tags").some(F=>F.length>15))};return e.jsxs("div",{className:"flex justify-center group min-h-[50px] cursor-pointer",onClick:w=>h(w),children:[e.jsx("div",{className:"flex justify-center items-center",children:(s==null?void 0:s.tags.length)>0?e.jsx("div",{className:"flex gap-y-[5px] flex-wrap relative",children:s==null?void 0:s.tags.map((w,F)=>e.jsx(Ye,{className:"text-[14px] py-[2px] px-[6px]",closeIcon:null,children:w.tag},F))}):e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"absolute transition-all duration-75 font-black opacity-100 group-hover:opacity-0"}),e.jsx("span",{className:"absolute cursor-pointer opacity-0 duration-75 transition-all group-hover:opacity-100",onClick:w=>h(w),children:e.jsx(Us,{className:"hover:text-blue-700 text-lg"})})]})}),e.jsx("div",{onClick:w=>w.stopPropagation(),children:i&&e.jsx(De,{theme:{components:{Modal:{contentBg:r.backgroundLight,headerBg:r.backgroundLight},Select:{selectorBg:r.backgroundNormal,multipleItemBg:r.backgroundDark}},token:{colorBgContainer:r.backgroundNormal}},children:e.jsx(He,{confirmLoading:v,open:i,onCancel:()=>D(),className:"absolute top-[35%] left-0 right-0 bottom-0",footer:[e.jsxs("div",{className:"flex justify-end",children:[e.jsx(ee,{label:x("Cancel"),type:"error",onClick:()=>D()}),e.jsx("div",{className:"ml-3",children:e.jsx(ee,{label:x("Add"),isDisabled:o,type:"button",onClick:()=>u.submit()})})]},1)],children:e.jsxs(B,{layout:"vertical",form:u,onFinish:b,className:"relative",initialValues:{tags:s.tags.map(w=>w.tag)},children:[n>15&&e.jsx("div",{className:"absolute text-[12px] text-red-400 top-[22px] right-0",children:"Tag name must be less than 15 characters"}),e.jsx(B.Item,{name:"tags",label:e.jsx("span",{style:{color:r.titlePrimary,fontWeight:"600",fontSize:"20px"},children:x("Tags")}),style:{flex:1},children:e.jsx(ve,{mode:"tags",loading:P,onSearch:O,onChange:E,status:n>15?"error":"",tagRender:w=>e.jsx(Ye,{closeIcon:e.jsx(Dt,{style:{color:w.label&&w.label.toString().length>15?r.iconCloseRed:r.iconClose},className:"inline-flex align-[-0.125em]"}),title:w.label&&w.label.toString().length>15?"input limit exceeded":"",closable:w.closable,onClose:w.onClose,style:{cursor:"default",padding:"0px 3px",fontWeight:"500",fontSize:14,margin:"2px",background:w.label&&w.label.toString().length>15?r.tagBgError:r.tagBgPrimary,color:w.label&&w.label.toString().length>15?r.tagTextRed:r.tagTextPrimary},children:rt(w.label,20)}),allowClear:!0,placeholder:x("Tags"),children:S==null?void 0:S.map((w,F)=>e.jsx(ve.Option,{value:w.label,title:"",children:w.label},F))})})]})})})})]})}function jo({data:t}){const{theme:s}=se(S=>S.display),{message:r}=je.useApp(),a=Ce(),[n,l]=c.useState(t.name),{isLocalActiveTab:o}=se(S=>S.display),{isLoading:m,mutate:i}=Ve({mutationFn:({profileName:S})=>Ra(o,{profile_uuid:t.uuid,profileName:S}),onSuccess:()=>{a.invalidateQueries(_.listProfile),a.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),r.success("Name updated successfully!")},onError:S=>{S.response.data.title&&S.response.data.content.length>0&&S.response.data.content.forEach(P=>{r.error(P)}),S.response.data.title&&S.response.data.content.length==0&&r.error(S.response.data.title),l(t.name)}}),d=c.useRef(null),p=c.useRef(null),u=c.useRef(!1),f=c.useContext(Fe),x=S=>{var D;S.stopPropagation(),f==null||f.setRightMenu({record:null,visible:!1,x:0,y:0});const P=S.target,h=d.current;P.parentElement.prepend(h==null?void 0:h.input),P.remove(),u.current=S.target.innerHTML,(D=h==null?void 0:h.input)==null||D.addEventListener("blur",v),h==null||h.focus()};function v(S){const P=S.target,h=p.current;P.parentElement.prepend(h),P.remove();const D=P.value,I=u.current;D!=I&&D.length>0&&i({profileName:D}),h==null||h.addEventListener("click",x)}const b=S=>{l(S.target.value)};return e.jsx(De,{theme:{token:{colorBgSpotlight:`${s==="light"?"#FFFFFF":"#39383F"}`,colorTextLightSolid:`${s==="light"?"#000000":"#FFFFFF"}`}},children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{className:"w-fit",children:e.jsx("div",{className:"text-[14px] flex items-center cursor-texts",children:e.jsxs(Mt,{placement:"bottom",title:t.name,children:[e.jsx("span",{ref:p,onClick:S=>x(S),className:"w-[145px] ml-[2px] text-ellipsis-1-line text-start border rounded-[3px] border-solid border-transparent hover:border hover:border-dashed hover:border-current transtion duration-150",children:t.name}),e.jsx("div",{className:"ml-[2px] invisible opacity-0 absolute pointer-event-none",children:e.jsx(Ie,{ref:d,value:n,onChange:S=>b(S),className:"w-[150px]",id:`${t.uuid}`})})]})})}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{children:t.check_open===0&&e.jsx(Ye,{className:"text-[10px]",bordered:!1,color:"success",children:"new"})}),e.jsxs("div",{className:"flex flex-col w-[90px] flex-nowrap justify-center items-center",children:[(t==null?void 0:t.os)&&((t==null?void 0:t.os)==="win"?e.jsx(fr,{className:"text-[#0078D4]"}):t.os==="mac"?e.jsx(ps,{className:"text-[#A6B1B7]"}):t.os==="lin"?e.jsx(xr,{}):t.os==="android"?e.jsx(gr,{className:"text-[#AAC148]"}):t.os==="ios"?e.jsx(ps,{className:"text-[#A6B1B7]"}):e.jsx(rn,{className:"text-[#A6B1B7]"})),e.jsx(Mt,{placement:"bottom",title:t.source_version,children:e.jsxs("div",{className:"flex gap-x-[5px] flex-nowrap items-center justify-center",children:[e.jsx("span",{className:"mb-[5px]",children:e.jsx(an,{browserType:t.browser,width:16,height:16})}),e.jsxs("span",{className:"text-[14px]",children:["/ ",t.version]})]})})]})]})]})})}const Co=()=>{const t=c.useContext(Fe);return e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:"flex justify-end items-center h-full",children:e.jsx("span",{className:"w-fit h-full flex items-center",children:e.jsx(So,{columns:t.columns,onSubmitChangeColumn:s=>t.setColumns(s)})})})})},So=({columns:t,onSubmitChangeColumn:s})=>{const r=Se(),a=es.filter(h=>h.title.length!==0),n=c.useRef({columns:a,checked:t.map(h=>h.title)}),[l,o]=c.useState(t.map(h=>h.title)),[m,i]=c.useState(!1),[d,p]=c.useState(n.current.columns),{t:u}=ne(),{token:{textPrimary:f}}=Le.useToken(),x={selectedRowKeys:l,onChange:h=>o(h)},v=_r(Pr(Fr,{activationConstraint:{distance:1}})),b=({active:h,over:D})=>{h.id!==(D==null?void 0:D.id)&&p(I=>{const O=I.findIndex(W=>W.title===h.id),E=I.findIndex(W=>W.title===(D==null?void 0:D.id));return Rr(I,O,E)})},S=()=>{const h=d.filter(O=>l.includes(O.title)),D=t.filter(O=>typeof O.title=="function"),I=h.concat(D);n.current={columns:t,checked:l},s(I),i(!1)},P=()=>{p(a),o(n.current.checked),i(!1)};return e.jsxs("div",{children:[e.jsx("div",{style:{color:r.textActiveNormal},className:"cursor-pointer flex items-center",onClick:()=>i(!0),children:e.jsx(Nr,{})}),e.jsx(De,{theme:{components:{Modal:{contentBg:r.backgroundLight,headerBg:r.backgroundLight}}},children:e.jsx(He,{title:e.jsx(Be,{label:"Custom Table",color:f,className:"font-bold !text-xl"}),centered:!0,open:m,onCancel:P,footer:[e.jsxs("div",{className:"flex justify-end gap-x-5",children:[e.jsx(ee,{onClick:P,label:u("Cancel"),type:"error",solid:!0},"close"),e.jsx(ee,{solid:!0,type:"primary",onClick:S,label:u("Apply")},"Apply")]},1)],children:e.jsx(Er,{sensors:v,modifiers:[kr],onDragEnd:b,children:e.jsx(Ir,{items:d.map(h=>h.title),strategy:Or,children:e.jsx(We,{components:{body:{row:Tr}},rowSelection:x,rowKey:"title",columns:Lr,dataSource:d,pagination:!1})})})})})]})},wo=({record:t})=>{const r=se(n=>n.profileStateSlice.profileStatus)[t.uuid]||t.runningStatus,{t:a}=ne();return e.jsxs("div",{className:"w-full flex flex-col justify-center items-center",children:[e.jsx("span",{className:"text-sm text-center m-0 translate-y-[3px] ",children:a(r==null?void 0:r.content)||((r==null?void 0:r.type)=="success"?a("is open"):a("Ready"))}),t.listing&&e.jsx(Ht,{color:"#2CDE35",text:e.jsx("span",{className:"text-[#2CDE35]",children:a("In listing")})}),t.transfer&&e.jsx(Ht,{color:"#2263B3",text:e.jsx("span",{className:"text-[#2263B3]",children:a("In transfer")})})]})},_o={vi:Qs,en:Xt,cn:Ws},Po=({value:t})=>{const s=zt("DISPLAY"),r=s!=null&&s.language?s==null?void 0:s.language:"en";return e.jsx(e.Fragment,{children:t?e.jsxs("span",{className:"flex flex-row gap-x-[5px] justify-center items-center text-[14px]",children:[e.jsx(Ka,{size:16}),nn(new Date(t),new Date,{addSuffix:!0,locale:_o[r]})]}):""})},es=[{title:e.jsx(_e,{title:"Name"}),dataIndex:"name",align:"center",className:"text-[16px]",sorter:!0,showSorterTooltip:!1,width:250,render:(t,s)=>e.jsx(jo,{data:s})},{title:e.jsx(_e,{title:"Tags"}),dataIndex:"tags",align:"center",className:"text-[16px]",width:200,render:(t,s)=>e.jsx(vo,{profileData:s})},{title:e.jsx(_e,{title:"Note"}),align:"center",className:"text-[16px]",width:200,render:(t,s)=>e.jsx(bo,{profileData:s})},{title:e.jsx(_e,{title:"Proxy"}),dataIndex:"proxy",align:"center",className:"text-[16px]",width:180,render:(t,s)=>e.jsx(yo,{profileData:s})},{title:e.jsx(_e,{title:"Last Open"}),align:"center",sorter:!0,showSorterTooltip:!1,dataIndex:"last_open",className:"text-[16px]",width:150,render:t=>e.jsx(Po,{value:t})},{title:e.jsx(_e,{title:"Status"}),align:"center",className:"text-[16px]",width:80,render:(t,s)=>e.jsx(go,{data:s})},{title:e.jsx(_e,{title:"Message"}),dataIndex:"message",width:100,className:"text-[16px]",align:"center",render:(t,s)=>e.jsx(wo,{record:s})},{title:()=>e.jsx(Co,{}),align:"center",className:"text-[16px]",width:120,render:t=>e.jsx("div",{className:"flex flex-row gap-x-[5px] justify-center items-center",children:e.jsx("div",{children:e.jsx(ho,{item:t})})})}],Fo=({rowSelection:t,columns:s,rows:r,isLoading:a,selectedRowKeys:n,onRow:l,onChange:o})=>e.jsx(We,{rowSelection:t,className:"w-full h-full",columns:s,tableLayout:"auto",dataSource:r,rowKey:"uuid",loading:{spinning:a},onRow:Oe.isEmpty(n)?l:void 0,pagination:!1,size:"small",onChange:o}),No="_collapse_hm_1cw12_1",Eo="__dark_1cw12_41",ko="_pagination_hm_1cw12_73",Ct={collapse_hm:No,_dark:Eo,pagination_hm:ko},Io=({selectedRowKeys:t,toggleModal:s,arrUuidProfilesRun:r,owner_uuid:a,filter:n})=>{const l=c.useContext(Fe),o=c.useCallback(p=>{p==="START"?window.api.openProfiles(t):window.api.closeProfiles(t)},[t]),m=c.useCallback(()=>{window.api.forceStop(t)},[t]),i=[{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStartFigma,{width:14,height:14})}),label:`Start ${t?t.length>1?t.length+" Profiles":t.length+" Profile":"0 Profile"}`,type:"primary",action:()=>{o("START")},isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconPauseFigma,{width:14,height:14})}),label:`Stop ${t?t.length>1?t.length+" Profiles":t.length+" Profile":"0 Profile"}`,type:"error",action:()=>{o("STOP")},isDisabled:!1},{icon:e.jsx("span",{className:"flex items-center w-full",children:e.jsx(Ae.IconStopFigma,{width:14,height:14})}),label:"Force Stop",type:"error",action:()=>{m()},isDisabled:!r.some(p=>t.includes(p))},{icon:e.jsx(Qt,{}),label:"Proxy",type:"primary",action:()=>{s(!0,"Change proxy",{selectedRowKeys:t,owner_uuid:a,filter:n})},isDisabled:!1},{icon:e.jsx(Ae.IconAutomationFigma,{width:14,height:14}),label:"Automation",type:"primary",action:()=>{l==null||l.setIsOpenAutomation(!0),l==null||l.setSelectedRowKeys(t),l==null||l.setDataShare({owner_uuid:a,filter:n})},isDisabled:!1},{element:e.jsx(Kt,{selectedProfile:t}),type:"JSXElement",isDisabled:!1},{label:"Refuse",icon:e.jsx(Ut,{}),type:"error",action:()=>{l==null||l.handleRefuseShare(t)},isDisabled:!1}],d={cursor:"not-allowed",opacity:"0.5",pointerEvents:"none"};return e.jsx(e.Fragment,{children:t.length>0&&i.map((p,u)=>e.jsx("div",{children:p.type!="JSXElement"?e.jsx(ee,{icon:p.icon,label:p.label,onClick:p.action,type:p.type,disabled:p.isDisabled}):e.jsx("div",{style:p.isDisabled?d:void 0,children:p.element})},u))})},Oo=({owner_uuid:t,onRow:s,toggleModal:r,filter:a,setFilter:n})=>{var D,I,O,E,W,w,F,y,T,H,N;const[l,o]=c.useState([]),[m,i]=c.useState([]);c.useState([]),c.useState(0);const d=c.useRef(new Set),p=se(L=>L.profileStateSlice.profileStatus),f={selectedRowKeys:m,onChange:L=>{i(L)}},x=(...L)=>{const[A,q]=L;n(M=>({...M,page:A,limit:q}))};c.useState("");const{isLoading:v,data:b}=he({queryFn:()=>Xs(t,a),queryKey:[_.GET_LIST_PROFILE_SHARE,t,a]}),[S,P]=c.useState(((b==null?void 0:b.data.content.content)||[]).map(L=>({...L}))||[]);c.useLayoutEffect(()=>{window.api.getBrowserRunnings().then(L=>{d.current=new Set(L.keys()),P(((b==null?void 0:b.data.content.content)||[]).map(A=>({...A,page:1,limit:10,runningStatus:{content:"",isDisabled:!1,toReady:!d.current.has(A.uuid),type:d.current.has(A.uuid)?"success":"warning"}}))||[])})},[b==null?void 0:b.data]),c.useEffect(()=>{window.api.getBrowserRunnings().then(L=>{const A=Array.from(L.keys());o(A)})},[S,p]);const h=(L,A,q,M)=>{const{field:Y,order:le}=q;switch(Y){case"name":n(le==="ascend"?X=>({...X,orderName:1}):le==="descend"?X=>({...X,orderName:2}):X=>({...X,orderName:null}));break;case"last_open":n(le==="ascend"?X=>({...X,orderLastOpen:1}):le==="descend"?X=>({...X,orderLastOpen:2}):X=>({...X,orderLastOpen:null}));break}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-5 mt-0 min-[300px]",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-3 py-[10px] overflow-hidden ",children:e.jsx(Io,{selectedRowKeys:m,toggleModal:r,arrUuidProfilesRun:l,filter:a,owner_uuid:t})}),e.jsx("div",{className:"relative rounded-[5px] w-full h-full",children:e.jsx(Fo,{rowSelection:f,columns:es,rows:S,isLoading:v,selectedRowKeys:m,onRow:s,onChange:h})}),e.jsxs("div",{className:"w-full p-4 gap-x-2 flex items-center justify-end h-[50px]",children:[e.jsx("div",{className:"",children:e.jsx(Be,{className:"!text-[16px]",label:`${(I=(D=b==null?void 0:b.data)==null?void 0:D.content)!=null&&I.content&&((W=(E=(O=b==null?void 0:b.data)==null?void 0:O.content)==null?void 0:E.content)==null?void 0:W.length)>1?"Profiles":"Profile"}: ${((y=(F=(w=b==null?void 0:b.data)==null?void 0:w.content)==null?void 0:F.meta)==null?void 0:y.total)??0}`})}),e.jsx(nt,{showTitle:!1,pageSize:a.limit,total:((N=(H=(T=b==null?void 0:b.data)==null?void 0:T.content)==null?void 0:H.meta)==null?void 0:N.total)||0,onChange:x,current:a.page,showQuickJumper:!0,showSizeChanger:!0,className:`${Ct.pagination_hm}`})]})]})})},To=({profileShare:t,setFilter:s})=>{const[r,a]=c.useState("profile"),[n,l]=c.useState(null),[o]=ne(),m=c.useContext(Fe),i=p=>{a(p.target.value),p.target.value==="profile"&&s(u=>({...u,limit:10,page:1,folder_id:null}))},d=p=>{if(p){const u=p.value;s(f=>({...f,limit:10,page:1,folder_id:u})),l(u)}};return e.jsxs("div",{className:"my-[10px]",children:[e.jsxs(kt.Group,{onChange:i,value:r,children:[e.jsx(kt,{value:"profile",children:"Profile"}),e.jsx(kt,{value:"folder",children:r==="folder"?"":"Folder"})]}),r==="folder"&&e.jsx(ve,{disabled:r!=="folder",className:"w-[250px]",showSearch:!0,labelInValue:!0,value:n,optionFilterProp:"label",placeholder:"filter by folder",options:t==null?void 0:t.folder.map(p=>({value:p.id,label:p.name,title:"",key:p.uuid})),optionRender:p=>e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("span",{children:p.label}),e.jsxs("span",{className:"flex items-center gap-x-[2px] hover:text-[#F34730]",onClick:()=>{m==null||m.handleRefuseShare(p.key),l(null)},children:[e.jsx(Ut,{})," ",o("Refuse")]})]}),onChange:d})]})},Lo=({onRow:t,toggleModal:s})=>{const{theme:r}=se(o=>o.display);Le.useToken();const[a,n]=c.useState({page:1,limit:10,folder_id:null}),{data:l}=he({queryFn:()=>Ys(),queryKey:[_.PROFILE_SHARE_WITH_ME]});return e.jsx(De,{theme:{components:{Collapse:{headerBg:`${r==="light"?"#FFFFFF":"rgba(255, 255, 255, 0.04)"}`}}},children:e.jsx("div",{className:"flex flex-col gap-y-[1rem] p-2",children:l!=null&&l.data.content&&(l==null?void 0:l.data.content.length)>0?l==null?void 0:l.data.content.map((o,m)=>e.jsx(Yt,{className:`${r==="light"?Ct.collapse_hm:Ct.collapse_hm+" "+Ct._dark}`,style:{filter:"drop-shadow(0px 0px 2px #00000040)"},items:[{key:o.uuid,label:e.jsxs("div",{className:"-translate-y-[15px]",children:[e.jsxs("div",{className:"flex flex-row flex-wrap justify-between items-center gap-x-[20px]",children:[e.jsxs("div",{className:"text-[#2263B3] flex items-center gap-x-[5px]",children:[e.jsx("span",{className:"mt-1",children:e.jsx(Ql,{size:25})}),e.jsx("span",{className:"font-bold text-[20px] leading-[30px] text-center",children:o.owner_email})]}),e.jsx("div",{onClick:i=>{i.stopPropagation()},children:e.jsx(To,{profileShare:o,filter:a,setFilter:n})})]}),e.jsxs("div",{className:"flex flex-row justify-between items-center flex-wrap gap-[10px]",children:[e.jsxs("div",{className:"flex flex-row gap-x-[10px]",children:[e.jsxs("div",{className:"flex flex-row items-center gap-x-[10px] mt-1",children:[e.jsx("span",{className:"p-[5px_5px] rounded-full bg-[#FF1111]"}),e.jsx(Be,{className:"font-semibold !text-[16.33px]",label:o.count_profile?o.count_profile>1?o.count_profile+" profiles":o.count_profile+" profile":"0 profile"})]}),e.jsxs("div",{className:"flex flex-row items-center gap-x-[10px] mt-1",children:[e.jsx("span",{className:"p-[5px_5px] rounded-full bg-[#FF1111]"}),e.jsx(Be,{className:"font-semibold !text-[16.33px]",label:o.count_folder?o.count_folder>1?o.count_folder+" folders":o.count_folder+" folder":"0 folder"})]})]}),e.jsx("div",{className:"flex flex-col gap-y-[5px] translate-y-[-8px]",children:e.jsxs("span",{children:[o.newest_share_diff," ( ",o.newest_share_at," )"]})})]})]}),children:e.jsx(Oo,{owner_uuid:o.owner_uuid,onRow:t,toggleModal:s,filter:a,setFilter:n})}],accordion:!0,expandIconPosition:"end",bordered:!1,ghost:!1},m)):e.jsx("div",{className:"my-[3rem]",children:e.jsx(ht,{image:ht.PRESENTED_IMAGE_SIMPLE})})})})},Ro=({toggleModal:t,handleDelete:s,tab:r,setTab:a,handleChangeFingerPrint:n,columns:l,selectedRowKeys:o,setSelectedRowKeys:m,dataFilter:i,setFilterState:d,folder_uuid:p,setFolderUuid:u,profiles:f,dataProfileFolder:x,handleExportData:v,handleRefuseShare:b,defaultActiveKey:S,setDefaultActiveKey:P,setArrUuidProfilesRun:h})=>{Se();const{message:D}=je.useApp(),I=window.innerWidth,O=window.innerHeight,E=Ce(),W=c.useRef(new Set),{isLocalActiveTab:w}=se(g=>g.display),[F,y]=c.useState(!1),T=c.useRef(null),H=c.useRef(null),N=c.useContext(Fe),[L,A]=c.useState((f==null?void 0:f.data.data.content)||[]),M={selectedRowKeys:o,onChange:g=>{m(g)}};c.useEffect(()=>{N==null||N.setRightMenu({record:null,visible:!1,x:0,y:0})},[f]);const[Y,le]=c.useState(null),[X,te]=c.useState(1),[ce,we]=c.useState(!1),Ne=c.useCallback((g,ae,Q)=>({onClick:()=>{},onContextMenu:K=>{var z;if(!Oe.isEmpty(o)||Q!=null&&Q.selectedRowKeys&&!Oe.isEmpty(Q==null?void 0:Q.selectedRowKeys))return;K.preventDefault();const be=document.getElementById("rightMenu");if(be){let re=be.offsetWidth,oe=be.offsetHeight,de=((z=document.querySelector(".ant-layout-sider.ant-layout-sider-light"))==null?void 0:z.clientWidth)??240;var ie=K.target;let G=ie.offsetTop;switch(g.shares_role?g.shares_role=="admin"?re=170:re=160:re=210,oe==0&&!g.shares_role&&!g.folder_id||!g.shares_role&&!g.folder_id?oe=472:oe==0&&!g.shares_role&&g.folder_id||!g.shares_role&&g.folder_id?oe=515:oe==0&&g.shares_role=="admin"||g.shares_role=="admin"?oe=257:oe=171,K.button){case 0:te(X+1),X>=2&&te(1);const ye=ie.getBoundingClientRect();let ge=parseInt(ye.left.toString())-de-re+252;for(;ie!==null&&!ie.classList.contains("ant-table-cell");)ie=ie.parentElement;if(ie!==null&&ie.classList.contains("ant-table-cell")&&(G=parseInt(ye.top.toString())+10),re&&ge-de+re>I-de&&(ge=ge-re-de+255),oe&&G+oe>O-110&&G>oe&&(G=parseInt(ye.top.toString())-oe+10),K.preventDefault(),X===2&&Y&&parseInt(Y.toString())===parseInt(G.toString())){N==null||N.setRightMenu({...N==null?void 0:N.rightMenu,record:g,visible:!1,x:0,y:0});return}N!=null&&N.rightMenu.visible||document.addEventListener("click",function qe(){we(!1),te(1),N==null||N.setRightMenu({...N==null?void 0:N.rightMenu,record:g,visible:!1,x:0,y:0}),document.removeEventListener("click",qe)}),le(G),N==null||N.setRightMenu({visible:!0,x:ge,y:G,record:g});break;case 2:we(!0),K.preventDefault();let ue=K.clientX-de+245;for(;ie!==null&&!ie.classList.contains("ant-table-cell");)ie=ie.parentElement;ie!==null&&ie.classList.contains("ant-table-cell")&&(G=K.clientY),re&&K.clientX-de+re>I-de&&(ue=K.clientX-re-de+255),oe&&K.clientY+oe>O-110&&G>oe&&(G=K.clientY-oe),N!=null&&N.rightMenu.visible||document.addEventListener("click",function qe(){we(!1),N==null||N.setRightMenu({...N==null?void 0:N.rightMenu,record:g,visible:!1,x:0,y:0}),document.removeEventListener("click",qe)}),N==null||N.setRightMenu({visible:!0,x:ue,y:G,record:g});break}}},onMouseDown:K=>{y(!0)},onMouseOver:()=>{F&&!o.includes(g.uuid)&&(Q!=null&&Q.setSelectedRowKeys&&(Q!=null&&Q.selectedRowKeys)?Q.setSelectedRowKeys([...Q.selectedRowKeys,g.uuid]):m([...o,g.uuid]))}}),[N==null?void 0:N.rightMenu,F,o]);c.useEffect(()=>{const g=()=>{y(!1)};return window.document.addEventListener("mouseup",g),()=>window.document.removeEventListener("mouseup",g)},[]);const Ee=()=>{if(w)switch(S){case"local":P("local");break;case"folder_local":P("folder_local");break;default:P("local");break}else switch(S){case"cloud":P("cloud");break;case"folder":P("folder");break;case"folder_share":P("folder_share");break;case"share_with_me":P("share_with_me");break;default:P("cloud");break}},ke=async(g,ae)=>{await $a(w,g,{option:ae}).then(()=>{D.success("Success."),Ee(),d(K=>({...K,dataFilter:{...K.dataFilter,page:1}})),E.invalidateQueries(_.listProfile,{refetchInactive:!0}),E.invalidateQueries(_.PROFILE_CLOUD,{refetchInactive:!0}),E.invalidateQueries(_.PROFILE_LOCAL,{refetchInactive:!0}),E.invalidateQueries(_.FOLDER_LOCAL,{refetchInactive:!0}),E.invalidateQueries(_.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),E.invalidateQueries(_.FOLDER_OWNER,{refetchInactive:!0}),E.invalidateQueries(_.FOLDER_SHARE,{refetchInactive:!0}),E.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0})}).catch(K=>{const be=K.response;D.error(be.data.title)})},xe=g=>{let ae="";if(g){let Q=[];g.type&&Q.push(g.type),g.ip&&Q.push(g.ip),g.port&&Q.push(g.port),g.user&&Q.push(g.user),g.pass&&Q.push(g.pass),ae=Q.join("|")}return ae},R=g=>{window.api.goToFolder(g)},J=se(g=>g.profileStateSlice.profileStatus);c.useEffect(()=>{window.api.getBrowserRunnings().then(g=>{const ae=Array.from(g.keys());let Q=[];S==="cloud"?Q=ae.filter(K=>!K.includes("local")):S==="local"&&(Q=ae.filter(K=>K.includes("local"))),h(Q)})},[L,J]),c.useLayoutEffect(()=>{window.api.getBrowserRunnings().then(g=>{W.current=new Set(g.keys()),A((f==null?void 0:f.data.data.content.map(ae=>({...ae,page:i.page,limit:i.limit,runningStatus:{content:"",isDisabled:!1,toReady:!W.current.has(ae.uuid),type:W.current.has(ae.uuid)?"success":"warning"}})))||[])})},[f]),se(g=>g.display);const[U,Z]=c.useState(!0),[fe,V]=c.useState(!1),[k,me]=c.useState(!1);c.useEffect(()=>{i.mode==="local"||i.mode==="cloud"?(Z(!0),a("profiles"),V(!1),me(!1)):i.mode==="share_with_me"?(Z(!1),a("profiles"),V(!0),me(!1)):i.mode==="folder"||i.mode==="folder_local"?(Z(!1),a("folder"),V(!1),me(!0)):(Z(!0),a("profiles"),V(!1),me(!1))},[i.mode]);const j=(g,ae,Q,K)=>{const{field:be,order:ie}=Q;switch(be){case"name":d(ie==="ascend"?z=>({...z,dataFilter:{...z.dataFilter,orderName:1}}):ie==="descend"?z=>({...z,dataFilter:{...z.dataFilter,orderName:2}}):z=>({...z,dataFilter:{...z.dataFilter,orderName:null}}));break;case"last_open":d(ie==="ascend"?z=>({...z,dataFilter:{...z.dataFilter,orderLastOpen:1}}):ie==="descend"?z=>({...z,dataFilter:{...z.dataFilter,orderLastOpen:2}}):z=>({...z,dataFilter:{...z.dataFilter,orderLastOpen:null}}));break}};return e.jsxs("div",{ref:H,children:[e.jsx("div",{className:"rounded-[5px] w-full",style:{display:`${U?"block":"none"}`},children:e.jsx(We,{rowSelection:M,className:`${uo["header-fixed"]} w-full`,columns:l,dataSource:L,rowKey:"uuid",rowClassName:(g,ae)=>ae===3?"scroll-row":"",onRow:Ne,onChange:j,pagination:!1,ref:T,size:"small"})}),e.jsx("div",{style:{display:`${fe?"block":"none"}`},children:e.jsx(Lo,{onRow:Ne,toggleModal:t})}),e.jsx("div",{style:{display:`${k?"block":"none"}`},children:e.jsx(co,{dataFolder:x,onRow:Ne,columns:l,folder_uuid:p,setFolderUuid:u,handleDelete:s,toggleModal:t,handleChangeFingerPrint:n,handleExportData:v,divTableRef:H})}),e.jsx(to,{handleRefuseShare:b,dataFilter:i,handleDelete:s,handleCopyProxy:xe,handleDuplicateProfile:ke,handleChangeFingerPrint:n,handleGoToFolder:R,toggleModal:t,tableRef:T,...N==null?void 0:N.rightMenu})]})},$o=c.memo(Ro);function Ao({dataFilter:t,setFilterState:s,changePage:r,changeSize:a,filterFolderState:n,setFilterFolderState:l}){const{t:o}=ne(),m=(...b)=>{const[S,P]=b;r(S),a(p),s(h=>({...h,dataFilter:{...h.dataFilter,page:S,limit:P}}))},{data:i}=he({queryFn:()=>St(t),queryKey:[_.listProfile,t]}),{data:d}=he({queryFn:()=>Ze(n.dataFilter),queryKey:[_.FOLDER_OWNER,n.dataFilter]}),p=Number(t.limit),u=Number(t.page),f=Number(n.dataFilter.limit),x=Number(n.dataFilter.page),v=(...b)=>{const[S,P]=b;r(S),a(p),l(h=>({...h,dataFilter:{...h.dataFilter,page:S,limit:P}}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{display:`${t.mode==="cloud"||t.mode==="local"?"block":"none"}`},children:e.jsxs("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:[e.jsx("div",{className:"",children:e.jsx("span",{className:"!text-[16px]",children:`${((i==null?void 0:i.data.meta.total)||0)>1?o("Profiles"):o("Profile")}: ${(i==null?void 0:i.data.meta.total)||0}`})}),e.jsx(nt,{showTitle:!1,showQuickJumper:!0,pageSize:isNaN(p)?10:p,locale:{page:o("Page"),items_per_page:o("page"),jump_to:o("Go to")},current:u,pageSizeOptions:[10,20,50,100,200],total:(i==null?void 0:i.data.meta.total)||0,onChange:m,showSizeChanger:!0})]})}),e.jsx("div",{style:{display:`${t.mode==="folder"||t.mode==="folder_local"?"block":"none"}`},children:e.jsxs("div",{className:"w-full h-[64px] p-4 gap-x-2 flex items-center justify-end",children:[e.jsx("div",{className:"",children:e.jsx(Be,{className:"!text-[16px]",label:`${((d==null?void 0:d.data.meta.total)||0)>1?o("Folders"):o("Folder")}: ${(d==null?void 0:d.data.meta.total)||0}`})}),e.jsx(nt,{showTitle:!1,showQuickJumper:!0,pageSize:isNaN(f)?5:f,current:x,pageSizeOptions:[5,10,15,50],total:d==null?void 0:d.data.meta.total,onChange:v,showSizeChanger:!0,locale:{page:o("Page"),items_per_page:o("page"),jump_to:o("Go to")}})]})})]})}const ca=c.createContext({handleAddProfile:async t=>{}});function Do({toggleModal:t,data:s,children:r}){const{message:a}=je.useApp(),n=Ce(),{isLocalActiveTab:l}=se(d=>d.display),o=async d=>{const p={uuid_browser:typeof s=="string"?[s]:s};m({isLocal:l??!1,uuid_folder:d.uuid,body:p})},{mutate:m}=Ve(dn,{onError:d=>{a.error(d.response.data.title)},onSuccess:({data:d})=>{a.success("Success"),n.invalidateQueries(_.folders,{refetchInactive:!0}),n.invalidateQueries(_.allFolders,{refetchInactive:!0}),n.invalidateQueries(_.listProfile,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_CLOUD,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(_.GET_PROFILE_BY_FOLDER),n.invalidateQueries(_.FOLDER_LOCAL,{refetchInactive:!0}),n.invalidateQueries(_.userDetail),t(!1)}}),i={handleAddProfile:o};return e.jsx(ca.Provider,{value:i,children:r})}function Ho({item:t}){const{handleAddProfile:s}=c.useContext(ca),[r]=ne(),{token:a}=Le.useToken();return e.jsx(ee,{className:`m-auto bg-[${a.bgBlue}]`,type:"primary",onClick:()=>s(t),label:r("Add")})}const Bo=({value:t})=>{const{t:s}=ne();return e.jsx("span",{children:t+` ${Number(t)?s("profiles"):s("profile")}`})},Mo=[{title:e.jsx(_e,{title:"No.STT"}),align:"center",render:(t,s,r)=>{const a=s.page?s.page-1:0,n=s.limit||0;return a*n+r+1},width:50},{title:e.jsx(_e,{title:"Name"}),dataIndex:"name",align:"center",render:t=>e.jsxs("div",{className:"flex items-center gap-1 w-[100]",children:[e.jsx(Aa,{}),e.jsx("span",{className:"whitespace-nowrap overflow-hidden",children:t.length>40?`${t.substring(0,40)}...`:t})]}),width:300},{title:e.jsx(_e,{title:"Profiles"}),align:"center",dataIndex:"total_browser",width:"120px",render:t=>e.jsx(Bo,{value:t})},{title:e.jsx(_e,{title:"Action"}),fixed:"right",align:"center",width:120,render:t=>e.jsx(Ho,{item:t})}],Vo=({columns:t,dataFilter:s})=>{const{isLocalActiveTab:r}=se(d=>d.display),{data:a,isFetching:n}=he({queryFn:()=>Ze(s,r?"local":""),queryKey:[_.folders,s,r]}),l=c.useRef(null),o=Ce(),[m,i]=c.useState((a==null?void 0:a.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[]);return c.useEffect(()=>{i((a==null?void 0:a.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[])},[a]),c.useEffect(()=>{o.invalidateQueries([_.folders])},[]),e.jsx(e.Fragment,{children:e.jsx(We,{className:"h-[350px] overflow-auto",columns:t,dataSource:m,rowKey:"uuid",loading:{spinning:n},bordered:!0,size:"small",ref:l,pagination:!1})})},qo=c.memo(Vo);function zo({dataFilter:t,setDataFilter:s}){const r=Se(),a=(...i)=>{const[d,p]=i;s(u=>({...u,dataFilter:{...u.dataFilter,page:d,limit:p}}))},{isLocalActiveTab:n}=se(i=>i.display),{data:l}=he({queryFn:()=>Ze(t.dataFilter,n?"local":""),queryKey:[_.folders,t.dataFilter,n]}),o=Number(t.dataFilter.limit),m=Number(t.dataFilter.page);return e.jsx("div",{className:"w-[calc(100%)] pt-[10px]  text-end border-solid border-0 border-t-2",style:{backgroundColor:r.backgroundLight,borderColor:r.backgroundNormal},children:e.jsx(nt,{pageSize:o,current:m,pageSizeOptions:[10,15,20,50,100],total:(l==null?void 0:l.data.meta.total)||0,onChange:a,showTitle:!1})})}const Qo={page:1,limit:10,search:"",type:"cloud",option:"",id:0};function Wo({modalName:t,modalData:s,openModal:r,toggleModal:a}){let n="Add Profile to Folder";const l=Se(),[o]=ne(),[m]=B.useForm(),{message:i}=je.useApp(),{Title:d,Text:p}=pe,u=Ce(),{token:f}=Le.useToken(),[x,v]=c.useState({dataFilter:Qo}),[b]=c.useState(Mo),{isLocalActiveTab:S}=se(I=>I.display),{isLoading:P,mutate:h}=Ve({mutationFn:async I=>{const{name:O}=I;x.dataFilter.type=S?"local":"cloud",await un(x,{name:O})},onSuccess:()=>{u.invalidateQueries(_.folders),u.invalidateQueries(_.allFolders),i.success("Create folder successfully!"),m.resetFields()},onError:I=>{const O=I.response.data.content||"Folder name is unique!";i.error(O),m.resetFields()}}),D=()=>{a(!1),x.dataFilter.page=1,m.resetFields()};return e.jsx(e.Fragment,{children:n===t&&e.jsx(Do,{data:s,toggleModal:a,children:e.jsx(De,{theme:{components:{Modal:{contentBg:l.backgroundLight,headerBg:l.backgroundLight},Select:{selectorBg:l.backgroundNormal,multipleItemBg:l.backgroundDark}},token:{colorBorder:l.borderLight,colorBgBase:l.backgroundNormal,colorBgContainer:l.backgroundNormal}},children:e.jsxs(He,{title:e.jsx(d,{style:{color:f.bgBlue,fontSize:"20px",marginBottom:"0px"},children:o("Add profile to folder")}),open:r,className:"min-w-[60%] absolute top-[18%] left-0 right-0",onCancel:()=>D(),footer:null,confirmLoading:P,children:[e.jsxs(B,{form:m,layout:"vertical",className:"flex items-end gap-4 mt-4",onFinish:h,children:[e.jsx(B.Item,{name:"name",label:e.jsxs("span",{style:{color:l.textNormal,fontWeight:"600"},children:[o("Add new folder")," "]}),style:{flex:1},className:"font-semibold "+Me["required-label"]+" "+Me["custom-label"]+" "+Me["custom-input-ant"],rules:[{required:!0,message:o("This field is required!")},{max:150,message:o("The folder name may not be greater than 150 characters!")}],children:e.jsx(Ie,{placeholder:o("Folder name")})}),e.jsx(B.Item,{children:e.jsx(ee,{type:"primary",onClick:()=>m.submit,label:o("Create")})})]}),e.jsx(qo,{columns:b,dataFilter:x.dataFilter}),e.jsx(zo,{dataFilter:x,setDataFilter:v})]})})})})}function Uo({modalName:t,modalData:s,openModal:r,toggleModal:a}){let n="Transfer Profile";const l=Se(),[o]=B.useForm(),[m]=ne(),{message:i}=je.useApp(),{Title:d}=pe,p=Ce(),{token:u}=Le.useToken(),{isLoading:f,mutate:x}=Ve({mutationFn:async b=>{const{email:S}=b;return await Da({browsers:typeof s=="string"?[s]:s,recipient:S})},onSuccess:()=>{p.invalidateQueries(_.listProfile,{refetchInactive:!0}),o.resetFields(),a(!1),i.success("Transfer successfully.")},onError:b=>{var S,P,h,D,I,O,E,W;Oe.isEmpty((P=(S=b.response)==null?void 0:S.data)==null?void 0:P.content)?Oe.isEmpty((O=(I=b.response)==null?void 0:I.data)==null?void 0:O.title)?i.error("Transfer profile error."):i.error((W=(E=b.response)==null?void 0:E.data)==null?void 0:W.title):i.error((D=(h=b.response)==null?void 0:h.data)==null?void 0:D.content)}}),v=()=>{a(!1),o.resetFields()};return e.jsx(e.Fragment,{children:n===t&&e.jsx(De,{theme:{components:{Modal:{contentBg:l.backgroundLight,headerBg:l.backgroundLight},Select:{selectorBg:l.backgroundNormal,multipleItemBg:l.backgroundDark}},token:{colorBgContainer:l.backgroundNormal}},children:e.jsx(He,{title:e.jsx(d,{style:{color:u.bgBlue,fontSize:"20px",marginBottom:"0px"},children:m("Transfer profile")}),open:r,className:"min-w-[35%] relative top-[30%] left-0 right-0 bottom-0",onCancel:()=>v(),footer:null,confirmLoading:f,children:e.jsxs(B,{form:o,layout:"vertical",className:"flex items-end gap-4 pt-1",onFinish:x,initialValues:{email:""},children:[e.jsx(B.Item,{name:"email",label:e.jsx("span",{style:{color:l.textNormal,fontWeight:"600"},children:m("Transfer to")}),style:{flex:1},className:"font-semibold "+Me["required-label"]+" "+Me["custom-label"]+" "+Me["custom-input-ant"],rules:[{required:!0,message:m("This field is required")},{max:150,message:m("The email may not be greater than 150 characters!")},{type:"email",message:m("Value is not a valid email")}],children:e.jsx(Ie,{placeholder:"example@mail.com"})}),e.jsx(B.Item,{children:e.jsx(ee,{type:"primary",label:m("Send"),onClick:()=>o.submit()})})]})})})})}const Yo=({columns:t,dataFilter:s,modalData:r})=>{const a=Ce(),{isLocalActiveTab:n}=se(d=>d.display),{data:l,isFetching:o}=he({queryFn:()=>Gs(r,s,n),queryKey:[_.logProxy,r,s]}),[m,i]=c.useState((l==null?void 0:l.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[]);return c.useEffect(()=>{i((l==null?void 0:l.data.data.content.map(d=>({...d,page:s.page,limit:s.limit})))||[])},[l]),c.useEffect(()=>{a.invalidateQueries([_.logProxy,s])},[]),e.jsx(e.Fragment,{children:e.jsx(We,{style:{height:"calc(100vh - 370px)",minHeight:"250px"},columns:t,dataSource:m,rowKey:"id",loading:{spinning:o},size:"small",pagination:!1})})},Xo=c.memo(Yo);function Go({item:t}){const[s]=ne(),{token:r}=Le.useToken(),[a,n]=c.useState(!1);return t.action==="remove"?e.jsx(e.Fragment,{}):e.jsxs("div",{children:[e.jsx("pre",{className:'text-left font-["Poppins",sans-serif]',children:a?t.data:t.data.substring(0,100)}),e.jsx(sr,{className:"",onClick:()=>n(!a),children:e.jsx(Be,{style:{color:r.textPrimary},label:s(a?"Hide":"Show more")})})]})}const Jo=[{title:"No",width:60,render:(t,s,r)=>{const a=s.page?s.page-1:0,n=s.limit||0;return a*n+r+1}},{title:"Ip",width:150,dataIndex:"causer_ip",align:"center"},{title:"Action",width:110,dataIndex:"action",align:"center"},{title:"Content",align:"center",width:"40%",render:(t,s)=>e.jsx(Go,{item:s})},{title:"Last open",width:150,align:"center",dataIndex:"created_at_diff"}];function Zo({dataFilter:t,setDataFilter:s,modalData:r}){const{token:{colorBgBase:a,colorBorder:n}}=Le.useToken(),l=(...p)=>{const[u,f]=p;s(x=>({...x,dataFilter:{...x.dataFilter,page:u,limit:f}}))},{isLocalActiveTab:o}=se(p=>p.display),{data:m}=he({queryFn:()=>Gs(r,t.dataFilter,o),queryKey:[_.logProxy,t.dataFilter,r]}),i=Number(t.dataFilter.limit),d=Number(t.dataFilter.page);return e.jsx("div",{className:"w-full max-w-[calc(100%-32px)] px-4 pt-4 flex justify-end border-solid border-0 border-t-4",style:{backgroundColor:a,borderColor:n},children:e.jsx(nt,{pageSize:i,current:d,pageSizeOptions:[10,15,20,50,100],total:(m==null?void 0:m.data.meta.total)||0,onChange:l})})}const Ko={page:1,limit:10};function ei({modalName:t,modalData:s,openModal:r,toggleModal:a}){let n="Log proxy history";const{token:l}=Le.useToken(),{Title:o,Text:m}=pe,[i,d]=c.useState({dataFilter:Ko}),[p,u]=c.useState(Jo),{t:f}=ne();return e.jsx(e.Fragment,{children:n===t&&e.jsx(He,{title:e.jsx(o,{style:{color:l.bgBlue,fontSize:"20px",marginBottom:"5px"},children:f(t)}),open:r,className:"min-w-[60%]",onCancel:()=>a(!1),footer:null,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"w-full overflow-auto",children:e.jsx(Xo,{modalData:s,columns:p,dataFilter:i.dataFilter})}),e.jsx(Zo,{modalData:s,dataFilter:i,setDataFilter:d})]})})})}function ti(t){return Ke({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}},{tag:"line",attr:{x1:"12",y1:"11",x2:"12",y2:"17"}},{tag:"line",attr:{x1:"9",y1:"14",x2:"15",y2:"14"}}]})(t)}const si=[{title:"Name",dataIndex:"name",align:"center",render:t=>t.length>30?t.slice(0,20)+"...":t},{title:"Value",align:"center",dataIndex:"value",render:t=>t.length>30?t.slice(0,20)+"...":t},{title:"Expires",align:"center",dataIndex:"expirationDate"},{title:"Domain",align:"center",dataIndex:"domain"}],ai=({columns:t,uuid:s})=>{const{data:r,isFetching:a}=he({queryFn:()=>Br(s).then(n=>JSON.parse(n==null?void 0:n.data.content.cookie)),queryKey:[_.cookies,s],refetchOnMount:!0});return e.jsx(e.Fragment,{children:e.jsx(We,{className:"h-[350px] overflow-scroll",rootClassName:" overflow-scroll max-h-[60vh] overflow",columns:t,dataSource:r,rowKey:n=>JSON.stringify(n),pagination:!1,size:"small",loading:{spinning:a}})})},ri=c.memo(ai);function ni({modalName:t,modalData:s,openModal:r,toggleModal:a}){const{t:n}=ne();let l="Cookies manager";const{Title:o}=pe,{message:m}=je.useApp(),i=Ce(),{token:d}=Le.useToken(),p=async()=>{await Mr(s),i.invalidateQueries(_.cookies),m.success(n("Cleared cookies"))},u=async v=>{const P={data:(await qs([s],v)).data.content,fileName:v==1?`cookie-${s}.json`:`cookie-${s}.txt`};v==1?window.api.exportFileJson(P).then(h=>{h&&f(h)}):window.api.exportFile(P).then(h=>{h&&f(h)})},f=v=>{const b=v.substring(0,v.lastIndexOf("\\"));console.log(b),m.success({content:e.jsxs("span",{children:["Export Success ",e.jsx("span",{className:"font-bold ",children:"Open now"})]}),onClick:()=>{window.api.openFolder(b)},style:{cursor:"pointer"}})},x=[{label:"Json",key:1},{label:"Key value",key:2}];return e.jsx(e.Fragment,{children:l==t&&e.jsx(e.Fragment,{children:e.jsxs(He,{title:e.jsx(o,{style:{color:d.bgBlue,fontSize:"20px",marginBottom:"0px"},children:n(t)}),open:r,className:"min-w-[55%] absolute top-[20%] left-0 right-0",onCancel:()=>a(!1),footer:null,children:[e.jsxs(yn,{gap:"small",wrap:"wrap",className:"mb-3 mt-4",children:[e.jsx(ee,{icon:e.jsx(zl,{className:" text-lg"}),type:"error",label:"Clear",onClick:()=>p()}),e.jsx(lt,{content:e.jsx($e,{className:"min-w-[100px]",dataSource:x,renderItem:v=>e.jsx($e.Item,{className:"cursor-pointer !px-1 !py-1 hover:font-bold",onClick:()=>u(v.key),children:v.label},v.key)}),trigger:"click",placement:"right",children:e.jsx(ee,{icon:e.jsx(ti,{className:" text-lg"}),type:"primary",label:"Export"})})]}),e.jsx(ri,{uuid:s,columns:si})]})})})}const li=[{title:e.jsx(_e,{title:"No.STT"}),render:(t,s,r)=>r+1,width:70,align:"center"},{title:e.jsx(_e,{title:"Name"}),dataIndex:"name"},{title:e.jsx(_e,{title:"Proxy"}),dataIndex:"proxy"}];function oi({onClick:t}){const{t:s}=ne();return e.jsx(ee,{label:s("Delete"),type:"error",classStyle:"w-fit",onClick:t})}const ii={"header-fixed":"_header-fixed_8q965_1"};function ci({profileProxy:t,setProfileProxy:s,proxyChoose:r,proxyInput:a,acceptMode:n,setProxyChoose:l}){const{t:o}=ne(),m=i=>{const d=Oe.cloneDeep(r);d.splice(i,1),l(d)};return c.useEffect(()=>{if(n==="Proxy")if(a!==""){const i=a.split(`
`);s(d=>d.map((p,u)=>{if(i[u]||i.length===1){const f=(i[u]||i[0]).includes("|")?"|":":",[x,v,b,S,P]=(i[u]||i[0]).split(f);p.proxy=`${[x,v,b,S,P].filter(h=>!!h).join("|")}`}return p}))}else s(i=>i.map(d=>(d.proxy!==""&&typeof d.proxy=="object"&&(d.proxy=`${[d.proxy.type,d.proxy.ip,d.proxy.port,d.proxy.user,d.proxy.pass].filter(p=>!!p).join("|")}`),d)));else console.log({proxyChoose:r}),s(i=>i.map((d,p)=>{if(r[p]||r.length===1){const u=r[p]||r[0],f={type:u.type,ip:u.ip,port:u.port,user:u.user,pass:u.pass};u.proxy_config&&(f.type=u.proxy_config.proxy_type,f.ip=u.proxy_config.proxy_config.ip,f.port=u.proxy_config.proxy_config.port,delete f.user,delete f.pass),d.proxy=`${[f.type,f.ip,f.port,f.user,f.pass].filter(x=>!!x).join("|")}`}else d.proxy="";return d}))},[r,a,n]),e.jsx(We,{columns:[...li,{title:o("Action"),width:94,align:"center",render:(i,d,p)=>e.jsx(oi,{onClick:()=>{m(p),s(u=>u.filter(f=>f.uuid!==d.uuid))}})}],dataSource:t,className:`${ii["header-fixed"]} w-full`,rowKey:"uuid",size:"small",pagination:!1,scroll:{y:200}},1)}const di=({idx:t})=>{const s=c.useContext(da),r=(s==null?void 0:s.dataFilter.page)-1;return e.jsx(e.Fragment,{children:r*(s==null?void 0:s.dataFilter.limit)+t+1})},ui=[{title:e.jsx(_e,{title:"No.STT"}),render:(t,s,r)=>e.jsx(di,{idx:r}),width:40,align:"center"},{title:e.jsx(_e,{title:"Proxy"}),render:(t,s)=>e.jsx(Zr,{data:s}),align:"center"},{title:e.jsx(_e,{title:"Info"}),render:(t,s)=>e.jsx(Kr,{data:s}),align:"center"},{title:e.jsx(_e,{title:"Status"}),render:(t,s)=>e.jsx(en,{data:s}),align:"center"}];function pi({onClick:t}){const{t:s}=ne();return e.jsx(ee,{label:s("Choose"),type:"primary",classStyle:"w-fit",onClick:t})}const da=c.createContext(void 0),mi=({onChooseProxy:t})=>{const{isLocalActiveTab:s}=se(i=>i.display),[r,a]=c.useState({page:1,limit:10}),{data:n,isFetching:l}=he({queryFn:()=>hn({...r,is_local:!!s}),queryKey:["list-proxy-modal",r,s]}),{t:o}=ne(),m={dataFilter:r};return e.jsx(da.Provider,{value:m,children:e.jsx(We,{className:"mt-4",size:"small",rowKey:"uuid",loading:l,columns:[...ui,{title:o("Action"),render:(i,d)=>e.jsx(pi,{data:d,onClick:()=>t(d)}),width:100,align:"center"}],dataSource:(n==null?void 0:n.data.data.content)||[],scroll:{y:240},pagination:{pageSize:r.limit,current:r.page,onChange(i,d){a({page:i,limit:d})},total:(n==null?void 0:n.data.meta.total)||0}})})},hi=["HTTP","SSH","SOCKS4","SOCKS5"],fi=t=>hi.includes(t.toLocaleUpperCase());function xi({modalName:t,openModal:s,toggleModal:r,profiles:a,selectedRowKeys:n,modalData:l}){const{message:o}=je.useApp(),m=Se(),[i,d]=c.useState(""),[p,u]=c.useState(a.filter(y=>n.includes(y.uuid))),[f,x]=c.useState("Proxy"),[v,b]=c.useState("Proxy"),[S,P]=c.useState([]),{Title:h}=pe,D=Ce(),{isLocalActiveTab:I}=se(y=>y.display),{t:O}=ne(),{data:E}=he({queryFn:()=>{if(l!=null&&l.folder_id)return Ds(I,l==null?void 0:l.folder_id,l==null?void 0:l.filter)},queryKey:[_.GET_PROFILE_BY_FOLDER,l==null?void 0:l.folder_id,l==null?void 0:l.filter]}),{data:W}=he({queryFn:()=>{if(l!=null&&l.owner_uuid)return Xs(l==null?void 0:l.owner_uuid,l==null?void 0:l.filter)},queryKey:[_.GET_LIST_PROFILE_SHARE,l==null?void 0:l.owner_uuid,l==null?void 0:l.filter]});c.useEffect(()=>{var y,T;l!=null&&l.folder_id&&E?u(((T=(y=E==null?void 0:E.data)==null?void 0:y.data)==null?void 0:T.content.filter(H=>n.includes(H.uuid)))||[]):l!=null&&l.owner_uuid&&W?u(W.data.content.content.filter(H=>n.includes(H.uuid))||[]):u(a.filter(H=>n.includes(H.uuid)))},[E,W]);const w=y=>{b("My Proxy"),S.length<n.length&&P([...S,y])},F=async()=>{const y=[];let T=!1,H="";if(p.forEach((N,L)=>{if(N.uuid.includes("local-")&&(T=!0),H)return;const A={uuid:N.uuid};if(v==="Proxy"){const q=i.split(`
`);if(q.length===1||q[L]){const M=(q[L]||q[0]).includes("|")?"|":":",[Y,le,X,te,ce]=(q[L]||q[0]).split(M);Y&&le&&X&&fi(Y)?(A.proxy={type:Y.toUpperCase(),ip:le,port:X,user:te,pass:ce},y.push(A)):H="Proxy invalid"}}else(S.length===1||S[L])&&(A.proxy=Oe.cloneDeep(S[L]||S[0]),y.push(A))}),H)return o.error(H);if(!Oe.isEmpty(y))try{await fn(y,T),o.success("Change proxy success"),await Promise.all([D.invalidateQueries(_.listProfile),D.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),D.invalidateQueries("list-proxy-modal",{refetchInactive:!0}),D.invalidateQueries(_.listProxy)]),r(!1)}catch(N){console.log("Change proxy error => ",N),o.error("Change proxy error")}};return e.jsx(De,{theme:{components:{Modal:{contentBg:m.backgroundLight,headerBg:m.backgroundLight},Select:{selectorBg:m.backgroundNormal,multipleItemBg:m.backgroundDark},Radio:{buttonSolidCheckedBg:"#2263B3",buttonSolidCheckedHoverBg:"#2263B3",buttonColor:"#C0C0C0"},Typography:{colorTextHeading:m.titlePrimary}},token:{colorBorder:m.borderLight,colorBgBase:m.backgroundNormal,colorBgContainer:m.backgroundNormal}},children:e.jsxs(He,{title:e.jsx(h,{style:{color:m.textActiveNormal,marginBottom:"20px",marginTop:"1px"},level:4,children:O(t||"")}),open:s,onCancel:()=>r(!1),className:"min-w-[60%]",footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(ee,{type:"primary",solid:!0,onClick:F,label:O("Submit"),classStyle:"w-fit"})}),children:[e.jsx(ci,{profileProxy:p,setProfileProxy:u,acceptMode:v,proxyChoose:S,proxyInput:i,setProxyChoose:P}),e.jsx(jn,{options:[{label:O("Proxy"),value:"Proxy"},{label:O("My proxy"),value:"My Proxy"}],value:f,onChange:y=>x(y),size:"middle",className:"mt-4"}),f==="Proxy"?e.jsx(Wr,{rows:14,allowClear:!0,className:"shadow-[0_-3px_4px_0px_rgb(0,0,0,0.2),0_2px_4px_-2px_rgb(0,0,0,0.1)] border-none mt-4",placeholder:`Ex: ssh|192.168.1.1|443| ${O("username")}| ${O("password")}`,value:i,onChange:y=>{P([]),d(y.target.value),b("Proxy")}}):e.jsx(mi,{onChooseProxy:w})]})})}const gi=()=>{var d,p,u;const t=Se(),{t:s}=ne(),{message:r}=je.useApp(),a=Ce(),[n]=B.useForm(),{isLocalActiveTab:l}=se(f=>f.display),o=c.useContext(Fe),{isLoading:m,mutate:i}=Ve({mutationFn:({note:f})=>{var x,v;return Ha(l,{note:f,profile_uuid:(v=(x=o==null?void 0:o.dataNote)==null?void 0:x.data)==null?void 0:v.uuid})},onSuccess:()=>{r.success("Note updated successfully!"),o==null||o.setDataNote({isOpen:!1,data:null}),a.invalidateQueries(_.listProfile),a.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0})},onError:f=>{const x=f.response.data;x.title&&x.content&&x.content.length>0&&x.content.forEach(v=>{r.error(v)}),x.title&&x.content&&x.content.length==0&&r.error(x.title)}});return c.useEffect(()=>{var f,x;if((f=o==null?void 0:o.dataNote)!=null&&f.isOpen){const v=(x=o==null?void 0:o.dataNote)==null?void 0:x.data.note;n.setFieldValue("note",v)}o==null||o.setRightMenu({record:null,visible:!1,x:0,y:0})},[(d=o==null?void 0:o.dataNote)==null?void 0:d.isOpen]),e.jsx("div",{children:e.jsx(De,{theme:{components:{Modal:{contentBg:t.backgroundLight,headerBg:t.backgroundLight},Select:{selectorBg:t.backgroundNormal,multipleItemBg:t.backgroundDark}},token:{colorBgContainer:t.backgroundNormal}},children:e.jsx(He,{confirmLoading:m,open:o==null?void 0:o.dataNote.isOpen,footer:null,centered:!0,onCancel:()=>o==null?void 0:o.setDataNote({isOpen:!1,data:null}),children:e.jsxs(B,{layout:"vertical",form:n,onFinish:i,initialValues:{note:(u=(p=o==null?void 0:o.dataNote)==null?void 0:p.data)==null?void 0:u.note},children:[e.jsx(B.Item,{name:"note",label:e.jsx("span",{style:{color:t.titlePrimary,fontWeight:"600",fontSize:"20px"},children:s("Note")}),children:e.jsx(Ie.TextArea,{rows:6})}),e.jsx("div",{className:"flex justify-end gap-x-[10px]",children:e.jsx(B.Item,{children:e.jsx(ee,{onClick:()=>n.submit(),type:"primary",solid:!0,label:s("Save")})})})]})})})})},Ps=Oe.sortBy(Oe.uniqBy(tn,"value"),[t=>t.label]);function bi(){var Ee,ke,xe,R,J,U,Z,fe,V,k,me;const t=c.useRef(null),s=Se(),[r]=B.useForm(),[a]=ne(),n=B.useWatch("type",r),l=B.useWatch("country",r),o=B.useWatch("state",r),m=B.useWatch("city",r),i=B.useWatch("formatProxy",r),d=B.useWatch("ipAddress",r),p=B.useWatch("port",r),u=B.useWatch("username",r),f=B.useWatch("pass",r),x=B.useWatch("checker",r),{message:v}=je.useApp(),b=Ce(),S=c.useRef(null),{isLocalActiveTab:P}=se(j=>j.display),h=c.useContext(Fe),D=c.useRef("NEW"),[I,O]=c.useState(((xe=(ke=(Ee=h==null?void 0:h.dataProxy)==null?void 0:Ee.proxy)==null?void 0:ke.proxy_config)==null?void 0:xe.proxy_type)==="hidemium_proxy"?Re.HIDEMIUM_PROXY:((J=(R=h==null?void 0:h.dataProxy)==null?void 0:R.proxy)==null?void 0:J.type)===Ge.Without_proxy||!((U=h==null?void 0:h.dataProxy)!=null&&U.proxy)?Re.WITHOUT_PROXY:Re.YOUR_PROXY),{data:E,isFetching:W}=he({queryFn:()=>kn(),queryKey:[_.getListHidemiumProxy]}),w=c.useMemo(()=>{const j=(E==null?void 0:E.content.filter(g=>!g.is_expired))||[];if(I===Re.HIDEMIUM_PROXY&&!j.some(g=>g.id===n)){const g=E==null?void 0:E.content.find(ae=>ae.id===n);g&&j.push(g)}return j},[E,n,I]);c.useEffect(()=>{y(null),D.current="NEW",S.current=null},[n,l,o,m,i,d,p,u,f,x]),c.useEffect(()=>()=>{l&&r.setFieldValue("state","")},[l]),c.useEffect(()=>{if(i){const j=_n(i||"");j&&r.setFieldsValue(j)}},[i]);const[F,y]=c.useState(null),{data:T}=he({queryFn:xn,queryKey:[_.proxyConfig]}),{data:H}=he({queryFn:()=>Oe.isNumber(n)&&!(T!=null&&T.some(j=>j.id===n))?ms(n):null,queryKey:[_.proxyConfig,n]}),N=c.useMemo(()=>{const j=(T==null?void 0:T.map(g=>({...g,label:g.name,value:g.id})))||[];return H&&!j.some(g=>g.value===(H==null?void 0:H.id))&&j.push({...H,label:H.name,value:H.id}),j},[T,H]),L=c.useMemo(()=>N==null?void 0:N.find(j=>j.id===n),[n,N]),A=c.useMemo(()=>!(Pn.includes(n)||(L==null?void 0:L.type)===ct.api||n===Ge.Without_proxy),[n,L]),q=async j=>{var ae,Q,K,be,ie,z,re,oe,de,G,ye,ge;const g=await r.validateFields().catch(()=>null);if(g)if(j==="CHECK")Y(g);else if(j==="EDIT")if(g.type===Ge.Without_proxy||I===Re.WITHOUT_PROXY){const ue={id:-1,details:It,browser_uuid:(Q=(ae=h==null?void 0:h.dataProxy)==null?void 0:ae.profile)==null?void 0:Q.uuid};le(ue,P)}else if(S.current){const ue={...S.current,id:(be=(K=h==null?void 0:h.dataProxy)==null?void 0:K.proxy)==null?void 0:be.uuid,browser_uuid:(z=(ie=h==null?void 0:h.dataProxy)==null?void 0:ie.profile)==null?void 0:z.uuid,checkBeforeStart:!!g.checkBeforeStart,details:F||It};(oe=(re=S.current)==null?void 0:re.proxy_config)!=null&&oe.proxy_type&&(ue.type=S.current.proxy_config.proxy_type),ue.status=D.current,le(ue,P)}else{const ue={...g,id:(G=(de=h==null?void 0:h.dataProxy)==null?void 0:de.proxy)==null?void 0:G.uuid,ip:g.ipAddress,browser_uuid:(ge=(ye=h==null?void 0:h.dataProxy)==null?void 0:ye.profile)==null?void 0:ge.uuid,details:F||It,user:g.username,info:{country:g.country,state:g.state,city:g.city},status:D.current};L&&(ue.proxy_config_id=L.id,ue.type=L.type),le(ue,P)}else Y({urlcheck:"multibrowser.io"})},{isLoading:M,mutate:Y}=Ve({mutationFn:async j=>{var ae,Q,K,be,ie,z,re,oe,de,G,ye,ge,ue,qe,xt,gt,ts,ss,as,rs,ns,ls,os,is;if(!j.type)return ds.post("check-proxy",{});const g={urlcheck:j.checker,host:j.ipAddress,port:j.port,username:j.username,password:j.pass,typeProxy:j.type};if(Oe.isNumber(j.type)){let C=T.find(et=>et.id===j.type);if(C||(C=E==null?void 0:E.content.find(et=>et.id===Number(j.type))),C||(C=await ms(j.type)),!C)return v.error("Proxy config not found");if((ae=C==null?void 0:C.config)!=null&&ae.user_service||(Q=C==null?void 0:C.config)!=null&&Q.user_format)g.username=(((K=C==null?void 0:C.config)==null?void 0:K.user)||"").replaceAll("{username}",(C==null?void 0:C.config.user_format)||(C==null?void 0:C.config.user_service)),g.password=(((be=C==null?void 0:C.config)==null?void 0:be.pass)||"").replaceAll("{password}",(C==null?void 0:C.config.pass_format)||(C==null?void 0:C.config.pass_service)),g.username=tt(g.username||"",j,(z=(ie=h==null?void 0:h.dataProxy)==null?void 0:ie.profile)==null?void 0:z.uuid),g.password=tt(g.password||"",j,(oe=(re=h==null?void 0:h.dataProxy)==null?void 0:re.profile)==null?void 0:oe.uuid),g.typeProxy=C==null?void 0:C.config.type,g.host=C==null?void 0:C.config.ip,g.port=C==null?void 0:C.config.port;else if(C!=null&&C.user_service||C!=null&&C.user_format)g.username=C==null?void 0:C.user.replaceAll("{username}",(C==null?void 0:C.user_format)||(C==null?void 0:C.user_service)),g.password=C==null?void 0:C.pass.replaceAll("{password}",(C==null?void 0:C.pass_format)||(C==null?void 0:C.pass_service)),g.username=tt(g.username||"",j,(G=(de=h==null?void 0:h.dataProxy)==null?void 0:de.profile)==null?void 0:G.uuid),g.password=tt(g.password||"",j,(ge=(ye=h==null?void 0:h.dataProxy)==null?void 0:ye.profile)==null?void 0:ge.uuid),g.typeProxy=C==null?void 0:C.type,g.host=C==null?void 0:C.ip,g.port=C==null?void 0:C.port;else if(C&&C.type===ct.rotation)g.host=C.ip||(C==null?void 0:C.config.ip),g.port=C.port||(C==null?void 0:C.config.port),g.typeProxy=((ue=C==null?void 0:C.config)==null?void 0:ue.type)||(C==null?void 0:C.type),g.username=tt(C.user||(C==null?void 0:C.config.user),j,(xt=(qe=h==null?void 0:h.dataProxy)==null?void 0:qe.profile)==null?void 0:xt.uuid),g.password=tt(C.pass||(C==null?void 0:C.config.pass),j,(ts=(gt=h==null?void 0:h.dataProxy)==null?void 0:gt.profile)==null?void 0:ts.uuid);else if(C&&C.type===ct.api)try{const et={profile_uuid:(as=(ss=h==null?void 0:h.dataProxy)==null?void 0:ss.profile)==null?void 0:as.uuid,host:j==null?void 0:j.ipAddress,port:j==null?void 0:j.port,username:j==null?void 0:j.username,password:j==null?void 0:j.pass,config_host:(rs=C==null?void 0:C.config)==null?void 0:rs.ip,config_port:(ns=C==null?void 0:C.config)==null?void 0:ns.port,config_username:(ls=C==null?void 0:C.config)==null?void 0:ls.user,config_password:(os=C==null?void 0:C.config)==null?void 0:os.pass},{data:ua}=await Ba.get(((is=C==null?void 0:C.config)==null?void 0:is.url)||C.url,{params:et}),ot=En(ua);g.host=ot.ip||j.ipAddress||C.ip,g.port=ot.port||j.port||C.port,g.typeProxy=ot.type||C.type,g.username=ot.user||j.username||C.user,g.password=ot.pass||j.pass||C.pass}catch{return Promise.reject(`Request to ${C.url} error`)}}return!g.host||!g.port?Promise.reject("Proxy invalid"):ds.post("check-proxy",g)},onSuccess:({data:j})=>{D.current="LIVE",y(j),setTimeout(()=>{var g;(g=t.current)==null||g.scrollBy({behavior:"smooth",top:5e3})},50)},onError:()=>{D.current="DIE",v.error("Invalid proxy!"),y(null)}}),le=async(j,g)=>{await gn(j,g).then(ae=>{const Q=ae.data;Q.type=="error"?v.error(Q.title):(b.invalidateQueries({queryKey:_.listProfile}),b.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),b.invalidateQueries(_.logProxy,{refetchInactive:!0}),b.invalidateQueries("list-proxy-modal",{refetchInactive:!0}),h==null||h.setDataProxy({isOpen:!1,proxy:null,profile:null}),v.success("Proxy update success!"))}).catch(()=>{v.error("Proxy update failed!")})},X=c.useMemo(()=>{const j=sn.filter(g=>g.country_code===l);return Oe.sortBy(Oe.uniqBy(j,"value"),[g=>g.label])},[l]),te=j=>{var g,ae,Q,K,be,ie;return((g=j==null?void 0:j.proxy_config)==null?void 0:g.proxy_type)==="hidemium_proxy"?O(Re.HIDEMIUM_PROXY):(j!=null&&j.proxy_config_id||j!=null&&j.type)&&O(Re.YOUR_PROXY),{type:(j==null?void 0:j.proxy_config_id)||(j==null?void 0:j.type)||Ge.Without_proxy,country:((ae=j==null?void 0:j.info)==null?void 0:ae.country)||"",state:((Q=j==null?void 0:j.info)==null?void 0:Q.state)||"",city:((K=j==null?void 0:j.info)==null?void 0:K.city)||"",formatProxy:"",ipAddress:(j==null?void 0:j.ip)||"",port:(j==null?void 0:j.port)||"",username:(j==null?void 0:j.user)||"",pass:(j==null?void 0:j.pass)||"",checker:"multibrowser.io",checkBeforeStart:((ie=(be=h==null?void 0:h.dataProxy)==null?void 0:be.profile)==null?void 0:ie.option.checkBeforeStart)??!0}};c.useEffect(()=>{var j;r.setFieldsValue(te((j=h==null?void 0:h.dataProxy)==null?void 0:j.proxy)),setTimeout(()=>{var g;h!=null&&h.dataProxy.isOpen&&(S.current=(g=h==null?void 0:h.dataProxy)==null?void 0:g.proxy)})},[(Z=h==null?void 0:h.dataProxy)==null?void 0:Z.proxy,(fe=h==null?void 0:h.dataProxy)==null?void 0:fe.profile,T]);const{isLoading:ce,mutate:we}=Ve({mutationFn:bn,onSuccess:({data:j})=>{var ae,Q,K;const g=j.content.pop();g&&(r.setFieldsValue({type:g.proxy_config_id?g.proxy_config_id:g.type,country:((ae=g==null?void 0:g.info)==null?void 0:ae.country)||"",state:((Q=g==null?void 0:g.info)==null?void 0:Q.state)||"",city:((K=g==null?void 0:g.info)==null?void 0:K.city)||"",formatProxy:"",ipAddress:g.ip,port:g.port,username:g.user,pass:g.pass,checker:"multibrowser.io"}),setTimeout(()=>S.current=g))}}),Ne=j=>{r.setFieldsValue(te(j)),y(null),setTimeout(()=>S.current=j)};return c.useEffect(()=>{var j;if((j=h==null?void 0:h.dataProxy)!=null&&j.proxy)return()=>r.resetFields(["ip","port","user","pass","country","state","city"])},[I]),e.jsx(e.Fragment,{children:e.jsx(He,{title:e.jsx("div",{style:{color:s.textActiveNormal},className:"text-[20px]",children:a("Edit proxy")}),onCancel:()=>h==null?void 0:h.setDataProxy({isOpen:!1,proxy:null,profile:null}),open:h==null?void 0:h.dataProxy.isOpen,forceRender:!0,footer:null,centered:!0,children:e.jsxs("div",{className:"h-[620px] overflow-auto",ref:t,children:[e.jsx("div",{children:e.jsx(Sn,{active:I,onChange:j=>{var g;O(j),j===Re.HIDEMIUM_PROXY?r.setFieldValue("type",(g=w[0])==null?void 0:g.id):j===Re.YOUR_PROXY&&r.setFieldValue("type","HTTP")}})}),e.jsx(B,{form:r,layout:"vertical",children:I===Re.YOUR_PROXY?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("Proxy type")}),name:"type",style:{flex:1},rules:[{required:!0,message:"This field is required!"}],children:e.jsx(ve,{showSearch:!0,options:[...Fn,...N]})}),e.jsxs(On,{className:"ml-3",children:[e.jsx(wn,{onSelect:Ne,onlyShowTab:(me=(k=(V=h==null?void 0:h.dataProxy)==null?void 0:V.profile)==null?void 0:k.uuid)!=null&&me.includes("local-")?"LOCAL":"CLOUD",children:e.jsx(ee,{className:"mt-1 flex justify-center items-center",icon:e.jsx(Dr,{}),type:"",label:""})}),e.jsx(ee,{className:"mt-1 flex justify-center items-center",icon:e.jsx(br,{}),label:"",type:"",onClick:()=>we(P),loading:ce})]})]}),!A&&e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("Format Proxy")}),name:"formatProxy",tooltip:{title:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:["1: ",a("type"),"://user:pass@ip:port"]}),e.jsxs("span",{children:["2: ",a("type"),"://ip:port"]}),e.jsx("span",{children:"3: ip:port => http, ip, port"})]})}),placement:"right"},children:e.jsx(Ie,{})}),A?e.jsxs(e.Fragment,{children:[e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("Country")}),name:"country",children:e.jsx(ve,{optionFilterProp:"label",showSearch:!0,options:Ps})}),e.jsx(B.Item,{className:"font-semibold text-[14px]",label:a("state"),name:"State",children:e.jsx(ve,{showSearch:!0,options:X})}),e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("City")}),name:"city",children:e.jsx(Ie,{})})]}):n!==Ge.Without_proxy?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex",children:[e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:"IP Address"}),name:"ipAddress",style:{flex:1},rules:(L==null?void 0:L.type)!==ct.api?[{required:!0,message:"This field is required!"}]:[],children:e.jsx(Ie,{})}),e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:"Port"}),name:"port",style:{flex:1},className:"ml-4",rules:(L==null?void 0:L.type)!==ct.api?[{required:!0,message:"This field is required!"},hs]:[hs],children:e.jsx(Ie,{})})]}),e.jsxs("div",{className:"flex",children:[e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:"Username"}),name:"username",style:{flex:1},children:e.jsx(Ie,{})}),e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:"Password"}),name:"pass",style:{flex:1},className:"ml-4",children:e.jsx(Ie,{})})]})]}):null,e.jsx(e.Fragment,{children:n!==Ge.Without_proxy&&e.jsxs(e.Fragment,{children:[e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:"Check proxy host"}),name:"checker",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(ve,{showSearch:!0,options:fs})}),e.jsxs("div",{className:"flex",children:[e.jsx(B.Item,{name:"checkBeforeStart",valuePropName:"checked",children:e.jsx(ut,{})}),e.jsx("p",{className:"ml-4 mt-1",children:"Check proxy before start profile."})]})]})})]}):I===Re.HIDEMIUM_PROXY?e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(In,{})}),e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("Name")}),name:"type",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(ve,{optionFilterProp:"label",showSearch:!0,options:w.map(j=>({...j,label:j.name+(j.is_expired?`(${a("Expired")})`:""),value:j.id})),loading:W})}),e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("Country")}),name:"country",children:e.jsx(ve,{optionFilterProp:"label",showSearch:!0,options:Ps})}),e.jsx(B.Item,{className:"font-semibold text-[14px]",label:a("State"),name:"state",children:e.jsx(ve,{showSearch:!0,options:X})}),e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("City")}),name:"city",children:e.jsx(Ie,{})}),e.jsx(B.Item,{label:e.jsx(pe.Text,{className:"font-semibold text-[14px]",children:a("Check proxy host")}),name:"checker",rules:[{required:!0,message:"This field is required!"}],children:e.jsx(ve,{showSearch:!0,options:fs})}),e.jsxs("div",{className:"flex",children:[e.jsx(B.Item,{name:"checkBeforeStart",valuePropName:"checked",children:e.jsx(ut,{})}),e.jsx("p",{className:"ml-4 mt-1",children:a("Check proxy before start profile")})]})]}):null}),e.jsx("div",{className:"mt-4",children:n===Ge.Without_proxy||I===Re.WITHOUT_PROXY?e.jsx(ee,{onClick:()=>q("CHECK_LOCAL"),type:"primary",label:a("Check IP local")}):e.jsx(ee,{loading:M,onClick:()=>q("CHECK"),type:"primary",label:a("Check Proxy")})}),e.jsx("div",{children:F?e.jsx(Nn,{data:F}):I===Re.WITHOUT_PROXY?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(ht,{})}):null}),e.jsx("div",{className:"flex justify-end absolute bottom-4 right-4",children:e.jsx(ee,{onClick:()=>q("EDIT"),type:"primary",label:a("Edit Proxy")})})]})})})}const Fe=c.createContext(void 0);function pd(){const t=Se(),{message:s}=je.useApp(),r=Rs(),{state:a}=r,n=Ce(),[l,o]=c.useState(es),[m,i]=c.useState([]),[d,p]=c.useState({visible:!1,x:0,y:0,record:null}),{openModal:u,modalName:f,modalData:x,toggleModal:v,modalKey:b}=vn(),[S,P]=c.useState(a&&a.recordUuid?a.recordUuid:null),[h,D]=c.useState(a&&a.userShare?a.userShare:null),[I,O]=c.useState(!1),[E,W]=c.useState("profiles"),[w,F]=c.useState({isOpenFilter:!1,dataFilter:pt}),[y,T]=c.useState({dataFilter:{page:1,limit:5,option:"hide_empty",search:"",type:"owner"}}),[H,N]=c.useState([""]),{isLocalActiveTab:L}=se(z=>z.display),[A,q]=c.useState(""),[M,Y]=c.useState(1),[le,X]=c.useState(1),[te,ce]=c.useState(L?"local":"cloud"),[we,Ne]=c.useState([]),[Ee,ke]=c.useState([]),[xe,R]=c.useState({isOpen:!1,data:null}),[J,U]=c.useState({isOpen:!1,proxy:null,profile:null}),[Z,fe]=c.useState({}),V=()=>{if(L)switch(te){case"local":ce("local");break;case"folder_local":ce("folder_local");break;default:ce("local");break}else switch(te){case"cloud":ce("cloud");break;case"folder":ce("folder");break;case"share_with_me":ce("share_with_me");break;default:ce("cloud");break}},k=async z=>{await za(L,{uuid_browser:typeof z=="string"?[z]:z}).then(async()=>{i([]),V(),await Cn({profileUuid:typeof z=="string"?[z]:z}),n.invalidateQueries(_.listProfile,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_CLOUD,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_LOCAL,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_LOCAL,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),n.invalidateQueries(_.userDetail),s.success("Success!")}).catch(oe=>{s.error(oe.response.data.title)})},me=async z=>{const{folder_id:re,uuid_browser:oe}=z,G=(await pn(L)).find(ye=>ye.id===re);if(G){const ye=G.uuid;await mn({isLocal:L,uuid_folder:ye,uuid_browser:[oe]}).then(ge=>{s.success(ge==null?void 0:ge.data.title),V(),i([]),n.invalidateQueries(_.listProfile,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_CLOUD,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_LOCAL,{refetchInactive:!0}),n.invalidateQueries(_.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_LOCAL,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),n.invalidateQueries(_.userDetail)}).catch(ge=>{s.error(ge.response.data.title)})}else s.error("Cannot find folder.")},j=(z,re,oe)=>{const G={html:z?"":`<div>You want to delete profile: <span class="text-[#417AFF]">${re.name}</span></div>`};Bt(G).then(async ye=>{if(ye.isConfirmed)switch(oe){case"profile":await k(re.ids);break;case"from-folder":re.folder_id&&await me(re);break}})},g=async(z,re)=>{const{folder_id:oe,tag_id:de,createdDate:G,mode:ye,...ge}={...w.dataFilter};let ue={...ge,browser_uuid:z,limit:z.length};z==="exportAll"&&(ue={browser_uuid:w.dataFilter.browser_uuid??"",name:w.dataFilter.name??"",status:w.dataFilter.status??"",date_range:w.dataFilter.date_range??[null,null],folder_id:w.dataFilter.folder_id??[],tag_id:w.dataFilter.tag_id??[],orderLastOpen:0,orderName:0}),re!==""&&(ue={browser_uuid:w.dataFilter.browser_uuid??"",name:w.dataFilter.name??"",status:w.dataFilter.status??"",date_range:w.dataFilter.date_range??[null,null],folder_id:w.dataFilter.folder_id??[],tag_id:w.dataFilter.tag_id??[],search:re??"",limit:w.dataFilter.browser_uuid?w.dataFilter.browser_uuid.length:10}),delete ue.isRunning;const xt={data:(await Va(L,ue)).data,fileName:"profile.csv"};window.api.exportFile(xt).then(gt=>{gt&&s.success("Export Success")})},ae=async z=>{Bt({title:"Are you sure refuse?"}).then(async de=>{de.isConfirmed&&await cn(z).then(()=>{s.success("Refuse successfully!"),n.invalidateQueries(_.listProfile),n.invalidateQueries(_.PROFILE_SHARE_WITH_ME,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_OWNER,{refetchInactive:!0}),n.invalidateQueries(_.FOLDER_SHARE,{refetchInactive:!0}),n.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0}),n.invalidateQueries(_.GET_LIST_PROFILE_SHARE,{refetchInactive:!0})}).catch(G=>{G.response.data.title&&G.response.data.content.length>0&&s.error(G.response.data.content),G.response.data.title&&G.response.data.content.length==0&&s.error(G.response.data.title)})})};c.useEffect(()=>{i([])},[A,M,le]);const{data:Q}=he({queryFn:()=>St(w.dataFilter),queryKey:[_.listProfile,w.dataFilter]});he({queryFn:()=>Ze(y.dataFilter,"owner"),queryKey:[_.FOLDER_OWNER,y.dataFilter],onSuccess:({data:z})=>{ke(z.data.content)}}),he({queryFn:()=>Ze(y.dataFilter,"local"),queryKey:[_.FOLDER_LOCAL],onSuccess:({data:z})=>{ke(z.data.content)}});const K=async z=>{const re=typeof z=="string"?[z]:z,oe=[];for(const de of re)oe.push(qa({profile_uuid:de},L));await Promise.all(oe).then(()=>{s.success("Change fingerprint successful")}).catch(de=>{const G=de.response.data;G.title&&G.content&&G.content.length>0?G.content.forEach(ye=>{s.error(ye)}):s.error(G.title)})},be=qt();c.useEffect(()=>(window.electron.ipcRenderer.on("browser_actions",(z,re)=>{be(Ma(re))}),window.electron.ipcRenderer.on("browser-closed",(z,re)=>{n.invalidateQueries(_.listProfile,{refetchInactive:!0}),n.invalidateQueries(_.GET_PROFILE_BY_FOLDER,{refetchInactive:!0})}),()=>{window.electron.ipcRenderer.removeAllListeners("browser_actions"),window.electron.ipcRenderer.removeAllListeners("browser-closed")}),[]);const ie={columns:l,setColumns:o,setFilterState:F,arrayKeyActive:H,setArrayKeyActive:N,arrUuidProfilesRun:we,rightMenu:d,setRightMenu:p,dataNote:xe,setDataNote:R,dataProxy:J,setDataProxy:U,setIsOpenAutomation:O,setSelectedRowKeys:i,handleRefuseShare:ae,setDataShare:fe};return e.jsxs(Fe.Provider,{value:ie,children:[e.jsxs("div",{className:"flex flex-col h-[calc(100vh-65px)]",children:[e.jsx(Jl,{columns:l,setChangeFolder:q,setColumns:o,filterState:w,setFilterState:F,selectedRowKeys:m,setSelectedRowKeys:i,toggleModal:v,handleDelete:j,handleChangeFingerPrint:K,handleExportData:g,folder_uuid:S,setFolderUuid:P,arrUuidProfilesRun:we,setDefaultActiveKey:ce,defaultActiveKey:te,filterFolderState:y,setFilterFolderState:T,userShareFolder:h,setUserShareFolder:D,setIsOpenAutomation:O}),e.jsx("div",{id:"table-hidemium",className:"h-[calc(100vh-200px)] mr-5 rounded-lg overflow-auto",style:{backgroundColor:E=="profiles"?t.tableBgPrimary:t.backgroundNormal,border:E=="profiles"?`1px solid ${t.borderNormal}`:`0 solid ${t.borderNormal}`},children:e.jsx($o,{tab:E,setTab:W,toggleModal:v,columns:l,selectedRowKeys:m,setSelectedRowKeys:i,dataFilter:w.dataFilter,setFilterState:F,handleDelete:j,handleChangeFingerPrint:K,handleExportData:g,folder_uuid:S,setFolderUuid:P,profiles:Q,dataProfileFolder:Ee,setArrUuidProfilesRun:Ne,handleRefuseShare:ae,setDefaultActiveKey:ce,defaultActiveKey:te})}),e.jsx("div",{className:"h-[64px] flex items-end justify-end",children:e.jsx(Ao,{changeSize:X,changePage:Y,dataFilter:w.dataFilter,setFilterState:F,filterFolderState:y,setFilterFolderState:T})})]}),u&&f==="Change proxy"&&e.jsx(xi,{profiles:(Q==null?void 0:Q.data.data.content)||[],modalName:f,modalData:x,openModal:u,toggleModal:v,selectedRowKeys:Oe.isEmpty(m)?(x==null?void 0:x.selectedRowKeys)||[]:m}),e.jsx(Wo,{modalName:f,modalData:x,openModal:u,toggleModal:v}),e.jsx(Uo,{modalName:f,modalData:x,openModal:u,toggleModal:v}),e.jsx(ei,{modalName:f,modalData:x,openModal:u,toggleModal:v}),e.jsx(ln,{modalName:f,modalData:x,openModal:u,modalKey:b,toggleModal:v}),e.jsx(ni,{modalName:f,modalData:x,openModal:u,toggleModal:v}),e.jsx(Hr,{modalName:f,modalData:x,open:u,toggleModal:v}),e.jsx(gi,{}),(J==null?void 0:J.isOpen)&&e.jsx(bi,{}),e.jsx(on,{isOpen:I,setIsOpen:O,profileSelected:m,dataBinding:Z,filter:w.dataFilter})]})}export{Fe as ProfilesContext,pd as default};
