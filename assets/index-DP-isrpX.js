import{k as e,r,n as F,q as P,j as _,ad as U}from"./index-CJvg638n.js";import{u as I}from"./useQuery-DJ-tefVM.js";import{a as z,b as K,u as B,d as D,g as H}from"./extensionService-B726Y0ex.js";import{u as L}from"./useTranslation-DN-CYzVf.js";import{P as V}from"./Pagination-BX02S7D7.js";import{u as R}from"./useMutation-DtMNI5dJ.js";import{B as J}from"./index-BAIjI0rE.js";import{M as W}from"./CreateOrUpdateExtension-DsYBNMS_.js";import{a as T}from"./index.esm-BKVPp4gk.js";import{L as b}from"./ListExtension-9sJH7Pgv.js";import{I as w}from"./index-4M1x7pR3.js";import{D as C}from"./index-j3wcEPKq.js";import{T as Y}from"./index-DGGwne6Z.js";import{u as Z}from"./theme-D5S-1fEx.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./utils-Dji2qSVF.js";import"./LeftOutlined-_e4uGCQm.js";import"./responsiveObserver-BQm3ddGk.js";import"./index-Wc0f9ZXJ.js";import"./index-BtoCM6cC.js";import"./index-DC1DAWbZ.js";import"./Overflow-eyj8oHJy.js";import"./PurePanel-BiIzqeBG.js";import"./TextArea-DBRPcsh0.js";import"./CheckOutlined-CxiWyKpb.js";import"./DownOutlined-BgG6dx4I.js";import"./SearchOutlined-Bmw6m_pM.js";import"./index-YCIRg4HO.js";import"./collapse-C1MjllT7.js";import"./row-C7cWNtLw.js";import"./index.esm-Bx8KlBGq.js";import"./index-DRCSt6Z6.js";import"./index-Db4idn_r.js";import"./index-YXUFDw_N.js";import"./EyeOutlined-B-Yk7nA6.js";import"./progress-BUBdB7Z0.js";import"./index-CWlqhW57.js";import"./gapSize-U1swVQyS.js";import"./index-Cn7Yo5Hv.js";import"./index.esm-DsEolv7O.js";import"./DeleteConfirmModal-CCC5Ho8A.js";import"./index-TvTBJWU5.js";import"./index-D7PKG-E_.js";import"./index-Bsl0EBBv.js";import"./EllipsisOutlined-DODEOrOr.js";import"./PlusOutlined-B9MlVXp_.js";import"./Dropdown-DXC0sGt_.js";function $(s){const{search:n,data:p,paginate:o}=s,{t:u}=L();return e.jsx("div",{className:"w-full p-4 text-end z-10",children:e.jsx(V,{pageSize:n.limit,current:n.page,pageSizeOptions:[12,24,58],total:p.meta.total,onChange:o,showSizeChanger:!0,showTitle:!1,locale:{items_per_page:u("page")}})})}const A=r.createContext({tab:"",setTab:s=>{}});function ee({children:s}){const[n,p]=r.useState("your"),o={tab:n,setTab:p};return e.jsx(A.Provider,{value:o,children:s})}function te({data:s,isCreate:n,extension:p,searchExtension:o,setType:u}){var N;F(t=>t.display);const{message:x}=P.useApp(),d=_(),[c,m]=r.useState(""),[h,g]=r.useState([]),{tab:v,setTab:k}=r.useContext(A),{t:f}=L();r.useEffect(()=>{let t=new Array(s==null?void 0:s.length).fill(!1);g(t)},[]);const{mutate:M}=R(z,{onError:t=>{x.error(t.message)},onSuccess:()=>{let t=new Array(s==null?void 0:s.length).fill(!1);g(t),d.invalidateQueries("GET_LIST_EXTENSION")}}),y=(t,i,a,l)=>{g(E=>{const S=[...E];return S[a]=!0,S}),M({id:i,isEnable:t,item:l})},O=t=>{const i={extension_id:t.id};B(i).then(a=>{var l;x.success((l=a==null?void 0:a.data)==null?void 0:l.title),d.invalidateQueries("GET_LIST_EXTENSION")}).catch(a=>{var l,E;x.error((E=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:E.title),console.log(a)})},q=t=>{D({id:t.id}).then(i=>{d.invalidateQueries("GET_LIST_EXTENSION"),x.success(i.data.title)}).catch(i=>{var a,l;x.error((l=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:l.title),console.log(i)})},[G,Q]=r.useState([]),j=I({queryFn:()=>K(),queryKey:["GET_LIST_EXTENSION"]});r.useEffect(()=>{(async()=>{var i;Q((i=j.data)==null?void 0:i.content)})()},[(N=j.data)==null?void 0:N.content]);const X=[{label:e.jsx("div",{className:"font-semibold text-[16px]",children:f("My Extension")}),key:"your",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{value:c,onChange:t=>{o(t.target.value),m(t.target.value)},className:"max-w-[400px]",placeholder:f("Search"),prefix:e.jsx(T,{className:"text-gray-400"})}),e.jsx(W,{ShowModalEl:e.jsx(J,{typebutton:"primary",icon:e.jsx(U,{}),style:{padding:"4px 12px"},label:f("Upload extensions"),solid:!0}),data:null})]}),e.jsx(C,{}),e.jsx("div",{className:"pb-1 h-[calc(80vh-90px)] overflow-y-scroll overflow-x-hidden",children:e.jsx(b,{data:s,isCreate:n,loadingActive:h,isActive:y,type:"extensions",tab:v})})]})},{label:e.jsx("div",{className:"font-semibold text-[16px]",children:f("Extension Market")}),key:"market",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between",children:e.jsx(w,{value:c,onChange:t=>{o(t.target.value),m(t.target.value)},className:"max-w-[400px]",placeholder:f("Search"),prefix:e.jsx(T,{className:"text-gray-400"})})}),e.jsx(C,{}),e.jsx("div",{className:"pb-1 h-[calc(80vh-90px)] overflow-y-scroll overflow-x-hidden",children:e.jsx(b,{allMyExtension:G,data:s,isCreate:n,loadingActive:h,isActive:y,type:"extensions",tab:v,onClick:O,onClickUnusing:q})})]})}];return e.jsx("div",{className:"flex flex-col -translate-y-3",children:e.jsx("div",{className:"relative",children:e.jsx(Y,{onChange:t=>{u(t),o(""),m(""),k(t)},items:X,activeKey:v})})})}function se({data:s,searchExtension:n,setType:p}){const o=Z();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-[calc(100vh-135px)]",style:{backgroundColor:o.backgroundNormal},children:e.jsx("div",{className:"card-extensions py-3 h-full",children:e.jsx(te,{setType:p,data:s,searchExtension:n})})})})}function We(){const[s,n]=r.useState({type:"your",search:"",limit:12,page:1}),p=_(),{data:o}=I({queryFn:()=>H(s),queryKey:["GET_LIST_EXTENSION",s]});console.log(o),r.useEffect(()=>{(async()=>{p.invalidateQueries("GET_LIST_EXTENSION")})()},[s]);const u=c=>{n(m=>({...m,search:c,page:1}))},x=(c,m)=>{n(h=>({...h,page:c,limit:m}))},d=c=>{n(m=>({...m,type:c}))};return r.useEffect(()=>{console.log(o)},[]),o&&e.jsx(ee,{children:e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs("div",{className:"rounded-tl-md h-full overflow-hidden flex flex-col relative pr-5",children:[e.jsx(se,{setType:d,data:o.content,searchExtension:u}),e.jsx($,{data:o,search:s,paginate:x})]})})})}export{We as default};
