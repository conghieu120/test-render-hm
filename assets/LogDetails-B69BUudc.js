import{r as n,bo as Me,bp as _e,h as ne,bq as ce,br as ae,bs as Le,bt as de,bu as ve,bv as j,bw as he,bx as ie,by as be,bz as ze,C as ue,bA as He,bB as ge,e as H,g as Fe,m as We,u as Y,bC as Ae,bD as Te,bE as Ke,bF as Be,bG as Ve,bH as Ue,bI as pe,n as Xe,ab as Ge,k as _}from"./index-CJvg638n.js";import{u as Ye}from"./theme-D5S-1fEx.js";import{I as qe}from"./index-4M1x7pR3.js";var we=n.createContext(null),Ce=n.createContext({}),Ze=["prefixCls","className","containerRef"],Je=function(t){var o=t.prefixCls,a=t.className,s=t.containerRef,c=Me(t,Ze),i=n.useContext(Ce),d=i.panel,h=_e(d,s);return n.createElement("div",ne({className:ae("".concat(o,"-content"),a),role:"dialog",ref:h},ce(t,{aria:!0}),{"aria-modal":"true"},c))};function ye(e){return typeof e=="string"&&String(Number(e))===e?(Le(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var xe={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function Qe(e,t){var o,a,s,c=e.prefixCls,i=e.open,d=e.placement,h=e.inline,b=e.push,y=e.forceRender,u=e.autoFocus,f=e.keyboard,l=e.classNames,r=e.rootClassName,x=e.rootStyle,g=e.zIndex,D=e.className,P=e.id,k=e.style,m=e.motion,C=e.width,I=e.height,N=e.children,$=e.mask,L=e.maskClosable,O=e.maskMotion,q=e.maskClassName,B=e.maskStyle,F=e.afterOpenChange,z=e.onClose,W=e.onMouseEnter,Z=e.onMouseOver,J=e.onMouseLeave,V=e.onClick,Q=e.onKeyDown,ee=e.onKeyUp,p=e.styles,R=n.useRef(),E=n.useRef(),M=n.useRef();n.useImperativeHandle(t,function(){return R.current});var te=function(S){var X=S.keyCode,G=S.shiftKey;switch(X){case ie.TAB:{if(X===ie.TAB){if(!G&&document.activeElement===M.current){var se;(se=E.current)===null||se===void 0||se.focus({preventScroll:!0})}else if(G&&document.activeElement===E.current){var le;(le=M.current)===null||le===void 0||le.focus({preventScroll:!0})}}break}case ie.ESC:{z&&f&&(S.stopPropagation(),z(S));break}}};n.useEffect(function(){if(i&&u){var v;(v=R.current)===null||v===void 0||v.focus({preventScroll:!0})}},[i]);var re=n.useState(!1),oe=de(re,2),me=oe[0],U=oe[1],w=n.useContext(we),A;typeof b=="boolean"?A=b?{}:{distance:0}:A=b||{};var T=(o=(a=(s=A)===null||s===void 0?void 0:s.distance)!==null&&a!==void 0?a:w==null?void 0:w.pushDistance)!==null&&o!==void 0?o:180,je=n.useMemo(function(){return{pushDistance:T,push:function(){U(!0)},pull:function(){U(!1)}}},[T]);n.useEffect(function(){if(i){var v;w==null||(v=w.push)===null||v===void 0||v.call(w)}else{var S;w==null||(S=w.pull)===null||S===void 0||S.call(w)}},[i]),n.useEffect(function(){return function(){var v;w==null||(v=w.pull)===null||v===void 0||v.call(w)}},[]);var De=$&&n.createElement(ve,ne({key:"mask"},O,{visible:i}),function(v,S){var X=v.className,G=v.style;return n.createElement("div",{className:ae("".concat(c,"-mask"),X,l==null?void 0:l.mask,q),style:j(j(j({},G),B),p==null?void 0:p.mask),onClick:L&&i?z:void 0,ref:S})}),Pe=typeof m=="function"?m(d):m,K={};if(me&&T)switch(d){case"top":K.transform="translateY(".concat(T,"px)");break;case"bottom":K.transform="translateY(".concat(-T,"px)");break;case"left":K.transform="translateX(".concat(T,"px)");break;default:K.transform="translateX(".concat(-T,"px)");break}d==="left"||d==="right"?K.width=ye(C):K.height=ye(I);var Re={onMouseEnter:W,onMouseOver:Z,onMouseLeave:J,onClick:V,onKeyDown:Q,onKeyUp:ee},Ie=n.createElement(ve,ne({key:"panel"},Pe,{visible:i,forceRender:y,onVisibleChanged:function(S){F==null||F(S)},removeOnLeave:!1,leavedClassName:"".concat(c,"-content-wrapper-hidden")}),function(v,S){var X=v.className,G=v.style;return n.createElement("div",ne({className:ae("".concat(c,"-content-wrapper"),l==null?void 0:l.wrapper,X),style:j(j(j({},K),G),p==null?void 0:p.wrapper)},ce(e,{data:!0})),n.createElement(Je,ne({id:P,containerRef:S,prefixCls:c,className:ae(D,l==null?void 0:l.content),style:j(j({},k),p==null?void 0:p.content)},ce(e,{aria:!0}),Re),N))}),fe=j({},x);return g&&(fe.zIndex=g),n.createElement(we.Provider,{value:je},n.createElement("div",{className:ae(c,"".concat(c,"-").concat(d),r,he(he({},"".concat(c,"-open"),i),"".concat(c,"-inline"),h)),style:fe,tabIndex:-1,ref:R,onKeyDown:te},De,n.createElement("div",{tabIndex:0,ref:E,style:xe,"aria-hidden":"true","data-sentinel":"start"}),Ie,n.createElement("div",{tabIndex:0,ref:M,style:xe,"aria-hidden":"true","data-sentinel":"end"})))}var et=n.forwardRef(Qe),tt=function(t){var o=t.open,a=o===void 0?!1:o,s=t.prefixCls,c=s===void 0?"rc-drawer":s,i=t.placement,d=i===void 0?"right":i,h=t.autoFocus,b=h===void 0?!0:h,y=t.keyboard,u=y===void 0?!0:y,f=t.width,l=f===void 0?378:f,r=t.mask,x=r===void 0?!0:r,g=t.maskClosable,D=g===void 0?!0:g,P=t.getContainer,k=t.forceRender,m=t.afterOpenChange,C=t.destroyOnClose,I=t.onMouseEnter,N=t.onMouseOver,$=t.onMouseLeave,L=t.onClick,O=t.onKeyDown,q=t.onKeyUp,B=t.panelRef,F=n.useState(!1),z=de(F,2),W=z[0],Z=z[1],J=n.useState(!1),V=de(J,2),Q=V[0],ee=V[1];be(function(){ee(!0)},[]);var p=Q?a:!1,R=n.useRef(),E=n.useRef();be(function(){p&&(E.current=document.activeElement)},[p]);var M=function(U){var w;if(Z(U),m==null||m(U),!U&&E.current&&!((w=R.current)!==null&&w!==void 0&&w.contains(E.current))){var A;(A=E.current)===null||A===void 0||A.focus({preventScroll:!0})}},te=n.useMemo(function(){return{panel:B}},[B]);if(!k&&!W&&!p&&C)return null;var re={onMouseEnter:I,onMouseOver:N,onMouseLeave:$,onClick:L,onKeyDown:O,onKeyUp:q},oe=j(j({},t),{},{open:p,prefixCls:c,placement:d,autoFocus:b,keyboard:u,width:l,mask:x,maskClosable:D,inline:P===!1,afterOpenChange:M,ref:R},re);return n.createElement(Ce.Provider,{value:te},n.createElement(ze,{open:p||k||W,autoDestroy:!1,getContainer:P,autoLock:x&&(p||W)},n.createElement(et,oe)))};const nt=e=>{var t,o;const{prefixCls:a,title:s,footer:c,extra:i,onClose:d,headerStyle:h,bodyStyle:b,footerStyle:y,children:u,classNames:f,styles:l}=e,{drawer:r}=n.useContext(ue),x=n.useCallback(m=>n.createElement("button",{type:"button",onClick:d,"aria-label":"Close",className:`${a}-close`},m),[d]),[g,D]=He(ge(e),ge(r),{closable:!0,closeIconRender:x}),P=n.useMemo(()=>{var m,C;return!s&&!g?null:n.createElement("div",{style:Object.assign(Object.assign(Object.assign({},(m=r==null?void 0:r.styles)===null||m===void 0?void 0:m.header),h),l==null?void 0:l.header),className:H(`${a}-header`,{[`${a}-header-close-only`]:g&&!s&&!i},(C=r==null?void 0:r.classNames)===null||C===void 0?void 0:C.header,f==null?void 0:f.header)},n.createElement("div",{className:`${a}-header-title`},D,s&&n.createElement("div",{className:`${a}-title`},s)),i&&n.createElement("div",{className:`${a}-extra`},i))},[g,D,i,h,a,s]),k=n.useMemo(()=>{var m,C;if(!c)return null;const I=`${a}-footer`;return n.createElement("div",{className:H(I,(m=r==null?void 0:r.classNames)===null||m===void 0?void 0:m.footer,f==null?void 0:f.footer),style:Object.assign(Object.assign(Object.assign({},(C=r==null?void 0:r.styles)===null||C===void 0?void 0:C.footer),y),l==null?void 0:l.footer)},c)},[c,y,a]);return n.createElement(n.Fragment,null,P,n.createElement("div",{className:H(`${a}-body`,f==null?void 0:f.body,(t=r==null?void 0:r.classNames)===null||t===void 0?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},(o=r==null?void 0:r.styles)===null||o===void 0?void 0:o.body),b),l==null?void 0:l.body)},u),k)},Se=nt,at=e=>{const t="100%";return{left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`}[e]},ke=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),Ne=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},ke({opacity:e},{opacity:1})),ot=(e,t)=>[Ne(.7,t),ke({transform:at(e)},{transform:"none"})],rt=e=>{const{componentCls:t,motionDurationSlow:o}=e;return{[t]:{[`${t}-mask-motion`]:Ne(0,o),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce((a,s)=>Object.assign(Object.assign({},a),{[`&-${s}`]:ot(s,o)}),{})}}},st=rt,lt=e=>{const{borderRadiusSM:t,componentCls:o,zIndexPopup:a,colorBgMask:s,colorBgElevated:c,motionDurationSlow:i,motionDurationMid:d,paddingXS:h,padding:b,paddingLG:y,fontSizeLG:u,lineHeightLG:f,lineWidth:l,lineType:r,colorSplit:x,marginXS:g,colorIcon:D,colorIconHover:P,colorBgTextHover:k,colorBgTextActive:m,colorText:C,fontWeightStrong:I,footerPaddingBlock:N,footerPaddingInline:$,calc:L}=e,O=`${o}-content-wrapper`;return{[o]:{position:"fixed",inset:0,zIndex:a,pointerEvents:"none","&-pure":{position:"relative",background:c,display:"flex",flexDirection:"column",[`&${o}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${o}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${o}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${o}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${o}-mask`]:{position:"absolute",inset:0,zIndex:a,background:s,pointerEvents:"auto"},[O]:{position:"absolute",zIndex:a,maxWidth:"100vw",transition:`all ${i}`,"&-hidden":{display:"none"}},[`&-left > ${O}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${O}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${O}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${O}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${o}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:c,pointerEvents:"auto"},[`${o}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${Y(b)} ${Y(y)}`,fontSize:u,lineHeight:f,borderBottom:`${Y(l)} ${r} ${x}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${o}-extra`]:{flex:"none"},[`${o}-close`]:Object.assign({display:"inline-flex",width:L(u).add(h).equal(),height:L(u).add(h).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:g,color:D,fontWeight:I,fontSize:u,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${d}`,textRendering:"auto","&:hover":{color:P,backgroundColor:k,textDecoration:"none"},"&:active":{backgroundColor:m}},Ae(e)),[`${o}-title`]:{flex:1,margin:0,color:C,fontWeight:e.fontWeightStrong,fontSize:u,lineHeight:f},[`${o}-body`]:{flex:1,minWidth:0,minHeight:0,padding:y,overflow:"auto"},[`${o}-footer`]:{flexShrink:0,padding:`${Y(N)} ${Y($)}`,borderTop:`${Y(l)} ${r} ${x}`},"&-rtl":{direction:"rtl"}}}},it=e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding}),$e=Fe("Drawer",e=>{const t=We(e,{});return[lt(t),st(t)]},it);var Oe=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(o[a[s]]=e[a[s]]);return o};const ct={distance:180},Ee=e=>{const{rootClassName:t,width:o,height:a,size:s="default",mask:c=!0,push:i=ct,open:d,afterOpenChange:h,onClose:b,prefixCls:y,getContainer:u,style:f,className:l,visible:r,afterVisibleChange:x,maskStyle:g,drawerStyle:D,contentWrapperStyle:P}=e,k=Oe(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:m,getPrefixCls:C,direction:I,drawer:N}=n.useContext(ue),$=C("drawer",y),[L,O,q]=$e($),B=u===void 0&&m?()=>m(document.body):u,F=H({"no-mask":!c,[`${$}-rtl`]:I==="rtl"},t,O,q),z=n.useMemo(()=>o??(s==="large"?736:378),[o,s]),W=n.useMemo(()=>a??(s==="large"?736:378),[a,s]),Z={motionName:pe($,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},J=te=>({motionName:pe($,`panel-motion-${te}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}),V=Te(),[Q,ee]=Ke("Drawer",k.zIndex),{classNames:p={},styles:R={}}=k,{classNames:E={},styles:M={}}=N||{};return L(n.createElement(Be,null,n.createElement(Ve,{status:!0,override:!0},n.createElement(Ue.Provider,{value:ee},n.createElement(tt,Object.assign({prefixCls:$,onClose:b,maskMotion:Z,motion:J},k,{classNames:{mask:H(p.mask,E.mask),content:H(p.content,E.content)},styles:{mask:Object.assign(Object.assign(Object.assign({},R.mask),g),M.mask),content:Object.assign(Object.assign(Object.assign({},R.content),D),M.content),wrapper:Object.assign(Object.assign(Object.assign({},R.wrapper),P),M.wrapper)},open:d??r,mask:c,push:i,width:z,height:W,style:Object.assign(Object.assign({},N==null?void 0:N.style),f),className:H(N==null?void 0:N.className,l),rootClassName:F,getContainer:B,afterOpenChange:h??x,panelRef:V,zIndex:Q}),n.createElement(Se,Object.assign({prefixCls:$},k,{onClose:b})))))))},dt=e=>{const{prefixCls:t,style:o,className:a,placement:s="right"}=e,c=Oe(e,["prefixCls","style","className","placement"]),{getPrefixCls:i}=n.useContext(ue),d=i("drawer",t),[h,b,y]=$e(d),u=H(d,`${d}-pure`,`${d}-${s}`,b,y,a);return h(n.createElement("div",{className:u,style:o},n.createElement(Se,Object.assign({prefixCls:d},c))))};Ee._InternalPanelDoNotUseOrYouWillBeFired=dt;const ut=Ee,mt=window.api.os.platform()==="darwin"?"/tmp":window.api.os.tmpdir();function bt({open:e,setOpen:t,id:o,showVariable:a=!0}){const[s,c]=n.useState(""),i=Ye(),[d,h]=n.useState([]),b=n.useRef(null),y=window.api.path.join(mt,"hidemium_4-work-logs"),u=window.api.path.join(y,o+".txt");Xe(l=>l.display);const f=async()=>{window.api.fs.existsSync(y)||window.api.fs.mkdirSync(y,{recursive:!0}),window.api.fs.existsSync(u)||window.api.fs.writeFileSync(u,""),c(window.api.fs.readFileSync(u,{encoding:"utf8"})),b.current=await window.api.startWatchFile(u),window.electron.ipcRenderer.on(b.current,()=>{c(window.api.fs.readFileSync(u,{encoding:"utf8"}))})};return n.useEffect(()=>(e&&f(),()=>{window.api.stopWatchFile(b.current),window.electron.ipcRenderer.removeAllListeners(b.current)}),[e,o]),n.useEffect(()=>{if(e)return window.electron.ipcRenderer.on("variables-log",(l,r)=>{const x=[];if(Ge.isArray(r))for(const g of r)x.push({label:g.value,data:g.data});else for(const g in r)x.push({label:g,data:r[g]});h(x)}),()=>{window.electron.ipcRenderer.removeAllListeners("variables-log")}},[e]),_.jsx(ut,{title:"Log Detail",placement:"right",onClose:()=>t(!1),open:e,width:540,children:_.jsxs("div",{className:"h-[calc(100%-14px)] flex flex-col gap-y-3",children:[_.jsx("div",{style:{color:i.textNormal,borderColor:i.borderLight},className:`${a?"basis-1/2":"h-full"} border border-solid px-2 rounded overflow-y-scroll`,children:_.jsx("div",{className:"font-[Source Code Pro] break-words my-2 tracking-wide text-wrap",style:{whiteSpace:"pre-line",lineHeight:2},children:s})}),a&&_.jsx("div",{style:{color:i.textNormal,borderColor:i.borderLight},className:"basis-1/2 border rounded border-solid overflow-y-scroll py-3",children:_.jsx("div",{className:"grid grid-cols-8 gap-y-4",children:d.map((l,r)=>_.jsxs("div",{className:"col-span-4 px-2 h-fit",children:[_.jsx("div",{className:"font-medium text-[15px] mb-1",children:l.label}),_.jsx(qe,{className:"select-none rounded-sm border outline-none",value:l.data})]},r))})})]})})}export{bt as L};
