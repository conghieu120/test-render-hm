import{k as e,r as m,n as w,q as T,j as z}from"./index-rD5D3wIe.js";import{u as N}from"./useMutation-7pHNuXnK.js";import{e as L,f as C}from"./extensionService-DjV-mgP6.js";import{T as A}from"./TextArea-D8GM8mUo.js";import{u as E}from"./useTranslation-CdVDZguR.js";import{F as x}from"./index-D0qsI2Ko.js";import{B as _}from"./index-Cnfr_LhE.js";import{d as V}from"./index.esm-DxM5fcVQ.js";import{u as q}from"./theme-CwYL3eQV.js";import{R as I}from"./index-Rll6gE4e.js";import{I as v}from"./index-R7zUTNyO.js";import{U as B}from"./index-H7TxDH1o.js";import{S as R}from"./index-DEeuvegC.js";import{M as H}from"./index-DduQbOjH.js";const M={"required-label":"_required-label_1sdxy_1","required-label-filter":"_required-label-filter_1sdxy_9"};function y({style:h,label:r,name:j,rules:s,valuePropName:d,getValueFromEvent:n,FormInput:u,isFilter:a=!1}){const{t:p}=E();return e.jsx(e.Fragment,{children:e.jsx(x.Item,{className:"font-semibold "+M["required-label"]+` ${a?M["required-label-filter"]:""} `+h,label:p(r),name:j,rules:s,valuePropName:d,getValueFromEvent:n,children:u})})}const X=({formRef:h,form:r,onSubmitForm:j,data:s})=>{const[d,n]=m.useState([]),[u,a]=m.useState(""),p=q();x.useWatch("typeImport",r),m.useEffect(()=>{const t=r.getFieldsValue();t.file!==void 0?a(t.file[0].name):a(void 0)}),m.useEffect(()=>{s&&F()});const F=()=>{const t={name:s==null?void 0:s.name,description:s==null?void 0:s.description};r.setFieldsValue(t)},S=t=>Array.isArray(t)?t:t==null?void 0:t.fileList,{theme:c}=w(t=>t.display),{t:i}=E();return e.jsx(e.Fragment,{children:e.jsxs(x,{ref:h,form:r,onFinish:j,layout:"vertical",autoComplete:"off",encType:"multipart/form-data",initialValues:{typeImport:"file"},children:[e.jsx(x.Item,{name:"typeImport",className:"font-semibold mt-5",rules:[{required:!0,message:"This field is required."}],children:e.jsxs(I.Group,{className:"font-medium flex gap-x-4",children:[e.jsx(I,{value:"file",className:"flex items-center",children:e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(V,{className:"text-[24px] text-[#2263B3]"}),e.jsx("div",{children:i("Upload from computer")})]})}),e.jsx(I,{value:"url",disabled:!!s,className:"flex items-center",children:e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx("div",{className:"h-[24px] w-[24px]",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24",height:"24",viewBox:"0 0 48 48",children:[e.jsx("path",{fill:"#4caf50",d:"M44,24c0,11.044-8.956,20-20,20S4,35.044,4,24S12.956,4,24,4S44,12.956,44,24z"}),e.jsx("path",{fill:"#ffc107",d:"M24,4v20l8,4l-8.843,16c0.317,0,0.526,0,0.843,0c11.053,0,20-8.947,20-20S35.053,4,24,4z"}),e.jsx("path",{fill:"#4caf50",d:"M44,24c0,11.044-8.956,20-20,20S4,35.044,4,24S12.956,4,24,4S44,12.956,44,24z"}),e.jsx("path",{fill:"#ffc107",d:"M24,4v20l8,4l-8.843,16c0.317,0,0.526,0,0.843,0c11.053,0,20-8.947,20-20S35.053,4,24,4z"}),e.jsx("path",{fill:"#f44336",d:"M41.84,15H24v13l-3-1L7.16,13.26H7.14C10.68,7.69,16.91,4,24,4C31.8,4,38.55,8.48,41.84,15z"}),e.jsx("path",{fill:"#dd2c00",d:"M7.158,13.264l8.843,14.862L21,27L7.158,13.264z"}),e.jsx("path",{fill:"#558b2f",d:"M23.157,44l8.934-16.059L28,25L23.157,44z"}),e.jsx("path",{fill:"#f9a825",d:"M41.865,15H24l-1.579,4.58L41.865,15z"}),e.jsx("path",{fill:"#fff",d:"M33,24c0,4.969-4.031,9-9,9s-9-4.031-9-9s4.031-9,9-9S33,19.031,33,24z"}),e.jsx("path",{fill:"#2196f3",d:"M31,24c0,3.867-3.133,7-7,7s-7-3.133-7-7s3.133-7,7-7S31,20.133,31,24z"})]})}),e.jsx("div",{children:i("Chrome web store")})]})})]})}),r.getFieldsValue().typeImport==="file"&&e.jsxs(e.Fragment,{children:[e.jsx(y,{label:"Name",name:"name",rules:[{required:!0,message:`${i("This field is required")}`},{max:50,message:"Name must be minimum 50 characters"}],FormInput:e.jsx(v,{className:`${c==="light"?"!text-[#000000]":"!text-[#FFFFFF]"}`,placeholder:i("Enter name input")})}),e.jsx(y,{label:"Description",name:"description",rules:[{max:150,message:"Description must be minimum 150 characters"}],FormInput:e.jsx(A,{rows:4})}),e.jsx(y,{label:i("File Upload"),name:"file",valuePropName:"fileList",getValueFromEvent:S,rules:[s?{required:!1}:{required:!0,message:`${i("This field is required")}`},{validator(t,f){return new Promise((b,g)=>{var o;f&&((o=f[0])==null?void 0:o.size)>104857600?g(i("File size should not exceed 100MB!")):b("")})}}],FormInput:e.jsx(e.Fragment,{children:e.jsx(B,{accept:".zip",showUploadList:!1,name:"abc",maxCount:1,customRequest:t=>{n([t.file])},beforeUpload:t=>new Promise((f,b)=>{t.size>104857600?b("File size should not exceed 100MB!"):f("")}),children:e.jsxs(R,{direction:"horizontal",children:[e.jsx(v,{placeholder:i("File Upload"),value:u,className:"w-[calc(476px-86px)]"}),e.jsx(_,{typebutton:"primary",label:i("Browse"),solid:!0},2)]})})})})]}),r.getFieldsValue().typeImport==="url"&&e.jsx(x.Item,{name:"url_extension",label:e.jsx("span",{style:{color:p.textPrimary,fontWeight:"600"},children:i("Url extension")}),className:"font-semibold ",rules:[{required:!0,message:i("This field is required.")}],children:e.jsx(v,{placeholder:i("Url extension or id extension")})})]})})};function te({ShowModalEl:h,data:r}){const j=q(),{message:s}=T.useApp(),[d]=x.useForm(),{t:n}=E(),[u,a]=m.useState(!1),p=z(),F=m.useRef(null),[S,c]=m.useState(!0),{mutate:i,isLoading:t}=N(L,{onError:l=>{c(!0),l.response.data.content&&l.response.data.content.length>0?l.response.data.content.map(o=>{s.error(o)}):s.error(l.response.data.title)},onSuccess:()=>{c(!0),s.success(n("Upload successfully")+"!"),a(!1),p.invalidateQueries("GET_LIST_EXTENSION")}}),{mutate:f,isLoading:b}=N(C,{onError:l=>{c(!0),l.response.data.content&&l.response.data.content.length>0?l.response.data.content.map(o=>{s.error(o)}):s.error(l.response.data.title)},onSuccess:()=>{c(!0),s.success(n("Update successfully")+"!"),a(!1),p.invalidateQueries("GET_LIST_EXTENSION")}}),g=async()=>{var o;const l=await((o=F.current)==null?void 0:o.validateFields());if(!r&&l)c(!1),i(l);else if(r&&l){c(!1);const U={id:r.id,...l};f(U)}};return m.useEffect(()=>{u&&d.resetFields()},[u]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-fit",onClick:()=>a(!0),children:h}),e.jsx(H,{title:e.jsx("div",{className:"text-[20px]",style:{color:j.titlePrimary},children:n("Update extension")}),open:u,onCancel:()=>a(!1),footer:[e.jsx("div",{className:"flex justify-end gap-x-5 font-semibold",children:e.jsx(_,{isDisabled:!S,onClick:d.submit,typebutton:"primary",label:n("Submit"),solid:!0},2)},1)],children:e.jsx(X,{formRef:F,form:d,onSubmitForm:g,data:r})})]})}export{te as M};
