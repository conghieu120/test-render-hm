import{k as e,i as S,ay as z,az as Q,aA as V,aB as U,aC as W,q as _,r as w,w as P,N as v,v as G,p as Y,j as $,z as K,B as J,P as X,aD as Z}from"./index-CJvg638n.js";import{H as ee}from"./HeaderContext-CcFwS_UE.js";import{F as c}from"./index-YCIRg4HO.js";import{u as E}from"./useTranslation-DN-CYzVf.js";import{M as F}from"./index-Cn7Yo5Hv.js";import{I as T}from"./index-4M1x7pR3.js";import{S as se}from"./index-CWlqhW57.js";import{T as O}from"./index-D8gngLx0.js";import{u as ae}from"./useQuery-DJ-tefVM.js";import{Q as te}from"./queryKey.const-4yptRpGc.js";import{b as oe,g as re}from"./auth-8cqRmsX-.js";import{u as ne}from"./useMutation-DtMNI5dJ.js";import{u as I}from"./theme-D5S-1fEx.js";import{B as R}from"./index-BAIjI0rE.js";import{R as N,C as h}from"./row-C7cWNtLw.js";import{S as D}from"./index-Wc0f9ZXJ.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./index-BXlHKc3j.js";import"./index-w6IqrXlL.js";import"./Table-Bf5fO8hA.js";import"./index-DC1DAWbZ.js";import"./addEventListener-0hYE1V1V.js";import"./DownOutlined-BgG6dx4I.js";import"./index-DwCW4jpE.js";import"./index-Db4idn_r.js";import"./LeftOutlined-_e4uGCQm.js";import"./Dropdown-DXC0sGt_.js";import"./index-BtoCM6cC.js";import"./PurePanel-BiIzqeBG.js";import"./extendsObject-EOfQw3bh.js";import"./EllipsisOutlined-DODEOrOr.js";import"./Overflow-eyj8oHJy.js";import"./collapse-C1MjllT7.js";import"./index-DRCSt6Z6.js";import"./Pagination-BX02S7D7.js";import"./responsiveObserver-BQm3ddGk.js";import"./TextArea-DBRPcsh0.js";import"./SearchOutlined-Bmw6m_pM.js";import"./index-DGGwne6Z.js";import"./PlusOutlined-B9MlVXp_.js";import"./EyeOutlined-B-Yk7nA6.js";import"./gapSize-U1swVQyS.js";import"./CheckOutlined-CxiWyKpb.js";import"./utils-Dji2qSVF.js";function le({columns:a,setColumns:t}){const i=r=>{},d=()=>{console.log("onReset")};return e.jsx(ee,{namePage:"Overview",handleChangeTab:i,setColumns:t,onReset:d})}const L=async a=>await S.put(V,a),ce=async a=>await S.put(U,a),ie=async a=>await S.put(W,a),de=async()=>await S.get(z),me=async a=>await S.put(Q,a),pe=/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,6}))$/,H={pattern:pe,message:"Invalid code"};function ue({openModal:a,setOpenModal:t,get2faEnable:i}){const[d]=c.useForm(),{message:r}=_.useApp(),[m,u]=w.useState(0),[x,l]=w.useState(""),[f,g]=w.useState(""),[s]=E(),{Title:y}=O,{token:n}=P.useToken(),j=async()=>{const b=await d.validateFields();await L({type:"google2fa",...b}).then(o=>{g(o.data.content.textCode),l(o.data.content.qrCode),u(1),d.resetFields()}).catch(o=>{r.error("The password is incorrect")})},p=async()=>{await d.validateFields(),u(2),l(""),g("")},B=async()=>{const b=await d.validateFields();await ce({type:"google2fa",...b}).then(o=>{o.data.content?(u(0),i(),r.success("success",o.data.content),t(!1)):r.error("The code is invalid")}).catch(o=>{r.error("The code is invalid")})},C=()=>{u(0),t(!1)},M=b=>{if(!b)return"";const o=document.createElement("div");return o.innerHTML=b,o.childNodes.length===0?"":o.childNodes[0].nodeValue||""};return e.jsx(e.Fragment,{children:m===0?e.jsx(F,{title:e.jsx(y,{style:{color:n.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:s("Two-factor authentication")}),open:a,onCancel:C,footer:[e.jsx(v,{style:{backgroundColor:"#2263B3",color:"#fff"},className:"rounded-[3.5px]",type:"primary",onClick:j,children:s("Continue")})],className:"relative top-[35%]",children:e.jsxs(c,{form:d,children:[e.jsx("span",{children:s("For security reasons, you must re-enter your password to continue:")}),e.jsx(c.Item,{className:"mt-[20px]",name:"password",children:e.jsx(T,{type:"password",placeholder:"Enter your password"})})]})}):m===1?e.jsx(F,{title:e.jsx(y,{style:{color:n.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:s("Two-factor authentication")}),open:a,onCancel:C,footer:[e.jsx(v,{style:{backgroundColor:"#2263B3",color:"#fff"},className:"rounded-[3.5px]",type:"primary",onClick:p,children:s("Continue")},"submit")],className:"relative top-[20%]",children:e.jsx(c,{form:d,children:e.jsx(c.Item,{name:"qr_code",children:e.jsxs("div",{children:[e.jsx("h4",{children:s("Setup via Third-Party Validator")}),e.jsx("span",{className:"text-[14px]",children:s("Please use your authenticator app (such as Duo or Google Authenticator) to scan this QR code.")}),e.jsx("div",{className:"mt-[30px]",children:e.jsxs(se,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:M(x??"")}}),e.jsxs("div",{children:[e.jsx("span",{children:s("Or enter this code in your authenticator app")}),e.jsx("h3",{children:f})]})]})})]})})})}):e.jsxs(F,{title:e.jsx(y,{style:{color:n.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:s("Two-factor authentication")}),open:a,onCancel:C,footer:[e.jsx(v,{style:{backgroundColor:"#2263B3",color:"#fff"},className:"rounded-[3.5px]",type:"primary",onClick:B,children:s("Submit")},"submit")],className:"relative top-[34%]",children:[e.jsx("h4",{children:s("Enter the confirmation code")}),e.jsx("span",{className:"text-[14px]",children:s("Please enter the verification code you see on your authenticator app.")}),e.jsx(c,{form:d,className:"mt-[15px]",children:e.jsx(c.Item,{name:"verify_code",rules:[{required:!0,message:"The code is invalid!"},H],children:e.jsx(T,{placeholder:"6-digit code..."})})})]})})}function he({openModal:a,setOpenModal:t,dataParent:i,get2faEnable:d}){const[r]=c.useForm(),{message:m}=_.useApp(),[u,x]=w.useState(0),[l]=E(),{Title:f}=O,{token:g}=P.useToken(),s=async()=>{const j=await r.validateFields();await L({type:"mail2fa",action:"security",...j}).then(p=>{x(1),m.success("We have sent the OTP Code to your email address. It may be in the spam box!"),r.resetFields(),console.log(p)}).catch(p=>{m.error("The password is incorrect")})},y=async()=>{const j=await r.validateFields();await ie({uuid:i,action:"security",...j}).then(p=>{p.data.type==="success"?(m.success("success",p.data.content),x(0),r.resetFields(),d(),t(!1)):m.error("erro")}).catch(p=>{m.error("The code is invalid")})},n=()=>{t(!1),x(0)};return e.jsx(e.Fragment,{children:u===0?e.jsx(F,{title:e.jsx(f,{style:{color:g.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:l("Two-factor authentication mail")}),open:a,onCancel:n,footer:[e.jsx(v,{style:{backgroundColor:"#2263B3",color:"#fff"},className:"rounded-[3.5px]",type:"primary",onClick:s,children:l("Continue")},"submit")],className:"relative top-[35%] ",children:e.jsxs(c,{form:r,children:[e.jsx("span",{children:l("For security reasons, you must re-enter your password to continue:")}),e.jsx(c.Item,{className:"mt-[20px]",name:"password",children:e.jsx(T,{type:"password",placeholder:"Enter your password"})})]})}):e.jsxs(F,{title:e.jsx(f,{style:{color:g.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:l("Two-factor authentication")}),open:a,onCancel:n,footer:[e.jsx(v,{style:{backgroundColor:"#2263B3",color:"#fff"},className:"rounded-[3.5px]",type:"primary",onClick:y,children:l("Submit")},"submit")],className:"relative top-[35%]",children:[e.jsx("h4",{children:l("Enter the confirmation code")}),e.jsx("span",{className:"text-[14px]",children:l("Please enter the verification code you see on your email.")}),e.jsx(c,{form:r,className:"mt-[15px]",children:e.jsx(c.Item,{name:"otp",rules:[{required:!0,message:"The code is invalid!"},H],children:e.jsx(T,{placeholder:"Enter otp code..."})})})]})})}const q={"required-label":"_required-label_1jnoa_1"};function xe({openModal:a,setOpenModal:t}){const i=I(),[d]=c.useForm(),r=G(),m=Y(),{Title:u}=O,{message:x}=_.useApp();P.useToken();const[l]=E(),f=$(),{mutate:g}=ne(oe,{onError:n=>{x.error(n.response.data.content)},onSuccess:async({data:n})=>{x.success("Change password successfully!"),f.clear(),await window.electron.ipcRenderer.invoke("logout"),r(K()),r(J(null)),s()}}),s=()=>{window.history.pushState({},"","/sign-in"),m(X.login)},y=async()=>{try{const n=await d.validateFields();n&&g(n)}catch(n){console.error("Error validating form fields",n)}};return e.jsx(e.Fragment,{children:e.jsx(F,{title:e.jsx(u,{style:{color:i.titlePrimary,fontSize:"20px",marginTop:"1px"},level:3,children:l("Change Password")}),open:a,onCancel:()=>t(!1),footer:[e.jsx(v,{style:{backgroundColor:"#2263B3",color:"#fff"},className:"rounded-[3.5px]",type:"primary",onClick:y,children:l("Submit")},"submit")],className:"relative top-[25%]",children:e.jsx(c,{layout:"vertical",form:d,initialValues:{current_password:"",new_password:"",new_confirm_password:""},children:e.jsxs("div",{className:"mt-5",children:[e.jsx(c.Item,{className:q["required-label"],name:"current_password",label:e.jsx("span",{style:{color:i.textNormal,fontWeight:"600"},children:l("Current Password")}),rules:[{required:!0,message:"This field is requied."},{min:6,message:"Password must be more than 6 characters."},{max:150,message:"Password must be more than 150 characters."}],children:e.jsx(T.Password,{placeholder:"Your password"})}),e.jsx(c.Item,{className:q["required-label"],name:"new_password",label:e.jsxs("span",{style:{color:i.textNormal,fontWeight:"600"},children:[l("New Password")," "]}),rules:[{required:!0,message:"This field is requied."},{min:6,message:"Password must be more than 6 characters."},{max:150,message:"Password must be more than 150 characters."}],children:e.jsx(T.Password,{placeholder:"New password"})}),e.jsx(c.Item,{className:q["required-label"],name:"new_confirm_password",label:e.jsxs("span",{style:{color:i.textNormal,fontWeight:"600"},children:[l("Confirm New Password")," "]}),rules:[{required:!0,message:"This field is requied."},{min:6,message:"Password must be more than 6 characters."},{max:150,message:"Password must be more than 150 characters."}],children:e.jsx(T.Password,{placeholder:"Confirm New password"})})]})})})})}function fe({openModal:a,setOpenModal:t,change2faActive:i,typeOffModal:d}){const[r]=c.useForm(),{message:m}=_.useApp(),[u]=E(),{Title:x}=O,{token:l}=P.useToken(),f=async()=>{const s=await r.validateFields();await L({type:"default",...s}).then(y=>{i({enable:0,type:d}),m.success("Successfully"),r.resetFields(),t(!1)}).catch(y=>{m.error("The password is incorrect")})},g=()=>{t(!1),r.resetFields()};return e.jsx(e.Fragment,{children:e.jsx(F,{title:e.jsx(x,{style:{color:l.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:u("Two-factor authentication")}),open:a,onCancel:g,footer:[e.jsx(v,{className:`bg-[${l.textPrimary}] rounded-[3.5px]`,type:"primary",onClick:f,children:u("Continue")},"submit")],className:"relative top-[35%]",children:e.jsxs(c,{form:r,children:[e.jsx("span",{children:u("For security reasons, you must re-enter your password to continue:")}),e.jsx(c.Item,{className:"mt-[20px]",name:"password",children:e.jsx(T,{type:"password",placeholder:u("Enter your password")})})]})})})}function ge(){const a=I(),[t]=E(),{message:i}=_.useApp(),{token:{colorBgContainer:d,textOrange:r}}=P.useToken(),[m,u]=w.useState("active"),[x,l]=w.useState("");P.useToken();const[f,g]=w.useState({google2fa_enable:0,mail2fa_enable:0}),{data:s}=ae({queryKey:te.userDetail,queryFn:re,onError:o=>{i.error("User Details Failed!")}}),y=s==null?void 0:s.data.content.uuid,[n,j]=w.useState({modal2FA:!1,modalEmail:!1,ModalChangePassword:!1,modalOff:!1}),p=o=>{j(k=>({...k,[o]:!k[o]}))},B=o=>{navigator.clipboard.writeText(o),i.success("Copied")},C=async()=>{await de().then(o=>{g(o.data.content)}).catch(o=>{i.error("The password is incorrect")})};w.useEffect(()=>{C()},[]);const M=o=>{me(o).then(k=>{C()}).catch(k=>{i.error(k)})};w.useEffect(()=>{n.modal2FA&&u("active")},[n]);const b=(o,k)=>{switch(l(k),o){case"1":j(A=>({...A,modal2FA:!A.modal2FA}));break;case"2":j(A=>({...A,modalOff:!A.modalOff}));break}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-1 -ml-1 lg:min-h-[calc(100%-186px)] min-h-[calc(100%-231px)] z-50 overflow-auto flex flex-col gap-y-1",style:{backgroundColor:a.backgroundNormal,height:"-webkit-fill-available"},children:[e.jsxs("div",{style:{backgroundColor:a.backgroundLight},className:"w-fit p-5 rounded-lg shadow",children:[e.jsxs(N,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed  "+a.borderLight},children:[e.jsx(h,{span:12,className:" font-semibold  text-[16px] block",children:t("Acount Name: ")}),e.jsx(h,{span:12,className:"font-normal text-[14px] pl-32",children:s==null?void 0:s.data.content.name})]}),e.jsxs(N,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed "+a.borderLight},children:[e.jsx(h,{span:12,className:" font-semibold  text-[16px] block",children:t("Acount Email: ")}),e.jsx(h,{span:12,className:"font-normal text-[14px] pl-32",children:s==null?void 0:s.data.content.email})]}),e.jsxs(N,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed "+a.borderLight},children:[e.jsx(h,{span:12,className:"font-semibold text-[16px] block",children:t("Balance: ")}),e.jsxs(h,{span:12,className:"font-semibold text-[30px] pl-32",style:{color:r},children:[s==null?void 0:s.data.content.balance.toFixed(2)," $"]})]}),e.jsxs(N,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed "+a.borderLight},children:[e.jsx(h,{span:12,className:"font-semibold text-[16px] block",children:t("Referral Code: ")}),e.jsx(h,{span:12,className:"pl-32",children:e.jsxs(v,{type:"primary",className:"bg-[#2263B3] min-w-[236px] h-[40px] !rounded-[3.5px] flex items-center px-5 py-5",onClick:()=>B(s==null?void 0:s.data.content.email),children:[s==null?void 0:s.data.content.email,e.jsx(Z,{className:"ml-2"})]})})]}),e.jsxs(N,{className:"w-full h-[80px] items-center",children:[e.jsx(h,{span:12,className:" font-semibold text-[16px] block",children:t("Password: ")}),e.jsx(h,{span:12,className:"pl-32",children:e.jsx(v,{type:"primary",ghost:!0,className:"border-[#2263B3] px-12 w-[236px] h-[40px] !rounded-[3.5px] flex items-center py-5 font-semibold",onClick:()=>p("ModalChangePassword"),children:t("Change Password")})})]}),e.jsxs(N,{className:"w-full",children:[e.jsx(h,{span:12,className:"",children:e.jsx("p",{className:"w-full h-px  bg-gray-300 inline-block",children:" "})}),e.jsx(h,{span:12,className:"",children:e.jsx("p",{className:"w-full h-px bg-gray-300 inline-block",children:" "})})]}),e.jsx(N,{children:e.jsx(h,{className:"mb-5",children:e.jsx("span",{className:"text-[#2263B3] text-[20px] font-[700]",children:t("Two - Factor Authentication")})})}),e.jsxs(N,{gutter:[16,16],className:"w-fit",children:[e.jsx(h,{xs:{flex:"100%"},sm:{flex:"50%"},md:{flex:"40%"},lg:{flex:"20%"},xl:{flex:"10%"},className:"gutter-row ",children:e.jsxs("div",{style:{backgroundColor:a.backgroundDark},className:"h-[131px] w-[60vh] border-2  shadow-md rounded-[5px] pt-2 shadow-1-strong",children:[e.jsx("p",{className:"text-[16px] font-[600] m-[0_0_0_25px] pt-2",children:t("Authentication App")}),e.jsx("p",{className:"h-[50px] text-[16px] font-[400] m-[0_0_0_25px] pr-20",children:t("You will receive a login code through an authenticator app.")}),e.jsx("div",{className:"flex justify-end mr-10 pb-8",children:f.google2fa_enable?e.jsx(D,{onChange:o=>b(o,"google2fa"),value:m,options:[{value:"active",label:"Active"},{value:"1",label:"Edit"},{value:"2",label:"Off"}]}):e.jsx(R,{onClick:()=>p("modal2FA"),typebutton:"primary",className:"w-[90px] h-[30px] rounded-[3.5px] bg-[#2263B3]",label:t("Setting"),solid:!0})})]})}),e.jsx(h,{xs:{flex:"100%"},sm:{flex:"50%"},md:{flex:"40%"},lg:{flex:"20%"},xl:{flex:"10%"},className:"gutter-row",children:e.jsxs("div",{style:{backgroundColor:a.backgroundDark},className:"h-[131px] w-[60vh] border-2 shadow-md rounded-[5px] pt-2",children:[e.jsx("p",{className:"text-[16px] font-[600] m-[0_0_0_25px] pt-2",children:t("Authentication Email")}),e.jsx("p",{className:"h-[50px] text-[16px] font-[400] m-[0_0_0_25px] pr-20",children:t("You will receive a login code through your email.")}),e.jsx("div",{className:"flex justify-end mr-10 pb-8",children:f.mail2fa_enable?e.jsx(D,{onChange:o=>b(o,"mail2fa"),value:m,options:[{value:"active",label:"Active"},{value:"2",label:"Off"}]}):e.jsx(R,{onClick:()=>p("modalEmail"),typebutton:"primary",className:"w-[90px] h-[30px] rounded-[3.5px] bg-[#2263B3]",label:t("Setting"),solid:!0})})]})})]})]}),e.jsx(ue,{openModal:n.modal2FA,setOpenModal:()=>p("modal2FA"),get2faEnable:C}),e.jsx(he,{openModal:n.modalEmail,setOpenModal:()=>p("modalEmail"),dataParent:y,get2faEnable:C}),e.jsx(xe,{openModal:n.ModalChangePassword,setOpenModal:()=>p("ModalChangePassword")}),e.jsx(fe,{openModal:n.modalOff,setOpenModal:()=>p("modalOff"),change2faActive:M,typeOffModal:x})]})})}function cs(){P.useToken();const a=I(),[t,i]=w.useState([]);return e.jsx("div",{className:"flex flex-col h-full ",children:e.jsxs("div",{className:"rounded-tl-md rounded-lg  h-full overflow-y- flex flex-col relative ",style:{backgroundColor:a.backgroundNormal,flex:1},children:[e.jsx(le,{columns:t,setColumns:i}),e.jsx(ge,{})]})})}export{cs as default};
