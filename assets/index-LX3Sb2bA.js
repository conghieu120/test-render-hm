import{k as e,i as _,ay as H,az as z,aA as Q,aB as V,aC as U,q as S,r as w,w as P,v as W,p as G,j as Y,z as K,B as $,P as J,aD as X}from"./index-rD5D3wIe.js";import{H as Z}from"./HeaderContext-BALBRazG.js";import{B as g}from"./index-Cnfr_LhE.js";import{F as i}from"./index-D0qsI2Ko.js";import{u as E}from"./useTranslation-CdVDZguR.js";import{M as F}from"./index-DduQbOjH.js";import{I as T}from"./index-R7zUTNyO.js";import{S as ee}from"./index-DEeuvegC.js";import{T as O}from"./index-WqkPP-4X.js";import{u as se}from"./useQuery-DGelT77v.js";import{Q as ae}from"./queryKey.const-4yptRpGc.js";import{b as te,g as oe}from"./auth-D6OQT4bj.js";import{u as re}from"./useMutation-7pHNuXnK.js";import{u as L}from"./theme-CwYL3eQV.js";import{R as C,C as x}from"./row-D9yJnvb0.js";import{S as B}from"./index-Cw8dqNCZ.js";import"./commonjsHelpers__-BosuxZz1.js";import"./index-e-kTAu8U.js";import"./index-CwHt7GoT.js";import"./Table-CkCjhjFV.js";import"./index-VaFpLiuL.js";import"./addEventListener-Dnrwfmdl.js";import"./DownOutlined-U_yyBD4s.js";import"./index-C97G-hLo.js";import"./index-c2ufQ9kY.js";import"./LeftOutlined-hwnj7f46.js";import"./Dropdown-BA274VvY.js";import"./index-BUNugdcr.js";import"./PurePanel-CzAY4fQy.js";import"./extendsObject-BTpHJDoQ.js";import"./EllipsisOutlined-Cvv2ECO7.js";import"./Overflow-wzPxOxK8.js";import"./collapse-C1MjllT7.js";import"./index-Rll6gE4e.js";import"./Pagination-Du9klKsI.js";import"./responsiveObserver-CoLEQsUO.js";import"./TextArea-D8GM8mUo.js";import"./SearchOutlined-DPpNmpde.js";import"./index-Phk2fyGs.js";import"./PlusOutlined-02efxpe5.js";import"./EyeOutlined-D2K23cwb.js";import"./gapSize-U1swVQyS.js";import"./CheckOutlined-CxcD5R4P.js";import"./utils-Dji2qSVF.js";function le({columns:a,setColumns:t}){const c=r=>{},d=()=>{console.log("onReset")};return e.jsx(Z,{namePage:"Overview",handleChangeTab:c,setColumns:t,onReset:d})}const R=async a=>await _.put(Q,a),ne=async a=>await _.put(V,a),ie=async a=>await _.put(U,a),ce=async()=>await _.get(H),de=async a=>await _.put(z,a),me=/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,6}))$/,D={pattern:me,message:"Invalid code"};function pe({openModal:a,setOpenModal:t,get2faEnable:c}){const[d]=i.useForm(),{message:r}=S.useApp(),[m,h]=w.useState(0),[u,n]=w.useState(""),[f,j]=w.useState(""),[s]=E(),{Title:y}=O,{token:l}=P.useToken(),b=async()=>{const v=await d.validateFields();await R({type:"google2fa",...v}).then(o=>{j(o.data.content.textCode),n(o.data.content.qrCode),h(1),d.resetFields()}).catch(o=>{r.error("The password is incorrect")})},p=async()=>{await d.validateFields(),h(2),n(""),j("")},M=async()=>{const v=await d.validateFields();await ne({type:"google2fa",...v}).then(o=>{o.data.content?(h(0),c(),r.success("success",o.data.content),t(!1)):r.error("The code is invalid")}).catch(o=>{r.error("The code is invalid")})},N=()=>{h(0),t(!1)},q=v=>{if(!v)return"";const o=document.createElement("div");return o.innerHTML=v,o.childNodes.length===0?"":o.childNodes[0].nodeValue||""};return e.jsx(e.Fragment,{children:m===0?e.jsx(F,{title:e.jsx(y,{style:{color:l.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:s("Two-factor authentication")}),open:a,onCancel:N,footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{type:"primary",onClick:b,label:s("Continue")})}),className:"relative top-[35%]",children:e.jsxs(i,{form:d,children:[e.jsx("span",{children:s("For security reasons, you must re-enter your password to continue:")}),e.jsx(i.Item,{className:"mt-[20px]",name:"password",children:e.jsx(T,{type:"password",placeholder:"Enter your password"})})]})}):m===1?e.jsx(F,{title:e.jsx(y,{style:{color:l.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:s("Two-factor authentication")}),open:a,onCancel:N,footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{type:"primary",onClick:p,label:s("Continue")})}),className:"relative top-[20%]",children:e.jsx(i,{form:d,children:e.jsx(i.Item,{name:"qr_code",children:e.jsxs("div",{children:[e.jsx("h4",{children:s("Setup via Third-Party Validator")}),e.jsx("span",{className:"text-[14px]",children:s("Please use your authenticator app (such as Duo or Google Authenticator) to scan this QR code.")}),e.jsx("div",{className:"mt-[30px]",children:e.jsxs(ee,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:q(u??"")}}),e.jsxs("div",{children:[e.jsx("span",{children:s("Or enter this code in your authenticator app")}),e.jsx("h3",{children:f})]})]})})]})})})}):e.jsxs(F,{title:e.jsx(y,{style:{color:l.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:s("Two-factor authentication")}),open:a,onCancel:N,footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{type:"primary",onClick:M,label:s("Continue")})}),className:"relative top-[34%]",children:[e.jsx("h4",{children:s("Enter the confirmation code")}),e.jsx("span",{className:"text-[14px]",children:s("Please enter the verification code you see on your authenticator app.")}),e.jsx(i,{form:d,className:"mt-[15px]",children:e.jsx(i.Item,{name:"verify_code",rules:[{required:!0,message:"The code is invalid!"},D],children:e.jsx(T,{placeholder:"6-digit code..."})})})]})})}function he({openModal:a,setOpenModal:t,dataParent:c,get2faEnable:d}){const[r]=i.useForm(),{message:m}=S.useApp(),[h,u]=w.useState(0),[n]=E(),{Title:f}=O,{token:j}=P.useToken(),s=async()=>{const b=await r.validateFields();await R({type:"mail2fa",action:"security",...b}).then(p=>{u(1),m.success("We have sent the OTP Code to your email address. It may be in the spam box!"),r.resetFields(),console.log(p)}).catch(p=>{m.error("The password is incorrect")})},y=async()=>{const b=await r.validateFields();await ie({uuid:c,action:"security",...b}).then(p=>{p.data.type==="success"?(m.success("success",p.data.content),u(0),r.resetFields(),d(),t(!1)):m.error("erro")}).catch(p=>{m.error("The code is invalid")})},l=()=>{t(!1),u(0)};return e.jsx(e.Fragment,{children:h===0?e.jsx(F,{title:e.jsx(f,{style:{color:j.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:n("Two-factor authentication mail")}),open:a,onCancel:l,footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{type:"primary",onClick:s,label:n("Continue")})}),className:"relative top-[35%] ",children:e.jsxs(i,{form:r,children:[e.jsx("span",{children:n("For security reasons, you must re-enter your password to continue:")}),e.jsx(i.Item,{className:"mt-[20px]",name:"password",children:e.jsx(T,{type:"password",placeholder:"Enter your password"})})]})}):e.jsxs(F,{title:e.jsx(f,{style:{color:j.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:n("Two-factor authentication")}),open:a,onCancel:l,footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{type:"primary",onClick:y,label:n("Submit")})}),className:"relative top-[35%]",children:[e.jsx("h4",{children:n("Enter the confirmation code")}),e.jsx("span",{className:"text-[14px]",children:n("Please enter the verification code you see on your email.")}),e.jsx(i,{form:r,className:"mt-[15px]",children:e.jsx(i.Item,{name:"otp",rules:[{required:!0,message:"The code is invalid!"},D],children:e.jsx(T,{placeholder:"Enter otp code..."})})})]})})}const I={"required-label":"_required-label_1jnoa_1"};function xe({openModal:a,setOpenModal:t}){const c=L(),[d]=i.useForm(),r=W(),m=G(),{Title:h}=O,{message:u}=S.useApp();P.useToken();const[n]=E(),f=Y(),{mutate:j}=re(te,{onError:l=>{u.error(l.response.data.content)},onSuccess:async({data:l})=>{u.success("Change password successfully!"),f.clear(),await window.electron.ipcRenderer.invoke("logout"),r(K()),r($(null)),s()}}),s=()=>{window.history.pushState({},"","/sign-in"),m(J.login)},y=async()=>{try{const l=await d.validateFields();l&&j(l)}catch(l){console.error("Error validating form fields",l)}};return e.jsx(e.Fragment,{children:e.jsx(F,{title:e.jsx(h,{style:{color:c.titlePrimary,fontSize:"20px",marginTop:"1px"},level:3,children:n("Change Password")}),open:a,onCancel:()=>t(!1),footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{type:"primary",onClick:y,label:n("Submit")})}),className:"relative top-[25%]",children:e.jsx(i,{layout:"vertical",form:d,initialValues:{current_password:"",new_password:"",new_confirm_password:""},children:e.jsxs("div",{className:"mt-5",children:[e.jsx(i.Item,{className:I["required-label"],name:"current_password",label:e.jsx("span",{style:{color:c.textNormal,fontWeight:"600"},children:n("Current Password")}),rules:[{required:!0,message:"This field is requied."},{min:6,message:"Password must be more than 6 characters."},{max:150,message:"Password must be more than 150 characters."}],children:e.jsx(T.Password,{placeholder:"Your password"})}),e.jsx(i.Item,{className:I["required-label"],name:"new_password",label:e.jsxs("span",{style:{color:c.textNormal,fontWeight:"600"},children:[n("New Password")," "]}),rules:[{required:!0,message:"This field is requied."},{min:6,message:"Password must be more than 6 characters."},{max:150,message:"Password must be more than 150 characters."}],children:e.jsx(T.Password,{placeholder:"New password"})}),e.jsx(i.Item,{className:I["required-label"],name:"new_confirm_password",label:e.jsxs("span",{style:{color:c.textNormal,fontWeight:"600"},children:[n("Confirm New Password")," "]}),rules:[{required:!0,message:"This field is requied."},{min:6,message:"Password must be more than 6 characters."},{max:150,message:"Password must be more than 150 characters."}],children:e.jsx(T.Password,{placeholder:"Confirm New password"})})]})})})})}function ue({openModal:a,setOpenModal:t,change2faActive:c,typeOffModal:d}){const[r]=i.useForm(),{message:m}=S.useApp(),[h]=E(),{Title:u}=O,{token:n}=P.useToken(),f=async()=>{const s=await r.validateFields();await R({type:"default",...s}).then(y=>{c({enable:0,type:d}),m.success("Successfully"),r.resetFields(),t(!1)}).catch(y=>{m.error("The password is incorrect")})},j=()=>{t(!1),r.resetFields()};return e.jsx(e.Fragment,{children:e.jsx(F,{title:e.jsx(u,{style:{color:n.textPrimary,fontSize:"20px",marginTop:"0px"},level:5,children:h("Two-factor authentication")}),open:a,onCancel:j,footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{type:"primary",onClick:f,label:h("Continue")})}),className:"relative top-[35%]",children:e.jsxs(i,{form:r,children:[e.jsx("span",{children:h("For security reasons, you must re-enter your password to continue:")}),e.jsx(i.Item,{className:"mt-[20px]",name:"password",children:e.jsx(T,{type:"password",placeholder:h("Enter your password")})})]})})})}function fe(){const a=L(),[t]=E(),{message:c}=S.useApp(),{token:{colorBgContainer:d,textOrange:r}}=P.useToken(),[m,h]=w.useState("active"),[u,n]=w.useState("");P.useToken();const[f,j]=w.useState({google2fa_enable:0,mail2fa_enable:0}),{data:s}=se({queryKey:ae.userDetail,queryFn:oe,onError:o=>{c.error("User Details Failed!")}}),y=s==null?void 0:s.data.content.uuid,[l,b]=w.useState({modal2FA:!1,modalEmail:!1,ModalChangePassword:!1,modalOff:!1}),p=o=>{b(k=>({...k,[o]:!k[o]}))},M=o=>{navigator.clipboard.writeText(o),c.success("Copied")},N=async()=>{await ce().then(o=>{j(o.data.content)}).catch(o=>{c.error("The password is incorrect")})};w.useEffect(()=>{N()},[]);const q=o=>{de(o).then(k=>{N()}).catch(k=>{c.error(k)})};w.useEffect(()=>{l.modal2FA&&h("active")},[l]);const v=(o,k)=>{switch(n(k),o){case"1":b(A=>({...A,modal2FA:!A.modal2FA}));break;case"2":b(A=>({...A,modalOff:!A.modalOff}));break}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-1 -ml-1 lg:min-h-[calc(100%-186px)] min-h-[calc(100%-231px)] z-50 overflow-auto flex flex-col gap-y-1",style:{backgroundColor:a.backgroundNormal,height:"-webkit-fill-available"},children:[e.jsxs("div",{style:{backgroundColor:a.backgroundLight},className:"w-fit p-5 rounded-lg shadow",children:[e.jsxs(C,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed  "+a.borderLight},children:[e.jsx(x,{span:12,className:" font-semibold  text-[16px] block",children:t("Acount Name: ")}),e.jsx(x,{span:12,className:"font-normal text-[14px] pl-32",children:s==null?void 0:s.data.content.name})]}),e.jsxs(C,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed "+a.borderLight},children:[e.jsx(x,{span:12,className:" font-semibold  text-[16px] block",children:t("Acount Email: ")}),e.jsx(x,{span:12,className:"font-normal text-[14px] pl-32",children:s==null?void 0:s.data.content.email})]}),e.jsxs(C,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed "+a.borderLight},children:[e.jsx(x,{span:12,className:"font-semibold text-[16px] block",children:t("Balance: ")}),e.jsxs(x,{span:12,className:"font-semibold text-[30px] pl-32",style:{color:r},children:[s==null?void 0:s.data.content.balance.toFixed(2)," $"]})]}),e.jsxs(C,{className:"w-full h-[80px] items-center",style:{borderBottom:"1px dashed "+a.borderLight},children:[e.jsx(x,{span:12,className:"font-semibold text-[16px] block",children:t("Referral Code: ")}),e.jsx(x,{span:12,className:"pl-32",children:e.jsx(g,{type:"primary",label:e.jsxs("div",{className:"flex items-center justify-center",children:[s==null?void 0:s.data.content.email,e.jsx(X,{className:"ml-2 text-lg"})]}),className:"min-w-[236px] h-[40px] px-5 py-5",onClick:()=>M(s==null?void 0:s.data.content.email)})})]}),e.jsxs(C,{className:"w-full h-[80px] items-center",children:[e.jsx(x,{span:12,className:" font-semibold text-[16px] block",children:t("Password: ")}),e.jsx(x,{span:12,className:"pl-32",children:e.jsx(g,{type:"primary",className:"px-12 w-[236px] h-[40px] flex items-center py-5 font-semibold",onClick:()=>p("ModalChangePassword"),label:t("Change Password")})})]}),e.jsxs(C,{className:"w-full",children:[e.jsx(x,{span:12,className:"",children:e.jsx("p",{className:"w-full h-px  bg-gray-300 inline-block",children:" "})}),e.jsx(x,{span:12,className:"",children:e.jsx("p",{className:"w-full h-px bg-gray-300 inline-block",children:" "})})]}),e.jsx(C,{children:e.jsx(x,{className:"mb-5",children:e.jsx("span",{className:"text-[#2263B3] text-[20px] font-[700]",children:t("Two - Factor Authentication")})})}),e.jsxs(C,{gutter:[16,16],className:"w-fit",children:[e.jsx(x,{xs:{flex:"100%"},sm:{flex:"50%"},md:{flex:"40%"},lg:{flex:"20%"},xl:{flex:"10%"},className:"gutter-row ",children:e.jsxs("div",{style:{backgroundColor:a.backgroundDark},className:"h-[131px] w-[60vh] border-2  shadow-md rounded-[5px] pt-2 shadow-1-strong",children:[e.jsx("p",{className:"text-[16px] font-[600] m-[0_0_0_25px] pt-2",children:t("Authentication App")}),e.jsx("p",{className:"h-[50px] text-[16px] font-[400] m-[0_0_0_25px] pr-20",children:t("You will receive a login code through an authenticator app.")}),e.jsx("div",{className:"flex justify-end mr-10 pb-8",children:f.google2fa_enable?e.jsx(B,{onChange:o=>v(o,"google2fa"),value:m,options:[{value:"active",label:"Active"},{value:"1",label:"Edit"},{value:"2",label:"Off"}]}):e.jsx(g,{onClick:()=>p("modal2FA"),type:"primary",className:"w-[90px] h-[30px]",label:t("Setting")})})]})}),e.jsx(x,{xs:{flex:"100%"},sm:{flex:"50%"},md:{flex:"40%"},lg:{flex:"20%"},xl:{flex:"10%"},className:"gutter-row",children:e.jsxs("div",{style:{backgroundColor:a.backgroundDark},className:"h-[131px] w-[60vh] border-2 shadow-md rounded-[5px] pt-2",children:[e.jsx("p",{className:"text-[16px] font-[600] m-[0_0_0_25px] pt-2",children:t("Authentication Email")}),e.jsx("p",{className:"h-[50px] text-[16px] font-[400] m-[0_0_0_25px] pr-20",children:t("You will receive a login code through your email.")}),e.jsx("div",{className:"flex justify-end mr-10 pb-8",children:f.mail2fa_enable?e.jsx(B,{onChange:o=>v(o,"mail2fa"),value:m,options:[{value:"active",label:"Active"},{value:"2",label:"Off"}]}):e.jsx(g,{onClick:()=>p("modalEmail"),type:"primary",className:"w-[90px] h-[30px]",label:t("Setting")})})]})})]})]}),e.jsx(pe,{openModal:l.modal2FA,setOpenModal:()=>p("modal2FA"),get2faEnable:N}),e.jsx(he,{openModal:l.modalEmail,setOpenModal:()=>p("modalEmail"),dataParent:y,get2faEnable:N}),e.jsx(xe,{openModal:l.ModalChangePassword,setOpenModal:()=>p("ModalChangePassword")}),e.jsx(ue,{openModal:l.modalOff,setOpenModal:()=>p("modalOff"),change2faActive:q,typeOffModal:u})]})})}function ns(){P.useToken();const a=L(),[t,c]=w.useState([]);return e.jsx("div",{className:"flex flex-col h-full ",children:e.jsxs("div",{className:"rounded-tl-md rounded-lg  h-full overflow-y- flex flex-col relative ",style:{backgroundColor:a.backgroundNormal,flex:1},children:[e.jsx(le,{columns:t,setColumns:c}),e.jsx(fe,{})]})})}export{ns as default};
