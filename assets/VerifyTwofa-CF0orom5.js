import{q as N,v as b,p as f,r,k as e,N as F,a5 as C,P as x,G as T,n as A}from"./index-rD5D3wIe.js";import{s as i,S as k}from"./index-DPORnuzA.js";import{c as E}from"./auth-D6OQT4bj.js";import{A as L}from"./index.modern-Cqoi2-qR.js";import{u as v}from"./theme-CwYL3eQV.js";import{F as c}from"./index-D0qsI2Ko.js";import{u as g}from"./useTranslation-CdVDZguR.js";import"./commonjsHelpers-BosuxZz1.js";import"./index.esm-By9H6xJu.js";import"./index.esm-aP3EXNwz.js";import"./index.esm-CuvWRocu.js";import"./collapse-C1MjllT7.js";import"./row-D9yJnvb0.js";import"./responsiveObserver-CoLEQsUO.js";import"./index-BUNugdcr.js";import"./index-VaFpLiuL.js";function S({receivedData:n}){const[t]=c.useForm(),{t:a}=g(),{message:s}=N.useApp(),o=b(),l=f(),m=r.useRef(null),[u,p]=r.useState(""),j=v(),w=d=>{p(d)},y=async()=>{const d=await t.validateFields();await E({uuid:n.uuid,action:n.action,...d}).then(h=>{h.data.type==="success"?(s.success("Login successfully!"),o(C(h.data.content)),l(x.profiles)):s.error("The code is invalid")}).catch(()=>{s.error("The code is invalid")})};return e.jsxs("div",{children:[e.jsx("h3",{className:"text-[20px] leading-[30px] text-center font-semibold text-[#2263B3]",children:a("Verify 2FA Code")}),e.jsxs("p",{style:{color:j.textNormal},className:"text-center text-[14px] font-semibold mb-[20px]",children:[a("Enter the 6 - Digit code below from your a"),e.jsx("br",{}),a("Third - party app:")]}),e.jsxs(c,{style:{width:332.36,margin:"0 auto"},onFinish:y,layout:"vertical",autoComplete:"off",form:t,initialValues:{prefix:"84"},children:[e.jsx(c.Item,{className:"font-semibold "+i["required-label"]+" "+i["custom-label"]+" "+i["custom-input-ant"],name:"code",children:e.jsx(L,{autoFocus:!1,onChange:w,allowedCharacters:"numeric",ref:m,inputClassName:"rounded-[5px] border border-solid border-gray-300 w-[13%] h-[45px] p-0 text-center m-[5px] text-[24px]"})}),e.jsx(c.Item,{className:"mt-[25px]",children:e.jsx(F,{className:`${i["btn-custom-primary"]}`,type:"primary",htmlType:"submit",style:{width:"100%"},children:a("Verify")})})]})]})}function U(){const[n,t]=r.useState(""),a=v();r.useEffect(()=>{const o=window.location.pathname;return t(o||"/sign-in"),window.addEventListener("popstate",s),()=>{window.removeEventListener("popstate",s)}},[]);const s=()=>{const o=window.location.pathname;t(o||"/sign-in")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{backgroundColor:a.backgroundNormal},className:"w-[100vw] h-[100vh] m-[0]-auto grid grid-cols-[1fr] bg-no-repeat overflow-hidden",children:e.jsx("div",{className:"relative flex flex-col justify-center items-center",children:e.jsx("div",{style:{backgroundColor:a.backgroundLight,boxShadow:"0px 2.1060240268707275px 9.82811164855957px 0px #00000008,0px 5.616064071655273px 22.464256286621094px 0px #00000012,0px 21.060239791870117px 58.96867370605469px 0px #00000001,0px 4px 4px 0px #00000040"},className:"relative overflow-hidden flex flex-col justify-center items-center bg-[#FFFFFF] rounded-[20px] w-[538px] min-h-[342px]",children:e.jsx("div",{className:`h-full w-full ${i["form-login"]} ${i["form-login-active"]}`,children:e.jsx(B,{onPopstate:s})})})})}),e.jsx(k,{})]})}const B=({onPopstate:n})=>{const{t}=g(),a=T(),s=f(),o=a.state,{theme:l}=A(p=>p.display);r.useEffect(()=>(window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}),[n]);const m=()=>{s(x.login)},u=()=>{s(x.verify_mail,{state:{modal2fa:o,resendOtpNow:!0,twofa:3}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flex flex-col justify-center items-center",children:[e.jsx(S,{receivedData:o}),e.jsx("div",{className:"flex flex-col justify-center items-center",children:e.jsxs("span",{className:"font-medium text-[14px] leading-[13.62px] "+(l==="light"?"text-[#000000]":"text-[#ffffff]"),children:[t("Don't have an account ?")," ",e.jsx("a",{className:"text-[#2263B3] hover:text-[#2263B3] hover:underline",onClick:m,children:t("Login")})]})}),o.twofa===3?e.jsx("div",{className:"mt-[5px] flex flex-col justify-center items-center",children:e.jsxs("span",{className:"font-medium text-[14px] leading-[13.62px] "+(l==="light"?"text-[#000000]":"text-[#ffffff]"),children:[t("or")," ",e.jsx("a",{className:"text-[#2263B3] hover:text-[#2263B3] hover:underline",onClick:u,children:t("Authenticate with email")})]})}):e.jsx(e.Fragment,{})]})})};export{U as default};
