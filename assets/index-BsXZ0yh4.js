import{q as R,p as F,r,k as e,l as q,a3 as W,G as z,n as Y}from"./index-rD5D3wIe.js";import{a as J,b as K,T as Q}from"./ThemeColor-CQLLrVWb.js";import{s as l,S as U}from"./index-DPORnuzA.js";import{u as B}from"./useMutation-7pHNuXnK.js";import{s as X,a as Z,v as ee,b as te}from"./auth-D6OQT4bj.js";import{T as k}from"./index-CwHt7GoT.js";import{u as I}from"./theme-CwYL3eQV.js";import{B as _}from"./index-Cnfr_LhE.js";import{u as $}from"./useTranslation-CdVDZguR.js";import{F as u}from"./index-D0qsI2Ko.js";import{I as O}from"./index-R7zUTNyO.js";import{A as se}from"./index.modern-Cqoi2-qR.js";import"./commonjsHelpers-BosuxZz1.js";import"./index.esm-D91DXYLM.js";import"./index.esm-By9H6xJu.js";import"./index.esm-aP3EXNwz.js";import"./index.esm-CuvWRocu.js";import"./utils-Dji2qSVF.js";import"./index-WqkPP-4X.js";import"./index-VaFpLiuL.js";import"./index-BUNugdcr.js";import"./TextArea-D8GM8mUo.js";import"./CheckOutlined-CxcD5R4P.js";import"./collapse-C1MjllT7.js";import"./row-D9yJnvb0.js";import"./responsiveObserver-CoLEQsUO.js";import"./EyeOutlined-D2K23cwb.js";import"./SearchOutlined-DPpNmpde.js";function re({setContent:v}){const c=I(),{t:a}=$(),{message:o}=R.useApp(),h=F(),[b,j]=r.useState(!1),[E,w]=r.useState(""),x=r.useRef(null),p=r.useRef(null),g=r.useRef(null),[N]=u.useForm();r.useEffect(()=>{let t=s=>{var f;(f=p.current)!=null&&f.contains(s.target)||j(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[b]);const{mutate:S,isLoading:T}=B(X,{onError:t=>{const s=t.response.data;s.type==="error"&&(s.title&&s.content!=""?o.error(s.content):s.title&&s.content&&s.content.length>0?s.content.forEach(f=>{o.error(f)}):s.title&&s.content&&s.content.length==0&&o.error(s.title))},onSuccess:t=>{v(t.data.content),o.success("Send reset password link successfully!"),h("/enter-otp")}}),L=async()=>{var t,s;try{const f=await((t=x.current)==null?void 0:t.validateFields()),A=(s=g==null?void 0:g.current)==null?void 0:s.getValue();if(!A&&W)return o.error("Invalid captcha!"),!1;if(f){let H={...f,recaptcha:A};S(H)}}catch(f){console.error("Error get value form fields",f)}},[C,y]=r.useState(30),P=()=>{let s=30;return window.innerWidth>1800&&(s=40),s};r.useEffect(()=>{const t=()=>{y(P())};return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);const n={width:"500px",height:"100%","--height-input":`${C}px`};return e.jsxs("div",{className:"w-full h-full p-2 flex flex-col justify-center items-center",children:[e.jsx(k,{color:c.textActiveSecondary,label:a("Forgot password"),className:"font-bold !text-[20px] leading-[30px]"}),e.jsx(q,{theme:{token:{colorPrimary:c.textActiveSecondary,colorPrimaryBorder:c.textActiveSecondary}},children:e.jsxs(u,{ref:x,form:N,style:n,onFinish:L,layout:"vertical",autoComplete:"off",children:[e.jsx(u.Item,{className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:e.jsx("span",{children:a("Email")}),name:"email",rules:[{type:"email",message:`${a("The input is not valid E-mail")}`},{required:!0,message:`${a("This field is required")}`}],children:e.jsx("span",{className:"flex items-center relative",children:e.jsx(O,{placeholder:a("Enter your email address"),value:E,onChange:t=>w(t.target.value)})})}),W,e.jsx(u.Item,{children:e.jsx(_,{loading:T,className:"w-full",type:"primary",onClick:N.submit,label:a("Send password reset link")})})]})})]})}function ne({content:v,setDataChangePass:c}){const a=I(),{t:o}=$(),{message:h}=R.useApp(),b=F(),[j,E]=r.useState(!1),w=r.useRef(null),x=r.useRef(null);let p=120;const[g]=u.useForm(),S=z().state,[T,L]=r.useState(""),[C,y]=r.useState(!1),P=i=>{L(i)},[n,t]=r.useState(S&&S.resendOtpNow?0:p);r.useEffect(()=>{let i=d=>{var m;(m=x.current)!=null&&m.contains(d.target)||E(!1)};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[j]),r.useEffect(()=>{let i=setInterval(()=>{t(d=>d>0?d-1:d)},1e3);return()=>clearInterval(i)},[]);const s=async i=>{await ee(i).then(d=>{c(d.data.content),h.success(o("Send reset password link successfully!")),b("/change-password")}).catch(d=>{y(!0);const m=d.response.data;m.type==="error"&&(y(!1),m.title&&m.content!=""?h.error(m.content):m.title&&m.content&&m.content.length>0?m.content.forEach(G=>{h.error(G)}):m.title&&m.content&&m.content.length==0&&h.error(m.title))})},f=async()=>{var i;try{const d=await((i=w.current)==null?void 0:i.validateFields());if(d){let m={...d,...v};s(m)}}catch(d){console.error("Error get value form fields",d)}},[A,H]=r.useState(30),D=()=>{let d=30;return window.innerWidth>1800&&(d=40),d};r.useEffect(()=>{const i=()=>{H(D())};return i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[]);const M=async()=>{await Z(v).then(i=>(h.success(i.data.title),i)).catch(i=>{y(!1),h.error(i.message)}).then(()=>{y(!1),t(p)})},V={width:"500px",height:"100%","--height-input":`${A}px`};return e.jsxs("div",{className:"w-full h-full p-2 flex flex-col justify-center items-center",children:[e.jsx(k,{color:a.textActiveSecondary,label:o("Enter OTP"),className:"font-bold !text-[20px] leading-[30px]"}),e.jsx(q,{theme:{token:{colorPrimary:a.textActiveSecondary,colorPrimaryBorder:a.textActiveSecondary}},children:e.jsxs(u,{ref:w,form:g,style:V,onFinish:f,layout:"vertical",autoComplete:"off",children:[e.jsx(u.Item,{className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:o("Your OTP"),name:"otp",rules:[{required:!0,message:`${o("This field is required")}`}],children:e.jsx(se,{autoFocus:!1,onChange:P,allowedCharacters:"numeric",inputClassName:"rounded-[5px] border border-solid border-gray-300 w-[14%] h-[45px] p-0 text-center m-[5px] text-[24px]"})}),e.jsx("div",{children:n==0?e.jsxs("h4",{className:"text-end text-[14px] font-medium",children:[" ",o("Didnâ€™t receive the OTP ? "),e.jsx("a",{className:"text-[14px] text-[#2263B3] hover:text-[#2263B3] hover:underline",onClick:M,children:o("Resend OTP")})]}):e.jsxs("h4",{className:"text-end text-[14px] font-medium",children:[o("Resend OTP in "),e.jsxs("span",{className:"text-[14px] font-semibold",children:[Math.floor(n/60)," : ",n%60==0?"00":n%60,"s"]})]})}),e.jsx(u.Item,{children:e.jsx(_,{loading:C,type:"primary",onClick:g.submit,label:o("Submit OTP"),style:{width:"100%"}})})]})})]})}function oe({dataChangePass:v}){const{t:c}=$(),a=I(),{message:o}=R.useApp(),h=F(),[b,j]=r.useState(!1),[E,w]=r.useState(""),x=r.useRef(null),p=r.useRef(null),[g]=u.useForm();r.useEffect(()=>{let n=t=>{var s;(s=p.current)!=null&&s.contains(t.target)||j(!1)};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[b]);const{mutate:N,isLoading:S}=B(te,{onError:n=>{const t=n.response.data;t.type==="error"&&(t.title&&t.content!=""?o.error(t.content):t.title&&t.content&&t.content.length>0?t.content.forEach(s=>{o.error(s)}):t.title&&t.content&&t.content.length==0&&o.error(t.title))},onSuccess:()=>{o.success("Change password successfully!"),h("/sign-in")}}),T=async()=>{var n;try{const t=await((n=x.current)==null?void 0:n.validateFields());if(t){let s={new_password:t.password,new_confirm_password:t.password,...v};N(s)}}catch(t){console.error("Error get value form fields",t)}},[L,C]=r.useState(30),y=()=>{let t=30;return window.innerWidth>1800&&(t=40),t};r.useEffect(()=>{const n=()=>{C(y())};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]);const P={width:"500px",height:"100%","--height-input":`${L}px`};return e.jsxs("div",{className:"w-full h-full p-2 flex flex-col justify-center items-center",children:[e.jsx(k,{color:a.textActiveSecondary,label:c("Change Password"),className:"font-bold !text-[20px] leading-[30px]"}),e.jsx(q,{theme:{token:{colorPrimary:a.textActiveSecondary,colorPrimaryBorder:a.textActiveSecondary}},children:e.jsxs(u,{ref:x,form:g,style:P,onFinish:T,layout:"vertical",autoComplete:"off",children:[e.jsx(u.Item,{className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:c("New password"),name:"password",rules:[{required:!0,message:`${c("This field is required")}`},{min:6,message:`${c("Password must be minimum 6 characters")}`}],children:e.jsx(O.Password,{placeholder:c("Enter your new password"),value:E,onChange:n=>w(n.target.value)})}),e.jsx(u.Item,{name:"confirm",className:"font-semibold "+l["required-label"]+" "+l["custom-label"]+" "+l["custom-input-ant"],label:c("Confirm Password"),dependencies:["password"],rules:[{required:!0,message:c("Please confirm your password!")},({getFieldValue:n})=>({validator(t,s){return!s||n("password")===s?Promise.resolve():Promise.reject(new Error("The new password that you entered do not match!"))}})],children:e.jsx(O.Password,{})}),e.jsx(u.Item,{children:e.jsx(_,{loading:S,type:"primary",onClick:g.submit,style:{width:"100%"},label:c("Change password")})})]})})]})}const $e=()=>{const{theme:v}=Y(p=>p.display),c=I(),{pathname:a}=z(),{t:o}=$(),h=F(),[b,j]=r.useState(null),[E,w]=r.useState(null),x=p=>{p.preventDefault(),h("/sign-in")};return e.jsxs("div",{className:"relative flex flex-col w-[100vw] h-[100vh]",style:{backgroundColor:c.backgroundNormal},children:[e.jsx("div",{className:"z-[10] absolute w-full block",children:e.jsx("div",{className:"ml-[2rem] mt-[1rem] mb-[1rem]",children:v==="light"?e.jsx(J,{}):e.jsx(K,{})})}),e.jsx("div",{className:"w-full h-full flex justify-center items-center",children:e.jsxs("div",{style:{backgroundColor:c.backgroundLight,boxShadow:"0px 2.1060240268707275px 9.82811164855957px 0px #00000008,0px 5.616064071655273px 22.464256286621094px 0px #00000012,0px 21.060239791870117px 58.96867370605469px 0px #00000001,0px 4px 4px 0px #00000040"},className:"relative overflow-hidden flex flex-col justify-center items-center rounded-[20px] w-[600px] min-h-[342px]",children:[e.jsxs("div",{className:`h-full w-full ${l["form-login"]} ${l["form-login-active"]}`,children:[e.jsx("div",{className:`${l["form-login"]} ${a==="/forgot-password"?`${l["form-login-active"]}`:""}`,children:a==="/forgot-password"&&e.jsx(re,{setContent:j})}),e.jsx("div",{className:`${l["form-login"]} ${a==="/enter-otp"?`${l["form-login-active"]}`:""}`,children:a==="/enter-otp"&&e.jsx(ne,{content:b,setDataChangePass:w})}),e.jsx("div",{className:`${l["form-login"]} ${a==="/change-password"?`${l["form-login-active"]}`:""}`,children:a==="/change-password"&&e.jsx(oe,{dataChangePass:E})})]}),e.jsx("div",{className:"flex flex-row justify-center items-center transform -translate-y-[1rem] mt-2",children:e.jsxs("span",{className:"font-medium leading-[13.62px] text-[#000000]",children:[e.jsx(k,{label:o("Already have an account ?")+" ",size:"14px"}),e.jsx("a",{style:{color:c.textActiveSecondary},className:"hover:underline",href:"sign-in",onClick:x,children:o("Login")})]})})]})}),e.jsx(U,{}),e.jsx(Q,{})]})};export{$e as default};
