import{H as w,q as E,a1 as N,ce as y,k as e,N as b,ga as U,gb as V,aE as D,r as O}from"./index-CJvg638n.js";import{b as h}from"./style-DB2luWnx.js";import{u as R}from"./useMutation-DtMNI5dJ.js";import{u as A}from"./cookieService-BzDKNpGS.js";import{u as f}from"./useTranslation-DN-CYzVf.js";import{F as k}from"./index-YCIRg4HO.js";import{F as J}from"./index-jmQoDNPY.js";import{U as L}from"./index-YXUFDw_N.js";import{I as P}from"./index-4M1x7pR3.js";import{T as M}from"./Table-Bf5fO8hA.js";import{T as z}from"./index-D8gngLx0.js";import{T as H}from"./index-BDCr05r-.js";import"./__commonjsHelpers__-BosuxZz1.js";import"./styled-components.browser.esm-BGP0i3rt.js";import"./utils-Dji2qSVF.js";import"./collapse-C1MjllT7.js";import"./row-C7cWNtLw.js";import"./responsiveObserver-BQm3ddGk.js";import"./index-BtoCM6cC.js";import"./index-DC1DAWbZ.js";import"./gapSize-U1swVQyS.js";import"./Pagination-BX02S7D7.js";import"./LeftOutlined-_e4uGCQm.js";import"./index-Wc0f9ZXJ.js";import"./Overflow-eyj8oHJy.js";import"./PurePanel-BiIzqeBG.js";import"./TextArea-DBRPcsh0.js";import"./CheckOutlined-CxiWyKpb.js";import"./DownOutlined-BgG6dx4I.js";import"./SearchOutlined-Bmw6m_pM.js";import"./EyeOutlined-B-Yk7nA6.js";import"./progress-BUBdB7Z0.js";import"./addEventListener-0hYE1V1V.js";import"./index-DwCW4jpE.js";import"./index-Db4idn_r.js";import"./Dropdown-DXC0sGt_.js";import"./extendsObject-EOfQw3bh.js";import"./EllipsisOutlined-DODEOrOr.js";import"./index-CWlqhW57.js";import"./index-DRCSt6Z6.js";const W=`[{"key":"value"},{...}]\r
or\r
domain.com	TRUE	/path	TRUE	expirationDate	name	value`;function q(){const{TextArea:i}=P,{t:r}=f(),[l]=k.useForm(),m=w(),{message:s,notification:c}=E.useApp(),x=(o="")=>{if(!o||o.length<=13)return!1;if(o.includes("	"))return!0;if(o.includes("[")&&o.includes("]")){if(JSON.parse(o).length<1)return!1}else return!1;return!0},g=o=>{try{return JSON.parse(o)}catch{return j(o)}},j=o=>{var a=[],d=o.split(`
`);return d.forEach(function(p){if(!(p.length<=1)){var t=p.split("	");if(t.length===7||t.length==1){t.length==1&&(t=p.split(" ")),t=t.map(function(I){return I.trim()});var n={};n.domain=t[0],n.httpOnly=t[1]==="TRUE",n.path=t[2],n.secure=t[3]==="TRUE";var u=t[4];u.length===17&&(u=Math.floor(u/1e6-11644473600)),n.expirationDate=parseFloat(u),n.name=t[5],n.value=t[6],a.push(n)}}}),a},C=()=>{const o=l.getFieldValue("text_import");if(x(o))try{const a=g(o);v(a)}catch{c.error({message:r("Invalid cookie")})}else s.error(r("Wrong format data"))},T=()=>{m(y({cookie_id:0,cookies_data:[]}))},{isLoading:F,mutate:v}=R({mutationFn:o=>{const a=N("is_Local");return A(o,a)},onSuccess:({data:o})=>{console.log({data:o}),m(y({cookie_id:o.content.id,cookies_data:JSON.parse(o.content.cookie)})),l.setFieldValue("text_import","")},onError:()=>{s.error(r("Cookies invalid!"))}}),_=async o=>{if(await U(o.file))try{const d=await V(o.file),p=g(d);v(p)}catch{s.error(r("Invalid cookie"))}else s.error(r("Only file .txt | .json is valid."))},S={name:"file",headers:{authorization:"authorization-text"},showUploadList:!1,onChange:o=>_(o),beforeUpload:()=>!1};return e.jsxs(k,{form:l,children:[e.jsx(h,{children:e.jsx(k.Item,{name:"text_import",children:e.jsx(i,{rows:6,placeholder:W})})}),e.jsx(h,{children:e.jsxs(J,{gap:18,justify:"end",children:[e.jsx(b,{loading:F,type:"primary",onClick:()=>C(),className:"bg-[var(--color-blue-500)] shadow-[0_0.275rem_0_var(--color-blue-600)] border-[var(--color-blue-600)] border hover:!bg-[var(--color-blue-600)] rounded-[10px] font-medium",children:r("Paste as Text")}),e.jsx(L,{...S,children:e.jsx(b,{type:"primary",className:"bg-[var(--color-blue-500)] shadow-[0_0.275rem_0_var(--color-blue-600)] border-[var(--color-blue-600)] border hover:!bg-[var(--color-blue-600)] rounded-[10px] font-medium",children:r("Import File")})}),e.jsx(b,{type:"primary",onClick:()=>T(),className:"rounded-[10px] hover:!bg-[rgb(185 70 70)]",style:{boxShadow:"0px 0.275rem 0px rgb(185 70 70)",background:"rgba(224, 49, 49, 1)",border:"1px solid rgb(185 70 70)",color:"#fff",fontWeight:"500"},children:r("Clear")})]})})]})}function B(){const{cookies_data:i}=D(s=>s.cookieSlice),{t:r}=f(),l=[{title:r("Domain"),key:"domain",dataIndex:"domain"},{title:r("Name"),dataIndex:"name",key:"name",render:s=>e.jsx("a",{children:s})},{title:r("Value"),dataIndex:"value",key:"value"},{title:r("Expires"),dataIndex:"expires",key:"expires"}],m=O.useMemo(()=>i?i==null?void 0:i.map((c,x)=>({key:x??"",name:c.name??"",value:c.value??"",expires:c.expirationDate??"",domain:c.domain??""})):[],[i]);return e.jsx(M,{columns:l,dataSource:m,pagination:!1})}function K(){const{Text:i}=z,{t:r}=f();return e.jsxs(e.Fragment,{children:[e.jsx(h,{children:e.jsx(i,{children:r("The table below shows only cookies that have been imported manually, to see all profile cookies you need to open this link in the browser window: chrome://settings/content/all")})}),e.jsx(q,{}),e.jsx(h,{children:e.jsx(B,{})})]})}function Oo({active:i}){const{t:r}=f(),l=[{key:"cookies",label:r("Cookies"),children:e.jsx(K,{})}];return e.jsx("div",{style:{padding:"20px 24px",marginTop:"16px"},children:e.jsx(H,{defaultActiveKey:"cookies",items:l})})}export{Oo as default};
